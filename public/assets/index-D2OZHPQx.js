var da=Object.defineProperty;var fa=(t,e,s)=>e in t?da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var lr=(t,e,s)=>fa(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function qo(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const be={},ms=[],Pt=()=>{},pa=()=>!1,Lr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Vo=t=>t.startsWith("onUpdate:"),Ge=Object.assign,No=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},ha=Object.prototype.hasOwnProperty,_e=(t,e)=>ha.call(t,e),ne=Array.isArray,vs=t=>Ys(t)==="[object Map]",_s=t=>Ys(t)==="[object Set]",kn=t=>Ys(t)==="[object Date]",de=t=>typeof t=="function",Ue=t=>typeof t=="string",yt=t=>typeof t=="symbol",Ee=t=>t!==null&&typeof t=="object",hi=t=>(Ee(t)||de(t))&&de(t.then)&&de(t.catch),mi=Object.prototype.toString,Ys=t=>mi.call(t),ma=t=>Ys(t).slice(8,-1),vi=t=>Ys(t)==="[object Object]",Ho=t=>Ue(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Os=qo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},va=/-(\w)/g,zt=Dr(t=>t.replace(va,(e,s)=>s?s.toUpperCase():"")),ga=/\B([A-Z])/g,Wt=Dr(t=>t.replace(ga,"-$1").toLowerCase()),gi=Dr(t=>t.charAt(0).toUpperCase()+t.slice(1)),to=Dr(t=>t?`on${gi(t)}`:""),et=(t,e)=>!Object.is(t,e),hr=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},bo=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},_r=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _n;const zr=()=>_n||(_n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Se(t){if(ne(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],o=Ue(r)?ka(r):Se(r);if(o)for(const n in o)e[n]=o[n]}return e}else if(Ue(t)||Ee(t))return t}const ya=/;(?![^(]*\))/g,wa=/:([^]+)/,ba=/\/\*[^]*?\*\//g;function ka(t){const e={};return t.replace(ba,"").split(ya).forEach(s=>{if(s){const r=s.split(wa);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function K(t){let e="";if(Ue(t))e=t;else if(ne(t))for(let s=0;s<t.length;s++){const r=K(t[s]);r&&(e+=r+" ")}else if(Ee(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const _a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sa=qo(_a);function yi(t){return!!t||t===""}function Aa(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=ls(t[r],e[r]);return s}function ls(t,e){if(t===e)return!0;let s=kn(t),r=kn(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=yt(t),r=yt(e),s||r)return t===e;if(s=ne(t),r=ne(e),s||r)return s&&r?Aa(t,e):!1;if(s=Ee(t),r=Ee(e),s||r){if(!s||!r)return!1;const o=Object.keys(t).length,n=Object.keys(e).length;if(o!==n)return!1;for(const i in t){const a=t.hasOwnProperty(i),c=e.hasOwnProperty(i);if(a&&!c||!a&&c||!ls(t[i],e[i]))return!1}}return String(t)===String(e)}function Bo(t,e){return t.findIndex(s=>ls(s,e))}const wi=t=>!!(t&&t.__v_isRef===!0),M=t=>Ue(t)?t:t==null?"":ne(t)||Ee(t)&&(t.toString===mi||!de(t.toString))?wi(t)?M(t.value):JSON.stringify(t,bi,2):String(t),bi=(t,e)=>wi(e)?bi(t,e.value):vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,o],n)=>(s[so(r,n)+" =>"]=o,s),{})}:_s(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>so(s))}:yt(e)?so(e):Ee(e)&&!ne(e)&&!vi(e)?String(e):e,so=(t,e="")=>{var s;return yt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let He;class ki{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=He,!e&&He&&(this.index=(He.scopes||(He.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=He;try{return He=this,e()}finally{He=s}}}on(){++this._on===1&&(this.prevScope=He,He=this)}off(){this._on>0&&--this._on===0&&(He=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function _i(t){return new ki(t)}function Si(){return He}function Ta(t,e=!1){He&&He.cleanups.push(t)}let Me;const ro=new WeakSet;class Ai{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,He&&He.active&&He.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ro.has(this)&&(ro.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$i(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sn(this),Ci(this);const e=Me,s=gt;Me=this,gt=!0;try{return this.fn()}finally{Pi(this),Me=e,gt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Go(e);this.deps=this.depsTail=void 0,Sn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ro.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ko(this)&&this.run()}get dirty(){return ko(this)}}let Ti=0,Us,Fs;function $i(t,e=!1){if(t.flags|=8,e){t.next=Fs,Fs=t;return}t.next=Us,Us=t}function Ko(){Ti++}function jo(){if(--Ti>0)return;if(Fs){let e=Fs;for(Fs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Us;){let e=Us;for(Us=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function Ci(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Pi(t){let e,s=t.depsTail,r=s;for(;r;){const o=r.prevDep;r.version===-1?(r===s&&(s=o),Go(r),$a(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=e,t.depsTail=s}function ko(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(xi(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function xi(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ks)||(t.globalVersion=Ks,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ko(t))))return;t.flags|=2;const e=t.dep,s=Me,r=gt;Me=t,gt=!0;try{Ci(t);const o=t.fn(t._value);(e.version===0||et(o,t._value))&&(t.flags|=128,t._value=o,e.version++)}catch(o){throw e.version++,o}finally{Me=s,gt=r,Pi(t),t.flags&=-3}}function Go(t,e=!1){const{dep:s,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let n=s.computed.deps;n;n=n.nextDep)Go(n,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function $a(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let gt=!0;const Ri=[];function Ot(){Ri.push(gt),gt=!1}function Ut(){const t=Ri.pop();gt=t===void 0?!0:t}function Sn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Me;Me=void 0;try{e()}finally{Me=s}}}let Ks=0;class Ca{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Or{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Me||!gt||Me===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Me)s=this.activeLink=new Ca(Me,this),Me.deps?(s.prevDep=Me.depsTail,Me.depsTail.nextDep=s,Me.depsTail=s):Me.deps=Me.depsTail=s,Mi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=Me.depsTail,s.nextDep=void 0,Me.depsTail.nextDep=s,Me.depsTail=s,Me.deps===s&&(Me.deps=r)}return s}trigger(e){this.version++,Ks++,this.notify(e)}notify(e){Ko();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{jo()}}}function Mi(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Mi(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Sr=new WeakMap,rs=Symbol(""),_o=Symbol(""),js=Symbol("");function Be(t,e,s){if(gt&&Me){let r=Sr.get(t);r||Sr.set(t,r=new Map);let o=r.get(s);o||(r.set(s,o=new Or),o.map=r,o.key=s),o.track()}}function Et(t,e,s,r,o,n){const i=Sr.get(t);if(!i){Ks++;return}const a=c=>{c&&c.trigger()};if(Ko(),e==="clear")i.forEach(a);else{const c=ne(t),u=c&&Ho(s);if(c&&s==="length"){const d=Number(r);i.forEach((f,y)=>{(y==="length"||y===js||!yt(y)&&y>=d)&&a(f)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),u&&a(i.get(js)),e){case"add":c?u&&a(i.get("length")):(a(i.get(rs)),vs(t)&&a(i.get(_o)));break;case"delete":c||(a(i.get(rs)),vs(t)&&a(i.get(_o)));break;case"set":vs(t)&&a(i.get(rs));break}}jo()}function Pa(t,e){const s=Sr.get(t);return s&&s.get(e)}function fs(t){const e=ye(t);return e===t?e:(Be(e,"iterate",js),pt(t)?e:e.map(qe))}function Ur(t){return Be(t=ye(t),"iterate",js),t}const xa={__proto__:null,[Symbol.iterator](){return oo(this,Symbol.iterator,qe)},concat(...t){return fs(this).concat(...t.map(e=>ne(e)?fs(e):e))},entries(){return oo(this,"entries",t=>(t[1]=qe(t[1]),t))},every(t,e){return Rt(this,"every",t,e,void 0,arguments)},filter(t,e){return Rt(this,"filter",t,e,s=>s.map(qe),arguments)},find(t,e){return Rt(this,"find",t,e,qe,arguments)},findIndex(t,e){return Rt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Rt(this,"findLast",t,e,qe,arguments)},findLastIndex(t,e){return Rt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Rt(this,"forEach",t,e,void 0,arguments)},includes(...t){return no(this,"includes",t)},indexOf(...t){return no(this,"indexOf",t)},join(t){return fs(this).join(t)},lastIndexOf(...t){return no(this,"lastIndexOf",t)},map(t,e){return Rt(this,"map",t,e,void 0,arguments)},pop(){return Es(this,"pop")},push(...t){return Es(this,"push",t)},reduce(t,...e){return An(this,"reduce",t,e)},reduceRight(t,...e){return An(this,"reduceRight",t,e)},shift(){return Es(this,"shift")},some(t,e){return Rt(this,"some",t,e,void 0,arguments)},splice(...t){return Es(this,"splice",t)},toReversed(){return fs(this).toReversed()},toSorted(t){return fs(this).toSorted(t)},toSpliced(...t){return fs(this).toSpliced(...t)},unshift(...t){return Es(this,"unshift",t)},values(){return oo(this,"values",qe)}};function oo(t,e,s){const r=Ur(t),o=r[e]();return r!==t&&!pt(t)&&(o._next=o.next,o.next=()=>{const n=o._next();return n.value&&(n.value=s(n.value)),n}),o}const Ra=Array.prototype;function Rt(t,e,s,r,o,n){const i=Ur(t),a=i!==t&&!pt(t),c=i[e];if(c!==Ra[e]){const f=c.apply(t,n);return a?qe(f):f}let u=s;i!==t&&(a?u=function(f,y){return s.call(this,qe(f),y,t)}:s.length>2&&(u=function(f,y){return s.call(this,f,y,t)}));const d=c.call(i,u,r);return a&&o?o(d):d}function An(t,e,s,r){const o=Ur(t);let n=s;return o!==t&&(pt(t)?s.length>3&&(n=function(i,a,c){return s.call(this,i,a,c,t)}):n=function(i,a,c){return s.call(this,i,qe(a),c,t)}),o[e](n,...r)}function no(t,e,s){const r=ye(t);Be(r,"iterate",js);const o=r[e](...s);return(o===-1||o===!1)&&Xo(s[0])?(s[0]=ye(s[0]),r[e](...s)):o}function Es(t,e,s=[]){Ot(),Ko();const r=ye(t)[e].apply(t,s);return jo(),Ut(),r}const Ma=qo("__proto__,__v_isRef,__isVue"),Ei=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(yt));function Ea(t){yt(t)||(t=String(t));const e=ye(this);return Be(e,"has",t),e.hasOwnProperty(t)}class Ii{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const o=this._isReadonly,n=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return n;if(s==="__v_raw")return r===(o?n?Na:Oi:n?zi:Di).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const i=ne(e);if(!o){let c;if(i&&(c=xa[s]))return c;if(s==="hasOwnProperty")return Ea}const a=Reflect.get(e,s,Pe(e)?e:r);return(yt(s)?Ei.has(s):Ma(s))||(o||Be(e,"get",s),n)?a:Pe(a)?i&&Ho(s)?a:a.value:Ee(a)?o?Ui(a):Js(a):a}}class Li extends Ii{constructor(e=!1){super(!1,e)}set(e,s,r,o){let n=e[s];if(!this._isShallow){const c=jt(n);if(!pt(r)&&!jt(r)&&(n=ye(n),r=ye(r)),!ne(e)&&Pe(n)&&!Pe(r))return c?!1:(n.value=r,!0)}const i=ne(e)&&Ho(s)?Number(s)<e.length:_e(e,s),a=Reflect.set(e,s,r,Pe(e)?e:o);return e===ye(o)&&(i?et(r,n)&&Et(e,"set",s,r):Et(e,"add",s,r)),a}deleteProperty(e,s){const r=_e(e,s);e[s];const o=Reflect.deleteProperty(e,s);return o&&r&&Et(e,"delete",s,void 0),o}has(e,s){const r=Reflect.has(e,s);return(!yt(s)||!Ei.has(s))&&Be(e,"has",s),r}ownKeys(e){return Be(e,"iterate",ne(e)?"length":rs),Reflect.ownKeys(e)}}class Ia extends Ii{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const La=new Li,Da=new Ia,za=new Li(!0);const So=t=>t,ar=t=>Reflect.getPrototypeOf(t);function Oa(t,e,s){return function(...r){const o=this.__v_raw,n=ye(o),i=vs(n),a=t==="entries"||t===Symbol.iterator&&i,c=t==="keys"&&i,u=o[t](...r),d=s?So:e?Ar:qe;return!e&&Be(n,"iterate",c?_o:rs),{next(){const{value:f,done:y}=u.next();return y?{value:f,done:y}:{value:a?[d(f[0]),d(f[1])]:d(f),done:y}},[Symbol.iterator](){return this}}}}function cr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ua(t,e){const s={get(o){const n=this.__v_raw,i=ye(n),a=ye(o);t||(et(o,a)&&Be(i,"get",o),Be(i,"get",a));const{has:c}=ar(i),u=e?So:t?Ar:qe;if(c.call(i,o))return u(n.get(o));if(c.call(i,a))return u(n.get(a));n!==i&&n.get(o)},get size(){const o=this.__v_raw;return!t&&Be(ye(o),"iterate",rs),Reflect.get(o,"size",o)},has(o){const n=this.__v_raw,i=ye(n),a=ye(o);return t||(et(o,a)&&Be(i,"has",o),Be(i,"has",a)),o===a?n.has(o):n.has(o)||n.has(a)},forEach(o,n){const i=this,a=i.__v_raw,c=ye(a),u=e?So:t?Ar:qe;return!t&&Be(c,"iterate",rs),a.forEach((d,f)=>o.call(n,u(d),u(f),i))}};return Ge(s,t?{add:cr("add"),set:cr("set"),delete:cr("delete"),clear:cr("clear")}:{add(o){!e&&!pt(o)&&!jt(o)&&(o=ye(o));const n=ye(this);return ar(n).has.call(n,o)||(n.add(o),Et(n,"add",o,o)),this},set(o,n){!e&&!pt(n)&&!jt(n)&&(n=ye(n));const i=ye(this),{has:a,get:c}=ar(i);let u=a.call(i,o);u||(o=ye(o),u=a.call(i,o));const d=c.call(i,o);return i.set(o,n),u?et(n,d)&&Et(i,"set",o,n):Et(i,"add",o,n),this},delete(o){const n=ye(this),{has:i,get:a}=ar(n);let c=i.call(n,o);c||(o=ye(o),c=i.call(n,o)),a&&a.call(n,o);const u=n.delete(o);return c&&Et(n,"delete",o,void 0),u},clear(){const o=ye(this),n=o.size!==0,i=o.clear();return n&&Et(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Oa(o,t,e)}),s}function Qo(t,e){const s=Ua(t,e);return(r,o,n)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(_e(s,o)&&o in r?s:r,o,n)}const Fa={get:Qo(!1,!1)},qa={get:Qo(!1,!0)},Va={get:Qo(!0,!1)};const Di=new WeakMap,zi=new WeakMap,Oi=new WeakMap,Na=new WeakMap;function Ha(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ba(t){return t.__v_skip||!Object.isExtensible(t)?0:Ha(ma(t))}function Js(t){return jt(t)?t:Wo(t,!1,La,Fa,Di)}function Ka(t){return Wo(t,!1,za,qa,zi)}function Ui(t){return Wo(t,!0,Da,Va,Oi)}function Wo(t,e,s,r,o){if(!Ee(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=Ba(t);if(n===0)return t;const i=o.get(t);if(i)return i;const a=new Proxy(t,n===2?r:s);return o.set(t,a),a}function Dt(t){return jt(t)?Dt(t.__v_raw):!!(t&&t.__v_isReactive)}function jt(t){return!!(t&&t.__v_isReadonly)}function pt(t){return!!(t&&t.__v_isShallow)}function Xo(t){return t?!!t.__v_raw:!1}function ye(t){const e=t&&t.__v_raw;return e?ye(e):t}function Yo(t){return!_e(t,"__v_skip")&&Object.isExtensible(t)&&bo(t,"__v_skip",!0),t}const qe=t=>Ee(t)?Js(t):t,Ar=t=>Ee(t)?Ui(t):t;function Pe(t){return t?t.__v_isRef===!0:!1}function U(t){return ja(t,!1)}function ja(t,e){return Pe(t)?t:new Ga(t,e)}class Ga{constructor(e,s){this.dep=new Or,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ye(e),this._value=s?e:qe(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||pt(e)||jt(e);e=r?e:ye(e),et(e,s)&&(this._rawValue=e,this._value=r?e:qe(e),this.dep.trigger())}}function w(t){return Pe(t)?t.value:t}const Qa={get:(t,e,s)=>e==="__v_raw"?t:w(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const o=t[e];return Pe(o)&&!Pe(s)?(o.value=s,!0):Reflect.set(t,e,s,r)}};function Fi(t){return Dt(t)?t:new Proxy(t,Qa)}class Wa{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new Or,{get:r,set:o}=e(s.track.bind(s),s.trigger.bind(s));this._get=r,this._set=o}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Xa(t){return new Wa(t)}function Ya(t){const e=ne(t)?new Array(t.length):{};for(const s in t)e[s]=qi(t,s);return e}class Ja{constructor(e,s,r){this._object=e,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pa(ye(this._object),this._key)}}class Za{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ec(t,e,s){return Pe(t)?t:de(t)?new Za(t):Ee(t)&&arguments.length>1?qi(t,e,s):U(t)}function qi(t,e,s){const r=t[e];return Pe(r)?r:new Ja(t,e,s)}class tc{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Or(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Me!==this)return $i(this,!0),!0}get value(){const e=this.dep.track();return xi(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function sc(t,e,s=!1){let r,o;return de(t)?r=t:(r=t.get,o=t.set),new tc(r,o,s)}const ur={},Tr=new WeakMap;let ts;function rc(t,e=!1,s=ts){if(s){let r=Tr.get(s);r||Tr.set(s,r=[]),r.push(t)}}function oc(t,e,s=be){const{immediate:r,deep:o,once:n,scheduler:i,augmentJob:a,call:c}=s,u=A=>o?A:pt(A)||o===!1||o===0?It(A,1):It(A);let d,f,y,b,v=!1,m=!1;if(Pe(t)?(f=()=>t.value,v=pt(t)):Dt(t)?(f=()=>u(t),v=!0):ne(t)?(m=!0,v=t.some(A=>Dt(A)||pt(A)),f=()=>t.map(A=>{if(Pe(A))return A.value;if(Dt(A))return u(A);if(de(A))return c?c(A,2):A()})):de(t)?e?f=c?()=>c(t,2):t:f=()=>{if(y){Ot();try{y()}finally{Ut()}}const A=ts;ts=d;try{return c?c(t,3,[b]):t(b)}finally{ts=A}}:f=Pt,e&&o){const A=f,x=o===!0?1/0:o;f=()=>It(A(),x)}const p=Si(),_=()=>{d.stop(),p&&p.active&&No(p.effects,d)};if(n&&e){const A=e;e=(...x)=>{A(...x),_()}}let k=m?new Array(t.length).fill(ur):ur;const S=A=>{if(!(!(d.flags&1)||!d.dirty&&!A))if(e){const x=d.run();if(o||v||(m?x.some((P,I)=>et(P,k[I])):et(x,k))){y&&y();const P=ts;ts=d;try{const I=[x,k===ur?void 0:m&&k[0]===ur?[]:k,b];k=x,c?c(e,3,I):e(...I)}finally{ts=P}}}else d.run()};return a&&a(S),d=new Ai(f),d.scheduler=i?()=>i(S,!1):S,b=A=>rc(A,!1,d),y=d.onStop=()=>{const A=Tr.get(d);if(A){if(c)c(A,4);else for(const x of A)x();Tr.delete(d)}},e?r?S(!0):k=d.run():i?i(S.bind(null,!0),!0):d.run(),_.pause=d.pause.bind(d),_.resume=d.resume.bind(d),_.stop=_,_}function It(t,e=1/0,s){if(e<=0||!Ee(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Pe(t))It(t.value,e,s);else if(ne(t))for(let r=0;r<t.length;r++)It(t[r],e,s);else if(_s(t)||vs(t))t.forEach(r=>{It(r,e,s)});else if(vi(t)){for(const r in t)It(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&It(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zs(t,e,s,r){try{return r?t(...r):t()}catch(o){Fr(o,e,s)}}function xt(t,e,s,r){if(de(t)){const o=Zs(t,e,s,r);return o&&hi(o)&&o.catch(n=>{Fr(n,e,s)}),o}if(ne(t)){const o=[];for(let n=0;n<t.length;n++)o.push(xt(t[n],e,s,r));return o}}function Fr(t,e,s,r=!0){const o=e?e.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||be;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}a=a.parent}if(n){Ot(),Zs(n,null,10,[t,c,u]),Ut();return}}nc(t,s,o,r,i)}function nc(t,e,s,r=!0,o=!1){if(o)throw t;console.error(t)}const We=[];let Tt=-1;const gs=[];let Ht=null,hs=0;const Vi=Promise.resolve();let $r=null;function ot(t){const e=$r||Vi;return t?e.then(this?t.bind(this):t):e}function ic(t){let e=Tt+1,s=We.length;for(;e<s;){const r=e+s>>>1,o=We[r],n=Gs(o);n<t||n===t&&o.flags&2?e=r+1:s=r}return e}function Jo(t){if(!(t.flags&1)){const e=Gs(t),s=We[We.length-1];!s||!(t.flags&2)&&e>=Gs(s)?We.push(t):We.splice(ic(e),0,t),t.flags|=1,Ni()}}function Ni(){$r||($r=Vi.then(Bi))}function lc(t){ne(t)?gs.push(...t):Ht&&t.id===-1?Ht.splice(hs+1,0,t):t.flags&1||(gs.push(t),t.flags|=1),Ni()}function Tn(t,e,s=Tt+1){for(;s<We.length;s++){const r=We[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;We.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Hi(t){if(gs.length){const e=[...new Set(gs)].sort((s,r)=>Gs(s)-Gs(r));if(gs.length=0,Ht){Ht.push(...e);return}for(Ht=e,hs=0;hs<Ht.length;hs++){const s=Ht[hs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ht=null,hs=0}}const Gs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Bi(t){try{for(Tt=0;Tt<We.length;Tt++){const e=We[Tt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Zs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Tt<We.length;Tt++){const e=We[Tt];e&&(e.flags&=-2)}Tt=-1,We.length=0,Hi(),$r=null,(We.length||gs.length)&&Bi()}}let je=null,Ki=null;function Cr(t){const e=je;return je=t,Ki=t&&t.type.__scopeId||null,e}function ac(t,e=je,s){if(!e||t._n)return t;const r=(...o)=>{r._d&&In(-1);const n=Cr(e);let i;try{i=t(...o)}finally{Cr(n),r._d&&In(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function we(t,e){if(je===null)return t;const s=Hr(je),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[n,i,a,c=be]=e[o];n&&(de(n)&&(n={mounted:n,updated:n}),n.deep&&It(i),r.push({dir:n,instance:s,value:i,oldValue:void 0,arg:a,modifiers:c}))}return t}function Zt(t,e,s,r){const o=t.dirs,n=e&&e.dirs;for(let i=0;i<o.length;i++){const a=o[i];n&&(a.oldValue=n[i].value);let c=a.dir[r];c&&(Ot(),xt(c,s,8,[t.el,a,t,e]),Ut())}}const cc=Symbol("_vte"),uc=t=>t.__isTeleport;function Zo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Zo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ji(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function qs(t,e,s,r,o=!1){if(ne(t)){t.forEach((v,m)=>qs(v,e&&(ne(e)?e[m]:e),s,r,o));return}if(ys(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&qs(t,e,s,r.component.subTree);return}const n=r.shapeFlag&4?Hr(r.component):r.el,i=o?null:n,{i:a,r:c}=t,u=e&&e.r,d=a.refs===be?a.refs={}:a.refs,f=a.setupState,y=ye(f),b=f===be?()=>!1:v=>_e(y,v);if(u!=null&&u!==c&&(Ue(u)?(d[u]=null,b(u)&&(f[u]=null)):Pe(u)&&(u.value=null)),de(c))Zs(c,a,12,[i,d]);else{const v=Ue(c),m=Pe(c);if(v||m){const p=()=>{if(t.f){const _=v?b(c)?f[c]:d[c]:c.value;o?ne(_)&&No(_,n):ne(_)?_.includes(n)||_.push(n):v?(d[c]=[n],b(c)&&(f[c]=d[c])):(c.value=[n],t.k&&(d[t.k]=c.value))}else v?(d[c]=i,b(c)&&(f[c]=i)):m&&(c.value=i,t.k&&(d[t.k]=i))};i?(p.id=-1,at(p,s)):p()}}}zr().requestIdleCallback;zr().cancelIdleCallback;const ys=t=>!!t.type.__asyncLoader,Gi=t=>t.type.__isKeepAlive;function dc(t,e){Qi(t,"a",e)}function fc(t,e){Qi(t,"da",e)}function Qi(t,e,s=Ye){const r=t.__wdc||(t.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(qr(e,r,s),s){let o=s.parent;for(;o&&o.parent;)Gi(o.parent.vnode)&&pc(r,e,s,o),o=o.parent}}function pc(t,e,s,r){const o=qr(e,t,r,!0);Vt(()=>{No(r[e],o)},s)}function qr(t,e,s=Ye,r=!1){if(s){const o=s[t]||(s[t]=[]),n=e.__weh||(e.__weh=(...i)=>{Ot();const a=er(s),c=xt(e,s,t,i);return a(),Ut(),c});return r?o.unshift(n):o.push(n),n}}const qt=t=>(e,s=Ye)=>{(!Ws||t==="sp")&&qr(t,(...r)=>e(...r),s)},hc=qt("bm"),Ce=qt("m"),mc=qt("bu"),vc=qt("u"),gc=qt("bum"),Vt=qt("um"),yc=qt("sp"),wc=qt("rtg"),bc=qt("rtc");function kc(t,e=Ye){qr("ec",t,e)}const _c=Symbol.for("v-ndc");function te(t,e,s,r){let o;const n=s,i=ne(t);if(i||Ue(t)){const a=i&&Dt(t);let c=!1,u=!1;a&&(c=!pt(t),u=jt(t),t=Ur(t)),o=new Array(t.length);for(let d=0,f=t.length;d<f;d++)o[d]=e(c?u?Ar(qe(t[d])):qe(t[d]):t[d],d,void 0,n)}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=e(a+1,a,void 0,n)}else if(Ee(t))if(t[Symbol.iterator])o=Array.from(t,(a,c)=>e(a,c,void 0,n));else{const a=Object.keys(t);o=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const d=a[c];o[c]=e(t[d],d,c,n)}}else o=[];return o}function Ao(t,e,s={},r,o){if(je.ce||je.parent&&ys(je.parent)&&je.parent.ce)return e!=="default"&&(s.name=e),h(),Z(j,null,[W("slot",s,r&&r())],64);let n=t[e];n&&n._c&&(n._d=!1),h();const i=n&&Wi(n(s)),a=s.key||i&&i.key,c=Z(j,{key:(a&&!yt(a)?a:`_${e}`)+(!i&&r?"_fb":"")},i||(r?r():[]),i&&t._===1?64:-2);return!o&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),n&&n._c&&(n._d=!0),c}function Wi(t){return t.some(e=>on(e)?!(e.type===Ft||e.type===j&&!Wi(e.children)):!0)?t:null}const To=t=>t?ml(t)?Hr(t):To(t.parent):null,Vs=Ge(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>To(t.parent),$root:t=>To(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Yi(t),$forceUpdate:t=>t.f||(t.f=()=>{Jo(t.update)}),$nextTick:t=>t.n||(t.n=ot.bind(t.proxy)),$watch:t=>Gc.bind(t)}),io=(t,e)=>t!==be&&!t.__isScriptSetup&&_e(t,e),Sc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:o,props:n,accessCache:i,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const b=i[e];if(b!==void 0)switch(b){case 1:return r[e];case 2:return o[e];case 4:return s[e];case 3:return n[e]}else{if(io(r,e))return i[e]=1,r[e];if(o!==be&&_e(o,e))return i[e]=2,o[e];if((u=t.propsOptions[0])&&_e(u,e))return i[e]=3,n[e];if(s!==be&&_e(s,e))return i[e]=4,s[e];$o&&(i[e]=0)}}const d=Vs[e];let f,y;if(d)return e==="$attrs"&&Be(t.attrs,"get",""),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(s!==be&&_e(s,e))return i[e]=4,s[e];if(y=c.config.globalProperties,_e(y,e))return y[e]},set({_:t},e,s){const{data:r,setupState:o,ctx:n}=t;return io(o,e)?(o[e]=s,!0):r!==be&&_e(r,e)?(r[e]=s,!0):_e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(n[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:o,propsOptions:n}},i){let a;return!!s[i]||t!==be&&_e(t,i)||io(e,i)||(a=n[0])&&_e(a,i)||_e(r,i)||_e(Vs,i)||_e(o.config.globalProperties,i)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:_e(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Pr(t){return ne(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}function Ac(t,e){return!t||!e?t||e:ne(t)&&ne(e)?t.concat(e):Ge({},Pr(t),Pr(e))}let $o=!0;function Tc(t){const e=Yi(t),s=t.proxy,r=t.ctx;$o=!1,e.beforeCreate&&$n(e.beforeCreate,t,"bc");const{data:o,computed:n,methods:i,watch:a,provide:c,inject:u,created:d,beforeMount:f,mounted:y,beforeUpdate:b,updated:v,activated:m,deactivated:p,beforeDestroy:_,beforeUnmount:k,destroyed:S,unmounted:A,render:x,renderTracked:P,renderTriggered:I,errorCaptured:T,serverPrefetch:z,expose:L,inheritAttrs:se,components:fe,directives:ze,filters:Fe}=e;if(u&&$c(u,r,null),i)for(const G in i){const O=i[G];de(O)&&(r[G]=O.bind(s))}if(o){const G=o.call(s,s);Ee(G)&&(t.data=Js(G))}if($o=!0,n)for(const G in n){const O=n[G],q=de(O)?O.bind(s,s):de(O.get)?O.get.bind(s,s):Pt,Ie=!de(O)&&de(O.set)?O.set.bind(s):Pt,it=E({get:q,set:Ie});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>it.value,set:ee=>it.value=ee})}if(a)for(const G in a)Xi(a[G],r,s,G);if(c){const G=de(c)?c.call(s):c;Reflect.ownKeys(G).forEach(O=>{Ec(O,G[O])})}d&&$n(d,t,"c");function xe(G,O){ne(O)?O.forEach(q=>G(q.bind(s))):O&&G(O.bind(s))}if(xe(hc,f),xe(Ce,y),xe(mc,b),xe(vc,v),xe(dc,m),xe(fc,p),xe(kc,T),xe(bc,P),xe(wc,I),xe(gc,k),xe(Vt,A),xe(yc,z),ne(L))if(L.length){const G=t.exposed||(t.exposed={});L.forEach(O=>{Object.defineProperty(G,O,{get:()=>s[O],set:q=>s[O]=q,enumerable:!0})})}else t.exposed||(t.exposed={});x&&t.render===Pt&&(t.render=x),se!=null&&(t.inheritAttrs=se),fe&&(t.components=fe),ze&&(t.directives=ze),z&&ji(t)}function $c(t,e,s=Pt){ne(t)&&(t=Co(t));for(const r in t){const o=t[r];let n;Ee(o)?"default"in o?n=Ns(o.from||r,o.default,!0):n=Ns(o.from||r):n=Ns(o),Pe(n)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:i=>n.value=i}):e[r]=n}}function $n(t,e,s){xt(ne(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function Xi(t,e,s,r){let o=r.includes(".")?cl(s,r):()=>s[r];if(Ue(t)){const n=e[t];de(n)&&ws(o,n)}else if(de(t))ws(o,t.bind(s));else if(Ee(t))if(ne(t))t.forEach(n=>Xi(n,e,s,r));else{const n=de(t.handler)?t.handler.bind(s):e[t.handler];de(n)&&ws(o,n,t)}}function Yi(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:o,optionsCache:n,config:{optionMergeStrategies:i}}=t.appContext,a=n.get(e);let c;return a?c=a:!o.length&&!s&&!r?c=e:(c={},o.length&&o.forEach(u=>xr(c,u,i,!0)),xr(c,e,i)),Ee(e)&&n.set(e,c),c}function xr(t,e,s,r=!1){const{mixins:o,extends:n}=e;n&&xr(t,n,s,!0),o&&o.forEach(i=>xr(t,i,s,!0));for(const i in e)if(!(r&&i==="expose")){const a=Cc[i]||s&&s[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const Cc={data:Cn,props:Pn,emits:Pn,methods:zs,computed:zs,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:zs,directives:zs,watch:xc,provide:Cn,inject:Pc};function Cn(t,e){return e?t?function(){return Ge(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function Pc(t,e){return zs(Co(t),Co(e))}function Co(t){if(ne(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Qe(t,e){return t?[...new Set([].concat(t,e))]:e}function zs(t,e){return t?Ge(Object.create(null),t,e):e}function Pn(t,e){return t?ne(t)&&ne(e)?[...new Set([...t,...e])]:Ge(Object.create(null),Pr(t),Pr(e??{})):e}function xc(t,e){if(!t)return e;if(!e)return t;const s=Ge(Object.create(null),t);for(const r in e)s[r]=Qe(t[r],e[r]);return s}function Ji(){return{app:null,config:{isNativeTag:pa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rc=0;function Mc(t,e){return function(r,o=null){de(r)||(r=Ge({},r)),o!=null&&!Ee(o)&&(o=null);const n=Ji(),i=new WeakSet,a=[];let c=!1;const u=n.app={_uid:Rc++,_component:r,_props:o,_container:null,_context:n,_instance:null,version:fu,get config(){return n.config},set config(d){},use(d,...f){return i.has(d)||(d&&de(d.install)?(i.add(d),d.install(u,...f)):de(d)&&(i.add(d),d(u,...f))),u},mixin(d){return n.mixins.includes(d)||n.mixins.push(d),u},component(d,f){return f?(n.components[d]=f,u):n.components[d]},directive(d,f){return f?(n.directives[d]=f,u):n.directives[d]},mount(d,f,y){if(!c){const b=u._ceVNode||W(r,o);return b.appContext=n,y===!0?y="svg":y===!1&&(y=void 0),t(b,d,y),c=!0,u._container=d,d.__vue_app__=u,Hr(b.component)}},onUnmount(d){a.push(d)},unmount(){c&&(xt(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return n.provides[d]=f,u},runWithContext(d){const f=os;os=u;try{return d()}finally{os=f}}};return u}}let os=null;function Ec(t,e){if(Ye){let s=Ye.provides;const r=Ye.parent&&Ye.parent.provides;r===s&&(s=Ye.provides=Object.create(r)),s[t]=e}}function Ns(t,e,s=!1){const r=ln();if(r||os){let o=os?os._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return s&&de(e)?e.call(r&&r.proxy):e}}function Ic(){return!!(ln()||os)}const Zi={},el=()=>Object.create(Zi),tl=t=>Object.getPrototypeOf(t)===Zi;function Lc(t,e,s,r=!1){const o={},n=el();t.propsDefaults=Object.create(null),sl(t,e,o,n);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);s?t.props=r?o:Ka(o):t.type.props?t.props=o:t.props=n,t.attrs=n}function Dc(t,e,s,r){const{props:o,attrs:n,vnode:{patchFlag:i}}=t,a=ye(o),[c]=t.propsOptions;let u=!1;if((r||i>0)&&!(i&16)){if(i&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let y=d[f];if(Vr(t.emitsOptions,y))continue;const b=e[y];if(c)if(_e(n,y))b!==n[y]&&(n[y]=b,u=!0);else{const v=zt(y);o[v]=Po(c,a,v,b,t,!1)}else b!==n[y]&&(n[y]=b,u=!0)}}}else{sl(t,e,o,n)&&(u=!0);let d;for(const f in a)(!e||!_e(e,f)&&((d=Wt(f))===f||!_e(e,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Po(c,a,f,void 0,t,!0)):delete o[f]);if(n!==a)for(const f in n)(!e||!_e(e,f))&&(delete n[f],u=!0)}u&&Et(t.attrs,"set","")}function sl(t,e,s,r){const[o,n]=t.propsOptions;let i=!1,a;if(e)for(let c in e){if(Os(c))continue;const u=e[c];let d;o&&_e(o,d=zt(c))?!n||!n.includes(d)?s[d]=u:(a||(a={}))[d]=u:Vr(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,i=!0)}if(n){const c=ye(s),u=a||be;for(let d=0;d<n.length;d++){const f=n[d];s[f]=Po(o,c,f,u[f],t,!_e(u,f))}}return i}function Po(t,e,s,r,o,n){const i=t[s];if(i!=null){const a=_e(i,"default");if(a&&r===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&de(c)){const{propsDefaults:u}=o;if(s in u)r=u[s];else{const d=er(o);r=u[s]=c.call(null,e),d()}}else r=c;o.ce&&o.ce._setProp(s,r)}i[0]&&(n&&!a?r=!1:i[1]&&(r===""||r===Wt(s))&&(r=!0))}return r}const zc=new WeakMap;function rl(t,e,s=!1){const r=s?zc:e.propsCache,o=r.get(t);if(o)return o;const n=t.props,i={},a=[];let c=!1;if(!de(t)){const d=f=>{c=!0;const[y,b]=rl(f,e,!0);Ge(i,y),b&&a.push(...b)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!n&&!c)return Ee(t)&&r.set(t,ms),ms;if(ne(n))for(let d=0;d<n.length;d++){const f=zt(n[d]);xn(f)&&(i[f]=be)}else if(n)for(const d in n){const f=zt(d);if(xn(f)){const y=n[d],b=i[f]=ne(y)||de(y)?{type:y}:Ge({},y),v=b.type;let m=!1,p=!0;if(ne(v))for(let _=0;_<v.length;++_){const k=v[_],S=de(k)&&k.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(p=!1)}else m=de(v)&&v.name==="Boolean";b[0]=m,b[1]=p,(m||_e(b,"default"))&&a.push(f)}}const u=[i,a];return Ee(t)&&r.set(t,u),u}function xn(t){return t[0]!=="$"&&!Os(t)}const en=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",tn=t=>ne(t)?t.map($t):[$t(t)],Oc=(t,e,s)=>{if(e._n)return e;const r=ac((...o)=>tn(e(...o)),s);return r._c=!1,r},ol=(t,e,s)=>{const r=t._ctx;for(const o in t){if(en(o))continue;const n=t[o];if(de(n))e[o]=Oc(o,n,r);else if(n!=null){const i=tn(n);e[o]=()=>i}}},nl=(t,e)=>{const s=tn(e);t.slots.default=()=>s},il=(t,e,s)=>{for(const r in e)(s||!en(r))&&(t[r]=e[r])},Uc=(t,e,s)=>{const r=t.slots=el();if(t.vnode.shapeFlag&32){const o=e.__;o&&bo(r,"__",o,!0);const n=e._;n?(il(r,e,s),s&&bo(r,"_",n,!0)):ol(e,r)}else e&&nl(t,e)},Fc=(t,e,s)=>{const{vnode:r,slots:o}=t;let n=!0,i=be;if(r.shapeFlag&32){const a=e._;a?s&&a===1?n=!1:il(o,e,s):(n=!e.$stable,ol(e,o)),i=e}else e&&(nl(t,e),i={default:1});if(n)for(const a in o)!en(a)&&i[a]==null&&delete o[a]},at=Zc;function qc(t){return Vc(t)}function Vc(t,e){const s=zr();s.__VUE__=!0;const{insert:r,remove:o,patchProp:n,createElement:i,createText:a,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:y,setScopeId:b=Pt,insertStaticContent:v}=t,m=($,C,F,H=null,V=null,N=null,Y=void 0,X=null,Q=!!C.dynamicChildren)=>{if($===C)return;$&&!Is($,C)&&(H=ir($),ee($,V,N,!0),$=null),C.patchFlag===-2&&(Q=!1,C.dynamicChildren=null);const{type:B,ref:oe,shapeFlag:J}=C;switch(B){case Nr:p($,C,F,H);break;case Ft:_($,C,F,H);break;case mr:$==null&&k(C,F,H,Y);break;case j:fe($,C,F,H,V,N,Y,X,Q);break;default:J&1?x($,C,F,H,V,N,Y,X,Q):J&6?ze($,C,F,H,V,N,Y,X,Q):(J&64||J&128)&&B.process($,C,F,H,V,N,Y,X,Q,Rs)}oe!=null&&V?qs(oe,$&&$.ref,N,C||$,!C):oe==null&&$&&$.ref!=null&&qs($.ref,null,N,$,!0)},p=($,C,F,H)=>{if($==null)r(C.el=a(C.children),F,H);else{const V=C.el=$.el;C.children!==$.children&&u(V,C.children)}},_=($,C,F,H)=>{$==null?r(C.el=c(C.children||""),F,H):C.el=$.el},k=($,C,F,H)=>{[$.el,$.anchor]=v($.children,C,F,H,$.el,$.anchor)},S=({el:$,anchor:C},F,H)=>{let V;for(;$&&$!==C;)V=y($),r($,F,H),$=V;r(C,F,H)},A=({el:$,anchor:C})=>{let F;for(;$&&$!==C;)F=y($),o($),$=F;o(C)},x=($,C,F,H,V,N,Y,X,Q)=>{C.type==="svg"?Y="svg":C.type==="math"&&(Y="mathml"),$==null?P(C,F,H,V,N,Y,X,Q):z($,C,V,N,Y,X,Q)},P=($,C,F,H,V,N,Y,X)=>{let Q,B;const{props:oe,shapeFlag:J,transition:re,dirs:ae}=$;if(Q=$.el=i($.type,N,oe&&oe.is,oe),J&8?d(Q,$.children):J&16&&T($.children,Q,null,H,V,lo($,N),Y,X),ae&&Zt($,null,H,"created"),I(Q,$,$.scopeId,Y,H),oe){for(const Re in oe)Re!=="value"&&!Os(Re)&&n(Q,Re,null,oe[Re],N,H);"value"in oe&&n(Q,"value",null,oe.value,N),(B=oe.onVnodeBeforeMount)&&St(B,H,$)}ae&&Zt($,null,H,"beforeMount");const ge=Nc(V,re);ge&&re.beforeEnter(Q),r(Q,C,F),((B=oe&&oe.onVnodeMounted)||ge||ae)&&at(()=>{B&&St(B,H,$),ge&&re.enter(Q),ae&&Zt($,null,H,"mounted")},V)},I=($,C,F,H,V)=>{if(F&&b($,F),H)for(let N=0;N<H.length;N++)b($,H[N]);if(V){let N=V.subTree;if(C===N||fl(N.type)&&(N.ssContent===C||N.ssFallback===C)){const Y=V.vnode;I($,Y,Y.scopeId,Y.slotScopeIds,V.parent)}}},T=($,C,F,H,V,N,Y,X,Q=0)=>{for(let B=Q;B<$.length;B++){const oe=$[B]=X?Bt($[B]):$t($[B]);m(null,oe,C,F,H,V,N,Y,X)}},z=($,C,F,H,V,N,Y)=>{const X=C.el=$.el;let{patchFlag:Q,dynamicChildren:B,dirs:oe}=C;Q|=$.patchFlag&16;const J=$.props||be,re=C.props||be;let ae;if(F&&es(F,!1),(ae=re.onVnodeBeforeUpdate)&&St(ae,F,C,$),oe&&Zt(C,$,F,"beforeUpdate"),F&&es(F,!0),(J.innerHTML&&re.innerHTML==null||J.textContent&&re.textContent==null)&&d(X,""),B?L($.dynamicChildren,B,X,F,H,lo(C,V),N):Y||O($,C,X,null,F,H,lo(C,V),N,!1),Q>0){if(Q&16)se(X,J,re,F,V);else if(Q&2&&J.class!==re.class&&n(X,"class",null,re.class,V),Q&4&&n(X,"style",J.style,re.style,V),Q&8){const ge=C.dynamicProps;for(let Re=0;Re<ge.length;Re++){const Te=ge[Re],Je=J[Te],Ze=re[Te];(Ze!==Je||Te==="value")&&n(X,Te,Je,Ze,V,F)}}Q&1&&$.children!==C.children&&d(X,C.children)}else!Y&&B==null&&se(X,J,re,F,V);((ae=re.onVnodeUpdated)||oe)&&at(()=>{ae&&St(ae,F,C,$),oe&&Zt(C,$,F,"updated")},H)},L=($,C,F,H,V,N,Y)=>{for(let X=0;X<C.length;X++){const Q=$[X],B=C[X],oe=Q.el&&(Q.type===j||!Is(Q,B)||Q.shapeFlag&198)?f(Q.el):F;m(Q,B,oe,null,H,V,N,Y,!0)}},se=($,C,F,H,V)=>{if(C!==F){if(C!==be)for(const N in C)!Os(N)&&!(N in F)&&n($,N,C[N],null,V,H);for(const N in F){if(Os(N))continue;const Y=F[N],X=C[N];Y!==X&&N!=="value"&&n($,N,X,Y,V,H)}"value"in F&&n($,"value",C.value,F.value,V)}},fe=($,C,F,H,V,N,Y,X,Q)=>{const B=C.el=$?$.el:a(""),oe=C.anchor=$?$.anchor:a("");let{patchFlag:J,dynamicChildren:re,slotScopeIds:ae}=C;ae&&(X=X?X.concat(ae):ae),$==null?(r(B,F,H),r(oe,F,H),T(C.children||[],F,oe,V,N,Y,X,Q)):J>0&&J&64&&re&&$.dynamicChildren?(L($.dynamicChildren,re,F,V,N,Y,X),(C.key!=null||V&&C===V.subTree)&&ll($,C,!0)):O($,C,F,oe,V,N,Y,X,Q)},ze=($,C,F,H,V,N,Y,X,Q)=>{C.slotScopeIds=X,$==null?C.shapeFlag&512?V.ctx.activate(C,F,H,Y,Q):Fe(C,F,H,V,N,Y,Q):Oe($,C,Q)},Fe=($,C,F,H,V,N,Y)=>{const X=$.component=iu($,H,V);if(Gi($)&&(X.ctx.renderer=Rs),lu(X,!1,Y),X.asyncDep){if(V&&V.registerDep(X,xe,Y),!$.el){const Q=X.subTree=W(Ft);_(null,Q,C,F),$.placeholder=Q.el}}else xe(X,$,C,F,V,N,Y)},Oe=($,C,F)=>{const H=C.component=$.component;if(Yc($,C,F))if(H.asyncDep&&!H.asyncResolved){G(H,C,F);return}else H.next=C,H.update();else C.el=$.el,H.vnode=C},xe=($,C,F,H,V,N,Y)=>{const X=()=>{if($.isMounted){let{next:J,bu:re,u:ae,parent:ge,vnode:Re}=$;{const kt=al($);if(kt){J&&(J.el=Re.el,G($,J,Y)),kt.asyncDep.then(()=>{$.isUnmounted||X()});return}}let Te=J,Je;es($,!1),J?(J.el=Re.el,G($,J,Y)):J=Re,re&&hr(re),(Je=J.props&&J.props.onVnodeBeforeUpdate)&&St(Je,ge,J,Re),es($,!0);const Ze=Mn($),bt=$.subTree;$.subTree=Ze,m(bt,Ze,f(bt.el),ir(bt),$,V,N),J.el=Ze.el,Te===null&&Jc($,Ze.el),ae&&at(ae,V),(Je=J.props&&J.props.onVnodeUpdated)&&at(()=>St(Je,ge,J,Re),V)}else{let J;const{el:re,props:ae}=C,{bm:ge,m:Re,parent:Te,root:Je,type:Ze}=$,bt=ys(C);es($,!1),ge&&hr(ge),!bt&&(J=ae&&ae.onVnodeBeforeMount)&&St(J,Te,C),es($,!0);{Je.ce&&Je.ce._def.shadowRoot!==!1&&Je.ce._injectChildStyle(Ze);const kt=$.subTree=Mn($);m(null,kt,F,H,$,V,N),C.el=kt.el}if(Re&&at(Re,V),!bt&&(J=ae&&ae.onVnodeMounted)){const kt=C;at(()=>St(J,Te,kt),V)}(C.shapeFlag&256||Te&&ys(Te.vnode)&&Te.vnode.shapeFlag&256)&&$.a&&at($.a,V),$.isMounted=!0,C=F=H=null}};$.scope.on();const Q=$.effect=new Ai(X);$.scope.off();const B=$.update=Q.run.bind(Q),oe=$.job=Q.runIfDirty.bind(Q);oe.i=$,oe.id=$.uid,Q.scheduler=()=>Jo(oe),es($,!0),B()},G=($,C,F)=>{C.component=$;const H=$.vnode.props;$.vnode=C,$.next=null,Dc($,C.props,H,F),Fc($,C.children,F),Ot(),Tn($),Ut()},O=($,C,F,H,V,N,Y,X,Q=!1)=>{const B=$&&$.children,oe=$?$.shapeFlag:0,J=C.children,{patchFlag:re,shapeFlag:ae}=C;if(re>0){if(re&128){Ie(B,J,F,H,V,N,Y,X,Q);return}else if(re&256){q(B,J,F,H,V,N,Y,X,Q);return}}ae&8?(oe&16&&xs(B,V,N),J!==B&&d(F,J)):oe&16?ae&16?Ie(B,J,F,H,V,N,Y,X,Q):xs(B,V,N,!0):(oe&8&&d(F,""),ae&16&&T(J,F,H,V,N,Y,X,Q))},q=($,C,F,H,V,N,Y,X,Q)=>{$=$||ms,C=C||ms;const B=$.length,oe=C.length,J=Math.min(B,oe);let re;for(re=0;re<J;re++){const ae=C[re]=Q?Bt(C[re]):$t(C[re]);m($[re],ae,F,null,V,N,Y,X,Q)}B>oe?xs($,V,N,!0,!1,J):T(C,F,H,V,N,Y,X,Q,J)},Ie=($,C,F,H,V,N,Y,X,Q)=>{let B=0;const oe=C.length;let J=$.length-1,re=oe-1;for(;B<=J&&B<=re;){const ae=$[B],ge=C[B]=Q?Bt(C[B]):$t(C[B]);if(Is(ae,ge))m(ae,ge,F,null,V,N,Y,X,Q);else break;B++}for(;B<=J&&B<=re;){const ae=$[J],ge=C[re]=Q?Bt(C[re]):$t(C[re]);if(Is(ae,ge))m(ae,ge,F,null,V,N,Y,X,Q);else break;J--,re--}if(B>J){if(B<=re){const ae=re+1,ge=ae<oe?C[ae].el:H;for(;B<=re;)m(null,C[B]=Q?Bt(C[B]):$t(C[B]),F,ge,V,N,Y,X,Q),B++}}else if(B>re)for(;B<=J;)ee($[B],V,N,!0),B++;else{const ae=B,ge=B,Re=new Map;for(B=ge;B<=re;B++){const lt=C[B]=Q?Bt(C[B]):$t(C[B]);lt.key!=null&&Re.set(lt.key,B)}let Te,Je=0;const Ze=re-ge+1;let bt=!1,kt=0;const Ms=new Array(Ze);for(B=0;B<Ze;B++)Ms[B]=0;for(B=ae;B<=J;B++){const lt=$[B];if(Je>=Ze){ee(lt,V,N,!0);continue}let _t;if(lt.key!=null)_t=Re.get(lt.key);else for(Te=ge;Te<=re;Te++)if(Ms[Te-ge]===0&&Is(lt,C[Te])){_t=Te;break}_t===void 0?ee(lt,V,N,!0):(Ms[_t-ge]=B+1,_t>=kt?kt=_t:bt=!0,m(lt,C[_t],F,null,V,N,Y,X,Q),Je++)}const yn=bt?Hc(Ms):ms;for(Te=yn.length-1,B=Ze-1;B>=0;B--){const lt=ge+B,_t=C[lt],wn=C[lt+1],bn=lt+1<oe?wn.el||wn.placeholder:H;Ms[B]===0?m(null,_t,F,bn,V,N,Y,X,Q):bt&&(Te<0||B!==yn[Te]?it(_t,F,bn,2):Te--)}}},it=($,C,F,H,V=null)=>{const{el:N,type:Y,transition:X,children:Q,shapeFlag:B}=$;if(B&6){it($.component.subTree,C,F,H);return}if(B&128){$.suspense.move(C,F,H);return}if(B&64){Y.move($,C,F,Rs);return}if(Y===j){r(N,C,F);for(let J=0;J<Q.length;J++)it(Q[J],C,F,H);r($.anchor,C,F);return}if(Y===mr){S($,C,F);return}if(H!==2&&B&1&&X)if(H===0)X.beforeEnter(N),r(N,C,F),at(()=>X.enter(N),V);else{const{leave:J,delayLeave:re,afterLeave:ae}=X,ge=()=>{$.ctx.isUnmounted?o(N):r(N,C,F)},Re=()=>{J(N,()=>{ge(),ae&&ae()})};re?re(N,ge,Re):Re()}else r(N,C,F)},ee=($,C,F,H=!1,V=!1)=>{const{type:N,props:Y,ref:X,children:Q,dynamicChildren:B,shapeFlag:oe,patchFlag:J,dirs:re,cacheIndex:ae}=$;if(J===-2&&(V=!1),X!=null&&(Ot(),qs(X,null,F,$,!0),Ut()),ae!=null&&(C.renderCache[ae]=void 0),oe&256){C.ctx.deactivate($);return}const ge=oe&1&&re,Re=!ys($);let Te;if(Re&&(Te=Y&&Y.onVnodeBeforeUnmount)&&St(Te,C,$),oe&6)ua($.component,F,H);else{if(oe&128){$.suspense.unmount(F,H);return}ge&&Zt($,null,C,"beforeUnmount"),oe&64?$.type.remove($,C,F,Rs,H):B&&!B.hasOnce&&(N!==j||J>0&&J&64)?xs(B,C,F,!1,!0):(N===j&&J&384||!V&&oe&16)&&xs(Q,C,F),H&&Ne($)}(Re&&(Te=Y&&Y.onVnodeUnmounted)||ge)&&at(()=>{Te&&St(Te,C,$),ge&&Zt($,null,C,"unmounted")},F)},Ne=$=>{const{type:C,el:F,anchor:H,transition:V}=$;if(C===j){vn(F,H);return}if(C===mr){A($);return}const N=()=>{o(F),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if($.shapeFlag&1&&V&&!V.persisted){const{leave:Y,delayLeave:X}=V,Q=()=>Y(F,N);X?X($.el,N,Q):Q()}else N()},vn=($,C)=>{let F;for(;$!==C;)F=y($),o($),$=F;o(C)},ua=($,C,F)=>{const{bum:H,scope:V,job:N,subTree:Y,um:X,m:Q,a:B,parent:oe,slots:{__:J}}=$;Rn(Q),Rn(B),H&&hr(H),oe&&ne(J)&&J.forEach(re=>{oe.renderCache[re]=void 0}),V.stop(),N&&(N.flags|=8,ee(Y,$,C,F)),X&&at(X,C),at(()=>{$.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},xs=($,C,F,H=!1,V=!1,N=0)=>{for(let Y=N;Y<$.length;Y++)ee($[Y],C,F,H,V)},ir=$=>{if($.shapeFlag&6)return ir($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const C=y($.anchor||$.el),F=C&&C[cc];return F?y(F):C};let eo=!1;const gn=($,C,F)=>{$==null?C._vnode&&ee(C._vnode,null,null,!0):m(C._vnode||null,$,C,null,null,null,F),C._vnode=$,eo||(eo=!0,Tn(),Hi(),eo=!1)},Rs={p:m,um:ee,m:it,r:Ne,mt:Fe,mc:T,pc:O,pbc:L,n:ir,o:t};return{render:gn,hydrate:void 0,createApp:Mc(gn)}}function lo({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function es({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Nc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ll(t,e,s=!1){const r=t.children,o=e.children;if(ne(r)&&ne(o))for(let n=0;n<r.length;n++){const i=r[n];let a=o[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[n]=Bt(o[n]),a.el=i.el),!s&&a.patchFlag!==-2&&ll(i,a)),a.type===Nr&&(a.el=i.el),a.type===Ft&&!a.el&&(a.el=i.el)}}function Hc(t){const e=t.slice(),s=[0];let r,o,n,i,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(o=s[s.length-1],t[o]<u){e[r]=o,s.push(r);continue}for(n=0,i=s.length-1;n<i;)a=n+i>>1,t[s[a]]<u?n=a+1:i=a;u<t[s[n]]&&(n>0&&(e[r]=s[n-1]),s[n]=r)}}for(n=s.length,i=s[n-1];n-- >0;)s[n]=i,i=e[i];return s}function al(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:al(e)}function Rn(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Bc=Symbol.for("v-scx"),Kc=()=>Ns(Bc);function jc(t,e){return sn(t,null,{flush:"sync"})}function ws(t,e,s){return sn(t,e,s)}function sn(t,e,s=be){const{immediate:r,deep:o,flush:n,once:i}=s,a=Ge({},s),c=e&&r||!e&&n!=="post";let u;if(Ws){if(n==="sync"){const b=Kc();u=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=Pt,b.resume=Pt,b.pause=Pt,b}}const d=Ye;a.call=(b,v,m)=>xt(b,d,v,m);let f=!1;n==="post"?a.scheduler=b=>{at(b,d&&d.suspense)}:n!=="sync"&&(f=!0,a.scheduler=(b,v)=>{v?b():Jo(b)}),a.augmentJob=b=>{e&&(b.flags|=4),f&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const y=oc(t,e,a);return Ws&&(u?u.push(y):c&&y()),y}function Gc(t,e,s){const r=this.proxy,o=Ue(t)?t.includes(".")?cl(r,t):()=>r[t]:t.bind(r,r);let n;de(e)?n=e:(n=e.handler,s=e);const i=er(this),a=sn(o,n.bind(r),s);return i(),a}function cl(t,e){const s=e.split(".");return()=>{let r=t;for(let o=0;o<s.length&&r;o++)r=r[s[o]];return r}}function rn(t,e,s=be){const r=ln(),o=zt(e),n=Wt(e),i=ul(t,o),a=Xa((c,u)=>{let d,f=be,y;return jc(()=>{const b=t[o];et(d,b)&&(d=b,u())}),{get(){return c(),s.get?s.get(d):d},set(b){const v=s.set?s.set(b):b;if(!et(v,d)&&!(f!==be&&et(b,f)))return;const m=r.vnode.props;m&&(e in m||o in m||n in m)&&(`onUpdate:${e}`in m||`onUpdate:${o}`in m||`onUpdate:${n}`in m)||(d=b,u()),r.emit(`update:${e}`,v),et(b,v)&&et(b,f)&&!et(v,y)&&u(),f=b,y=v}}});return a[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?i||be:a,done:!1}:{done:!0}}}},a}const ul=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${zt(e)}Modifiers`]||t[`${Wt(e)}Modifiers`];function Qc(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||be;let o=s;const n=e.startsWith("update:"),i=n&&ul(r,e.slice(7));i&&(i.trim&&(o=s.map(d=>Ue(d)?d.trim():d)),i.number&&(o=s.map(_r)));let a,c=r[a=to(e)]||r[a=to(zt(e))];!c&&n&&(c=r[a=to(Wt(e))]),c&&xt(c,t,6,o);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,xt(u,t,6,o)}}function dl(t,e,s=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const n=t.emits;let i={},a=!1;if(!de(t)){const c=u=>{const d=dl(u,e,!0);d&&(a=!0,Ge(i,d))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!n&&!a?(Ee(t)&&r.set(t,null),null):(ne(n)?n.forEach(c=>i[c]=null):Ge(i,n),Ee(t)&&r.set(t,i),i)}function Vr(t,e){return!t||!Lr(e)?!1:(e=e.slice(2).replace(/Once$/,""),_e(t,e[0].toLowerCase()+e.slice(1))||_e(t,Wt(e))||_e(t,e))}function Mn(t){const{type:e,vnode:s,proxy:r,withProxy:o,propsOptions:[n],slots:i,attrs:a,emit:c,render:u,renderCache:d,props:f,data:y,setupState:b,ctx:v,inheritAttrs:m}=t,p=Cr(t);let _,k;try{if(s.shapeFlag&4){const A=o||r,x=A;_=$t(u.call(x,A,d,f,b,y,v)),k=a}else{const A=e;_=$t(A.length>1?A(f,{attrs:a,slots:i,emit:c}):A(f,null)),k=e.props?a:Wc(a)}}catch(A){Hs.length=0,Fr(A,t,1),_=W(Ft)}let S=_;if(k&&m!==!1){const A=Object.keys(k),{shapeFlag:x}=S;A.length&&x&7&&(n&&A.some(Vo)&&(k=Xc(k,n)),S=bs(S,k,!1,!0))}return s.dirs&&(S=bs(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Zo(S,s.transition),_=S,Cr(p),_}const Wc=t=>{let e;for(const s in t)(s==="class"||s==="style"||Lr(s))&&((e||(e={}))[s]=t[s]);return e},Xc=(t,e)=>{const s={};for(const r in t)(!Vo(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function Yc(t,e,s){const{props:r,children:o,component:n}=t,{props:i,children:a,patchFlag:c}=e,u=n.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return r?En(r,i,u):!!i;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const y=d[f];if(i[y]!==r[y]&&!Vr(u,y))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?En(r,i,u):!0:!!i;return!1}function En(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const n=r[o];if(e[n]!==t[n]&&!Vr(s,n))return!0}return!1}function Jc({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const fl=t=>t.__isSuspense;function Zc(t,e){e&&e.pendingBranch?ne(t)?e.effects.push(...t):e.effects.push(t):lc(t)}const j=Symbol.for("v-fgt"),Nr=Symbol.for("v-txt"),Ft=Symbol.for("v-cmt"),mr=Symbol.for("v-stc"),Hs=[];let ct=null;function h(t=!1){Hs.push(ct=t?null:[])}function eu(){Hs.pop(),ct=Hs[Hs.length-1]||null}let Qs=1;function In(t,e=!1){Qs+=t,t<0&&ct&&e&&(ct.hasOnce=!0)}function pl(t){return t.dynamicChildren=Qs>0?ct||ms:null,eu(),Qs>0&&ct&&ct.push(t),t}function g(t,e,s,r,o,n){return pl(l(t,e,s,r,o,n,!0))}function Z(t,e,s,r,o){return pl(W(t,e,s,r,o,!0))}function on(t){return t?t.__v_isVNode===!0:!1}function Is(t,e){return t.type===e.type&&t.key===e.key}const hl=({key:t})=>t??null,vr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Ue(t)||Pe(t)||de(t)?{i:je,r:t,k:e,f:!!s}:t:null);function l(t,e=null,s=null,r=0,o=null,n=t===j?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&hl(e),ref:e&&vr(e),scopeId:Ki,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:je};return a?(nn(c,s),n&128&&t.normalize(c)):s&&(c.shapeFlag|=Ue(s)?8:16),Qs>0&&!i&&ct&&(c.patchFlag>0||n&6)&&c.patchFlag!==32&&ct.push(c),c}const W=tu;function tu(t,e=null,s=null,r=0,o=null,n=!1){if((!t||t===_c)&&(t=Ft),on(t)){const a=bs(t,e,!0);return s&&nn(a,s),Qs>0&&!n&&ct&&(a.shapeFlag&6?ct[ct.indexOf(t)]=a:ct.push(a)),a.patchFlag=-2,a}if(du(t)&&(t=t.__vccOpts),e){e=su(e);let{class:a,style:c}=e;a&&!Ue(a)&&(e.class=K(a)),Ee(c)&&(Xo(c)&&!ne(c)&&(c=Ge({},c)),e.style=Se(c))}const i=Ue(t)?1:fl(t)?128:uc(t)?64:Ee(t)?4:de(t)?2:0;return l(t,e,s,r,o,i,n,!0)}function su(t){return t?Xo(t)||tl(t)?Ge({},t):t:null}function bs(t,e,s=!1,r=!1){const{props:o,ref:n,patchFlag:i,children:a,transition:c}=t,u=e?ru(o||{},e):o,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&hl(u),ref:e&&e.ref?s&&n?ne(n)?n.concat(vr(e)):[n,vr(e)]:vr(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==j?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&bs(t.ssContent),ssFallback:t.ssFallback&&bs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Zo(d,c.clone(d)),d}function Ae(t=" ",e=0){return W(Nr,null,t,e)}function Xe(t,e){const s=W(mr,null,t);return s.staticCount=e,s}function R(t="",e=!1){return e?(h(),Z(Ft,null,t)):W(Ft,null,t)}function $t(t){return t==null||typeof t=="boolean"?W(Ft):ne(t)?W(j,null,t.slice()):on(t)?Bt(t):W(Nr,null,String(t))}function Bt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:bs(t)}function nn(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ne(e))s=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),nn(t,o()),o._c&&(o._d=!0));return}else{s=32;const o=e._;!o&&!tl(e)?e._ctx=je:o===3&&je&&(je.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:je},s=32):(e=String(e),r&64?(s=16,e=[Ae(e)]):s=8);t.children=e,t.shapeFlag|=s}function ru(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=K([e.class,r.class]));else if(o==="style")e.style=Se([e.style,r.style]);else if(Lr(o)){const n=e[o],i=r[o];i&&n!==i&&!(ne(n)&&n.includes(i))&&(e[o]=n?[].concat(n,i):i)}else o!==""&&(e[o]=r[o])}return e}function St(t,e,s,r=null){xt(t,e,7,[s,r])}const ou=Ji();let nu=0;function iu(t,e,s){const r=t.type,o=(e?e.appContext:t.appContext)||ou,n={uid:nu++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ki(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rl(r,o),emitsOptions:dl(r,o),emit:null,emitted:null,propsDefaults:be,inheritAttrs:r.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=Qc.bind(null,n),t.ce&&t.ce(n),n}let Ye=null;const ln=()=>Ye||je;let Rr,xo;{const t=zr(),e=(s,r)=>{let o;return(o=t[s])||(o=t[s]=[]),o.push(r),n=>{o.length>1?o.forEach(i=>i(n)):o[0](n)}};Rr=e("__VUE_INSTANCE_SETTERS__",s=>Ye=s),xo=e("__VUE_SSR_SETTERS__",s=>Ws=s)}const er=t=>{const e=Ye;return Rr(t),t.scope.on(),()=>{t.scope.off(),Rr(e)}},Ln=()=>{Ye&&Ye.scope.off(),Rr(null)};function ml(t){return t.vnode.shapeFlag&4}let Ws=!1;function lu(t,e=!1,s=!1){e&&xo(e);const{props:r,children:o}=t.vnode,n=ml(t);Lc(t,r,n,e),Uc(t,o,s||e);const i=n?au(t,e):void 0;return e&&xo(!1),i}function au(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Sc);const{setup:r}=s;if(r){Ot();const o=t.setupContext=r.length>1?uu(t):null,n=er(t),i=Zs(r,t,0,[t.props,o]),a=hi(i);if(Ut(),n(),(a||t.sp)&&!ys(t)&&ji(t),a){if(i.then(Ln,Ln),e)return i.then(c=>{Dn(t,c)}).catch(c=>{Fr(c,t,0)});t.asyncDep=i}else Dn(t,i)}else vl(t)}function Dn(t,e,s){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ee(e)&&(t.setupState=Fi(e)),vl(t)}function vl(t,e,s){const r=t.type;t.render||(t.render=r.render||Pt);{const o=er(t);Ot();try{Tc(t)}finally{Ut(),o()}}}const cu={get(t,e){return Be(t,"get",""),t[e]}};function uu(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,cu),slots:t.slots,emit:t.emit,expose:e}}function Hr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Fi(Yo(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Vs)return Vs[s](t)},has(e,s){return s in e||s in Vs}})):t.proxy}function du(t){return de(t)&&"__vccOpts"in t}const E=(t,e)=>sc(t,e,Ws),fu="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ro;const zn=typeof window<"u"&&window.trustedTypes;if(zn)try{Ro=zn.createPolicy("vue",{createHTML:t=>t})}catch{}const gl=Ro?t=>Ro.createHTML(t):t=>t,pu="http://www.w3.org/2000/svg",hu="http://www.w3.org/1998/Math/MathML",Mt=typeof document<"u"?document:null,On=Mt&&Mt.createElement("template"),mu={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const o=e==="svg"?Mt.createElementNS(pu,t):e==="mathml"?Mt.createElementNS(hu,t):s?Mt.createElement(t,{is:s}):Mt.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Mt.createTextNode(t),createComment:t=>Mt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,o,n){const i=s?s.previousSibling:e.lastChild;if(o&&(o===n||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),s),!(o===n||!(o=o.nextSibling)););else{On.innerHTML=gl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=On.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,s)}return[i?i.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},vu=Symbol("_vtc");function gu(t,e,s){const r=t[vu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Mr=Symbol("_vod"),yl=Symbol("_vsh"),Gt={beforeMount(t,{value:e},{transition:s}){t[Mr]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Ls(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:r}){!e!=!s&&(r?e?(r.beforeEnter(t),Ls(t,!0),r.enter(t)):r.leave(t,()=>{Ls(t,!1)}):Ls(t,e))},beforeUnmount(t,{value:e}){Ls(t,e)}};function Ls(t,e){t.style.display=e?t[Mr]:"none",t[yl]=!e}const yu=Symbol(""),wu=/(^|;)\s*display\s*:/;function bu(t,e,s){const r=t.style,o=Ue(s);let n=!1;if(s&&!o){if(e)if(Ue(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&gr(r,a,"")}else for(const i in e)s[i]==null&&gr(r,i,"");for(const i in s)i==="display"&&(n=!0),gr(r,i,s[i])}else if(o){if(e!==s){const i=r[yu];i&&(s+=";"+i),r.cssText=s,n=wu.test(s)}}else e&&t.removeAttribute("style");Mr in t&&(t[Mr]=n?r.display:"",t[yl]&&(r.display="none"))}const Un=/\s*!important$/;function gr(t,e,s){if(ne(s))s.forEach(r=>gr(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=ku(t,e);Un.test(s)?t.setProperty(Wt(r),s.replace(Un,""),"important"):t[r]=s}}const Fn=["Webkit","Moz","ms"],ao={};function ku(t,e){const s=ao[e];if(s)return s;let r=zt(e);if(r!=="filter"&&r in t)return ao[e]=r;r=gi(r);for(let o=0;o<Fn.length;o++){const n=Fn[o]+r;if(n in t)return ao[e]=n}return e}const qn="http://www.w3.org/1999/xlink";function Vn(t,e,s,r,o,n=Sa(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(qn,e.slice(6,e.length)):t.setAttributeNS(qn,e,s):s==null||n&&!yi(s)?t.removeAttribute(e):t.setAttribute(e,n?"":yt(s)?String(s):s)}function Nn(t,e,s,r,o){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?gl(s):s);return}const n=t.tagName;if(e==="value"&&n!=="PROGRESS"&&!n.includes("-")){const a=n==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(a!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let i=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=yi(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{t[e]=s}catch{}i&&t.removeAttribute(o||e)}function Lt(t,e,s,r){t.addEventListener(e,s,r)}function _u(t,e,s,r){t.removeEventListener(e,s,r)}const Hn=Symbol("_vei");function Su(t,e,s,r,o=null){const n=t[Hn]||(t[Hn]={}),i=n[e];if(r&&i)i.value=r;else{const[a,c]=Au(e);if(r){const u=n[e]=Cu(r,o);Lt(t,a,u,c)}else i&&(_u(t,a,i,c),n[e]=void 0)}}const Bn=/(?:Once|Passive|Capture)$/;function Au(t){let e;if(Bn.test(t)){e={};let r;for(;r=t.match(Bn);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Wt(t.slice(2)),e]}let co=0;const Tu=Promise.resolve(),$u=()=>co||(Tu.then(()=>co=0),co=Date.now());function Cu(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;xt(Pu(r,s.value),e,5,[r])};return s.value=t,s.attached=$u(),s}function Pu(t,e){if(ne(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Kn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xu=(t,e,s,r,o,n)=>{const i=o==="svg";e==="class"?gu(t,r,i):e==="style"?bu(t,s,r):Lr(e)?Vo(e)||Su(t,e,s,r,n):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ru(t,e,r,i))?(Nn(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vn(t,e,r,i,n,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ue(r))?Nn(t,zt(e),r,n,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Vn(t,e,r,i))};function Ru(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Kn(e)&&de(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Kn(e)&&Ue(s)?!1:e in t}const Qt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ne(e)?s=>hr(e,s):e};function Mu(t){t.target.composing=!0}function jn(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ht=Symbol("_assign"),Ss={created(t,{modifiers:{lazy:e,trim:s,number:r}},o){t[ht]=Qt(o);const n=r||o.props&&o.props.type==="number";Lt(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;s&&(a=a.trim()),n&&(a=_r(a)),t[ht](a)}),s&&Lt(t,"change",()=>{t.value=t.value.trim()}),e||(Lt(t,"compositionstart",Mu),Lt(t,"compositionend",jn),Lt(t,"change",jn))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:o,number:n}},i){if(t[ht]=Qt(i),t.composing)return;const a=(n||t.type==="number")&&!/^0\d/.test(t.value)?_r(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||o&&t.value.trim()===c)||(t.value=c))}},Kt={deep:!0,created(t,e,s){t[ht]=Qt(s),Lt(t,"change",()=>{const r=t._modelValue,o=ks(t),n=t.checked,i=t[ht];if(ne(r)){const a=Bo(r,o),c=a!==-1;if(n&&!c)i(r.concat(o));else if(!n&&c){const u=[...r];u.splice(a,1),i(u)}}else if(_s(r)){const a=new Set(r);n?a.add(o):a.delete(o),i(a)}else i(wl(t,n))})},mounted:Gn,beforeUpdate(t,e,s){t[ht]=Qt(s),Gn(t,e,s)}};function Gn(t,{value:e,oldValue:s},r){t._modelValue=e;let o;if(ne(e))o=Bo(e,r.props.value)>-1;else if(_s(e))o=e.has(r.props.value);else{if(e===s)return;o=ls(e,wl(t,!0))}t.checked!==o&&(t.checked=o)}const dr={created(t,{value:e},s){t.checked=ls(e,s.props.value),t[ht]=Qt(s),Lt(t,"change",()=>{t[ht](ks(t))})},beforeUpdate(t,{value:e,oldValue:s},r){t[ht]=Qt(r),e!==s&&(t.checked=ls(e,r.props.value))}},As={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const o=_s(e);Lt(t,"change",()=>{const n=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>s?_r(ks(i)):ks(i));t[ht](t.multiple?o?new Set(n):n:n[0]),t._assigning=!0,ot(()=>{t._assigning=!1})}),t[ht]=Qt(r)},mounted(t,{value:e}){Qn(t,e)},beforeUpdate(t,e,s){t[ht]=Qt(s)},updated(t,{value:e}){t._assigning||Qn(t,e)}};function Qn(t,e){const s=t.multiple,r=ne(e);if(!(s&&!r&&!_s(e))){for(let o=0,n=t.options.length;o<n;o++){const i=t.options[o],a=ks(i);if(s)if(r){const c=typeof a;c==="string"||c==="number"?i.selected=e.some(u=>String(u)===String(a)):i.selected=Bo(e,a)>-1}else i.selected=e.has(a);else if(ls(ks(i),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ks(t){return"_value"in t?t._value:t.value}function wl(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Eu=["ctrl","shift","alt","meta"],Iu={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Eu.some(s=>t[`${s}Key`]&&!e.includes(s))},Xt=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(o,...n)=>{for(let i=0;i<e.length;i++){const a=Iu[e[i]];if(a&&a(o,e))return}return t(o,...n)})},Lu=Ge({patchProp:xu},mu);let Wn;function Du(){return Wn||(Wn=qc(Lu))}const zu=(...t)=>{const e=Du().createApp(...t),{mount:s}=e;return e.mount=r=>{const o=Uu(r);if(!o)return;const n=e._component;!de(n)&&!n.render&&!n.template&&(n.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=s(o,!1,Ou(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},e};function Ou(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Uu(t){return Ue(t)?document.querySelector(t):t}const bl="/assets/logo-small-OTvP_XFC.png",ke=(t,e)=>{const s=t.__vccOpts||t;for(const[r,o]of e)s[r]=o;return s},Fu={},qu={href:"spotify/logout"};function Vu(t,e){return h(),g("a",qu,e[0]||(e[0]=[l("button",{class:"inp"},"Logout",-1)]))}const kl=ke(Fu,[["render",Vu]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let _l;const Br=t=>_l=t,Sl=Symbol();function Mo(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Bs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Bs||(Bs={}));function Nu(){const t=_i(!0),e=t.run(()=>U({}));let s=[],r=[];const o=Yo({install(n){Br(o),o._a=n,n.provide(Sl,o),n.config.globalProperties.$pinia=o,r.forEach(i=>s.push(i)),r=[]},use(n){return this._a?s.push(n):r.push(n),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return o}const Al=()=>{};function Xn(t,e,s,r=Al){t.push(e);const o=()=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),r())};return!s&&Si()&&Ta(o),o}function ps(t,...e){t.slice().forEach(s=>{s(...e)})}const Hu=t=>t(),Yn=Symbol(),uo=Symbol();function Eo(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,r)=>t.set(r,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const r=e[s],o=t[s];Mo(o)&&Mo(r)&&t.hasOwnProperty(s)&&!Pe(r)&&!Dt(r)?t[s]=Eo(o,r):t[s]=r}return t}const Bu=Symbol();function Ku(t){return!Mo(t)||!Object.prototype.hasOwnProperty.call(t,Bu)}const{assign:Nt}=Object;function ju(t){return!!(Pe(t)&&t.effect)}function Gu(t,e,s,r){const{state:o,actions:n,getters:i}=e,a=s.state.value[t];let c;function u(){a||(s.state.value[t]=o?o():{});const d=Ya(s.state.value[t]);return Nt(d,n,Object.keys(i||{}).reduce((f,y)=>(f[y]=Yo(E(()=>{Br(s);const b=s._s.get(t);return i[y].call(b,b)})),f),{}))}return c=Tl(t,u,e,s,r,!0),c}function Tl(t,e,s={},r,o,n){let i;const a=Nt({actions:{}},s),c={deep:!0};let u,d,f=[],y=[],b;const v=r.state.value[t];!n&&!v&&(r.state.value[t]={}),U({});let m;function p(T){let z;u=d=!1,typeof T=="function"?(T(r.state.value[t]),z={type:Bs.patchFunction,storeId:t,events:b}):(Eo(r.state.value[t],T),z={type:Bs.patchObject,payload:T,storeId:t,events:b});const L=m=Symbol();ot().then(()=>{m===L&&(u=!0)}),d=!0,ps(f,z,r.state.value[t])}const _=n?function(){const{state:z}=s,L=z?z():{};this.$patch(se=>{Nt(se,L)})}:Al;function k(){i.stop(),f=[],y=[],r._s.delete(t)}const S=(T,z="")=>{if(Yn in T)return T[uo]=z,T;const L=function(){Br(r);const se=Array.from(arguments),fe=[],ze=[];function Fe(G){fe.push(G)}function Oe(G){ze.push(G)}ps(y,{args:se,name:L[uo],store:x,after:Fe,onError:Oe});let xe;try{xe=T.apply(this&&this.$id===t?this:x,se)}catch(G){throw ps(ze,G),G}return xe instanceof Promise?xe.then(G=>(ps(fe,G),G)).catch(G=>(ps(ze,G),Promise.reject(G))):(ps(fe,xe),xe)};return L[Yn]=!0,L[uo]=z,L},A={_p:r,$id:t,$onAction:Xn.bind(null,y),$patch:p,$reset:_,$subscribe(T,z={}){const L=Xn(f,T,z.detached,()=>se()),se=i.run(()=>ws(()=>r.state.value[t],fe=>{(z.flush==="sync"?d:u)&&T({storeId:t,type:Bs.direct,events:b},fe)},Nt({},c,z)));return L},$dispose:k},x=Js(A);r._s.set(t,x);const I=(r._a&&r._a.runWithContext||Hu)(()=>r._e.run(()=>(i=_i()).run(()=>e({action:S}))));for(const T in I){const z=I[T];if(Pe(z)&&!ju(z)||Dt(z))n||(v&&Ku(z)&&(Pe(z)?z.value=v[T]:Eo(z,v[T])),r.state.value[t][T]=z);else if(typeof z=="function"){const L=S(z,T);I[T]=L,a.actions[T]=z}}return Nt(x,I),Nt(ye(x),I),Object.defineProperty(x,"$state",{get:()=>r.state.value[t],set:T=>{p(z=>{Nt(z,T)})}}),r._p.forEach(T=>{Nt(x,i.run(()=>T({store:x,app:r._a,pinia:r,options:a})))}),v&&n&&s.hydrate&&s.hydrate(x.$state,v),u=!0,d=!0,x}/*! #__NO_SIDE_EFFECTS__ */function tr(t,e,s){let r;const o=typeof e=="function";r=o?s:e;function n(i,a){const c=Ic();return i=i||(c?Ns(Sl,null):null),i&&Br(i),i=_l,i._s.has(t)||(o?Tl(t,e,r,i):Gu(t,r,i)),i._s.get(t)}return n.$id=t,n}function Yt(t){const e=ye(t),s={};for(const r in e){const o=e[r];o.effect?s[r]=E({get:()=>t[r],set(n){t[r]=n}}):(Pe(o)||Dt(o))&&(s[r]=ec(t,r))}return s}const ve=tr("audio",{state:()=>({currentTrack:null,audioPreview:!0,restartSongOnHover:!1,restartSongOnClick:!1,unplayableTracks:!0,openLinks:!0,mobileCurrentAudio:null,mobileCurrentTrackId:null,mobileIsPlaying:!1}),getters:{isAudioEnabled:t=>t.audioPreview,shouldRestartOnHover:t=>t.restartSongOnHover,shouldRestartSongOnClick:t=>t.restartSongOnClick},actions:{setCurrentTrack(t){this.currentTrack=t},setAudioPreview(t){this.audioPreview=t},setRestartSongOnHover(t){this.restartSongOnHover=t},setRestartSongOnClick(t){this.restartSongOnClick=t},setUnplayableTracks(t){this.unplayableTracks=t},setOpenLinks(t){this.openLinks=t},playAudio(t){!this.audioPreview||!t||(this.currentTrack&&this.currentTrack!==t&&this.pauseAudio(this.currentTrack),t.play(),this.currentTrack=t)},pauseAudio(t){t&&(t.pause(),this.restartSongOnHover&&(t.currentTime=0))},handleAudioClick(t){const e=t.target,s=e.lastChild||e;!s||typeof s.play!="function"||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},handleAudioHover(t){const e=t.target,s=e.lastChild||e;!this.audioPreview||!s||typeof s.play!="function"||!s.src||s.src===""||s.play().catch(r=>{console.debug("Audio play failed:",r.message)})},handleAudioLeave(t){const e=t.target,s=e.lastChild||e;!this.audioPreview||!s||typeof s.pause!="function"||!s.src||s.src===""||this.pauseAudio(s)},handleParentAudioClick(t){var r;const s=(r=t.target.firstChild)==null?void 0:r.lastChild;!this.audioPreview||!s||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},handleParentAudioHover(t){const s=t.target.parentElement.lastChild;!this.audioPreview||!s||!s.src||s.src===""||s.play().catch(r=>{console.debug("Audio play failed:",r.message)})},handleParentAudioLeave(t){const s=t.target.parentElement.lastChild;!this.audioPreview||!s||this.pauseAudio(s)},handleSpecialClick(t){var r,o,n;const s=(n=(o=(r=t.target.parentElement)==null?void 0:r.parentElement)==null?void 0:o.firstElementChild)==null?void 0:n.lastChild;!this.audioPreview||!s||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},handleSearchClick(t){var r,o;const s=(o=(r=t.target.parentElement)==null?void 0:r.firstChild)==null?void 0:o.lastChild;!this.audioPreview||!s||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},stopAllAudio(){this.currentTrack&&(this.pauseAudio(this.currentTrack),this.currentTrack=null)},async mobilePlayTrack(t,e){if(!this.audioPreview){console.log("Audio preview is disabled");return}if(!e){console.log("No preview URL available for this track");return}this.mobileCurrentAudio&&this.mobilePauseCurrentAudio(),(!this.mobileCurrentAudio||this.mobileCurrentTrackId!==t)&&(this.mobileCurrentAudio=new Audio(e),this.mobileCurrentTrackId=t,this.mobileCurrentAudio.addEventListener("ended",()=>{this.mobileIsPlaying=!1,this.mobileCurrentTrackId=null}),this.mobileCurrentAudio.addEventListener("error",s=>{console.error("Audio playback error:",s),this.mobileIsPlaying=!1,this.mobileCurrentTrackId=null}));try{await this.mobileCurrentAudio.play(),this.mobileIsPlaying=!0,console.log("Audio started playing for track:",t)}catch(s){console.error("Failed to play audio:",s),this.mobileIsPlaying=!1}},mobileStopCurrentAudio(){this.mobileCurrentAudio&&(this.mobileCurrentAudio.pause(),this.mobileCurrentAudio.currentTime=0,this.mobileCurrentAudio=null),this.mobileIsPlaying=!1,this.mobileCurrentTrackId=null},mobilePauseCurrentAudio(){this.mobileCurrentAudio&&this.mobileCurrentAudio.pause(),this.mobileIsPlaying=!1},async mobileToggleTrack(t,e){console.log("mobileToggleTrack called:",t,"previewUrl:",e),this.mobileCurrentTrackId===t&&this.mobileIsPlaying?(console.log("Track is already playing, toggling pause"),this.restartSongOnClick?this.mobileCurrentAudio&&this.mobileStopCurrentAudio():this.mobilePauseCurrentAudio()):(console.log("Starting to play track:",t),await this.mobilePlayTrack(t,e))},mobileIsTrackPlaying(t){return this.mobileCurrentTrackId===t&&this.mobileIsPlaying}}}),nt=tr("preferences",{state:()=>({viewMode:"list"}),getters:{getViewMode:t=>t.viewMode,isGridView:t=>t.viewMode==="grid",isListView:t=>t.viewMode==="list"},actions:{setViewMode(t){(t==="list"||t==="grid")&&(this.viewMode=t)},toggleViewMode(){this.viewMode=this.viewMode==="list"?"grid":"list"}}}),ie={SPOTIFY:"spotify",DEEZER:"deezer",TIDAL:"tidal",APPLE:"apple"},dt={SHORT:"short_term",MEDIUM:"medium_term",LONG:"long_term"};class vt{constructor(e,s=null,r=null){this.url=e,this.width=s,this.height=r}}class ft{constructor(e,s={}){this.service=e,this.urls=s}}class an{constructor(e){this.id=e.id,this.name=e.name,this.images=e.images||[],this.genres=e.genres||[],this.externalUrls=e.externalUrls||new ft(e.service),this.service=e.service,this.popularity=e.popularity||0,this.followers=e.followers||0,this.followed=e.followed||!1}}class cn{constructor(e){this.id=e.id,this.name=e.name,this.artists=e.artists||[],this.images=e.images||[],this.releaseDate=e.releaseDate,this.totalTracks=e.totalTracks||0,this.externalUrls=e.externalUrls||new ft(e.service),this.service=e.service,this.albumType=e.albumType||"album",this.followed=e.followed||!1}}class un{constructor(e){this.id=e.id,this.name=e.name,this.title_short=e.title_short||this.generateShortTitle(e.name),this.artists=e.artists||[],this.album=e.album,this.duration=e.duration||0,this.previewUrl=e.previewUrl,this.externalUrls=e.externalUrls||new ft(e.service),this.service=e.service,this.popularity=e.popularity||0,this.trackNumber=e.trackNumber||0,this.discNumber=e.discNumber||1,this.followed=e.followed||!1}generateShortTitle(e){if(!e)return"";let s=e.trim();const r=[/\s*-\s*[^-]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)\s*$/i,/\s*\([^)]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^)]*\)\s*$/i,/\s*\[[^\]]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^\]]*\]\s*$/i];for(const n of r)s=s.replace(n,"");const o=[/^(?:feat\.|ft\.|featuring)\s*/i,/^(?:prod\.|produced by)\s*/i];for(const n of o)s=s.replace(n,"");return s.trim()}}class dn{constructor(e){this.id=e.id,this.name=e.name,this.description=e.description||"",this.images=e.images||[],this.owner=e.owner,this.public=e.public||!1,this.totalTracks=e.totalTracks||0,this.externalUrls=e.externalUrls||new ft(e.service),this.service=e.service,this.followed=e.followed||!1,this.tracks=e.tracks||[]}}class $l{constructor(e){this.tracks=e.tracks||[],this.artists=e.artists||[],this.albums=e.albums||[],this.playlists=e.playlists||[],this.total=e.total||0}}class fn{constructor(e){this.id=e.id,this.displayName=e.displayName,this.email=e.email,this.country=e.country,this.images=e.images||[],this.followers=e.followers||0,this.service=e.service}}class Ts{constructor(){if(this.constructor===Ts)throw new Error("MusicServiceInterface is abstract and cannot be instantiated")}async authenticate(){throw new Error("authenticate() must be implemented by subclass")}async refreshToken(){throw new Error("refreshToken() must be implemented by subclass")}logout(){throw new Error("logout() must be implemented by subclass")}isAuthenticated(){throw new Error("isAuthenticated() must be implemented by subclass")}async getCurrentUser(){throw new Error("getCurrentUser() must be implemented by subclass")}async getTopTracks(e=dt.SHORT){throw new Error("getTopTracks() must be implemented by subclass")}async getTopArtists(e=dt.SHORT){throw new Error("getTopArtists() must be implemented by subclass")}async getSavedAlbums(e=0,s=20){throw new Error("getSavedAlbums() must be implemented by subclass")}async getSavedTracks(e=0,s=50){throw new Error("getSavedTracks() must be implemented by subclass")}async getFollowedArtists(e=50){throw new Error("getFollowedArtists() must be implemented by subclass")}async getPlaylists(e=0,s=50){throw new Error("getPlaylists() must be implemented by subclass")}async getPlaylist(e){throw new Error("getPlaylist() must be implemented by subclass")}async getPlaylistTracks(e,s=0,r=100){throw new Error("getPlaylistTracks() must be implemented by subclass")}async createPlaylist(e,s=""){throw new Error("createPlaylist() must be implemented by subclass")}async addTracksToPlaylist(e,s){throw new Error("addTracksToPlaylist() must be implemented by subclass")}async getArtist(e){throw new Error("getArtist() must be implemented by subclass")}async getArtistTopTracks(e,s="US",r=!0){throw new Error("getArtistTopTracks() must be implemented by subclass")}async getArtistAlbums(e,s="album",r=10){throw new Error("getArtistAlbums() must be implemented by subclass")}async getRelatedArtists(e){throw new Error("getRelatedArtists() must be implemented by subclass")}async getArtistAppearances(e,s=10){throw new Error("getArtistAppearances() must be implemented by subclass")}async getArtistPlaylists(e,s=10){throw new Error("getArtistPlaylists() must be implemented by subclass")}async getUserPlaylists(e,s=20){throw new Error("getUserPlaylists() must be implemented by subclass")}async getAlbum(e){throw new Error("getAlbum() must be implemented by subclass")}async getAlbumTracks(e){throw new Error("getAlbumTracks() must be implemented by subclass")}async getTrack(e){throw new Error("getTrack() must be implemented by subclass")}async search(e,s=["track","artist","album","playlist"],r=5){throw new Error("search() must be implemented by subclass")}async getNewReleases(e=20,s=0){throw new Error("getNewReleases() must be implemented by subclass")}async getRecommendations(e){throw new Error("getRecommendations() must be implemented by subclass")}async getCategories(e=0,s=50){throw new Error("getCategories() must be implemented by subclass")}async getCategoryPlaylists(e,s=0,r=50){throw new Error("getCategoryPlaylists() must be implemented by subclass")}async followArtist(e){throw new Error("followArtist() must be implemented by subclass")}async unfollowArtist(e){throw new Error("unfollowArtist() must be implemented by subclass")}async followAlbum(e){throw new Error("followAlbum() must be implemented by subclass")}async unfollowAlbum(e){throw new Error("unfollowAlbum() must be implemented by subclass")}async followTrack(e){throw new Error("followTrack() must be implemented by subclass")}async unfollowTrack(e){throw new Error("unfollowTrack() must be implemented by subclass")}async followPlaylist(e){throw new Error("followPlaylist() must be implemented by subclass")}async unfollowPlaylist(e){throw new Error("unfollowPlaylist() must be implemented by subclass")}async checkFollowingArtist(e){throw new Error("checkFollowingArtist() must be implemented by subclass")}async checkFollowingAlbum(e){throw new Error("checkFollowingAlbum() must be implemented by subclass")}async checkFollowingTrack(e){throw new Error("checkFollowingTrack() must be implemented by subclass")}async checkFollowingPlaylist(e){throw new Error("checkFollowingPlaylist() must be implemented by subclass")}getServiceName(){throw new Error("getServiceName() must be implemented by subclass")}getServiceType(){throw new Error("getServiceType() must be implemented by subclass")}transformTrack(e){return new un(e)}transformArtist(e){return new an(e)}transformAlbum(e){return new cn(e)}transformPlaylist(e){return new dn(e)}transformUser(e){return new fn(e)}}function Cl(t,e){return function(){return t.apply(e,arguments)}}const{toString:Qu}=Object.prototype,{getPrototypeOf:pn}=Object,{iterator:Kr,toStringTag:Pl}=Symbol,jr=(t=>e=>{const s=Qu.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),wt=t=>(t=t.toLowerCase(),e=>jr(e)===t),Gr=t=>e=>typeof e===t,{isArray:$s}=Array,Xs=Gr("undefined");function sr(t){return t!==null&&!Xs(t)&&t.constructor!==null&&!Xs(t.constructor)&&tt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xl=wt("ArrayBuffer");function Wu(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xl(t.buffer),e}const Xu=Gr("string"),tt=Gr("function"),Rl=Gr("number"),rr=t=>t!==null&&typeof t=="object",Yu=t=>t===!0||t===!1,yr=t=>{if(jr(t)!=="object")return!1;const e=pn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Pl in t)&&!(Kr in t)},Ju=t=>{if(!rr(t)||sr(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Zu=wt("Date"),ed=wt("File"),td=wt("Blob"),sd=wt("FileList"),rd=t=>rr(t)&&tt(t.pipe),od=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||tt(t.append)&&((e=jr(t))==="formdata"||e==="object"&&tt(t.toString)&&t.toString()==="[object FormData]"))},nd=wt("URLSearchParams"),[id,ld,ad,cd]=["ReadableStream","Request","Response","Headers"].map(wt),ud=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function or(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),$s(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{if(sr(t))return;const n=s?Object.getOwnPropertyNames(t):Object.keys(t),i=n.length;let a;for(r=0;r<i;r++)a=n[r],e.call(null,t[a],a,t)}}function Ml(t,e){if(sr(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,o;for(;r-- >0;)if(o=s[r],e===o.toLowerCase())return o;return null}const ss=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,El=t=>!Xs(t)&&t!==ss;function Io(){const{caseless:t}=El(this)&&this||{},e={},s=(r,o)=>{const n=t&&Ml(e,o)||o;yr(e[n])&&yr(r)?e[n]=Io(e[n],r):yr(r)?e[n]=Io({},r):$s(r)?e[n]=r.slice():e[n]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&or(arguments[r],s);return e}const dd=(t,e,s,{allOwnKeys:r}={})=>(or(e,(o,n)=>{s&&tt(o)?t[n]=Cl(o,s):t[n]=o},{allOwnKeys:r}),t),fd=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),pd=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},hd=(t,e,s,r)=>{let o,n,i;const a={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),n=o.length;n-- >0;)i=o[n],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=s!==!1&&pn(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},md=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},vd=t=>{if(!t)return null;if($s(t))return t;let e=t.length;if(!Rl(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},gd=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pn(Uint8Array)),yd=(t,e)=>{const r=(t&&t[Kr]).call(t);let o;for(;(o=r.next())&&!o.done;){const n=o.value;e.call(t,n[0],n[1])}},wd=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},bd=wt("HTMLFormElement"),kd=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,o){return r.toUpperCase()+o}),Jn=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),_d=wt("RegExp"),Il=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};or(s,(o,n)=>{let i;(i=e(o,n,t))!==!1&&(r[n]=i||o)}),Object.defineProperties(t,r)},Sd=t=>{Il(t,(e,s)=>{if(tt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(tt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Ad=(t,e)=>{const s={},r=o=>{o.forEach(n=>{s[n]=!0})};return $s(t)?r(t):r(String(t).split(e)),s},Td=()=>{},$d=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Cd(t){return!!(t&&tt(t.append)&&t[Pl]==="FormData"&&t[Kr])}const Pd=t=>{const e=new Array(10),s=(r,o)=>{if(rr(r)){if(e.indexOf(r)>=0)return;if(sr(r))return r;if(!("toJSON"in r)){e[o]=r;const n=$s(r)?[]:{};return or(r,(i,a)=>{const c=s(i,o+1);!Xs(c)&&(n[a]=c)}),e[o]=void 0,n}}return r};return s(t,0)},xd=wt("AsyncFunction"),Rd=t=>t&&(rr(t)||tt(t))&&tt(t.then)&&tt(t.catch),Ll=((t,e)=>t?setImmediate:e?((s,r)=>(ss.addEventListener("message",({source:o,data:n})=>{o===ss&&n===s&&r.length&&r.shift()()},!1),o=>{r.push(o),ss.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",tt(ss.postMessage)),Md=typeof queueMicrotask<"u"?queueMicrotask.bind(ss):typeof process<"u"&&process.nextTick||Ll,Ed=t=>t!=null&&tt(t[Kr]),D={isArray:$s,isArrayBuffer:xl,isBuffer:sr,isFormData:od,isArrayBufferView:Wu,isString:Xu,isNumber:Rl,isBoolean:Yu,isObject:rr,isPlainObject:yr,isEmptyObject:Ju,isReadableStream:id,isRequest:ld,isResponse:ad,isHeaders:cd,isUndefined:Xs,isDate:Zu,isFile:ed,isBlob:td,isRegExp:_d,isFunction:tt,isStream:rd,isURLSearchParams:nd,isTypedArray:gd,isFileList:sd,forEach:or,merge:Io,extend:dd,trim:ud,stripBOM:fd,inherits:pd,toFlatObject:hd,kindOf:jr,kindOfTest:wt,endsWith:md,toArray:vd,forEachEntry:yd,matchAll:wd,isHTMLForm:bd,hasOwnProperty:Jn,hasOwnProp:Jn,reduceDescriptors:Il,freezeMethods:Sd,toObjectSet:Ad,toCamelCase:kd,noop:Td,toFiniteNumber:$d,findKey:Ml,global:ss,isContextDefined:El,isSpecCompliantForm:Cd,toJSONObject:Pd,isAsyncFn:xd,isThenable:Rd,setImmediate:Ll,asap:Md,isIterable:Ed};function ue(t,e,s,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}D.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Dl=ue.prototype,zl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zl[t]={value:t}});Object.defineProperties(ue,zl);Object.defineProperty(Dl,"isAxiosError",{value:!0});ue.from=(t,e,s,r,o,n)=>{const i=Object.create(Dl);return D.toFlatObject(t,i,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ue.call(i,t.message,e,s,r,o),i.cause=t,i.name=t.name,n&&Object.assign(i,n),i};const Id=null;function Lo(t){return D.isPlainObject(t)||D.isArray(t)}function Ol(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function Zn(t,e,s){return t?t.concat(e).map(function(o,n){return o=Ol(o),!s&&n?"["+o+"]":o}).join(s?".":""):e}function Ld(t){return D.isArray(t)&&!t.some(Lo)}const Dd=D.toFlatObject(D,{},null,function(e){return/^is[A-Z]/.test(e)});function Qr(t,e,s){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=D.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,p){return!D.isUndefined(p[m])});const r=s.metaTokens,o=s.visitor||d,n=s.dots,i=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(o))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(D.isDate(v))return v.toISOString();if(D.isBoolean(v))return v.toString();if(!c&&D.isBlob(v))throw new ue("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(v)||D.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,m,p){let _=v;if(v&&!p&&typeof v=="object"){if(D.endsWith(m,"{}"))m=r?m:m.slice(0,-2),v=JSON.stringify(v);else if(D.isArray(v)&&Ld(v)||(D.isFileList(v)||D.endsWith(m,"[]"))&&(_=D.toArray(v)))return m=Ol(m),_.forEach(function(S,A){!(D.isUndefined(S)||S===null)&&e.append(i===!0?Zn([m],A,n):i===null?m:m+"[]",u(S))}),!1}return Lo(v)?!0:(e.append(Zn(p,m,n),u(v)),!1)}const f=[],y=Object.assign(Dd,{defaultVisitor:d,convertValue:u,isVisitable:Lo});function b(v,m){if(!D.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(v),D.forEach(v,function(_,k){(!(D.isUndefined(_)||_===null)&&o.call(e,_,D.isString(k)?k.trim():k,m,y))===!0&&b(_,m?m.concat(k):[k])}),f.pop()}}if(!D.isObject(t))throw new TypeError("data must be an object");return b(t),e}function ei(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function hn(t,e){this._pairs=[],t&&Qr(t,this,e)}const Ul=hn.prototype;Ul.append=function(e,s){this._pairs.push([e,s])};Ul.toString=function(e){const s=e?function(r){return e.call(this,r,ei)}:ei;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function zd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fl(t,e,s){if(!e)return t;const r=s&&s.encode||zd;D.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let n;if(o?n=o(e,s):n=D.isURLSearchParams(e)?e.toString():new hn(e,s).toString(r),n){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class ti{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ql={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Od=typeof URLSearchParams<"u"?URLSearchParams:hn,Ud=typeof FormData<"u"?FormData:null,Fd=typeof Blob<"u"?Blob:null,qd={isBrowser:!0,classes:{URLSearchParams:Od,FormData:Ud,Blob:Fd},protocols:["http","https","file","blob","url","data"]},mn=typeof window<"u"&&typeof document<"u",Do=typeof navigator=="object"&&navigator||void 0,Vd=mn&&(!Do||["ReactNative","NativeScript","NS"].indexOf(Do.product)<0),Nd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hd=mn&&window.location.href||"http://localhost",Bd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mn,hasStandardBrowserEnv:Vd,hasStandardBrowserWebWorkerEnv:Nd,navigator:Do,origin:Hd},Symbol.toStringTag,{value:"Module"})),Ke={...Bd,...qd};function Kd(t,e){return Qr(t,new Ke.classes.URLSearchParams,{visitor:function(s,r,o,n){return Ke.isNode&&D.isBuffer(s)?(this.append(r,s.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...e})}function jd(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Gd(t){const e={},s=Object.keys(t);let r;const o=s.length;let n;for(r=0;r<o;r++)n=s[r],e[n]=t[n];return e}function Vl(t){function e(s,r,o,n){let i=s[n++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),c=n>=s.length;return i=!i&&D.isArray(o)?o.length:i,c?(D.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!D.isObject(o[i]))&&(o[i]=[]),e(s,r,o[i],n)&&D.isArray(o[i])&&(o[i]=Gd(o[i])),!a)}if(D.isFormData(t)&&D.isFunction(t.entries)){const s={};return D.forEachEntry(t,(r,o)=>{e(jd(r),o,s,0)}),s}return null}function Qd(t,e,s){if(D.isString(t))try{return(e||JSON.parse)(t),D.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const nr={transitional:ql,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",o=r.indexOf("application/json")>-1,n=D.isObject(e);if(n&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return o?JSON.stringify(Vl(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e)||D.isReadableStream(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Kd(e,this.formSerializer).toString();if((a=D.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Qr(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return n||o?(s.setContentType("application/json",!1),Qd(e)):e}],transformResponse:[function(e){const s=this.transitional||nr.transitional,r=s&&s.forcedJSONParsing,o=this.responseType==="json";if(D.isResponse(e)||D.isReadableStream(e))return e;if(e&&D.isString(e)&&(r&&!this.responseType||o)){const i=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?ue.from(a,ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ke.classes.FormData,Blob:Ke.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],t=>{nr.headers[t]={}});const Wd=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xd=t=>{const e={};let s,r,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),s=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!s||e[s]&&Wd[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},si=Symbol("internals");function Ds(t){return t&&String(t).trim().toLowerCase()}function wr(t){return t===!1||t==null?t:D.isArray(t)?t.map(wr):String(t)}function Yd(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const Jd=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fo(t,e,s,r,o){if(D.isFunction(r))return r.call(this,e,s);if(o&&(e=s),!!D.isString(e)){if(D.isString(r))return e.indexOf(r)!==-1;if(D.isRegExp(r))return r.test(e)}}function Zd(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function ef(t,e){const s=D.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(o,n,i){return this[r].call(this,e,o,n,i)},configurable:!0})})}let st=class{constructor(e){e&&this.set(e)}set(e,s,r){const o=this;function n(a,c,u){const d=Ds(c);if(!d)throw new Error("header name must be a non-empty string");const f=D.findKey(o,d);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||c]=wr(a))}const i=(a,c)=>D.forEach(a,(u,d)=>n(u,d,c));if(D.isPlainObject(e)||e instanceof this.constructor)i(e,s);else if(D.isString(e)&&(e=e.trim())&&!Jd(e))i(Xd(e),s);else if(D.isObject(e)&&D.isIterable(e)){let a={},c,u;for(const d of e){if(!D.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(c=a[u])?D.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}i(a,s)}else e!=null&&n(s,e,r);return this}get(e,s){if(e=Ds(e),e){const r=D.findKey(this,e);if(r){const o=this[r];if(!s)return o;if(s===!0)return Yd(o);if(D.isFunction(s))return s.call(this,o,r);if(D.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Ds(e),e){const r=D.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||fo(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let o=!1;function n(i){if(i=Ds(i),i){const a=D.findKey(r,i);a&&(!s||fo(r,r[a],a,s))&&(delete r[a],o=!0)}}return D.isArray(e)?e.forEach(n):n(e),o}clear(e){const s=Object.keys(this);let r=s.length,o=!1;for(;r--;){const n=s[r];(!e||fo(this,this[n],n,e,!0))&&(delete this[n],o=!0)}return o}normalize(e){const s=this,r={};return D.forEach(this,(o,n)=>{const i=D.findKey(r,n);if(i){s[i]=wr(o),delete s[n];return}const a=e?Zd(n):String(n).trim();a!==n&&delete s[n],s[a]=wr(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return D.forEach(this,(r,o)=>{r!=null&&r!==!1&&(s[o]=e&&D.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[si]=this[si]={accessors:{}}).accessors,o=this.prototype;function n(i){const a=Ds(i);r[a]||(ef(o,i),r[a]=!0)}return D.isArray(e)?e.forEach(n):n(e),this}};st.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(st.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});D.freezeMethods(st);function po(t,e){const s=this||nr,r=e||s,o=st.from(r.headers);let n=r.data;return D.forEach(t,function(a){n=a.call(s,n,o.normalize(),e?e.status:void 0)}),o.normalize(),n}function Nl(t){return!!(t&&t.__CANCEL__)}function Cs(t,e,s){ue.call(this,t??"canceled",ue.ERR_CANCELED,e,s),this.name="CanceledError"}D.inherits(Cs,ue,{__CANCEL__:!0});function Hl(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new ue("Request failed with status code "+s.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function tf(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function sf(t,e){t=t||10;const s=new Array(t),r=new Array(t);let o=0,n=0,i;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[n];i||(i=u),s[o]=c,r[o]=u;let f=n,y=0;for(;f!==o;)y+=s[f++],f=f%t;if(o=(o+1)%t,o===n&&(n=(n+1)%t),u-i<e)return;const b=d&&u-d;return b?Math.round(y*1e3/b):void 0}}function rf(t,e){let s=0,r=1e3/e,o,n;const i=(u,d=Date.now())=>{s=d,o=null,n&&(clearTimeout(n),n=null),t(...u)};return[(...u)=>{const d=Date.now(),f=d-s;f>=r?i(u,d):(o=u,n||(n=setTimeout(()=>{n=null,i(o)},r-f)))},()=>o&&i(o)]}const Er=(t,e,s=3)=>{let r=0;const o=sf(50,250);return rf(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,c=i-r,u=o(c),d=i<=a;r=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&d?(a-i)/u:void 0,event:n,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},s)},ri=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},oi=t=>(...e)=>D.asap(()=>t(...e)),of=Ke.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ke.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ke.origin),Ke.navigator&&/(msie|trident)/i.test(Ke.navigator.userAgent)):()=>!0,nf=Ke.hasStandardBrowserEnv?{write(t,e,s,r,o,n){const i=[t+"="+encodeURIComponent(e)];D.isNumber(s)&&i.push("expires="+new Date(s).toGMTString()),D.isString(r)&&i.push("path="+r),D.isString(o)&&i.push("domain="+o),n===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lf(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function af(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Bl(t,e,s){let r=!lf(e);return t&&(r||s==!1)?af(t,e):e}const ni=t=>t instanceof st?{...t}:t;function as(t,e){e=e||{};const s={};function r(u,d,f,y){return D.isPlainObject(u)&&D.isPlainObject(d)?D.merge.call({caseless:y},u,d):D.isPlainObject(d)?D.merge({},d):D.isArray(d)?d.slice():d}function o(u,d,f,y){if(D.isUndefined(d)){if(!D.isUndefined(u))return r(void 0,u,f,y)}else return r(u,d,f,y)}function n(u,d){if(!D.isUndefined(d))return r(void 0,d)}function i(u,d){if(D.isUndefined(d)){if(!D.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const c={url:n,method:n,data:n,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,d,f)=>o(ni(u),ni(d),f,!0)};return D.forEach(Object.keys({...t,...e}),function(d){const f=c[d]||o,y=f(t[d],e[d],d);D.isUndefined(y)&&f!==a||(s[d]=y)}),s}const Kl=t=>{const e=as({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:n,headers:i,auth:a}=e;e.headers=i=st.from(i),e.url=Fl(Bl(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(D.isFormData(s)){if(Ke.hasStandardBrowserEnv||Ke.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Ke.hasStandardBrowserEnv&&(r&&D.isFunction(r)&&(r=r(e)),r||r!==!1&&of(e.url))){const u=o&&n&&nf.read(n);u&&i.set(o,u)}return e},cf=typeof XMLHttpRequest<"u",uf=cf&&function(t){return new Promise(function(s,r){const o=Kl(t);let n=o.data;const i=st.from(o.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=o,d,f,y,b,v;function m(){b&&b(),v&&v(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let p=new XMLHttpRequest;p.open(o.method.toUpperCase(),o.url,!0),p.timeout=o.timeout;function _(){if(!p)return;const S=st.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:t,request:p};Hl(function(I){s(I),m()},function(I){r(I),m()},x),p=null}"onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(_)},p.onabort=function(){p&&(r(new ue("Request aborted",ue.ECONNABORTED,t,p)),p=null)},p.onerror=function(){r(new ue("Network Error",ue.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let A=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const x=o.transitional||ql;o.timeoutErrorMessage&&(A=o.timeoutErrorMessage),r(new ue(A,x.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,t,p)),p=null},n===void 0&&i.setContentType(null),"setRequestHeader"in p&&D.forEach(i.toJSON(),function(A,x){p.setRequestHeader(x,A)}),D.isUndefined(o.withCredentials)||(p.withCredentials=!!o.withCredentials),a&&a!=="json"&&(p.responseType=o.responseType),u&&([y,v]=Er(u,!0),p.addEventListener("progress",y)),c&&p.upload&&([f,b]=Er(c),p.upload.addEventListener("progress",f),p.upload.addEventListener("loadend",b)),(o.cancelToken||o.signal)&&(d=S=>{p&&(r(!S||S.type?new Cs(null,t,p):S),p.abort(),p=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const k=tf(o.url);if(k&&Ke.protocols.indexOf(k)===-1){r(new ue("Unsupported protocol "+k+":",ue.ERR_BAD_REQUEST,t));return}p.send(n||null)})},df=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,o;const n=function(u){if(!o){o=!0,a();const d=u instanceof Error?u:this.reason;r.abort(d instanceof ue?d:new Cs(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,n(new ue(`timeout ${e} of ms exceeded`,ue.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(n):u.removeEventListener("abort",n)}),t=null)};t.forEach(u=>u.addEventListener("abort",n));const{signal:c}=r;return c.unsubscribe=()=>D.asap(a),c}},ff=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,o;for(;r<s;)o=r+e,yield t.slice(r,o),r=o},pf=async function*(t,e){for await(const s of hf(t))yield*ff(s,e)},hf=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},ii=(t,e,s,r)=>{const o=pf(t,e);let n=0,i,a=c=>{i||(i=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await o.next();if(u){a(),c.close();return}let f=d.byteLength;if(s){let y=n+=f;s(y)}c.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(c){return a(c),o.return()}},{highWaterMark:2})},Wr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jl=Wr&&typeof ReadableStream=="function",mf=Wr&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Gl=(t,...e)=>{try{return!!t(...e)}catch{return!1}},vf=jl&&Gl(()=>{let t=!1;const e=new Request(Ke.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),li=64*1024,zo=jl&&Gl(()=>D.isReadableStream(new Response("").body)),Ir={stream:zo&&(t=>t.body)};Wr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ir[e]&&(Ir[e]=D.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new ue(`Response type '${e}' is not supported`,ue.ERR_NOT_SUPPORT,r)})})})(new Response);const gf=async t=>{if(t==null)return 0;if(D.isBlob(t))return t.size;if(D.isSpecCompliantForm(t))return(await new Request(Ke.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(D.isArrayBufferView(t)||D.isArrayBuffer(t))return t.byteLength;if(D.isURLSearchParams(t)&&(t=t+""),D.isString(t))return(await mf(t)).byteLength},yf=async(t,e)=>{const s=D.toFiniteNumber(t.getContentLength());return s??gf(e)},wf=Wr&&(async t=>{let{url:e,method:s,data:r,signal:o,cancelToken:n,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:y}=Kl(t);u=u?(u+"").toLowerCase():"text";let b=df([o,n&&n.toAbortSignal()],i),v;const m=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let p;try{if(c&&vf&&s!=="get"&&s!=="head"&&(p=await yf(d,r))!==0){let x=new Request(e,{method:"POST",body:r,duplex:"half"}),P;if(D.isFormData(r)&&(P=x.headers.get("content-type"))&&d.setContentType(P),x.body){const[I,T]=ri(p,Er(oi(c)));r=ii(x.body,li,I,T)}}D.isString(f)||(f=f?"include":"omit");const _="credentials"in Request.prototype;v=new Request(e,{...y,signal:b,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:_?f:void 0});let k=await fetch(v,y);const S=zo&&(u==="stream"||u==="response");if(zo&&(a||S&&m)){const x={};["status","statusText","headers"].forEach(z=>{x[z]=k[z]});const P=D.toFiniteNumber(k.headers.get("content-length")),[I,T]=a&&ri(P,Er(oi(a),!0))||[];k=new Response(ii(k.body,li,I,()=>{T&&T(),m&&m()}),x)}u=u||"text";let A=await Ir[D.findKey(Ir,u)||"text"](k,t);return!S&&m&&m(),await new Promise((x,P)=>{Hl(x,P,{data:A,headers:st.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:v})})}catch(_){throw m&&m(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new ue("Network Error",ue.ERR_NETWORK,t,v),{cause:_.cause||_}):ue.from(_,_&&_.code,t,v)}}),Oo={http:Id,xhr:uf,fetch:wf};D.forEach(Oo,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ai=t=>`- ${t}`,bf=t=>D.isFunction(t)||t===null||t===!1,Ql={getAdapter:t=>{t=D.isArray(t)?t:[t];const{length:e}=t;let s,r;const o={};for(let n=0;n<e;n++){s=t[n];let i;if(r=s,!bf(s)&&(r=Oo[(i=String(s)).toLowerCase()],r===void 0))throw new ue(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+n]=r}if(!r){const n=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=e?n.length>1?`since :
`+n.map(ai).join(`
`):" "+ai(n[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Oo};function ho(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Cs(null,t)}function ci(t){return ho(t),t.headers=st.from(t.headers),t.data=po.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ql.getAdapter(t.adapter||nr.adapter)(t).then(function(r){return ho(t),r.data=po.call(t,t.transformResponse,r),r.headers=st.from(r.headers),r},function(r){return Nl(r)||(ho(t),r&&r.response&&(r.response.data=po.call(t,t.transformResponse,r.response),r.response.headers=st.from(r.response.headers))),Promise.reject(r)})}const Wl="1.11.0",Xr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xr[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ui={};Xr.transitional=function(e,s,r){function o(n,i){return"[Axios v"+Wl+"] Transitional option '"+n+"'"+i+(r?". "+r:"")}return(n,i,a)=>{if(e===!1)throw new ue(o(i," has been removed"+(s?" in "+s:"")),ue.ERR_DEPRECATED);return s&&!ui[i]&&(ui[i]=!0,console.warn(o(i," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(n,i,a):!0}};Xr.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function kf(t,e,s){if(typeof t!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const n=r[o],i=e[n];if(i){const a=t[n],c=a===void 0||i(a,n,t);if(c!==!0)throw new ue("option "+n+" must be "+c,ue.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ue("Unknown option "+n,ue.ERR_BAD_OPTION)}}const br={assertOptions:kf,validators:Xr},At=br.validators;let ns=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ti,response:new ti}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const n=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?n&&!String(r.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+n):r.stack=n}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=as(this.defaults,s);const{transitional:r,paramsSerializer:o,headers:n}=s;r!==void 0&&br.assertOptions(r,{silentJSONParsing:At.transitional(At.boolean),forcedJSONParsing:At.transitional(At.boolean),clarifyTimeoutError:At.transitional(At.boolean)},!1),o!=null&&(D.isFunction(o)?s.paramsSerializer={serialize:o}:br.assertOptions(o,{encode:At.function,serialize:At.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),br.assertOptions(s,{baseUrl:At.spelling("baseURL"),withXsrfToken:At.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let i=n&&D.merge(n.common,n[s.method]);n&&D.forEach(["delete","get","head","post","put","patch","common"],v=>{delete n[v]}),s.headers=st.concat(i,n);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(s)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,f=0,y;if(!c){const v=[ci.bind(this),void 0];for(v.unshift(...a),v.push(...u),y=v.length,d=Promise.resolve(s);f<y;)d=d.then(v[f++],v[f++]);return d}y=a.length;let b=s;for(f=0;f<y;){const v=a[f++],m=a[f++];try{b=v(b)}catch(p){m.call(this,p);break}}try{d=ci.call(this,b)}catch(v){return Promise.reject(v)}for(f=0,y=u.length;f<y;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=as(this.defaults,e);const s=Bl(e.baseURL,e.url,e.allowAbsoluteUrls);return Fl(s,e.params,e.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(e){ns.prototype[e]=function(s,r){return this.request(as(r||{},{method:e,url:s,data:(r||{}).data}))}});D.forEach(["post","put","patch"],function(e){function s(r){return function(n,i,a){return this.request(as(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ns.prototype[e]=s(),ns.prototype[e+"Form"]=s(!0)});let _f=class Xl{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(n){s=n});const r=this;this.promise.then(o=>{if(!r._listeners)return;let n=r._listeners.length;for(;n-- >0;)r._listeners[n](o);r._listeners=null}),this.promise.then=o=>{let n;const i=new Promise(a=>{r.subscribe(a),n=a}).then(o);return i.cancel=function(){r.unsubscribe(n)},i},e(function(n,i,a){r.reason||(r.reason=new Cs(n,i,a),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Xl(function(o){e=o}),cancel:e}}};function Sf(t){return function(s){return t.apply(null,s)}}function Af(t){return D.isObject(t)&&t.isAxiosError===!0}const Uo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Uo).forEach(([t,e])=>{Uo[e]=t});function Yl(t){const e=new ns(t),s=Cl(ns.prototype.request,e);return D.extend(s,ns.prototype,e,{allOwnKeys:!0}),D.extend(s,e,null,{allOwnKeys:!0}),s.create=function(o){return Yl(as(t,o))},s}const $e=Yl(nr);$e.Axios=ns;$e.CanceledError=Cs;$e.CancelToken=_f;$e.isCancel=Nl;$e.VERSION=Wl;$e.toFormData=Qr;$e.AxiosError=ue;$e.Cancel=$e.CanceledError;$e.all=function(e){return Promise.all(e)};$e.spread=Sf;$e.isAxiosError=Af;$e.mergeConfig=as;$e.AxiosHeaders=st;$e.formToJSON=t=>Vl(D.isHTMLForm(t)?new FormData(t):t);$e.getAdapter=Ql.getAdapter;$e.HttpStatusCode=Uo;$e.default=$e;const{Axios:z7,AxiosError:O7,CanceledError:U7,isCancel:F7,CancelToken:q7,VERSION:V7,all:N7,Cancel:H7,isAxiosError:B7,spread:K7,toFormData:j7,AxiosHeaders:G7,HttpStatusCode:Q7,formToJSON:W7,getAdapter:X7,mergeConfig:Y7}=$e;class Tf extends Ts{constructor(){super(),this.baseURL="https://api.spotify.com/v1",this.serviceType=ie.SPOTIFY}getServiceName(){return"Spotify"}getServiceType(){return this.serviceType}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,...s.headers},...s};try{return await $e(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,$e(o);throw i}}async refreshToken(){const e=this.getUsername(),s=await $e.get(`/spotify/refresh_token/${e}`);if(s.status===200)return s.data;throw new Error("Failed to refresh token")}async authenticate(){window.location.href="/spotify/login"}logout(){window.location.href="/spotify/logout"}isAuthenticated(){return!!this.getToken()}async getCurrentUser(){var s,r;const e=await this.request("/me");return this.transformUser({id:e.data.id,displayName:e.data.display_name,email:e.data.email,country:e.data.country,images:((s=e.data.images)==null?void 0:s.map(o=>new vt(o.url,o.width,o.height)))||[],followers:((r=e.data.followers)==null?void 0:r.total)||0,service:this.serviceType})}async getTopTracks(e=dt.SHORT){return(await this.request(`/me/top/tracks?time_range=${e}`)).data.items.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTopArtists(e=dt.SHORT){return(await this.request(`/me/top/artists?time_range=${e}`)).data.items.map(r=>this.transformArtist({...r,service:this.serviceType}))}async getSavedAlbums(e=0,s=20){return(await this.request(`/me/albums?offset=${e}&limit=${s}`)).data.items.map(o=>({...o,album:this.transformAlbum({...o.album,service:this.serviceType})}))}async getSavedTracks(e=0,s=50){const r=await this.request(`/me/tracks?offset=${e}&limit=${s}`);return{items:r.data.items.map(n=>({...n,track:this.transformTrack({...n.track,service:this.serviceType})})),total:r.data.total}}async getFollowedArtists(e=50){return(await this.request(`/me/following?type=artist&limit=${e}`)).data.artists.items.map(r=>this.transformArtist({...r,service:this.serviceType}))}async getPlaylists(e=0,s=50){return(await this.request(`/users/spotify/playlists?fields=items(name,id,images,owner,public)&limit=${s}&offset=${e}`)).data.items.map(o=>this.transformPlaylist({...o,service:this.serviceType}))}async getPlaylist(e){const s=await this.request(`/playlists/${e}`);return this.transformPlaylist({...s.data,service:this.serviceType})}async getPlaylistTracks(e,s=0,r=100){return(await this.request(`/playlists/${e}/tracks?offset=${s}&limit=${r}`)).data.items.map(n=>this.transformTrack({...n.track,service:this.serviceType}))}async getGenrePlaylist(e){const s=await this.request(`/playlists/${e}`),r=await this.request(`/playlists/${e}/tracks?limit=50`);console.log("Spotify getGenrePlaylist - playlist:",s.data.name),console.log("Spotify getGenrePlaylist - tracks count:",r.data.items.length);const o={...s.data,tracks:{items:r.data.items,total:r.data.total}};return this.transformPlaylist(o)}async createPlaylist(e,s=""){const r=this.getUsername(),o=await this.request(`/users/${r}/playlists`,{method:"POST",data:{name:e,description:s}});return this.transformPlaylist({...o.data,service:this.serviceType})}async addTracksToPlaylist(e,s){const r=s.map(o=>`spotify:track:${o}`).join(",");await this.request(`/playlists/${e}/tracks?uris=${r}`,{method:"POST"})}async getArtist(e){const s=await this.request(`/artists/${e}`);return this.transformArtist({...s.data,service:this.serviceType})}async getArtistTopTracks(e,s="US"){const r=this.getCountry();return(await this.request(`/artists/${e}/top-tracks?market=${s}${r}`)).data.tracks.map(n=>this.transformTrack({...n,service:this.serviceType}))}async getArtistAlbums(e,s="album",r=10){return(await this.request(`/artists/${e}/albums?include_groups=${s}&limit=${r}`)).data.items.map(n=>this.transformAlbum({...n,service:this.serviceType}))}async getArtistSingles(e,s=10){return(await this.request(`/artists/${e}/albums?include_groups=single&limit=${s}`)).data.items.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getArtistAppearances(e,s=10){return(await this.request(`/artists/${e}/albums?include_groups=appears_on&limit=${s}`)).data.items.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getArtistPlaylists(e,s=10){return console.warn("getArtistPlaylists not fully implemented for Spotify service (returning empty array for now)"),[]}async getRelatedArtists(e){try{return(await this.request(`/artists/${e}/related-artists`)).data.artists.map(r=>this.transformArtist({...r,service:this.serviceType}))}catch(s){return console.warn("Failed to fetch related artists:",s.message),[]}}async getAlbum(e){const s=await this.request(`/albums/${e}`);return this.transformAlbum({...s.data,service:this.serviceType})}async getAlbumTracks(e){return(await this.request(`/albums/${e}/tracks`)).data.items.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTrack(e){const s=await this.request(`/tracks/${e}`);return this.transformTrack({...s.data,service:this.serviceType})}async search(e,s=["track","artist","album","playlist"],r=5){var n,i,a,c,u;const o=await this.request(`/search/?q=${encodeURIComponent(e)}&type=${s.join(",")}&limit=${r}`);return new $l({tracks:((n=o.data.tracks)==null?void 0:n.items.map(d=>this.transformTrack({...d,service:this.serviceType})))||[],artists:((i=o.data.artists)==null?void 0:i.items.map(d=>this.transformArtist({...d,service:this.serviceType})))||[],albums:((a=o.data.albums)==null?void 0:a.items.map(d=>this.transformAlbum({...d,service:this.serviceType})))||[],playlists:((c=o.data.playlists)==null?void 0:c.items.map(d=>this.transformPlaylist({...d,service:this.serviceType})))||[],total:((u=o.data.tracks)==null?void 0:u.total)||0})}async getNewReleases(e=20,s=0){return(await this.request(`/browse/new-releases?limit=${e}&offset=${s}`)).data.albums.items.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getRecommendations(e){const s=Object.entries(e).filter(([o,n])=>n).map(([o,n])=>`${o}=${n}`).join("&");return(await this.request(`/recommendations?${s}`)).data.tracks.map(o=>this.transformTrack({...o,service:this.serviceType}))}async getCategories(e=0,s=50){const r=await this.request(`/browse/categories?offset=${e}&limit=${s}`);return{items:r.data.categories.items.map(o=>({id:o.id,name:o.name,icons:o.icons,href:o.href})),total:r.data.categories.total,next:r.data.categories.next,previous:r.data.categories.previous}}async getCategoryPlaylists(e,s=0,r=50){const o=await this.request(`/browse/categories/${e}/playlists?offset=${s}&limit=${r}`);return{items:o.data.playlists.items.map(n=>this.transformPlaylist({...n,service:this.serviceType})),total:o.data.playlists.total,next:o.data.playlists.next,previous:o.data.playlists.previous}}async getGenres(e=0,s=50){try{let r;const o=["/src/data/the_sound_of.json","/data/the_sound_of.json","./data/the_sound_of.json","../data/the_sound_of.json"];for(const a of o)try{if(r=await fetch(a),r.ok){console.log(" Found genres file at:",a);break}}catch(c){console.log(" Failed to load from:",a,c.message)}if(!r||!r.ok)throw new Error("Failed to load genres data from any path");const n=await r.json();return{items:n.slice(e,e+s).map(a=>({id:a.id,name:a.name,type:"genre",icons:[],href:`https://open.spotify.com/genre/${a.id}`,description:a.name,images:[]})),total:n.length,next:e+s<n.length?`/genres?offset=${e+s}&limit=${s}`:null,previous:e>0?`/genres?offset=${Math.max(0,e-s)}&limit=${s}`:null}}catch(r){throw console.error("Spotify getGenres error:",r),r}}async followArtist(e){await this.request(`/me/following?type=artist&ids=${e}`,{method:"PUT"})}async unfollowArtist(e){await this.request(`/me/following?type=artist&ids=${e}`,{method:"DELETE"})}async followAlbum(e){await this.request(`/me/albums?ids=${e}`,{method:"PUT"})}async unfollowAlbum(e){await this.request(`/me/albums?ids=${e}`,{method:"DELETE"})}async followTrack(e){await this.request(`/me/tracks?ids=${e}`,{method:"PUT"})}async unfollowTrack(e){await this.request(`/me/tracks?ids=${e}`,{method:"DELETE"})}async followPlaylist(e){await this.request(`/playlists/${e}/followers`,{method:"PUT"})}async unfollowPlaylist(e){await this.request(`/playlists/${e}/followers`,{method:"DELETE"})}async checkFollowingArtist(e){return(await this.request(`/me/following/contains?type=artist&ids=${e}`)).data[0]}async checkFollowingAlbum(e){return(await this.request(`/me/albums/contains?ids=${e}`)).data[0]}async checkFollowingTrack(e){return(await this.request(`/me/tracks/contains?ids=${e}`)).data[0]}async checkFollowingPlaylist(e){const s=this.getUsername();return(await this.request(`/playlists/${e}/followers/contains?ids=${s}`)).data[0]}transformTrack(e){var s;return new un({id:e.id,name:e.name,artists:((s=e.artists)==null?void 0:s.map(r=>this.transformArtist({...r,service:this.serviceType})))||[],album:e.album?this.transformAlbum({...e.album,service:this.serviceType}):null,duration:e.duration_ms||e.duration,previewUrl:e.preview_url,externalUrls:new ft(this.serviceType,e.external_urls||{}),service:this.serviceType,popularity:e.popularity||0,trackNumber:e.track_number||0,discNumber:e.disc_number||1,followed:e.followed||!1})}transformArtist(e){var s,r;return new an({id:e.id,name:e.name,images:((s=e.images)==null?void 0:s.map(o=>new vt(o.url,o.width,o.height)))||[],genres:e.genres||[],externalUrls:new ft(this.serviceType,e.external_urls||{}),service:this.serviceType,popularity:e.popularity||0,followers:((r=e.followers)==null?void 0:r.total)||0,followed:e.followed||!1})}transformAlbum(e){var s,r;return new cn({id:e.id,name:e.name,artists:((s=e.artists)==null?void 0:s.map(o=>this.transformArtist({...o,service:this.serviceType})))||[],images:((r=e.images)==null?void 0:r.map(o=>new vt(o.url,o.width,o.height)))||[],releaseDate:e.release_date,totalTracks:e.total_tracks||0,externalUrls:new ft(this.serviceType,e.external_urls||{}),service:this.serviceType,albumType:e.album_type||"album",followed:e.followed||!1})}transformPlaylist(e){var s,r,o,n;return new dn({id:e.id,name:e.name,description:e.description||"",images:((s=e.images)==null?void 0:s.map(i=>new vt(i.url,i.width,i.height)))||[],owner:e.owner,public:e.public||!1,totalTracks:((r=e.tracks)==null?void 0:r.total)||0,externalUrls:new ft(this.serviceType,e.external_urls||{}),service:this.serviceType,followed:e.followed||!1,tracks:((n=(o=e.tracks)==null?void 0:o.items)==null?void 0:n.map(i=>this.transformTrack({...i.track,service:this.serviceType})))||[]})}transformUser(e){return new fn({id:e.id,displayName:e.displayName,email:e.email,country:e.country,images:e.images,followers:e.followers,service:this.serviceType})}async getUserPlaylists(e,s=20){try{let r;e?r=`/users/${e}/playlists?limit=${s}`:r=`/me/playlists?limit=${s}`;const n=(await this.request(r)).data.items||[];for(const i of n)i.tracks=await this.transformTrack({});return n.map(i=>this.transformPlaylist({...i,service:this.serviceType}))}catch(r){throw console.error("Spotify getUserPlaylists error:",r),r}}}const ce=Js({visibleElements:new Map,componentRefs:new Map,activeSection:null,activeParent:null,pendingVisibility:new Map});function Le(){return{registerComponent:(m,p)=>{console.log("registerComponent called for:",m),console.log("Current pending requests:",Array.from(ce.pendingVisibility.keys()));const _=ce.componentRefs.has(m);ce.componentRefs.set(m,p),console.log(_?"Component already registered, updating ref:":"Component newly registered:",m),setTimeout(()=>{const k=ce.pendingVisibility.get(m);console.log("Looking for pending request for key:",m,"Found:",k),k?(console.log("Processing pending request for:",m,k),k.shouldShow?(console.log("Showing component from pending request:",m),p.value.classList.contains("row")?p.value.style.display="flex":p.value.classList.contains("deeper-header")?p.value.style.display="grid":p.value.style.display="block",ce.visibleElements.set(m,!0),setTimeout(()=>{if(p.value){console.log("Scrolling to component from pending request:",m);try{p.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(S){console.log("scrollIntoView failed, trying alternative method:",S);let A=p.value.parentElement;for(;A&&A!==document.body;){const x=window.getComputedStyle(A);if(x.overflow==="auto"||x.overflow==="scroll"||x.overflowY==="auto"||x.overflowY==="scroll"){const P=p.value.getBoundingClientRect(),I=A.getBoundingClientRect(),T=A.scrollTop+P.top-I.top;A.scrollTo({top:T,behavior:"smooth"});break}A=A.parentElement}if(!A||A===document.body){const x=p.value.getBoundingClientRect();window.scrollTo({top:window.pageYOffset+x.top-100,behavior:"smooth"})}}}else console.log("Component ref not available for scrolling from pending request:",m)},100)):ce.visibleElements.set(m,!1),ce.pendingVisibility.delete(m)):ce.visibleElements.set(m,!1)},10)},unregisterComponent:m=>{ce.componentRefs.delete(m),ce.visibleElements.delete(m),ce.pendingVisibility.delete(m)},showComponent:m=>{console.log("showComponent called for:",m),console.log("Registered components at showComponent time:",Array.from(ce.componentRefs.keys()));const p=ce.componentRefs.get(m);console.log("Component ref found:",!!p,"Component ref value:",!!(p!=null&&p.value)),p&&p.value?(console.log("Component found, showing:",m),p.value.classList.contains("row")?p.value.style.display="flex":p.value.classList.contains("deeper-header")?p.value.style.display="grid":p.value.style.display="block",ce.visibleElements.set(m,!0),setTimeout(()=>{if(p.value){console.log("Scrolling to component:",m);try{p.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(_){console.log("scrollIntoView failed, trying alternative method:",_);let k=p.value.parentElement;for(;k&&k!==document.body;){const S=window.getComputedStyle(k);if(S.overflow==="auto"||S.overflow==="scroll"||S.overflowY==="auto"||S.overflowY==="scroll"){const A=p.value.getBoundingClientRect(),x=k.getBoundingClientRect(),P=k.scrollTop+A.top-x.top;k.scrollTo({top:P,behavior:"smooth"});break}k=k.parentElement}if(!k||k===document.body){const S=p.value.getBoundingClientRect();window.scrollTo({top:window.pageYOffset+S.top-100,behavior:"smooth"})}}}else console.log("Component ref not available for scrolling:",m)},100)):(console.log("Component not found, storing pending request for:",m),ce.pendingVisibility.set(m,{shouldShow:!0}),console.log("Pending requests after storing:",Array.from(ce.pendingVisibility.keys())))},hideComponent:m=>{const p=ce.componentRefs.get(m);p&&p.value?(p.value.style.display="none",ce.visibleElements.set(m,!1)):ce.pendingVisibility.set(m,{shouldShow:!1})},showSection:(m,p=null)=>{ce.activeSection=m,ce.activeParent=p;for(const[_,k]of ce.componentRefs)k&&k.value&&(k.value.style.display="none",ce.visibleElements.set(_,!1));for(const[_,k]of ce.componentRefs)if(_.startsWith(m)){if(p&&!_.includes(p))continue;k&&k.value&&(k.value.style.display="block",ce.visibleElements.set(_,!0))}},hideSection:m=>{for(const[p,_]of ce.componentRefs)p.startsWith(m)&&_&&_.value&&(_.value.style.display="none",ce.visibleElements.set(p,!1))},hideAllComponents:()=>{for(const[m,p]of ce.componentRefs)p&&p.value&&(p.value.style.display="none",ce.visibleElements.set(m,!1))},scrollToComponent:m=>{const p=ce.componentRefs.get(m);if(p&&p.value){console.log("Manual scroll to component:",m),console.log("Component element:",p.value),console.log("Component position:",p.value.getBoundingClientRect());try{p.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(_){console.log("scrollIntoView failed, trying alternative method:",_);let k=p.value.parentElement;for(;k&&k!==document.body;){const S=window.getComputedStyle(k);if(S.overflow==="auto"||S.overflow==="scroll"||S.overflowY==="auto"||S.overflowY==="scroll"){const A=p.value.getBoundingClientRect(),x=k.getBoundingClientRect(),P=k.scrollTop+A.top-x.top;k.scrollTo({top:P,behavior:"smooth"});break}k=k.parentElement}if(!k||k===document.body){const S=p.value.getBoundingClientRect();window.scrollTo({top:window.pageYOffset+S.top-100,behavior:"smooth"})}}}else console.log("Component ref not available for manual scroll:",m)},isComponentVisible:m=>ce.visibleElements.get(m)||!1,isComponentRegistered:m=>ce.componentRefs.has(m),getActiveSection:()=>ce.activeSection,getActiveParent:()=>ce.activeParent,clearAll:()=>{ce.visibleElements.clear(),ce.componentRefs.clear(),ce.pendingVisibility.clear(),ce.activeSection=null,ce.activeParent=null},getRegisteredComponents:()=>Array.from(ce.componentRefs.keys()),getPendingRequests:()=>Array.from(ce.pendingVisibility.entries()),visibilityState:ce}}const $f=Object.freeze(Object.defineProperty({__proto__:null,useVisibilityManager:Le},Symbol.toStringTag,{value:"Module"})),me=tr("deeper",{state:()=>({currentSection:"search",loading:{tracks:new Set,artists:new Set,albums:new Set,playlists:new Set,"user-playlists":new Set,seedArtists:new Set,seedTracks:new Set,genres:new Set},isGloballyLoading:!1,sections:{yourPlaylists:[],topArtists:[],topArtists6:[],topArtistsAll:[],topTracks:[],topTracks6:[],topTracksAll:[],savedAlbums:[],savedTracks:[],followedArtists:[],newReleases:[],spotifyPlaylists:[],categories:[],categoryPlaylists:[],genres:[],genrePlaylists:[],genreContent:[],search:[],artistDetails:[]},cache:{tracks:new Map,artists:new Map,albums:new Map,playlists:new Map,seedArtists:new Map,seedTracks:new Map,categories:new Map,genres:new Map}}),getters:{getSectionData:t=>e=>t.sections[e]||[],getCachedTrack:t=>e=>t.cache.tracks.get(e),getCachedArtist:t=>e=>t.cache.artists.get(e),getCachedAlbum:t=>e=>t.cache.albums.get(e),getCachedPlaylist:t=>e=>t.cache.playlists.get(e),getCachedSeedArtist:t=>e=>t.cache.seedArtists.get(e),getCachedSeedTrack:t=>e=>t.cache.seedTracks.get(e),getCachedCategory:t=>e=>t.cache.categories.get(e),getCachedGenre:t=>e=>t.cache.genres.get(e),isTrackLoading:t=>e=>t.loading.tracks.has(e),isArtistLoading:t=>e=>t.loading.artists.has(e),isAlbumLoading:t=>e=>t.loading.albums.has(e),isPlaylistLoading:t=>e=>t.loading.playlists.has(e),isSeedArtistLoading:t=>e=>t.loading.seedArtists.has(e),isSeedTrackLoading:t=>e=>t.loading.seedTracks.has(e),getIsGloballyLoading:t=>t.isGloballyLoading},actions:{setCurrentSection(t){this.currentSection=t,console.log("Current section set to:",t)},setLoading(t,e,s){s?this.loading[t].add(e):this.loading[t].delete(e)},clearLoading(t){this.loading[t].clear()},clearAllLoading(){Object.keys(this.loading).forEach(t=>{this.loading[t].clear()})},setGlobalLoading(t){this.isGloballyLoading=t},addToSection(t,e){if(console.log("addToSection called with sectionName:",t,"item:",e.id,"type:",e.type,"parentKey:",e.parentKey),this.sections[t]||(this.sections[t]=[]),e.parentKey!==void 0&&this.sections[t].findIndex(o=>o.id===e.id&&o.type===e.type&&(o.parentKey||null)===(e.parentKey||null))!==-1){console.log("Item already exists in section, skipping");return}this.sections[t].findIndex(r=>r.id===e.id)===-1?(this.sections[t].push(e),console.log("Added item to section. Section now has",this.sections[t].length,"items")):console.log("Item already exists in section")},clearSection(t){this.sections[t]&&(this.sections[t]=[])},removeFromSection(t,e){if(this.sections[t]){const s=this.sections[t].findIndex(r=>r.id===e);s>-1&&this.sections[t].splice(s,1)}},hideRootComponentForParent(t,e,s){if(!s)return;const r=`${t}_${s}`;e.isComponentRegistered(r)&&e.hideComponent(r)},removeSubtree(t,e,s,r=null){const o=this.sections[t]||[],n=new Set([e]);let i=!0;for(;i;){i=!1;for(const c of o)c.parentKey&&n.has(c.parentKey)&&!n.has(c.id)&&(n.add(c.id),i=!0)}if(this.sections[t]=o.filter(c=>!n.has(c.id)),r){const c=`${r}_${e}`;s.isComponentRegistered(c)&&s.hideComponent(c)}for(const c of s.getRegisteredComponents())for(const u of n){const d=`__p:${u}__`;if(c.includes(d)){s.hideComponent(c);break}}const a=s.getPendingRequests();for(const[c]of a)for(const u of n){const d=`__p:${u}__`;c.includes(d)&&s.visibilityState.pendingVisibility.delete(c)}},removeDescendantsOfParent(t,e,s){const r=this.sections[t]||[],o=new Set;let n=!0;for(const i of r)i.parentKey===e&&o.add(i.id);for(;n;){n=!1;for(const i of r)i.parentKey&&o.has(i.parentKey)&&!o.has(i.id)&&(o.add(i.id),n=!0)}if(o.size>0){this.sections[t]=r.filter(a=>!o.has(a.id));for(const a of s.getRegisteredComponents())for(const c of o){(a===`deepertracks_${c}`||a===`deeperalbum_${c}`||a===`trackartist_${c}`||a===`seed_tracks_st${c}`||a===`seed_artists_sa${c}`)&&s.hideComponent(a);const u=`__p:${c}__`;a.includes(u)&&s.hideComponent(a)}const i=s.getPendingRequests();for(const[a]of i)for(const c of o){const u=`__p:${c}__`;a.includes(u)&&s.visibilityState.pendingVisibility.delete(a)}}},hideTypesInParent(t,e,s){if(!s)return;const r=`__p:${s}__`;for(const n of e.getRegisteredComponents())for(const i of t)n.startsWith(`${i}_`)&&n.includes(r)&&e.hideComponent(n);const o=e.getPendingRequests();for(const[n]of o)for(const i of t)n.startsWith(`${i}_`)&&n.includes(r)&&e.visibilityState.pendingVisibility.delete(n)},async getTrackDetails(t,e,s=null){console.log("getTrackDetails called with item:",t.id,"sectionName:",e),this.setLoading("tracks",t.id,!0),this.setGlobalLoading(!0);try{let r=t;const o=this.getCachedTrack(t.id);if(o)r=o,console.log("Using cached track data for:",t.id);else{console.log("Creating new track data for:",t.id),t.track&&typeof t.track=="object"?r={...t.track}:r={...t},r.type="deepertracks",r=ye(r);try{const u=await le.getCurrentService().checkFollowingTrack(r.id);r.followed=u}catch(c){console.error(258,c),r.followed=!1}this.cache.tracks.set(r.id,r)}const n=s||null;r={...r,parentKey:n};const i=Le();if(n)this.removeDescendantsOfParent(e,n,i);else{const u=(this.sections[e]||[]).find(d=>d.type==="deepertracks"&&(!d.parentKey||d.parentKey===null));u&&u.id!==r.id&&this.removeSubtree(e,u.id,i,"deepertracks")}console.log("Adding track to section:",e,"Track ID:",r.id,"parentKey:",n),this.addToSection(e,r);const a=`deepertracks_${r.id}${n?`__p:${n}__`:""}`;return i.showComponent(a),console.log("Track added to section, component will show when registered"),r}finally{this.setLoading("tracks",t.id,!1),this.setGlobalLoading(!1)}},hideAllComponentsOfType(t,e){console.log("hideAllComponentsOfType called for type:",t);const s=e.getRegisteredComponents();console.log("All registered components:",s);let r=0;for(const o of s)o.startsWith(t+"_")&&(console.log("Hiding component:",o,"because it matches type:",t),e.hideComponent(o),r++);console.log(`Hidden ${r} components of type: ${t}`)},hideVisibleComponentOfType(t,e,s=null){console.log("hideVisibleComponentOfType called for type:",t,"parentKey:",s);const r=e.getRegisteredComponents();console.log("All registered components:",r);let o=0;for(const n of r){if(!n.startsWith(t+"_"))continue;const i=n.includes("__p:");if(s){const c=`__p:${s}__`;if(!n.includes(c))continue}else if(i)continue;const a=e.isComponentVisible(n);console.log(`Component ${n} - type: ${t}, visible: ${a}`),a&&(console.log("Hiding currently visible component:",n,"because it matches type/parent:",t,s),e.hideComponent(n),o++)}console.log(`Hidden ${o} currently visible components of type: ${t}`)},async getArtistDetails(t,e,s=null){console.log("getArtistDetails called with item:",t.id,"sectionName:",e),this.setLoading("artists",t.id,!0),this.setGlobalLoading(!0);try{let r=this.getCachedArtist(t.id);if(r)console.log("Using cached artist data for:",t.id);else{console.log("Fetching new artist data for:",t.id);const a=le.getCurrentService(),[c,u,d,f,y,b,v]=await Promise.all([a.getArtist(t.id),a.getArtistTopTracks(t.id),a.getArtistAlbums(t.id),a.getArtistSingles(t.id),a.getArtistAppearances(t.id),a.getArtistPlaylists(t.id),a.getRelatedArtists(t.id)]);console.log("API responses:",{artistInfo:c,topTracks:u,albums:d,singles:f,appearances:y,playlists:b,related:v});let m=!1;try{m=await le.getCurrentService().checkFollowingArtist(t.id)}catch{m=!1}const p=[],_={...c,followed:m,type:"trackartist"};p.push(_);const k={tracks:u,type:"top_tracks"};p.push(k);const A={items:await this.enrichAlbums(d),type:"albums"};p.push(A);const P={items:await this.enrichAlbums(f),type:"single"};p.push(P);const T={items:await this.enrichAlbums(y),type:"appears_on"};p.push(T);const L={items:await this.enrichPlaylists(b),type:"playlists"};p.push(L);const fe={artists:await this.enrichArtists(v),type:"related-artists"};p.push(fe),r={id:t.id,type:"trackartist",data:p},this.cache.artists.set(t.id,r)}const o=s||null;r={...r,parentKey:o};const n=Le();if(o)this.removeDescendantsOfParent(e,o,n);else{const c=(this.sections[e]||[]).filter(u=>u.type==="trackartist");for(const u of c)u.id!==t.id&&this.removeSubtree(e,u.id,n,"trackartist")}console.log("Adding artist data to section:",e,"parentKey:",o),this.addToSection(e,r),this.hideVisibleComponentOfType("trackartist",n,o);const i=`trackartist_${t.id}${o?`__p:${o}__`:""}`;return n.showComponent(i),console.log("Artist added to section, component will show when registered"),r}finally{this.setLoading("artists",t.id,!1),this.setGlobalLoading(!1)}},async getAlbumDetails(t,e,s=null){this.setLoading("albums",t.id,!0),this.setGlobalLoading(!0);try{let r=t;const o=this.getCachedAlbum(t.id);if(o)r=o;else{t.album?r={...t.album,album:!0}:r={...t},r.type="deeperalbum";try{const u=await le.getCurrentService().checkFollowingAlbum(r.id);r.followed=u}catch{r.followed=!1}this.cache.albums.set(r.id,r)}const n=s||null;r={...r,parentKey:n};const i=Le();n&&this.removeDescendantsOfParent(e,n,i),this.addToSection(e,r),this.hideVisibleComponentOfType("deeperalbum",i,n);const a=`deeperalbum_${t.id}${n?`__p:${n}__`:""}`;return i.showComponent(a),console.log("Album added to section, component will show when registered"),r}finally{this.setLoading("albums",t.id,!1),this.setGlobalLoading(!1)}},async getPlaylistDetails(t,e,s=null){this.setLoading("playlists",t.id,!0),this.setGlobalLoading(!0);try{let r=t;const o=this.getCachedPlaylist(t.id);if(o)r=o;else{r={...t},r.type="deeperplaylist";try{const u=await le.getCurrentService().checkFollowingPlaylist(r.id);r.followed=u}catch{r.followed=!1}this.cache.playlists.set(r.id,r)}try{const c=r.tracks&&(r.tracks.items&&r.tracks.items.length>1||Array.isArray(r.tracks)&&r.tracks.length>1),u=r.description&&r.description.trim().length>0;if(!c||!u){const f=await le.getCurrentService().getPlaylist(r.id);f&&(!c&&f.tracks&&(r.tracks=f.tracks),!u&&f.description&&(r.description=f.description),this.cache.playlists.set(r.id,r))}}catch(c){console.warn("Failed to ensure playlist tracks/description; proceeding with existing data",c)}const n=s||null;r={...r,parentKey:n};const i=Le();n&&this.removeDescendantsOfParent(e,n,i),this.addToSection(e,r),this.hideVisibleComponentOfType("deeperplaylist",i,n);const a=`deeperplaylist_${t.id}${n?`__p:${n}__`:""}`;return i.showComponent(a),console.log("Playlist added to section, component will show when registered"),r}finally{this.setLoading("playlists",t.id,!1),this.setGlobalLoading(!1)}},async getGenreDetails(t,e,s=null){const r=t.genreId||t.id;this.setLoading("playlists",r,!0),this.setGlobalLoading(!0),console.log(t,e,s);try{const o=le.getCurrentService(),n=Le();this.cache.genres.set(t.id,t);let i=await o.getGenrePlaylist(t.id);if(!i)throw new Error("No playlist data returned for genre");console.log("item",t,"playlistData",i);const a=s||null;i={...i,type:"deeperplaylist",parentKey:a},this.cache.playlists.set(i.id,i),a&&this.removeDescendantsOfParent(e,a,n),this.addToSection(e,i),this.hideVisibleComponentOfType("deeperplaylist",n,a);const c=`deeperplaylist_${i.id}${a?`__p:${a}__`:""}`;return n.showComponent(c),console.log("Genre playlist added to section, component will show when registered"),i}catch(o){throw console.error(" DeeperStore: Failed to get genre details:",o),o}finally{this.setLoading("playlists",r,!1),this.setGlobalLoading(!1)}},async getUserPlaylists(t,e,s=null){this.setLoading("user-playlists",t.id,!0),this.setGlobalLoading(!0);try{const r=le.getCurrentService(),o=await r.getUserPlaylists(t.id,20),n={id:`user-playlists-${t.id}`,name:`${t.display_name}'s Playlists`,type:"user-playlists",owner:t,playlists:o,parentKey:s};for(const c of n.playlists)c.tracks=await r.getPlaylistTracks(c.id,0,1);console.log("userPlaylistsData",n);const i=Le();s&&this.removeDescendantsOfParent(e,s,i),this.addToSection(e,n),this.hideVisibleComponentOfType("user-playlists",i,s);const a=`user-playlists_${t.id}${s?`__p:${s}__`:""}`;return i.showComponent(a),console.log("User playlists added to section, component will show when registered"),n}catch(r){throw console.error("Failed to get user playlists:",r),r}finally{this.setLoading("user-playlists",t.id,!1),this.setGlobalLoading(!1)}},async getSeedArtistRecommendations(t,e,s=null){const r=`sa${t.id}`;this.setLoading("seedArtists",r,!0),this.setGlobalLoading(!0);try{let o=this.getCachedSeedArtist(r);o||(o={tracks:await le.getCurrentService().getRecommendations({seedArtists:[t],limit:50,offset:0,market:"UA"}),type:"seed_artists",id:r,name:t.name,artists:t.artists},this.cache.seedArtists.set(r,o)),o={...o,parentKey:s||null};const n=Le();o.parentKey&&this.removeDescendantsOfParent(e,o.parentKey,n),this.addToSection(e,o),this.hideVisibleComponentOfType("seed_artists",n,o.parentKey);const i=`seed_artists_${r}${o.parentKey?`__p:${o.parentKey}__`:""}`;return n.showComponent(i),console.log("Seed artists added to section, component will show when registered"),o}finally{this.setLoading("seedArtists",r,!1),this.setGlobalLoading(!1)}},async getSeedTrackRecommendations(t,e,s=null){const r=`st${t.id}`;this.setLoading("seedTracks",r,!0),this.setGlobalLoading(!0);try{let o=this.getCachedSeedTrack(r);if(!o){const c=await le.getCurrentService().getRecommendations({seedTracks:[t],limit:20,offset:0,market:"UA"});console.log(c),o={tracks:c,type:"seed_tracks",id:r,name:t.name,artists:t.artists},this.cache.seedTracks.set(r,o)}o={...o,parentKey:s||null};const n=Le();o.parentKey&&this.removeDescendantsOfParent(e,o.parentKey,n),this.addToSection(e,o),this.hideVisibleComponentOfType("seed_tracks",n,o.parentKey);const i=`seed_tracks_${r}${o.parentKey?`__p:${o.parentKey}__`:""}`;return n.showComponent(i),console.log("Seed tracks added to section, component will show when registered"),o}finally{this.setLoading("seedTracks",r,!1),this.setGlobalLoading(!1)}},async enrichAlbums(t){var s;const e=[];for(const r of t)try{const i=await le.getCurrentService().getAlbumTracks(r.id);r.tracks=i,i.length>0&&(i[0].preview_url||i[0].previewUrl)&&(r.preview_url=i[0].preview_url||i[0].previewUrl),r.images.length>0&&((s=r.images[0])!=null&&s.url)||(r.images[0]={url:""}),e.push(r)}catch(o){console.error(`Failed to enrich album ${r.id}:`,o)}return e},async enrichPlaylists(t){var s,r;const e=[];for(const o of t)try{const a=await le.getCurrentService().getPlaylistTracks(o.id);o.tracks=a,a.length>0&&(a[0].preview_url||a[0].previewUrl)&&(o.preview_url=a[0].preview_url||a[0].previewUrl),o.images.length>0&&((s=o.images[0])!=null&&s.url)||(o.images[0]={url:""}),e.push(o)}catch(n){console.error(`Failed to enrich playlist ${o.id}:`,n),o.images.length>0&&((r=o.images[0])!=null&&r.url)||(o.images[0]={url:""}),e.push(o)}return e},async enrichArtists(t){var s;const e=[];for(const r of t)try{const i=await le.getCurrentService().getArtistTopTracks(r.id,"UA");i.length>0&&(i[0].preview_url||i[0].previewUrl)&&(r.preview_url=i[0].preview_url||i[0].previewUrl),r.images.length>0&&((s=r.images[0])!=null&&s.url)||(r.images[0]={url:""}),e.push(r)}catch(o){console.error(`Failed to enrich artist ${r.id}:`,o)}return e},clearAllSections(){Object.keys(this.sections).forEach(t=>{this.sections[t]=[]})},clearCache(t){t?this.cache[t].clear():Object.keys(this.cache).forEach(e=>{this.cache[e].clear()})},async getCategories(t,e=0,s=50){this.setGlobalLoading(!0);try{const o=await le.getCurrentService().getCategories(e,s);return o.items.forEach(n=>{const i={...n,type:"category",parentKey:null};this.addToSection(t,i),this.cache.categories.set(n.id,i)}),o}catch(r){throw console.error("Failed to get categories:",r),r}finally{this.setGlobalLoading(!1)}},async getCategoryPlaylists(t,e,s=null){this.setGlobalLoading(!0);try{const o=await le.getCurrentService().getCategoryPlaylists(t,0,50);return o.items.forEach(n=>{const i={...n,type:"category-playlist",parentKey:s};this.addToSection(e,i)}),o}catch(r){throw console.error("Failed to get category playlists:",r),r}finally{this.setGlobalLoading(!1)}}}});class Cf extends Ts{constructor(){super();lr(this,"artistAlbumsCache",new Map);lr(this,"lovedPlaylistIdCache",new Map);this.baseURL="https://api.deezer.com",this.backendUrl="http://localhost:8000",this.serviceType=ie.DEEZER}getServiceName(){return"Deezer"}getServiceType(){return this.serviceType}async authenticate(){throw new Error("Deezer authentication not yet implemented")}async refreshToken(){throw new Error("Deezer token refresh not yet implemented")}logout(){throw new Error("Deezer logout not yet implemented")}isAuthenticated(){return!1}async getCurrentUser(){throw new Error("Deezer getCurrentUser not yet implemented")}async getTopTracks(s){throw new Error("Deezer getTopTracks not yet implemented")}async getTopArtists(s){throw new Error("Deezer getTopArtists not yet implemented")}async getSavedAlbums(s,r){try{const o=localStorage.getItem("deezer-user-id");if(!o)return[];const n=typeof r=="number"&&r>0?r:20,i=typeof s=="number"&&s>=0?s:0,a=await this.request(`/user/${o}/albums?limit=${n}&index=${i}`);return((a==null?void 0:a.data)||[]).map(u=>({album:this.transformAlbum(u),added_at:u!=null&&u.time_add?new Date(u.time_add*1e3).toISOString():new Date().toISOString()})).filter(u=>u.album!==null)}catch(o){throw console.error("Deezer getSavedAlbums error:",o),o}}async getSavedTracks(s,r){var o,n,i,a;try{const c=localStorage.getItem("deezer-user-id");if(!c)return{items:[],total:0};const u=await this.getOrFindLovedPlaylistId(c);if(!u)return{items:[],total:0};const d=typeof r=="number"&&r>0?r:50,f=typeof s=="number"&&s>=0?s:0,y=await this.request(`/playlist/${u}?limit=${d}&index=${f}`),b=(((o=y==null?void 0:y.tracks)==null?void 0:o.data)||[]).map(m=>({track:this.transformTrack(m),added_at:m!=null&&m.time_add?new Date(m.time_add*1e3).toISOString():new Date().toISOString()})).filter(m=>m.track!==null),v=(y==null?void 0:y.nb_tracks)||((n=y==null?void 0:y.tracks)==null?void 0:n.total)||((a=(i=y==null?void 0:y.tracks)==null?void 0:i.data)==null?void 0:a.length)||0;return{items:b,total:v}}catch(c){throw console.error("Deezer getSavedTracks error:",c),c}}async getOrFindLovedPlaylistId(s){if(this.lovedPlaylistIdCache.has(s))return this.lovedPlaylistIdCache.get(s);const r=100;let o=0,n=1/0;for(;o<n;){const i=await this.request(`/user/${s}/playlists?limit=${r}&index=${o}`),a=(i==null?void 0:i.data)||[];typeof(i==null?void 0:i.total)=="number"&&(n=i.total);const c=a.find(u=>u&&u.is_loved_track===!0);if(c&&c.id){const u=c.id;return this.lovedPlaylistIdCache.set(s,u),u}if(a.length<r)break;o+=r}return this.lovedPlaylistIdCache.set(s,null),null}async getFollowedArtists(s=50,r=0){try{const o=localStorage.getItem("deezer-user-id");if(!o)return[];const n=typeof s=="number"&&s>0?s:50,i=typeof r=="number"&&r>=0?r:0,a=await this.request(`/user/${o}/artists?limit=${n}&index=${i}`);return((a==null?void 0:a.data)||[]).map(u=>this.transformArtist(u)).filter(u=>u!==null)}catch(o){throw console.error("Deezer getFollowedArtists error:",o),o}}async getPlaylists(s,r){throw new Error("Deezer getPlaylists not yet implemented")}async getSpotifyPlaylists(s,r){throw new Error("Deezer getPlaylists not yet implemented")}async getPlaylist(s){throw new Error("Deezer getPlaylist not yet implemented")}async getPlaylistTracks(s,r=0,o=50){try{return(await this.request(`/playlist/${s}/tracks?limit=${o}&index=${r}`)).data.map(i=>this.transformTrack(i))}catch(n){throw console.error("Deezer getPlaylistTracks error:",n),n}}async getGenrePlaylist(s){const o=me().getCachedGenre(s);try{const n=await this.getRadioTracks(s,0,50);return{id:`radio_${s}`,name:o.name,description:o.description,images:[],owner:{display_name:"Deezer"},public:!1,totalTracks:n.length,external_urls:{deezer:`https://www.deezer.com/radio/${s}`},service:this.serviceType,tracks:{items:n.map(i=>({track:i})),total:n.length}}}catch(n){throw console.error("Deezer getGenrePlaylist fallback failed",n),n}}async createPlaylist(s,r){throw new Error("Deezer createPlaylist not yet implemented")}async addTracksToPlaylist(s,r){throw new Error("Deezer addTracksToPlaylist not yet implemented")}async getArtist(s){try{const r=await this.request(`/artist/${s}`);return this.transformArtist(r)}catch(r){throw console.error("Deezer getArtist error:",r),r}}async getArtistTopTracks(s,r){try{let o=await this.request(`/artist/${s}/top`),n=await this.request(`/artist/${s}/top?index=5`);return o.data.concat(n.data).map(a=>this.transformTrack(a))}catch(o){throw console.error("Deezer getArtistTopTracks error:",o),o}}async getArtistAlbums(s,r,o=20){try{return(await this.getAllArtistAlbums(s)).filter(a=>a.record_type==="album").slice(0,o).map(a=>this.transformAlbum(a))}catch(n){throw console.error("Deezer getArtistAlbums error:",n),n}}async getRelatedArtists(s){try{return(await this.request(`/artist/${s}/related`)).data.map(o=>this.transformArtist(o))}catch(r){throw console.error("Deezer getRelatedArtists error:",r),r}}async getAllArtistAlbums(s){const r=`${s}`;if(this.artistAlbumsCache.has(r))return console.log("Using cached albums for artist:",s),this.artistAlbumsCache.get(r);try{console.log("Fetching albums from API for artist:",s);const o=await this.request(`/artist/${s}/albums?limit=50`);return this.artistAlbumsCache.set(r,o.data),o.data}catch(o){throw console.error("Deezer getAllArtistAlbums error:",o),o}}async getArtistSingles(s,r=10){try{return(await this.getAllArtistAlbums(s)).filter(i=>i.record_type==="single"||i.record_type==="ep").slice(0,r).map(i=>this.transformAlbum(i))}catch(o){throw console.error("Deezer getArtistSingles error:",o),o}}async getArtistAppearances(s,r=10){try{return((await this.request(`/artist/${s}/albums`)).data||[]).filter(a=>a.record_type==="compilation"||a.artist&&a.artist.id!==parseInt(s)).slice(0,r).map(a=>this.transformAlbum(a))}catch(o){throw console.error("Deezer getArtistAppearances error:",o),o}}async getArtistPlaylists(s,r=10){try{return((await this.request(`/artist/${s}/playlists`)).data||[]).slice(0,r).map(i=>this.transformPlaylist(i))}catch(o){throw console.error("Deezer getArtistPlaylists error:",o),o}}async getArtistRadio(s){try{return(await this.request(`/artist/${s}/radio`)).data.map(o=>this.transformTrack(o))}catch(r){throw console.error("Deezer getArtistRadio error:",r),r}}async getAlbum(s){try{const r=await this.request(`/album/${s}`);return this.transformAlbum(r)}catch(r){throw console.error("Deezer getAlbum error:",r),r}}async getAlbumTracks(s){try{return(await this.request(`/album/${s}/tracks`)).data.map(o=>this.transformTrack(o))}catch(r){throw console.error("Deezer getAlbumTracks error:",r),r}}async getTrack(s){try{const r=await this.request(`/track/${s}`);return this.transformTrack(r)}catch(r){throw console.error("Deezer getTrack error:",r),r}}createOwnerImages(s){if(!s)return[];const r=[];return s.picture_small&&r.push(new vt(s.picture_small,56,56)),s.picture_medium&&r.push(new vt(s.picture_medium,250,250)),s.picture_big&&r.push(new vt(s.picture_big,500,500)),s.picture_xl&&r.push(new vt(s.picture_xl,1e3,1e3)),r}async getPlaylist(s){try{const r=await this.request(`/playlist/${s}`),o=this.transformPlaylist(r);if(o&&o.owner&&o.owner.id)try{const n=await this.request(`/user/${o.owner.id}`);n&&(o.owner={...o.owner,images:this.createOwnerImages(n),picture:n.picture,picture_small:n.picture_small,picture_medium:n.picture_medium,picture_big:n.picture_big,picture_xl:n.picture_xl,country:n.country,tracklist:n.tracklist})}catch(n){console.warn(`Failed to fetch user data for playlist ${s}:`,n)}return o}catch(r){throw console.error("Deezer getPlaylist error:",r),r}}async getPlaylists(s,r=20,o=0){try{const n=await this.request(`/user/${s}/playlists?limit=${r}&index=${o}`);return((n==null?void 0:n.data)||[]).map(a=>this.transformPlaylist(a)).filter(a=>a!==null)}catch(n){throw console.error("Deezer getPlaylists error:",n),n}}async getSpotifyPlaylists(s=20,r=0){try{const o=await this.request(`/chart/0/playlists?limit=${s}&index=${r}`),i=((o==null?void 0:o.data)||[]).map(a=>this.transformPlaylist(a)).filter(a=>a!==null);return await this.enrichPlaylistsWithDescriptions(i)}catch(o){throw console.error("Deezer getChartPlaylists error:",o),o}}async enrichPlaylistsWithDescriptions(s){const r=[];for(const o of s)try{if(!o.description||o.description.trim().length===0){const n=await this.getPlaylist(o.id);n&&n.description&&(o.description=n.description)}r.push(o)}catch(n){console.warn(`Failed to enrich playlist ${o.id} with description:`,n),r.push(o)}return r}async search(s,r,o=20){try{const n={tracks:[],artists:[],albums:[],playlists:[]};if(!r||r.includes("track")){const i=await this.request(`/search/track?q=${encodeURIComponent(s)}&limit=${o}`);console.log("Tracks response:",i),i&&i.data&&Array.isArray(i.data)?n.tracks=i.data.map(a=>this.transformTrack(a)).filter(a=>a!==null):(console.warn("Invalid tracks response structure:",i),n.tracks=[])}if(!r||r.includes("artist")){const i=await this.request(`/search/artist?q=${encodeURIComponent(s)}&limit=${o}`);console.log("Artists response:",i),i&&i.data&&Array.isArray(i.data)?n.artists=i.data.map(a=>this.transformArtist(a)).filter(a=>a!==null):(console.warn("Invalid artists response structure:",i),n.artists=[])}if(!r||r.includes("album")){const i=await this.request(`/search/album?q=${encodeURIComponent(s)}&limit=${o}`);console.log("Albums response:",i),i&&i.data&&Array.isArray(i.data)?n.albums=i.data.map(a=>this.transformAlbum(a)).filter(a=>a!==null):(console.warn("Invalid albums response structure:",i),n.albums=[])}if(!r||r.includes("playlist")){const i=await this.request(`/search/playlist?q=${encodeURIComponent(s)}&limit=${o}`);if(console.log("Playlists response:",i),i&&i.data&&Array.isArray(i.data)){const a=i.data.map(c=>this.transformPlaylist(c)).filter(c=>c!==null);n.playlists=await this.enrichPlaylistsWithDescriptions(a)}else console.warn("Invalid playlists response structure:",i),n.playlists=[]}return n}catch(n){throw console.error("Deezer search error:",n),n}}async getNewReleases(s=20,r=0){try{return(await this.request("/editorial/0/releases")).data.slice(r,r+s).map(i=>this.transformAlbum(i))}catch(o){throw console.error("Deezer getNewReleases error:",o),o}}async getRecommendations(s){try{if(s.seedTracks&&s.seedTracks.length>0){const r=[];for(const n of s.seedTracks){console.log("seedTrack:",n);try{const i=n.title_short||n.name,a=n.title_short?n.name:null;console.log(`Searching Last.fm with title: "${i}" (original: "${n.name}")`);const c=await this.getSimilarTracksFromLastfm(n.artists[0].name,i,s.limit||10,a);r.push(...c)}catch(i){console.error(`Error getting similar tracks for seed track "${n.name}":`,i)}}return this.removeDuplicateTracks(r).slice(0,s.limit||20)}if(s.seedArtists&&s.seedArtists.length>0){const r=s.seedArtists[0].id;return(await this.request(`/artist/${r}/radio`)).data.map(n=>this.transformTrack(n))}return[]}catch(r){throw console.error("Deezer getRecommendations error:",r),r}}async getCategories(s=0,r=50){try{const o=await this.request(`/radio/lists?index=${s}&limit=${r}`);return{items:o.data.map(i=>({id:i.id,name:i.title,type:"radio",icons:i.picture?[{url:i.picture}]:[],href:i.link||`https://www.deezer.com/radio/${i.id}`,tracklist:i.tracklist,description:i.description||"",images:i.picture_medium?[{url:i.picture_small,height:56,width:56},{url:i.picture_medium,height:250,width:250},{url:i.picture_big,height:500,width:500},{url:i.picture_xl,height:1e3,width:1e3}]:[]})),total:o.total,next:o.next,previous:null}}catch(o){throw console.error("Deezer getCategories error:",o),o}}async getCategoryPlaylists(s,r=0,o=50){try{if(!isNaN(s)){const i=await this.getRadioTracks(s,r,o),c=me().getCachedCategory(s);return{items:[{id:`radio_${s}`,name:c?c.name:`Radio ${s}`,type:"radio",tracks:{items:i.map(u=>({track:u})),total:i.length}}],total:1,next:null,previous:null}}const n=await this.request(`/genre/${s}/playlists?index=${r}&limit=${o}`);return{items:n.data.data.map(i=>this.transformPlaylist(i)),total:n.data.total,next:n.data.next,previous:n.data.prev}}catch(n){throw console.error("Deezer getCategoryPlaylists error:",n),n}}async getRadioTracks(s,r=0,o=50){try{return(await this.request(`/radio/${s}/tracks?index=${r}&limit=${o}`)).data.map(i=>this.transformTrack(i))}catch(n){throw console.error("Deezer getRadioTracks error:",n),n}}async getGenres(s=0,r=50){try{console.log(" DeezerService: Fetching genres with offset:",s,"limit:",r);const o=await this.request(`/genre?index=${s}&limit=${r}`);console.log(" DeezerService: Genres response:",o);const n=o.data.map(i=>({id:i.id.toString(),name:i.name,type:"genre",icons:i.picture?[{url:i.picture}]:[],href:i.link||`https://www.deezer.com/genre/${i.id}`,description:i.name,images:i.picture_medium?[{url:i.picture_big,height:500,width:500},{url:i.picture_xl,height:1e3,width:1e3}]:[]}));return{items:n,total:o.total||n.length,next:s+r<(o.total||n.length)?`/genre?index=${s+r}&limit=${r}`:null,previous:s>0?`/genre?index=${Math.max(0,s-r)}&limit=${r}`:null}}catch(o){throw console.error("Deezer getGenres error:",o),o}}async getUser(s){try{const r=await this.request(`/user/${s}`);return{id:r.id,display_name:r.name,name:r.name,country:r.country,images:this.transformImages([{url:r.picture_small,height:56,width:56},{url:r.picture_medium,height:250,width:250},{url:r.picture_big,height:500,width:500},{url:r.picture_xl,height:1e3,width:1e3}])}}catch(r){throw console.error("Deezer getUser error:",r),r}}async followArtist(s){throw new Error("Deezer followArtist not yet implemented")}async unfollowArtist(s){throw new Error("Deezer unfollowArtist not yet implemented")}async followAlbum(s){throw new Error("Deezer followAlbum not yet implemented")}async unfollowAlbum(s){throw new Error("Deezer unfollowAlbum not yet implemented")}async followTrack(s){throw new Error("Deezer followTrack not yet implemented")}async unfollowTrack(s){throw new Error("Deezer unfollowTrack not yet implemented")}async followPlaylist(s){throw new Error("Deezer followPlaylist not yet implemented")}async unfollowPlaylist(s){throw new Error("Deezer unfollowPlaylist not yet implemented")}async checkFollowingArtist(s){throw new Error("Deezer checkFollowingArtist not yet implemented")}async checkFollowingAlbum(s){throw new Error("Deezer checkFollowingAlbum not yet implemented")}async checkFollowingTrack(s){throw new Error("Deezer checkFollowingTrack not yet implemented")}async checkFollowingPlaylist(s){throw new Error("Deezer checkFollowingPlaylist not yet implemented")}async request(s){const r=["https://corsproxy.io/?","https://api.codetabs.com/v1/proxy?quest=","https://thingproxy.freeboard.io/fetch/"],o=`${this.baseURL}${s}`;for(let n=0;n<r.length;n++)try{const i=r[n],a=n===0?`${i}${encodeURIComponent(o)}`:`${i}${o}`,c=await fetch(a,{headers:{Accept:"application/json"}});if(c.ok){const u=await c.json();return console.log(`Proxy ${n+1} success for ${s}:`,u),u}}catch(i){if(console.warn(`Proxy ${n+1} failed:`,i.message),n===r.length-1)throw new Error(`All CORS proxies failed. Last error: ${i.message}`)}}transformTrack(s){var n;if(!s||!s.id)return console.warn("Invalid track data:",s),null;let r=[];s.contributors&&Array.isArray(s.contributors)?r=s.contributors.map(i=>this.transformArtist(i)):s.artist&&(r=[this.transformArtist(s.artist)]);const o=this.generateShortTitle(s.title);return console.log(`Deezer track: "${s.title}" -> short: "${o}"`),{id:s.id.toString(),name:s.title,title_short:o,artists:r,album:s.album?this.transformAlbum(s.album):null,duration_ms:parseInt(s.duration)*1e3,previewUrl:s.preview||null,external_urls:{spotify:s.link,deezer:s.link},images:this.transformImages((n=s.album)!=null&&n.cover_medium?[{url:s.album.cover_medium,height:250,width:250}]:[]),readable:s.readable||!1,rank:s.rank||0,explicit_lyrics:s.explicit_lyrics||!1,explicit_content_lyrics:s.explicit_content_lyrics||0,explicit_content_cover:s.explicit_content_cover||0,service:this.serviceType}}transformArtist(s){return!s||!s.id?(console.warn("Invalid artist data:",s),null):{id:s.id.toString(),name:s.name,images:this.transformImages(s.picture_medium?[{url:s.picture_medium,height:250,width:250}]:[]),external_urls:{spotify:s.link,deezer:s.link},followers:{total:s.nb_fan||0},genres:[],popularity:0,nb_album:s.nb_album||0,radio:s.radio||!1,service:this.serviceType}}transformAlbum(s){return!s||!s.id?(console.warn("Invalid album data:",s),null):{id:s.id.toString(),name:s.title,artists:s.artist?[this.transformArtist(s.artist)]:[],images:this.transformImages(s.cover_medium?[{url:s.cover_medium,height:250,width:250}]:[]),external_urls:{spotify:s.link,deezer:s.link},total_tracks:s.nb_tracks||0,release_date:s.release_date||null,record_type:s.record_type||"album",fans:s.fans||0,genre_id:s.genre_id||null,explicit_lyrics:s.explicit_lyrics||!1,service:this.serviceType}}transformPlaylist(s){var o,n,i,a,c,u,d,f,y,b,v,m,p,_,k,S,A,x,P,I;if(!s||!s.id)return console.warn("Invalid playlist data:",s),null;let r=null;return console.log("809",s.tracks),s.tracks&&s.tracks.data&&Array.isArray(s.tracks.data)?r={items:s.tracks.data.map(T=>({track:this.transformTrack(T)})),total:s.nb_tracks||s.tracks.data.length}:r={total:s.nb_tracks||0},console.log("playlist 767",s),{id:s.id.toString(),name:s.title,description:s.description||"",images:this.transformImages([{url:s.picture_big,height:500,width:500},{url:s.picture_xl,height:1e3,width:1e3}]),external_urls:{spotify:s.link,deezer:s.link},tracks:r,owner:{display_name:((o=s.creator)==null?void 0:o.name)||((n=s.user)==null?void 0:n.name)||"Unknown",external_urls:{deezer:((i=s.creator)==null?void 0:i.link)||((a=s.user)==null?void 0:a.link)||`https://www.deezer.com/profile/${((d=((c=s.creator)==null?void 0:c.id)||((u=s.user)==null?void 0:u.id))==null?void 0:d.toString())||"unknown"}`},href:`https://api.deezer.com/user/${((b=((f=s.creator)==null?void 0:f.id)||((y=s.user)==null?void 0:y.id))==null?void 0:b.toString())||"unknown"}`,id:((p=((v=s.creator)==null?void 0:v.id)||((m=s.user)==null?void 0:m.id))==null?void 0:p.toString())||"unknown",type:"user",uri:`deezer:user:${((S=((_=s.creator)==null?void 0:_.id)||((k=s.user)==null?void 0:k.id))==null?void 0:S.toString())||"unknown"}`,images:this.createOwnerImages(s.creator||s.user),country:((A=s.creator)==null?void 0:A.country)||((x=s.user)==null?void 0:x.country),tracklist:((P=s.creator)==null?void 0:P.tracklist)||((I=s.user)==null?void 0:I.tracklist)},public:s.public||!1,service:this.serviceType}}transformImages(s){return!s||!Array.isArray(s)?[]:s.map(r=>({url:r.url,height:r.height||null,width:r.width||null}))}generateShortTitle(s){if(!s)return"";let r=s.trim();const o=[/\s*-\s*[^-]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)\s*$/i,/\s*\([^)]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^)]*\)\s*$/i,/\s*\[[^\]]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^\]]*\]\s*$/i];for(const i of o)r=r.replace(i,"");const n=[/^(?:feat\.|ft\.|featuring)\s*/i,/^(?:prod\.|produced by)\s*/i];for(const i of n)r=r.replace(i,"");return r.trim()}removeDuplicateTracks(s){const r=new Set;return s.filter(o=>r.has(o.id)?!1:(r.add(o.id),!0))}async getSimilarTracksForDeezer(s,r,o=10){try{if(!s||!r)throw new Error("Artist and track parameters are required");const n=await fetch(`${this.backendUrl}/lastfm/similar-tracks-for-deezer?artist=${encodeURIComponent(s)}&track=${encodeURIComponent(r)}&limit=${o}`),i=await n.json();if(!n.ok){if(n.status===404)return await this.getSimilarArtistsAsTracks(s,o);throw new Error(i.error||"Failed to get similar tracks from backend")}const a=i.similarTracks||[],c=[];for(const u of a)try{const d=`${u.artist} ${u.name}`,f=await this.request(`/search/track?q=${encodeURIComponent(d)}&limit=1`);if(f&&f.data&&f.data.length>0){const y=f.data[0];c.push({lastfmTrack:{name:u.name,artist:u.artist,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.images},deezerTrack:this.transformTrack(y),searchQuery:d})}else c.push({lastfmTrack:{name:u.name,artist:u.artist,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.images},deezerTrack:null,searchQuery:d,error:"Track not found in Deezer"})}catch(d){console.error(`Error searching track "${u.name}" by "${u.artist}" in Deezer:`,d),c.push({lastfmTrack:{name:u.name,artist:u.artist,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.images},deezerTrack:null,searchQuery:`${u.artist} ${u.name}`,error:"Search failed"})}return{originalTrack:i.originalTrack,similarTracks:a,deezerResults:c,summary:{totalSimilarTracks:a.length,foundInDeezer:c.filter(u=>u.deezerTrack!==null).length,notFoundInDeezer:c.filter(u=>u.deezerTrack===null).length}}}catch(n){throw console.error("Error getting similar tracks for Deezer:",n),n}}async getSimilarArtistsAsTracks(s,r=10){try{if(!s)throw new Error("Artist parameter is required");const o=await fetch(`${this.backendUrl}/lastfm/artist/similar?artist=${encodeURIComponent(s)}&limit=${r}`),n=await o.json();if(!o.ok||!n.similarartists||!n.similarartists.artist)return{originalTrack:{artist:s,track:"N/A"},similarTracks:[],deezerResults:[],summary:{totalSimilarTracks:0,foundInDeezer:0,notFoundInDeezer:0},fallbackUsed:"similar_artists",fallbackMessage:"No similar artists found"};const i=Array.isArray(n.similarartists.artist)?n.similarartists.artist:[n.similarartists.artist],a=[],c=[];for(const u of i)try{const d=await fetch(`${this.backendUrl}/lastfm/artist/top-tracks?artist=${encodeURIComponent(u.name)}&limit=1`),f=await d.json();if(d.ok&&f.toptracks&&f.toptracks.track&&f.toptracks.track.length>0){const y=Array.isArray(f.toptracks.track)?f.toptracks.track[0]:f.toptracks.track,b={name:y.name,artist:{name:u.name},playcount:y.playcount||"0",match:u.match||"0",url:y.url,duration:y.duration||"0",image:y.image||u.image||[]};c.push(b);const v=`${u.name} ${y.name}`,m=await this.request(`/search/track?q=${encodeURIComponent(v)}&limit=1`);if(m&&m.data&&m.data.length>0){const p=m.data[0];a.push({lastfmTrack:{name:y.name,artist:u.name,playcount:y.playcount||"0",match:u.match||"0",url:y.url,duration:y.duration||"0",images:y.image||u.image||[]},deezerTrack:this.transformTrack(p),searchQuery:v,source:"similar_artist_top_track"})}else a.push({lastfmTrack:{name:y.name,artist:u.name,playcount:y.playcount||"0",match:u.match||"0",url:y.url,duration:y.duration||"0",images:y.image||u.image||[]},deezerTrack:null,searchQuery:v,error:"Track not found in Deezer",source:"similar_artist_top_track"})}else a.push({lastfmTrack:{name:"Unknown",artist:u.name,playcount:"0",match:u.match||"0",url:u.url,duration:"0",images:u.image||[]},deezerTrack:null,searchQuery:u.name,error:"No top tracks found",source:"similar_artist_no_tracks"})}catch(d){console.error(`Error getting top track for artist "${u.name}":`,d),a.push({lastfmTrack:{name:"Unknown",artist:u.name,playcount:"0",match:u.match||"0",url:u.url,duration:"0",images:u.image||[]},deezerTrack:null,searchQuery:u.name,error:"Failed to get top track",source:"similar_artist_fallback"})}return{originalTrack:{artist:s,track:"N/A",lastfmUrl:`https://www.last.fm/music/${encodeURIComponent(s)}`},similarTracks:c.map(u=>({name:u.name,artist:u.artist.name,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.image})),deezerResults:a,summary:{totalSimilarTracks:c.length,foundInDeezer:a.filter(u=>u.deezerTrack!==null).length,notFoundInDeezer:a.filter(u=>u.deezerTrack===null).length},fallbackUsed:"similar_artists",fallbackMessage:`Found ${c.length} tracks from similar artists`}}catch(o){throw console.error("Error getting similar artists as tracks:",o),o}}async getSimilarTracksFromLastfm(s,r,o=10,n=null){try{const a=(await this.getSimilarTracksForDeezer(s,r,o)).deezerResults.filter(c=>c.deezerTrack!==null).map(c=>c.deezerTrack);if(console.log(a),console.log(r),console.log(n),a.length===0&&n&&n!==r){console.log(`No tracks found for "${r}", trying fallback "${n}"`);try{return(await this.getSimilarTracksForDeezer(s,n,o)).deezerResults.filter(u=>u.deezerTrack!==null).map(u=>u.deezerTrack)}catch(c){console.error("Fallback search also failed:",c)}}return a}catch(i){throw console.error("Error getting similar tracks from Last.fm:",i),i}}async getUserPlaylists(s,r=20){try{const[o,n]=await Promise.all([this.request(`/user/${s}`),this.request(`/user/${s}/playlists?limit=${r}`)]),i=o||{};return(n.data||[]).map(u=>{const d=this.transformPlaylist(u);return d&&(d.owner={display_name:i.name,external_urls:{deezer:i.link||`https://www.deezer.com/profile/${i.id}`},href:`https://api.deezer.com/user/${i.id}`,id:i.id,type:"user",uri:`deezer:user:${i.id}`,images:this.createOwnerImages(i),picture:i.picture,picture_small:i.picture_small,picture_medium:i.picture_medium,picture_big:i.picture_big,picture_xl:i.picture_xl,country:i.country,tracklist:i.tracklist}),d})}catch(o){throw console.error("Deezer getUserPlaylists error:",o),o}}}class Pf extends Ts{constructor(){super(),this.baseURL="https://api.tidal.com",this.serviceType=ie.TIDAL}getServiceName(){return"Tidal"}getServiceType(){return this.serviceType}async authenticate(){throw new Error("Tidal authentication not yet implemented")}async refreshToken(){throw new Error("Tidal token refresh not yet implemented")}logout(){throw new Error("Tidal logout not yet implemented")}isAuthenticated(){return!1}async getCurrentUser(){throw new Error("Tidal getCurrentUser not yet implemented")}async getTopTracks(e){throw new Error("Tidal getTopTracks not yet implemented")}async getTopArtists(e){throw new Error("Tidal getTopArtists not yet implemented")}async getSavedAlbums(e,s){throw new Error("Tidal getSavedAlbums not yet implemented")}async getSavedTracks(e,s){throw new Error("Tidal getSavedTracks not yet implemented")}async getFollowedArtists(e){throw new Error("Tidal getFollowedArtists not yet implemented")}async getPlaylists(e,s){throw new Error("Tidal getPlaylists not yet implemented")}async getPlaylist(e){throw new Error("Tidal getPlaylist not yet implemented")}async getPlaylistTracks(e,s,r){throw new Error("Tidal getPlaylistTracks not yet implemented")}async createPlaylist(e,s){throw new Error("Tidal createPlaylist not yet implemented")}async addTracksToPlaylist(e,s){throw new Error("Tidal addTracksToPlaylist not yet implemented")}async getArtist(e){throw new Error("Tidal getArtist not yet implemented")}async getArtistTopTracks(e,s){throw new Error("Tidal getArtistTopTracks not yet implemented")}async getArtistAlbums(e,s,r){throw new Error("Tidal getArtistAlbums not yet implemented")}async getRelatedArtists(e){throw new Error("Tidal getRelatedArtists not yet implemented")}async getArtistAppearances(e,s=10){throw new Error("Tidal getArtistAppearances not yet implemented")}async getArtistPlaylists(e,s=10){throw new Error("Tidal getArtistPlaylists not yet implemented")}async getAlbum(e){throw new Error("Tidal getAlbum not yet implemented")}async getAlbumTracks(e){throw new Error("Tidal getAlbumTracks not yet implemented")}async getTrack(e){throw new Error("Tidal getTrack not yet implemented")}async search(e,s,r){throw new Error("Tidal search not yet implemented")}async getNewReleases(e,s){throw new Error("Tidal getNewReleases not yet implemented")}async getRecommendations(e){throw new Error("Tidal getRecommendations not yet implemented")}async followArtist(e){throw new Error("Tidal followArtist not yet implemented")}async unfollowArtist(e){throw new Error("Tidal unfollowArtist not yet implemented")}async followAlbum(e){throw new Error("Tidal followAlbum not yet implemented")}async unfollowAlbum(e){throw new Error("Tidal unfollowAlbum not yet implemented")}async followTrack(e){throw new Error("Tidal followTrack not yet implemented")}async unfollowTrack(e){throw new Error("Tidal unfollowTrack not yet implemented")}async followPlaylist(e){throw new Error("Tidal followPlaylist not yet implemented")}async unfollowPlaylist(e){throw new Error("Tidal unfollowPlaylist not yet implemented")}async checkFollowingArtist(e){throw new Error("Tidal checkFollowingArtist not yet implemented")}async checkFollowingAlbum(e){throw new Error("Tidal checkFollowingAlbum not yet implemented")}async checkFollowingTrack(e){throw new Error("Tidal checkFollowingTrack not yet implemented")}async checkFollowingPlaylist(e){throw new Error("Tidal checkFollowingPlaylist not yet implemented")}async getUserPlaylists(e,s=20){throw new Error("Tidal getUserPlaylists not yet implemented")}}class xf extends Ts{constructor(){super(),this.baseURL="https://api.music.apple.com/v1",this.serviceType=ie.APPLE}getServiceName(){return"Apple Music"}getServiceType(){return this.serviceType}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,"Music-User-Token":this.getMusicUserToken(),...s.headers},...s};try{return await $e(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,o.headers["Music-User-Token"]=this.getMusicUserToken(),$e(o);throw i}}getMusicUserToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_music_user_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async refreshToken(){const e=this.getUsername(),s=await $e.get(`/apple/refresh_token/${e}`);if(s.status===200)return s.data;throw new Error("Failed to refresh token")}async authenticate(){window.location.href="/apple/login"}logout(){window.location.href="/apple/logout"}isAuthenticated(){return!!this.getToken()&&!!this.getMusicUserToken()}async getCurrentUser(){var s,r;const e=await this.request("/me");return this.transformUser({id:e.data.id,displayName:((s=e.data.attributes)==null?void 0:s.name)||"Apple Music User",email:"",country:((r=e.data.attributes)==null?void 0:r.storefront)||"us",images:[],followers:0,service:this.serviceType})}async getTopTracks(e=dt.SHORT){return(await this.request("/me/recent/played/tracks")).data.data.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTopArtists(e=dt.SHORT){return(await this.request("/me/recent/played")).data.data.filter(o=>o.type==="artists").map(o=>this.transformArtist({...o,service:this.serviceType}))}async getSavedAlbums(e=0,s=20){return(await this.request(`/me/library/albums?offset=${e}&limit=${s}`)).data.data.map(o=>({...o,album:this.transformAlbum({...o,service:this.serviceType})}))}async getSavedTracks(e=0,s=50){var n;const r=await this.request(`/me/library/songs?offset=${e}&limit=${s}`),o=r.data.data.map(i=>({...i,track:this.transformTrack({...i,service:this.serviceType})}));return{items:o,total:((n=r.data.meta)==null?void 0:n.total)||o.length}}async getFollowedArtists(e=50){return console.warn("getFollowedArtists not fully implemented for Apple Music service"),[]}async getPlaylists(e=0,s=50){return(await this.request(`/me/library/playlists?offset=${e}&limit=${s}`)).data.data.map(o=>this.transformPlaylist({...o,service:this.serviceType}))}async getPlaylist(e){const s=await this.request(`/me/library/playlists/${e}`);return this.transformPlaylist({...s.data.data[0],service:this.serviceType})}async getPlaylistTracks(e,s=0,r=100){return(await this.request(`/me/library/playlists/${e}/tracks?offset=${s}&limit=${r}`)).data.data.map(n=>this.transformTrack({...n,service:this.serviceType}))}async createPlaylist(e,s=""){const r=await this.request("/me/library/playlists",{method:"POST",data:{attributes:{name:e,description:s}}});return this.transformPlaylist({...r.data.data[0],service:this.serviceType})}async addTracksToPlaylist(e,s){const r=s.map(o=>({id:o,type:"songs"}));await this.request(`/me/library/playlists/${e}/tracks`,{method:"POST",data:{data:r}})}async getArtist(e){const s=await this.request(`/catalog/${this.getStorefront()}/artists/${e}`);return this.transformArtist({...s.data.data[0],service:this.serviceType})}async getArtistTopTracks(e,s="us"){return(await this.request(`/catalog/${this.getStorefront()}/artists/${e}/view/top-songs`)).data.data.map(o=>this.transformTrack({...o,service:this.serviceType}))}async getArtistAlbums(e,s="album",r=10){return(await this.request(`/catalog/${this.getStorefront()}/artists/${e}/albums?limit=${r}`)).data.data.map(n=>this.transformAlbum({...n,service:this.serviceType}))}async getRelatedArtists(e){try{return(await this.request(`/catalog/${this.getStorefront()}/artists/${e}/similar-artists`)).data.data.map(r=>this.transformArtist({...r,service:this.serviceType}))}catch(s){return console.warn("Failed to fetch related artists:",s.message),[]}}async getArtistAppearances(e,s=10){return[]}async getArtistPlaylists(e,s=10){return console.warn("getArtistPlaylists not implemented for Apple Music service"),[]}async getUserPlaylists(e,s=20){return this.getPlaylists(0,s)}async getAlbum(e){const s=await this.request(`/catalog/${this.getStorefront()}/albums/${e}`);return this.transformAlbum({...s.data.data[0],service:this.serviceType})}async getAlbumTracks(e){return(await this.request(`/catalog/${this.getStorefront()}/albums/${e}/tracks`)).data.data.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTrack(e){const s=await this.request(`/catalog/${this.getStorefront()}/songs/${e}`);return this.transformTrack({...s.data.data[0],service:this.serviceType})}async search(e,s=["track","artist","album","playlist"],r=5){var i,a,c,u,d,f,y,b,v,m,p,_;const o=s.map(k=>{switch(k){case"track":return"songs";case"artist":return"artists";case"album":return"albums";case"playlist":return"playlists";default:return k}}).join(","),n=await this.request(`/catalog/${this.getStorefront()}/search?term=${encodeURIComponent(e)}&types=${o}&limit=${r}`);return new $l({tracks:((c=(a=(i=n.data.results)==null?void 0:i.songs)==null?void 0:a.data)==null?void 0:c.map(k=>this.transformTrack({...k,service:this.serviceType})))||[],artists:((f=(d=(u=n.data.results)==null?void 0:u.artists)==null?void 0:d.data)==null?void 0:f.map(k=>this.transformArtist({...k,service:this.serviceType})))||[],albums:((v=(b=(y=n.data.results)==null?void 0:y.albums)==null?void 0:b.data)==null?void 0:v.map(k=>this.transformAlbum({...k,service:this.serviceType})))||[],playlists:((_=(p=(m=n.data.results)==null?void 0:m.playlists)==null?void 0:p.data)==null?void 0:_.map(k=>this.transformPlaylist({...k,service:this.serviceType})))||[],total:0})}async getNewReleases(e=20,s=0){return(await this.request(`/catalog/${this.getStorefront()}/albums?filter[release-date]=${this.getCurrentYear()}-01-01T00:00:00Z&limit=${e}&offset=${s}`)).data.data.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getRecommendations(e){return console.warn("getRecommendations not fully implemented for Apple Music service"),[]}async getCategories(e=0,s=50){return console.warn("getCategories not implemented for Apple Music service"),{items:[],total:0}}async getCategoryPlaylists(e,s=0,r=50){return console.warn("getCategoryPlaylists not implemented for Apple Music service"),{items:[],total:0}}async followArtist(e){console.warn("followArtist not implemented for Apple Music service")}async unfollowArtist(e){console.warn("unfollowArtist not implemented for Apple Music service")}async followAlbum(e){await this.request("/me/library",{method:"POST",data:{data:[{id:e,type:"albums"}]}})}async unfollowAlbum(e){await this.request(`/me/library/albums/${e}`,{method:"DELETE"})}async followTrack(e){await this.request("/me/library",{method:"POST",data:{data:[{id:e,type:"songs"}]}})}async unfollowTrack(e){await this.request(`/me/library/songs/${e}`,{method:"DELETE"})}async followPlaylist(e){console.warn("followPlaylist not implemented for Apple Music service")}async unfollowPlaylist(e){console.warn("unfollowPlaylist not implemented for Apple Music service")}async checkFollowingArtist(e){return console.warn("checkFollowingArtist not implemented for Apple Music service"),!1}async checkFollowingAlbum(e){try{return await this.request(`/me/library/albums/${e}`),!0}catch{return!1}}async checkFollowingTrack(e){try{return await this.request(`/me/library/songs/${e}`),!0}catch{return!1}}async checkFollowingPlaylist(e){return console.warn("checkFollowingPlaylist not implemented for Apple Music service"),!1}getStorefront(){return this.getCountry()||"us"}getCurrentYear(){return new Date().getFullYear()}transformTrack(e){var s,r,o,n,i,a,c,u,d,f,y,b,v,m,p,_,k,S;return new un({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",title_short:((r=e.attributes)==null?void 0:r.name)||"",artists:((i=(n=(o=e.relationships)==null?void 0:o.artists)==null?void 0:n.data)==null?void 0:i.map(A=>this.transformArtist({...A,service:this.serviceType})))||[],album:(u=(c=(a=e.relationships)==null?void 0:a.albums)==null?void 0:c.data)!=null&&u[0]?this.transformAlbum({...e.relationships.albums.data[0],service:this.serviceType}):null,duration:((d=e.attributes)==null?void 0:d.durationInMillis)||0,previewUrl:((b=(y=(f=e.attributes)==null?void 0:f.previews)==null?void 0:y[0])==null?void 0:b.url)||null,externalUrls:new ft(this.serviceType,{apple:((v=e.attributes)==null?void 0:v.url)||`https://music.apple.com/${this.getStorefront()}/song/${e.id}`}),service:this.serviceType,popularity:(p=(m=e.attributes)==null?void 0:m.playParams)!=null&&p.catalogId?50:0,trackNumber:((_=e.attributes)==null?void 0:_.trackNumber)||0,discNumber:((k=e.attributes)==null?void 0:k.discNumber)||1,followed:!!((S=e.attributes)!=null&&S.libraryId)})}transformArtist(e){var s,r,o,n;return new an({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",images:(r=e.attributes)!=null&&r.artwork?[new vt(e.attributes.artwork.url.replace("{w}x{h}","300x300"),300,300)]:[],genres:((o=e.attributes)==null?void 0:o.genreNames)||[],externalUrls:new ft(this.serviceType,{apple:((n=e.attributes)==null?void 0:n.url)||`https://music.apple.com/${this.getStorefront()}/artist/${e.id}`}),service:this.serviceType,popularity:0,followers:0,followed:!1})}transformAlbum(e){var s,r,o,n,i,a,c,u,d,f;return new cn({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",artists:((n=(o=(r=e.relationships)==null?void 0:r.artists)==null?void 0:o.data)==null?void 0:n.map(y=>this.transformArtist({...y,service:this.serviceType})))||[],images:(i=e.attributes)!=null&&i.artwork?[new vt(e.attributes.artwork.url.replace("{w}x{h}","300x300"),300,300)]:[],releaseDate:((a=e.attributes)==null?void 0:a.releaseDate)||"",totalTracks:((c=e.attributes)==null?void 0:c.trackCount)||0,externalUrls:new ft(this.serviceType,{apple:((u=e.attributes)==null?void 0:u.url)||`https://music.apple.com/${this.getStorefront()}/album/${e.id}`}),service:this.serviceType,albumType:((d=e.attributes)==null?void 0:d.albumType)||"album",followed:!!((f=e.attributes)!=null&&f.libraryId)})}transformPlaylist(e){var s,r,o,n,i,a,c,u,d,f,y;return new dn({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",description:((o=(r=e.attributes)==null?void 0:r.description)==null?void 0:o.standard)||"",images:(n=e.attributes)!=null&&n.artwork?[new vt(e.attributes.artwork.url.replace("{w}x{h}","300x300"),300,300)]:[],owner:((i=e.attributes)==null?void 0:i.curatorName)||"Apple Music",public:!((a=e.attributes)!=null&&a.isPrivate)||!1,totalTracks:((c=e.attributes)==null?void 0:c.trackCount)||0,externalUrls:new ft(this.serviceType,{apple:((u=e.attributes)==null?void 0:u.url)||`https://music.apple.com/${this.getStorefront()}/playlist/${e.id}`}),service:this.serviceType,followed:!1,tracks:((y=(f=(d=e.relationships)==null?void 0:d.tracks)==null?void 0:f.data)==null?void 0:y.map(b=>this.transformTrack({...b,service:this.serviceType})))||[]})}transformUser(e){return new fn({id:e.id,displayName:e.displayName,email:e.email,country:e.country,images:e.images,followers:e.followers,service:this.serviceType})}}class mt{static createService(e){if(!Object.values(ie).includes(e))throw new Error(`Unsupported service type: ${e}`);if(this.services.has(e))return this.services.get(e);let s;switch(e){case ie.SPOTIFY:s=new Tf;break;case ie.DEEZER:s=new Cf;break;case ie.TIDAL:s=new Pf;break;case ie.APPLE:s=new xf;break;default:throw new Error(`Service implementation not found for: ${e}`)}return this.services.set(e,s),s}static getAvailableServices(){return Object.values(ie)}static isServiceSupported(e){return Object.values(ie).includes(e)}static getServiceDisplayName(e){return{[ie.SPOTIFY]:"Spotify",[ie.DEEZER]:"Deezer",[ie.TIDAL]:"Tidal",[ie.APPLE]:"Apple Music"}[e]||e}static getServiceIcon(e){return{[ie.SPOTIFY]:"/img/spotify-icon.svg",[ie.DEEZER]:"/img/deezer-icon.svg",[ie.TIDAL]:"/img/tidal-icon.svg",[ie.APPLE]:"/img/apple-music-icon.svg"}[e]||"/img/default-service-icon.svg"}static clearCache(){this.services.clear()}static removeService(e){this.services.delete(e)}}lr(mt,"services",new Map);class Rf{constructor(){this.currentService=null,this.currentServiceType=this.getStoredServiceType()||ie.SPOTIFY,this.initializeService()}initializeService(){try{this.currentService=mt.createService(this.currentServiceType)}catch(e){console.error("Failed to initialize music service:",e),this.currentServiceType=ie.SPOTIFY,this.currentService=mt.createService(this.currentServiceType)}}getCurrentService(){return this.currentService}getCurrentServiceType(){return this.currentServiceType}async switchService(e){if(!mt.isServiceSupported(e))throw new Error(`Unsupported service type: ${e}`);if(e===this.currentServiceType)return!0;try{return mt.removeService(this.currentServiceType),this.currentServiceType=e,this.currentService=mt.createService(e),this.storeServiceType(e),!0}catch(s){return console.error("Failed to switch service:",s),!1}}getAvailableServices(){return mt.getAvailableServices().map(e=>({type:e,name:mt.getServiceDisplayName(e),icon:mt.getServiceIcon(e),isCurrent:e===this.currentServiceType}))}isAuthenticated(){return this.currentService?this.currentService.isAuthenticated():!1}async authenticate(){if(!this.currentService)throw new Error("No service initialized");return this.currentService.authenticate()}logout(){this.currentService&&this.currentService.logout()}getAuthenticationUrl(e){const s=mt.createService(e);return s.getAuthenticationUrl?s.getAuthenticationUrl():null}storeServiceType(e){try{localStorage.setItem("musicServiceType",e)}catch(s){console.warn("Failed to store service type:",s)}}getStoredServiceType(){try{return localStorage.getItem("musicServiceType")}catch(e){return console.warn("Failed to get stored service type:",e),null}}clearStoredServiceType(){try{localStorage.removeItem("musicServiceType")}catch(e){console.warn("Failed to clear stored service type:",e)}}resetToDefault(){this.switchService(ie.SPOTIFY)}getServiceCapabilities(e){return{[ie.SPOTIFY]:{search:!0,playlists:!0,recommendations:!0,userLibrary:!0,follow:!0,newReleases:!0},[ie.DEEZER]:{search:!0,playlists:!0,recommendations:!1,userLibrary:!0,follow:!0,newReleases:!0},[ie.TIDAL]:{search:!0,playlists:!0,recommendations:!1,userLibrary:!0,follow:!0,newReleases:!0}}[e]||{}}}const le=new Rf,he=tr("music",{state:()=>({currentServiceType:ie.SPOTIFY,availableServices:[],loading:!1,currentUser:null,topTracks:{short:[],medium:[],long:[]},topArtists:{short:[],medium:[],long:[]},savedAlbums:[],savedTracks:[],savedTracksTotal:0,followedArtists:[],playlists:[],genrePlaylists:[],spotifyPlaylistsPagination:{total:0,next:null,previous:null,offset:0,limit:50},searchInput:"",searchResults:{tracks:[],artists:[],albums:[],playlists:[]},newReleases:[],cache:{tracks:new Map,artists:new Map,albums:new Map,playlists:new Map},selectedArtistsRange:1,selectedTracksRange:1,searchTimer:null}),getters:{isLoading:t=>t.loading,isAuthenticated:t=>t.currentUser!==null,currentService:()=>le.getCurrentService(),currentServiceName:t=>{var e;return((e=le.getAvailableServices().find(s=>s.type===t.currentServiceType))==null?void 0:e.name)||"Unknown"},getTopTracksShort:t=>t.topTracks.short,getTopTracksMedium:t=>t.topTracks.medium,getTopTracksLong:t=>t.topTracks.long,getTopArtistsShort:t=>t.topArtists.short,getTopArtistsMedium:t=>t.topArtists.medium,getTopArtistsLong:t=>t.topArtists.long,getSavedAlbums:t=>t.savedAlbums,getSavedTracks:t=>t.savedTracks,getFollowedArtists:t=>t.followedArtists,getPlaylists:t=>t.playlists,getNewReleases:t=>t.newReleases,getSpotifyPlaylists:t=>t.playlists,getGenrePlaylists:t=>t.genrePlaylists,getSearchTracks:t=>t.searchResults.tracks,getSearchArtists:t=>t.searchResults.artists,getSearchAlbums:t=>t.searchResults.albums,getSearchPlaylists:t=>t.searchResults.playlists},actions:{async fetchGenrePlaylists(t=0){this.setLoading(!0);try{t===0&&(this.genrePlaylists=[]);const s=await le.getCurrentService().getGenres(t,50),o=(Array.isArray(s==null?void 0:s.items)?s.items:[]).map(n=>({id:n.id,name:n.name,images:n.images||n.icons||[],description:n.description||`Content from ${n.name} genre`,genreId:n.id,genreName:n.name,type:"playlist"}));this.genrePlaylists.push(...o)}catch(e){throw console.error("Failed to fetch genre playlists:",e),e}finally{this.setLoading(!1)}},async initializeServices(){this.availableServices=le.getAvailableServices(),this.currentServiceType=le.getCurrentServiceType()},async switchService(t){this.setLoading(!0);try{const e=await le.switchService(t);return e&&(this.currentServiceType=t,this.clearAllData()),e}catch(e){throw console.error("Failed to switch service:",e),e}finally{this.setLoading(!1)}},async authenticate(){this.setLoading(!0);try{await le.authenticate()}catch(t){throw console.error("Authentication failed:",t),t}finally{this.setLoading(!1)}},logout(){le.logout(),this.clearAllData()},setLoading(t){this.loading=t},async fetchCurrentUser(){this.setLoading(!0);try{const t=le.getCurrentService();this.currentUser=await t.getCurrentUser()}catch(t){throw console.error("Failed to fetch current user:",t),t}finally{this.setLoading(!1)}},async fetchTopTracks(t=dt.SHORT){this.setLoading(!0);try{const s=await le.getCurrentService().getTopTracks(t),r=t===dt.SHORT?"short":t===dt.MEDIUM?"medium":"long";this.topTracks[r]=s}catch(e){throw console.error("Failed to fetch top tracks:",e),e}finally{this.setLoading(!1)}},async fetchTopArtists(t=dt.SHORT){this.setLoading(!0);try{const e=le.getCurrentService(),s=await e.getTopArtists(t),r=await Promise.all(s.map(async n=>{try{const i=await e.getArtistTopTracks(n.id);return i.length>0&&i[0].previewUrl&&(n.previewUrl=i[0].previewUrl),n.tracks=i,n}catch(i){return console.error(`Failed to fetch tracks for artist ${n.id}:`,i),n}})),o=t===dt.SHORT?"short":t===dt.MEDIUM?"medium":"long";this.topArtists[o]=r}catch(e){throw console.error("Failed to fetch top artists:",e),e}finally{this.setLoading(!1)}},async fetchSavedAlbums(t=0){this.setLoading(!0);try{t===0&&(this.savedAlbums=[]);const s=await le.getCurrentService().getSavedAlbums(t,20);await this.enrichAlbumData(s.map(r=>r.album)),this.savedAlbums.push(...s),s.length>0&&await this.fetchSavedAlbums(t+20)}catch(e){throw console.error("Failed to fetch saved albums:",e),e}finally{this.setLoading(!1)}},async fetchSavedTracks(t=0){this.setLoading(!0);try{t===0&&(this.savedTracks=[]);const s=await le.getCurrentService().getSavedTracks(t,50);s.items&&s.total!==void 0?(this.savedTracks.push(...s.items),this.savedTracksTotal=s.total):(this.savedTracks.push(...s),this.savedTracksTotal=s.length)}catch(e){throw console.error("Failed to fetch saved tracks:",e),e}finally{this.setLoading(!1)}},async fetchFollowedArtists(){this.setLoading(!0);try{const t=le.getCurrentService(),e=await t.getFollowedArtists(50),s=await Promise.all(e.map(async r=>{try{const o=await t.getArtistTopTracks(r.id);return o.length>0&&o[0].previewUrl&&(r.previewUrl=o[0].previewUrl),r.tracks=o,r}catch(o){return console.error(`Failed to fetch tracks for followed artist ${r.id}:`,o),r}}));this.followedArtists=s}catch(t){throw console.error("Failed to fetch followed artists:",t),t}finally{this.setLoading(!1)}},async fetchPlaylists(t=0){this.setLoading(!0);try{t===0&&(this.playlists=[]);const s=await le.getCurrentService().getUserPlaylists(localStorage.getItem("deezer-user-id"),t);this.playlists.push(...s),s.length===50&&await this.fetchPlaylists(t+50)}catch(e){throw console.error("Failed to fetch playlists:",e),e}finally{this.setLoading(!1)}},async fetchPlaylistTracks(t,e=0){try{return await le.getCurrentService().getPlaylistTracks(t,e,100)}catch(s){throw console.error("Failed to fetch playlist tracks:",s),s}},async createPlaylist(t,e=""){try{const r=await le.getCurrentService().createPlaylist(t,e);return this.playlists.unshift(r),r}catch(s){throw console.error("Failed to create playlist:",s),s}},async fetchNewReleases(t=0){this.setLoading(!0);try{const s=await le.getCurrentService().getNewReleases(20,t);await this.enrichAlbumData(s),this.newReleases.push(...s),s.length>0&&t<100&&await this.fetchNewReleases(t+20)}catch(e){throw console.error("Failed to fetch new releases:",e),e}finally{this.setLoading(!1)}},async fetchSpotifyPlaylists(t=0){this.setLoading(!0);try{t===0&&(this.playlists=[]);const e=le.getCurrentService();if(e.getSpotifyPlaylists){const s=await e.getSpotifyPlaylists(t,50);this.playlists.push(...s)}else{const s=await e.getPlaylists(t,50);this.playlists.push(...s)}}catch(e){throw console.error("Failed to fetch Spotify playlists:",e),e}finally{this.setLoading(!1)}},async search(t){if(this.searchInput=t,this.searchTimer&&clearTimeout(this.searchTimer),!t){this.clearSearchResults();return}this.searchTimer=setTimeout(async()=>{this.setLoading(!0);try{const s=await le.getCurrentService().search(t,["album","artist","playlist","track"],5);this.searchResults.tracks=s.tracks,this.searchResults.artists=s.artists,this.searchResults.albums=s.albums,this.searchResults.playlists=s.playlists,await this.enrichAlbumData(this.searchResults.albums),await this.enrichArtistData(this.searchResults.artists),await this.enrichPlaylistData(this.searchResults.playlists)}catch(e){throw console.error("Failed to search:",e),e}finally{this.setLoading(!1)}},2e3)},clearSearchResults(){this.searchResults={tracks:[],artists:[],albums:[],playlists:[]}},async enrichAlbumData(t){const e=le.getCurrentService();for(const s of t)try{const r=await e.getAlbumTracks(s.id);s.tracks=r,r.length>0&&(r[0].preview_url||r[0].previewUrl)&&(s.preview_url=r[0].preview_url||r[0].previewUrl,s.previewUrl=r[0].preview_url||r[0].previewUrl)}catch(r){console.error(`Failed to enrich album ${s.id}:`,r)}},async enrichArtistData(t){const e=le.getCurrentService();for(const s of t)try{const r=await e.getArtistTopTracks(s.id);s.tracks=r,r.length>0&&r[0].previewUrl&&(s.previewUrl=r[0].previewUrl)}catch(r){console.error(`Failed to enrich artist ${s.id}:`,r)}},async enrichPlaylistData(t){const e=le.getCurrentService();for(const s of t)try{const r=await e.getPlaylist(s.id);s.tracks=r.tracks;let o=null;r.tracks&&r.tracks.items&&r.tracks.items.length>0?o=r.tracks.items[0].track:r.tracks&&Array.isArray(r.tracks)&&r.tracks.length>0&&(o=r.tracks[0]),o&&(o.previewUrl||o.preview_url)&&(s.previewUrl=o.previewUrl||o.preview_url)}catch(r){console.error(`Failed to enrich playlist ${s.id}:`,r)}},async followPlaylist(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followPlaylist(t.id),t.followed=!0):(await e.unfollowPlaylist(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow playlist:",e),e}},async followArtist(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followArtist(t.id),t.followed=!0):(await e.unfollowArtist(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow artist:",e),e}},async followAlbum(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followAlbum(t.id),t.followed=!0):(await e.unfollowAlbum(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow album:",e),e}},async followTrack(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followTrack(t.id),t.followed=!0):(await e.unfollowTrack(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow track:",e),e}},setSelectedArtistsRange(t){this.selectedArtistsRange=t},setSelectedTracksRange(t){this.selectedTracksRange=t},setSearchTimer(t){this.searchTimer=t},getCachedItem(t,e){return this.cache[t].get(e)},setCachedItem(t,e,s){this.cache[t].set(e,s)},clearCache(t){t?this.cache[t].clear():Object.keys(this.cache).forEach(e=>{this.cache[e].clear()})},clearAllData(){this.currentUser=null,this.topTracks={short:[],medium:[],long:[]},this.topArtists={short:[],medium:[],long:[]},this.savedAlbums=[],this.savedTracks=[],this.followedArtists=[],this.newReleases=[],this.playlists=[],this.searchResults={tracks:[],artists:[],albums:[],playlists:[]},this.loading=!1,this.clearCache()}}}),Mf={class:"mobile-settings-display"},Ef={class:"mobile-actions-section"},If={class:"mobile-actions-section"},Lf={class:"mobile-actions-section"},Df={class:"mobile-actions-section"},zf={class:"mobile-logout-section"},Of={__name:"SettingsDisplay",setup(t){const e=ve(),s=nt(),r=he(),o=U("light"),{currentServiceType:n}=Yt(r),i=m=>{const p=document.documentElement;p.className=m==="light"?"":m,localStorage.setItem("user-theme",m),o.value=m},a=()=>{e.setAudioPreview(!e.audioPreview)},c=()=>{e.setRestartSongOnClick(!e.restartSongOnClick)},u=()=>{e.setUnplayableTracks(!e.unplayableTracks)},d=()=>{e.setOpenLinks(!e.openLinks)},f=()=>{s.toggleViewMode()},y=()=>{localStorage.clear(),window.location.reload()},b=()=>{localStorage.removeItem("welcome-modal-seen"),window.location.reload()},v=async m=>{try{await r.switchService(m),console.log(`Switched to ${m}`)}catch(p){console.error("Failed to switch service:",p),alert("Failed to switch service. Please try again.")}};return Ce(()=>{const m=localStorage.getItem("user-theme")||"light";o.value=m,i(m)}),(m,p)=>(h(),g("div",Mf,[p[30]||(p[30]=Xe('<div class="text-center"><div class="profile-avatar"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="avatar-icon"><path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd"></path></svg></div><h2 class="profile-title">Profile</h2><p class="profile-description">Your profile settings and preferences</p></div><div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06z"></path></svg></div><h1 class="mobile-header-title">Audio Settings</h1></div>',2)),l("div",Ef,[l("button",{class:"mobile-action-button",onClick:a},[p[6]||(p[6]=l("span",{class:"mobile-action-icon"},"",-1)),p[7]||(p[7]=l("span",{class:"mobile-action-text"},"Audio Preview",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).audioPreview}])},M(w(e).audioPreview?"ON":"OFF"),3)]),l("button",{class:"mobile-action-button",onClick:c},[p[8]||(p[8]=l("span",{class:"mobile-action-icon"},"",-1)),p[9]||(p[9]=l("span",{class:"mobile-action-text"},"Restart song on click",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).restartSongOnClick}])},M(w(e).restartSongOnClick?"ON":"OFF"),3)]),l("button",{class:"mobile-action-button",onClick:u},[p[10]||(p[10]=l("span",{class:"mobile-action-icon"},"",-1)),p[11]||(p[11]=l("span",{class:"mobile-action-text"},"Show unplayable tracks",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).unplayableTracks}])},M(w(e).unplayableTracks?"ON":"OFF"),3)]),l("button",{class:"mobile-action-button",onClick:d},[p[12]||(p[12]=l("span",{class:"mobile-action-icon"},"",-1)),p[13]||(p[13]=l("span",{class:"mobile-action-text"},"Open links in new tab",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).openLinks}])},M(w(e).openLinks?"ON":"OFF"),3)])]),p[31]||(p[31]=Xe('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path></svg></div><h1 class="mobile-header-title">Theme</h1></div>',1)),l("div",If,[l("button",{class:"mobile-action-button",onClick:p[0]||(p[0]=_=>i("light"))},[p[14]||(p[14]=l("span",{class:"mobile-action-icon"},"",-1)),p[15]||(p[15]=l("span",{class:"mobile-action-text"},"Light Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="light"}])},M(o.value==="light"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[1]||(p[1]=_=>i("dark"))},[p[16]||(p[16]=l("span",{class:"mobile-action-icon"},"",-1)),p[17]||(p[17]=l("span",{class:"mobile-action-text"},"Dark Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="dark"}])},M(o.value==="dark"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[2]||(p[2]=_=>i("dark-blue"))},[p[18]||(p[18]=l("span",{class:"mobile-action-icon"},"",-1)),p[19]||(p[19]=l("span",{class:"mobile-action-text"},"Dark Blue Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="dark-blue"}])},M(o.value==="dark-blue"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[3]||(p[3]=_=>i("dq"))},[p[20]||(p[20]=l("span",{class:"mobile-action-icon"},"",-1)),p[21]||(p[21]=l("span",{class:"mobile-action-text"},"DQ Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="dq"}])},M(o.value==="dq"?"ACTIVE":""),3)])]),p[32]||(p[32]=Xe('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z" clip-rule="evenodd"></path></svg></div><h1 class="mobile-header-title">Display Settings</h1></div>',1)),l("div",Lf,[l("button",{class:"mobile-action-button",onClick:f},[p[22]||(p[22]=l("span",{class:"mobile-action-icon"},"",-1)),p[23]||(p[23]=l("span",{class:"mobile-action-text"},"View Mode",-1)),l("span",{class:K(["mobile-action-status",{active:w(s).viewMode==="grid"}])},M(w(s).viewMode==="list"?"LIST":"GRID"),3)])]),p[33]||(p[33]=Xe('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12 3.75a8.25 8.25 0 110 16.5 8.25 8.25 0 010-16.5z"></path></svg></div><h1 class="mobile-header-title">Music Service</h1></div>',1)),l("div",Df,[l("button",{class:"mobile-action-button",onClick:p[4]||(p[4]=_=>v("spotify"))},[p[24]||(p[24]=l("span",{class:"mobile-action-icon"},"",-1)),p[25]||(p[25]=l("span",{class:"mobile-action-text"},"Spotify",-1)),l("span",{class:K(["mobile-action-status",{active:w(n)==="spotify"}])},M(w(n)==="spotify"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[5]||(p[5]=_=>v("deezer"))},[p[26]||(p[26]=l("span",{class:"mobile-action-icon"},"",-1)),p[27]||(p[27]=l("span",{class:"mobile-action-text"},"Deezer",-1)),l("span",{class:K(["mobile-action-status",{active:w(n)==="deezer"}])},M(w(n)==="deezer"?"ACTIVE":""),3)])]),p[34]||(p[34]=Xe('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06z"></path></svg></div><h1 class="mobile-header-title">Actions</h1></div>',1)),l("div",{class:"mobile-actions-section"},[l("button",{class:"mobile-action-button",onClick:y},p[28]||(p[28]=[l("span",{class:"mobile-action-icon"},"",-1),l("span",{class:"mobile-action-text"},"Clear Cache",-1)])),l("button",{class:"mobile-action-button",onClick:b},p[29]||(p[29]=[l("span",{class:"mobile-action-icon"},"",-1),l("span",{class:"mobile-action-text"},"Show Welcome Modal",-1)]))]),l("div",zf,[W(kl)])]))}};class Uf{constructor(){this.baseURL="https://api.spotify.com/v1"}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,...s.headers},...s};try{return await $e(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,$e(o);throw i}}async refreshToken(){const e=this.getUsername(),s=await $e.get(`/spotify/refresh_token/${e}`);if(s.status===200)return s.data;throw new Error("Failed to refresh token")}async getTopTracks(e="short_term"){return this.request(`/me/top/tracks?time_range=${e}`)}async getTopArtists(e="short_term"){return this.request(`/me/top/artists?time_range=${e}`)}async getSavedAlbums(e=0,s=20){return this.request(`/me/albums?offset=${e}&limit=${s}`)}async getSavedTracks(e=0,s=50){return this.request(`/me/tracks?offset=${e}&limit=${s}`)}async getFollowedArtists(e=50){return this.request(`/me/following?type=artist&limit=${e}`)}async getPlaylists(e=0,s=50){return this.request(`/me/playlists?fields=items(name,id,images,owner,public)&limit=${s}&offset=${e}`)}async getPlaylist(e){return this.request(`/playlists/${e}`)}async getPlaylistTracks(e,s=0,r=100){return this.request(`/playlists/${e}/tracks?offset=${s}&limit=${r}`)}async getSpotifyPlaylists(e=0,s=50){return this.request(`/users/spotify/playlists?fields=items(name,id,images,owner,public)&limit=${s}&offset=${e}`)}async getArtist(e){return this.request(`/artists/${e}`)}async getArtistTopTracks(e,s="UA"){const r=this.getCountry();return this.request(`/artists/${e}/top-tracks?market=${s}${r}`)}async getArtistAlbums(e,s="album",r=10){return this.request(`/artists/${e}/albums?include_groups=${s}&limit=${r}`)}async getArtistSingles(e,s=10){return this.request(`/artists/${e}/albums?include_groups=single,compilation&limit=${s}`)}async getArtistAppearances(e,s=10){return this.request(`/artists/${e}/albums?include_groups=appears_on&limit=${s}`)}async getRelatedArtists(e){try{return await this.request(`/artists/${e}/related-artists`)}catch(s){return console.warn("Failed to fetch related artists:",s.message),{data:{artists:[]}}}}async getAlbum(e){return this.request(`/albums/${e}`)}async getAlbumTracks(e){return this.request(`/albums/${e}/tracks`)}async getAlbums(e){return this.request(`/albums?ids=${e}`)}async getTrack(e){return this.request(`/tracks/${e}`)}async search(e,s="album,artist,playlist,track",r=5){return this.request(`/search/?q=${encodeURIComponent(e)}&type=${s}&limit=${r}`)}async getNewReleases(e=20,s=0){return this.request(`/browse/new-releases?limit=${e}&offset=${s}`)}async getRecommendations(e){const s=Object.entries(e).filter(([r,o])=>o).map(([r,o])=>`${r}=${o}`).join("&");return this.request(`/recommendations?${s}`)}async followPlaylist(e){return this.request(`/playlists/${e}/followers`,{method:"PUT"})}async unfollowPlaylist(e){return this.request(`/playlists/${e}/followers`,{method:"DELETE"})}async followArtist(e){return this.request(`/me/following?type=artist&ids=${e}`,{method:"PUT"})}async unfollowArtist(e){return this.request(`/me/following?type=artist&ids=${e}`,{method:"DELETE"})}async followAlbum(e){return this.request(`/me/albums?ids=${e}`,{method:"PUT"})}async unfollowAlbum(e){return this.request(`/me/albums?ids=${e}`,{method:"DELETE"})}async followTrack(e){return this.request(`/me/tracks?ids=${e}`,{method:"PUT"})}async unfollowTrack(e){return this.request(`/me/tracks?ids=${e}`,{method:"DELETE"})}async checkFollowingPlaylist(e){const s=this.getUsername();return this.request(`/playlists/${e}/followers/contains?ids=${s}`)}async checkFollowingArtist(e){return this.request(`/me/following/contains?type=artist&ids=${e}`)}async checkFollowingAlbum(e){return this.request(`/me/albums/contains?ids=${e}`)}async checkFollowingTrack(e){return this.request(`/me/tracks/contains?ids=${e}`)}async createPlaylist(e){const s=this.getUsername();return this.request(`/users/${s}/playlists`,{method:"POST",data:{name:e}})}async addTracksToPlaylist(e,s){const r=s.map(o=>`spotify:track:${o}`).join(",");return this.request(`/playlists/${e}/tracks?uris=${r}`,{method:"POST"})}}const mo=new Uf,Ps={formatArtistNamesSimple:t=>{if(!t||!Array.isArray(t)||t.length===0)return"Unknown Artist";const e=t.map(({name:r})=>r).filter(r=>r);if(e.length===0)return"Unknown Artist";const s=e.pop();return e.length?e.join(", ")+" & "+s:s},getPrimaryArtist:t=>{var e;return((e=t==null?void 0:t[0])==null?void 0:e.name)||"Unknown Artist"},hasPreview:t=>!!(t.preview_url||t.previewUrl),hasImage:t=>!!(t.images&&t.images[0])},De=tr("queue",{state:()=>({queue:localStorage.getItem("queue")?JSON.parse(localStorage.getItem("queue")).length:0,queueArr:localStorage.getItem("queue")?JSON.parse(localStorage.getItem("queue")):[],queueModal:!1}),getters:{getQueue:t=>t.queue,getQueueArr:t=>t.queueArr,isQueueModalOpen:t=>t.queueModal},actions:{setQueue(t){this.queue=t},setQueueArr(t){this.queueArr=t},setQueueModal(t){this.queueModal=t},addToQueue(t){var n,i,a,c,u,d;const e=localStorage.getItem("queue"),s={id:t.id,name:t.name,artists:t.artists||((n=t.album)==null?void 0:n.artists)||[],image:((a=(i=t.album)==null?void 0:i.images)==null?void 0:a[0])||((c=t.images)==null?void 0:c[0]),preview_url:t.preview_url||t.previewUrl||((u=t==null?void 0:t.track)==null?void 0:u.preview_url)||((d=t==null?void 0:t.items)==null?void 0:d[0].preview_url)};s.artists&&s.artists.length>0?s.artists=this.formatArtistNames(s.artists):s.artists="Unknown Artist";let r=e?JSON.parse(e):[];r.findIndex(f=>f.id===t.id)===-1&&(r.push(s),localStorage.setItem("queue",JSON.stringify(r)),this.setQueue(r.length),this.setQueueArr(r))},removeFromQueue(t){const e=JSON.parse(localStorage.getItem("queue"))||[],s=e.findIndex(r=>r.id===t);s>-1&&(e.splice(s,1),e.length===0?(localStorage.removeItem("queue"),this.setQueueArr([]),this.setQueue(0)):(localStorage.setItem("queue",JSON.stringify(e)),this.setQueueArr(e),this.setQueue(e.length)))},async saveQueue(){if(!(!this.queueArr||this.queueArr.length===0))try{if(this.queueArr.length>50)for(let t=0;t<this.queueArr.length;t+=49){const s=this.queueArr.slice(t,t+49).map(r=>r.id).join(",");await mo.request(`/me/tracks?ids=${s}`,{method:"PUT"})}else{const t=this.queueArr.map(e=>e.id).join(",");await mo.request(`/me/tracks?ids=${t}`,{method:"PUT"})}this.clearQueue()}catch(t){throw console.error("Failed to save queue:",t),t}},async saveQueueToPlaylist(t){if(!(!this.queueArr||this.queueArr.length===0))try{const e=this.queueArr.map(s=>s.id);return await mo.addTracksToPlaylist(t,e),!0}catch(e){throw console.error("Failed to save queue to playlist:",e),e}},clearQueue(){localStorage.removeItem("queue"),this.setQueue(0),this.setQueueArr([])},loadQueue(){const t=localStorage.getItem("queue");if(t){const e=JSON.parse(t);this.setQueue(e.length),this.setQueueArr(e)}else this.setQueue(0),this.setQueueArr([])},isInQueue(t){return!this.queueArr||this.queueArr.length===0?!1:this.queueArr.some(e=>e.id===t)},getQueueCount(){return this.queue||0},formatArtistNames(t){return!t||!Array.isArray(t)||t.length===0?"Unknown Artist":Ps.formatArtistNamesSimple(t)}}});function cs(t,e=null){const s=E(()=>{var u,d,f,y,b;return e||((d=(u=t.value)==null?void 0:u.images)!=null&&d[0]?t.value.images[0]:(b=(y=(f=t.value)==null?void 0:f.album)==null?void 0:y.images)!=null&&b[0]?t.value.album.images[0]:null)}),r=E(()=>{var u,d;return!!((u=t.value)!=null&&u.preview_url||(d=t.value)!=null&&d.previewUrl)}),o=E(()=>!!s.value),n=E(()=>r.value&&o.value?"mobile-playable":!r.value&&o.value?"mobile-unplayable mobile-half-opacity":r.value&&!o.value?"mobile-playable mobile-no-image":"mobile-unplayable mobile-no-image mobile-half-opacity"),i=E(()=>o.value?{"background-image":`url(${s.value.url})`}:{}),a=E(()=>r.value?t.value.preview_url||t.value.previewUrl:null),c=E(()=>{var u;return((u=t.value)==null?void 0:u.id)||null});return{image:s,hasPreview:r,hasImage:o,displayClass:n,backgroundStyle:i,previewUrl:a,trackId:c}}const Ff=["src","alt"],qf={key:1,class:"no-image"},Vf={key:2,class:"playing-indicator"},Nf={class:"item-name"},Hf={key:0,class:"item-artist"},Bf=["preload","src"],Jt={__name:"MobileTrackItem",props:{track:{type:Object,required:!0},trackItem:{type:Object,required:!1},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},num:{type:Number,required:!0},viewMode:{type:String,default:"list"}},emits:["click","coverClick","infoClick","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=ve(),n=v=>Ps.formatArtistNamesSimple(v),{hasPreview:i,audioPreload:a,audioSrc:c}=cs(E(()=>s.track)),u=v=>{r("click",s.trackItem||s.track,v)},d=v=>{v.stopPropagation(),r("coverClick",s.trackItem||s.track,v)},f=v=>{v.stopPropagation(),r("infoClick",s.trackItem||s.track,v)},y=v=>(console.log(v),v.tracks&&v.tracks.items&&v.tracks.items.length>0?v.tracks.items[0].preview_url||v.tracks.items[0].previewUrl:v.preview_url||v.previewUrl?v.preview_url||v.previewUrl:null),b=v=>{var _,k;const m=y(v);console.log("hasPreview",m);const p=v.images&&v.images[0]||((_=v.album)==null?void 0:_.images)&&((k=v.album)==null?void 0:k.images[0]);return m&&p?"playable":!m&&p?"unplayable half-opacity":m&&!p?"playable no-image":"unplayable no-image half-opacity"};return(v,m)=>(h(),g("div",{class:"song-item",onClick:u},[l("div",{class:"item-cover",onClick:d,style:{position:"relative"}},[t.track.album&&t.track.album.images&&t.track.album.images[0]?(h(),g("img",{key:0,src:t.track.album.images[0].url,alt:t.track.name,class:K(b(t.track))},null,10,Ff)):(h(),g("div",qf,m[0]||(m[0]=[l("span",{class:"no-image-icon"},"",-1)]))),w(i)&&w(o).mobileIsTrackPlaying(t.track.id)?(h(),g("div",Vf,m[1]||(m[1]=[l("span",{class:"playing-icon"},"",-1)]))):R("",!0)]),l("div",{class:"item-info",onClick:f},[l("div",Nf,M(t.track.name),1),t.track.artists?(h(),g("div",Hf,M(n(t.track.artists)),1)):R("",!0)]),l("audio",{preload:w(a),src:w(c)},null,8,Bf)]))}};function Ve(){const t=U(null),e=U(null),s=U(null),r=U(null),o=U(null);return{selectedItem:t,selectedTopMenu:e,selectedPersonalPlaylist:s,selectedSpotifyPlaylist:r,selectedGenrePlaylist:o,setSelectedItem:f=>{t.value=f},setSelectedPersonalPlaylist:f=>{s.value=f},setSelectedSpotifyPlaylist:f=>{r.value=f},setSelectedGenrePlaylist:f=>{o.value=f},setSelectedTopMenu:f=>{e.value=e.value===f?null:f},clearSelections:()=>{t.value=null,s.value=null,r.value=null,o.value=null}}}const Kf={class:"item-cover",style:{position:"relative"}},jf=["src","alt"],Gf={key:0,class:"playing-indicator"},Qf={class:"item-info"},Wf={class:"item-name"},Xf={class:"item-artist"},Yf=["preload","src"],Jf={__name:"QueueItem",props:{track:{type:Object,required:!0},trackItem:{type:Object,required:!1},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},num:{type:Number,required:!0},viewMode:{type:String,default:"list"}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=ve(),{hasPreview:n,audioPreload:i,audioSrc:a}=cs(E(()=>s.track)),c=async v=>{r("click",s.trackItem||s.track,v);const m=s.track.preview_url||s.track.previewUrl;m&&await o.mobileToggleTrack(s.track.id,m)},u=v=>(console.log(v),v.tracks&&v.tracks.items&&v.tracks.items.length>0?v.tracks.items[0].preview_url||v.tracks.items[0].previewUrl:v.preview_url||v.previewUrl?v.preview_url||v.previewUrl:null),d=v=>{var _,k;const m=u(v);console.log("hasPreview",m);const p=v.images&&v.images[0]||((_=v.album)==null?void 0:_.images)&&((k=v.album)==null?void 0:k.images[0]);return m&&p?"playable":!m&&p?"unplayable half-opacity":m&&!p?"playable no-image":"unplayable no-image half-opacity"},f=E(()=>{var m;const v=s.track;if(v.image)return v.image.url;if((m=v.album)!=null&&m.image)return v.album.image.url}),y=E(()=>s.track.artists),b=E(()=>o.mobileIsTrackPlaying(s.track.id));return(v,m)=>(h(),g("div",{class:"song-item",onClick:c},[l("div",Kf,[l("img",{src:f.value,alt:t.track.name,class:K(d(t.track))},null,10,jf),w(n)&&b.value?(h(),g("div",Gf,m[0]||(m[0]=[l("span",{class:"playing-icon"},"",-1)]))):R("",!0)]),l("div",Qf,[l("div",Wf,M(t.track.name),1),l("div",Xf,M(y.value),1)]),l("audio",{preload:w(i),src:w(a)},null,8,Yf)]))}},Zf={class:"queue-display"},ep={class:"queue-header"},tp={class:"queue-title"},sp={class:"header-actions"},rp=["title"],op={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},np={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ip={key:0,class:"queue-actions"},lp={class:"playlist-selector"},ap=["value"],cp={key:2,class:"empty-queue"},up={key:3,class:"premium-notice"},dp={__name:"QueueDisplay",setup(t){const e=De(),s=he(),r=nt();Ce(()=>{e.loadQueue(),s.getPlaylists.length===0&&s.fetchPlaylists(0)});const o=async()=>{try{await e.saveQueue()}catch(a){console.error("Failed to save queue:",a)}},n=async a=>{if(a==="new"){const c=prompt("Name for your playlist:","Discovered");if(c)try{await s.createPlaylist(c),await s.fetchPlaylists(0)}catch(u){console.error("Failed to create playlist:",u)}}else if(a!=="default")try{await e.saveQueueToPlaylist(a)}catch(c){console.error("Failed to save queue to playlist:",c)}},i=()=>{r.toggleViewMode()};return(a,c)=>(h(),g("div",Zf,[l("div",ep,[l("div",tp,[c[2]||(c[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"queue-icon"},[l("path",{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0016.5 9h-1.875a1.875 1.875 0 01-1.875-1.875V5.25A3.75 3.75 0 009 1.5H5.625z"}),l("path",{d:"M12.971 1.816A5.23 5.23 0 0114.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 013.434 1.279 9.768 9.768 0 00-6.963-6.963z"})],-1)),l("h3",null,"Queue ("+M(w(e).getQueueCount())+")",1)]),l("div",sp,[l("button",{class:"view-toggle-btn",onClick:i,title:w(r).viewMode==="list"?"Grid view":"List view"},[w(r).viewMode==="list"?(h(),g("svg",op,c[3]||(c[3]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",np,c[4]||(c[4]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,rp)])]),w(e).getQueueCount()>0?(h(),g("div",ip,[l("button",{class:"action-btn save-btn",onClick:o},c[5]||(c[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"action-icon"},[l("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})],-1),Ae(" Save All ",-1)])),l("div",lp,[l("select",{class:"playlist-select",onChange:c[0]||(c[0]=u=>n(u.target.value))},[c[6]||(c[6]=l("option",{value:"default",selected:"",disabled:""},"Add to Playlist",-1)),c[7]||(c[7]=l("option",{value:"new"},"New Playlist",-1)),(h(!0),g(j,null,te(w(s).getPlaylists,(u,d)=>(h(),g("option",{key:d,value:u.id},M(u.name),9,ap))),128))],32)]),l("button",{class:"action-btn clear-btn",onClick:c[1]||(c[1]=u=>w(e).clearQueue())},c[8]||(c[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"action-icon"},[l("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z","clip-rule":"evenodd"})],-1),Ae(" Clear ",-1)]))])):R("",!0),w(e).getQueueCount()?(h(),g("div",{key:1,class:K(["releases-container",w(r).viewMode])},[(h(!0),g(j,null,te(w(e).getQueueArr,(u,d)=>(h(),Z(Jf,{key:d,track:u,"section-name":"queue","parent-id":"queue",num:11,"show-remove":!0,"view-mode":w(r).viewMode,onRemove:f=>w(e).removeFromQueue(u.id)},null,8,["track","view-mode","onRemove"]))),128))],2)):(h(),g("div",cp,c[9]||(c[9]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})])],-1),l("h4",null,"Your queue is empty",-1),l("p",null,"Add tracks from your discoveries to build your queue",-1)]))),w(e).getQueueCount()>0?(h(),g("div",up,c[10]||(c[10]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"notice-icon"},[l("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})],-1),l("span",null,"Spotify Premium required to play full songs. Save tracks to listen in the main Spotify app.",-1)]))):R("",!0)]))}},fp={class:"pagination-container"},pp=["disabled"],hp={class:"pagination-info"},mp=["disabled"],Yr={__name:"MobilePaginationContainer",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},emits:["page-change"],setup(t,{emit:e}){const s=t,r=e,o=i=>{i>=1&&i<=s.totalPages&&r("page-change",i)};E(()=>(s.currentPage-1)*s.itemsPerPage+1),E(()=>{const i=s.currentPage*s.itemsPerPage;return Math.min(i,s.totalPages)});const n=E(()=>s.totalPages===0?"No items":`${s.currentPage} of ${s.totalPages}`);return(i,a)=>(h(),g("div",fp,[l("button",{onClick:a[0]||(a[0]=c=>o(t.currentPage-1)),disabled:t.currentPage===1,class:"action-button"}," Previous ",8,pp),l("span",hp,M(n.value),1),l("button",{onClick:a[1]||(a[1]=c=>o(t.currentPage+1)),disabled:t.currentPage===t.totalPages,class:"action-button"}," Next ",8,mp)]))}},vp={class:"mobile-top-tracks"},gp={class:""},yp={class:"header-content"},wp={class:"header-text"},bp={class:"section-title"},kp={class:"header-actions"},_p=["title"],Sp={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Ap={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Tp={class:"search-bar"},$p=["placeholder"],Cp={class:"my-2"},Pp={key:0,class:"empty-search"},xp={key:1,class:"empty-state"},Rp=["onClick"],Mp={key:0,class:"item-cover"},Ep=["src"],Ip={key:1,class:"playlist-cover"},Lp={class:"item-info"},Dp={class:"item-name"},zp={class:"item-artist"},Op={key:0},Up={key:1},Fp={key:2},Jl={__name:"PlaylistSelector",props:{playlists:{type:Array,default:()=>[]},selectedPlaylist:{type:String,default:""},placeholder:{type:String,default:"Search playlists..."},title:{type:String,default:"Select a playlist"},itemsPerPage:{type:Number,default:50}},emits:["playlist-select","search","load-more","playlist-arrow-click"],setup(t,{emit:e}){const s=nt(),r=t,o=e,n=U(""),i=U(1),a=E(()=>n.value?r.playlists.filter(p=>p.name.toLowerCase().includes(n.value.toLowerCase())):r.playlists),c=E(()=>{const p=(i.value-1)*r.itemsPerPage,_=p+r.itemsPerPage;return a.value.slice(p,_)}),u=E(()=>Math.ceil(a.value.length/r.itemsPerPage)),d=p=>{if(console.log("PlaylistSelector: Arrow clicked for playlist:",p),console.log("Playlist name:",p==null?void 0:p.name),console.log("Playlist id:",p==null?void 0:p.id),console.log("Playlist type:",typeof p),!p||!p.id){console.error("Invalid playlist data:",p);return}o("playlist-arrow-click",p)},f=p=>{n.value=p.target.value,m(),o("search",p)},y=()=>{n.value="",m(),o("search",{target:{value:""}})},b=()=>{s.toggleViewMode()},v=p=>{i.value=p,i.value===u.value&&o("load-more")},m=()=>{i.value=1};return(p,_)=>(h(),g("div",vp,[l("div",gp,[l("div",yp,[l("div",wp,[l("h2",bp,M(t.title),1)]),l("div",kp,[l("button",{class:"refresh-btn",onClick:_[0]||(_[0]=(...k)=>p.handleRefresh&&p.handleRefresh(...k)),title:"Refresh"},_[2]||(_[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:b,title:w(s).viewMode==="list"?"Grid view":"List view"},[w(s).viewMode==="list"?(h(),g("svg",Sp,_[3]||(_[3]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",Ap,_[4]||(_[4]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,_p)])]),l("div",Tp,[we(l("input",{type:"text",placeholder:t.placeholder,class:"search-input","onUpdate:modelValue":_[1]||(_[1]=k=>n.value=k),onInput:f},null,40,$p),[[Ss,n.value]]),n.value?(h(),g("button",{key:0,onClick:y,class:"clear-button",type:"button"},_[5]||(_[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"clear-icon"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))):R("",!0),_[6]||(_[6]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"search-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1))])]),l("div",Cp,[a.value.length===0&&n.value?(h(),g("div",Pp,_[7]||(_[7]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})])],-1),l("h4",null,"No playlists found",-1),l("p",null,"Try adjusting your search terms",-1)]))):t.playlists.length===0?(h(),g("div",xp,_[8]||(_[8]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})])],-1),l("h4",null,"No playlists available",-1),l("p",null,"Create or import playlists to get started",-1)]))):(h(),g("div",{key:2,class:K(["releases-container",w(s).viewMode])},[(h(!0),g(j,null,te(c.value,(k,S)=>(h(),g("div",{key:S,class:K(["song-item",{selected:t.selectedPlaylist===k.id}]),onClick:A=>d(k)},[k.images&&k.images.length>0?(h(),g("div",Mp,[l("img",{src:k.images[0].url,alt:"playlist image"},null,8,Ep)])):(h(),g("div",Ip,_[9]||(_[9]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"playlist-icon"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),l("div",Lp,[l("div",Dp,M(k.name),1),l("div",zp,[k.owner?(h(),g("span",Op,M(k.owner.display_name),1)):(h(),g("span",Up,"Spotify")),k.tracks&&k.tracks.length>0?(h(),g("span",Fp,M(k.tracks.length)+" tracks ",1)):R("",!0)])])],10,Rp))),128))],2)),u.value>1?(h(),Z(Yr,{key:3,"current-page":i.value,"total-pages":u.value,onPageChange:v},null,8,["current-page","total-pages"])):R("",!0)])]))}};function pe(t){switch(t){case 1:return"yourPlaylists";case 2:return"topArtists";case 3:return"topTracks";case 4:return"savedAlbums";case 5:return"savedTracks";case 6:return"followedArtists";case 7:return"newReleases";case 8:return"spotifyPlaylists";case 9:return"categories";case 10:return"search";case 11:return"genres";case 13:return"queue";case 22:return"topArtists6";case 23:return"topArtistsAll";case 32:return"topTracks6";case 33:return"topTracksAll";default:return"search"}}const qp={class:"mobile-header"},Vp={class:"header-actions"},Np=["title"],Hp={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Bp={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Kp={class:"playlist-info-section"},jp={class:"playlist-cover"},Gp=["src","alt"],Qp={key:1,class:"playlist-placeholder"},Wp={class:"playlist-details"},Xp={class:"playlist-title"},Yp={class:"playlist-meta"},Jp={key:0,class:"playlist-owner"},Zp={key:1,class:"track-count"},eh={key:2,class:"playlist-visibility"},th=["innerHTML"],sh={class:"tracks-section"},rh={key:0,class:"loading-more"},oh={__name:"MobileDeeperPlaylist",props:["d","num"],setup(t){const e=t,s=he(),r=ve(),o=De(),n=me(),i=nt(),a=U(),c=U(""),u=U(null),d=U(1),f=U(20),y=U(!1);cs(E(()=>e.d));const b=Le(),v=E(()=>{var se;const L=((se=e.d.tracks)==null?void 0:se.items)||[];return c.value?[...L].sort((fe,ze)=>{const Fe=fe.track,Oe=ze.track;switch(c.value){case"track":return Fe.name.localeCompare(Oe.name);case"album":return Fe.album.name.localeCompare(Oe.album.name);case"artist":return Fe.artists[0].name.localeCompare(Oe.artists[0].name);case"popularity":return Oe.popularity-Fe.popularity;case"release_date":return new Date(Oe.album.release_date)-new Date(Fe.album.release_date);case"duration":return Fe.duration_ms-Oe.duration_ms;default:return 0}}):L}),m=E(()=>{var L;return((L=e.d.tracks)==null?void 0:L.total)||0});console.log(62,m.value),console.log(f);const p=E(()=>Math.ceil(m.value/f.value)),_=E(()=>{const L=d.value*f.value;return v.value.slice(0,L)});function k(L){a.value=L}const S=()=>{const L=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.hideComponent(L),e.d.parentKey&&b.showComponent(e.d.parentKey)},A=async(L,se)=>{if(n.getIsGloballyLoading)return;k(L.id);const fe=pe(e.num);await n.getTrackDetails(L,fe,e.d.id),o.addToQueue(L);const ze=L.preview_url||L.previewUrl;ze&&await r.mobileToggleTrack(L.id,ze)},x=async(L,se)=>{console.log("Cover clicked for:",L.name);const fe=L.preview_url||L.previewUrl;fe?(console.log("Playing audio preview for:",L.name),await r.mobileToggleTrack(L.id,fe)):console.log("No preview URL available for:",L.name)},P=async(L,se)=>{if(console.log("Info clicked for:",L.name),n.getIsGloballyLoading)return;k(L.id);const fe=pe(e.num);await n.getTrackDetails(L,fe,e.d.id),o.addToQueue(L)},I=()=>{i.toggleViewMode()},T=()=>{const L=c.value;c.value="",d.value=1,setTimeout(()=>{c.value=L},100)},z=async L=>{var se,fe;if(L>d.value){const ze=((fe=(se=e.d.tracks)==null?void 0:se.items)==null?void 0:fe.length)||0;if((L-1)*f.value>=ze){y.value=!0;try{const Oe=await s.fetchPlaylistTracks(e.d.id,ze);e.d.tracks&&Oe.items&&e.d.tracks.items.push(...Oe.items)}catch(Oe){console.error("Failed to load more tracks:",Oe)}finally{y.value=!1}}}d.value=L};return Ce(async()=>{await ot();const L=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.registerComponent(L,u),u.value&&(u.value.style.display="none"),console.log("MobileDeeperPlaylist registered with key:",L)}),Vt(()=>{const L=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.unregisterComponent(L),console.log("MobileDeeperPlaylist unregistered:",L)}),(L,se)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:u},[l("div",qp,[l("button",{class:"back-button",onClick:S},se[2]||(se[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Ae("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),se[7]||(se[7]=l("h2",{class:"mobile-deeper-header"},"Playlist",-1)),l("div",Vp,[l("button",{class:"refresh-btn",onClick:T,title:"Refresh"},se[3]||(se[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:I,title:w(i).viewMode==="list"?"Grid view":"List view"},[w(i).viewMode==="list"?(h(),g("svg",Hp,se[4]||(se[4]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",Bp,se[5]||(se[5]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Np),we(l("select",{class:"sort-select","onUpdate:modelValue":se[0]||(se[0]=fe=>c.value=fe)},se[6]||(se[6]=[Xe('<option value="" data-v-5b622929>Initial</option><option value="artist" data-v-5b622929>Sort by artist</option><option value="album" data-v-5b622929>Sort by album</option><option value="duration" data-v-5b622929>Sort by duration</option><option value="popularity" data-v-5b622929>Sort by popularity</option><option value="release_date" data-v-5b622929>Sort by release date</option><option value="track" data-v-5b622929>Sort by track name</option>',7)]),512),[[As,c.value]])])]),l("div",Kp,[l("div",jp,[t.d.images&&t.d.images[0]?(h(),g("img",{key:0,src:t.d.images[0].url,alt:t.d.name,onError:se[1]||(se[1]=fe=>fe.target.style.display="none")},null,40,Gp)):(h(),g("div",Qp,se[8]||(se[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",Wp,[l("h1",Xp,M(t.d.name),1),l("div",Yp,[t.d.owner?(h(),g("span",Jp,"By "+M(t.d.owner.display_name),1)):R("",!0),t.d.tracks&&t.d.tracks.total?(h(),g("span",Zp,M(t.d.tracks.total)+" tracks",1)):R("",!0),t.d.public!==void 0?(h(),g("span",eh,M(t.d.public?"Public":"Private"),1)):R("",!0)]),t.d.description?(h(),g("div",{key:0,class:"playlist-description",innerHTML:t.d.description},null,8,th)):R("",!0)])]),l("div",sh,[se[10]||(se[10]=l("h3",{class:"section-title"},"Tracks",-1)),y.value?(h(),g("div",rh,se[9]||(se[9]=[l("div",{class:"loading-spinner"},null,-1),l("span",null,"Loading more tracks...",-1)]))):R("",!0),l("div",{class:K(["releases-container",w(i).viewMode])},[(h(!0),g(j,null,te(_.value,fe=>(h(),Z(Jt,{key:fe.track.id,track:fe.track,num:t.num,"view-mode":w(i).viewMode,onClick:A,onCoverClick:x,onInfoClick:P},null,8,["track","num","view-mode"]))),128))],2),p.value>1?(h(),Z(Yr,{key:1,"current-page":d.value,"total-pages":p.value,onPageChange:z},null,8,["current-page","total-pages"])):R("",!0)])],512))}},nh=ke(oh,[["__scopeId","data-v-5b622929"]]),ih={class:"playlists-page"},lh={key:0,class:"loading-state"},ah={key:1,class:"playlists-content"},ch={class:"playlists-section"},uh={__name:"PlaylistsPage",setup(t){const e=he(),s=me(),r=U(!1),o=U(null),n=U(null);U(null),Ve();const i=async()=>{const u=e.getPlaylists&&e.getPlaylists.length>0,d=e.getSpotifyPlaylists&&e.getSpotifyPlaylists.length>0;if(u&&d){console.log("Using cached playlists data");return}r.value=!0,o.value=null;try{await Promise.all([u?Promise.resolve():e.fetchPlaylists(0),d?Promise.resolve():e.fetchSpotifyPlaylists(0)])}catch(f){o.value="Failed to load playlists",console.error("Error loading playlists:",f)}finally{r.value=!1}},a=async()=>{try{const u=e.getPlaylists.length;await e.fetchPlaylists(u)}catch(u){console.error("Failed to load more personal playlists:",u)}},c=async u=>{if(console.log("Personal playlist arrow clicked:",u),u)try{await s.getPlaylistDetails(u,"yourPlaylists"),console.log("Playlist details fetched and added to section")}catch(d){console.error("Error fetching playlist details:",d)}};return Ce(()=>{i()}),(u,d)=>(h(),g("div",ih,[r.value?(h(),g("div",lh,d[0]||(d[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading playlists...",-1)]))):(h(),g("div",ah,[l("div",ch,[W(Jl,{playlists:w(e).getPlaylists,"selected-playlist":n.value,title:"Your Playlists",placeholder:"Search personal playlists...","items-per-page":10,onPlaylistArrowClick:c,onLoadMore:a},null,8,["playlists","selected-playlist"])])]))]))}},dh=ke(uh,[["__scopeId","data-v-92e3a8af"]]);function ut(t,e=null){const s=E(()=>{var u,d,f,y,b;return e&&e.value?e.value:e||((d=(u=t.value)==null?void 0:u.images)!=null&&d[0]?t.value.images[0]:(b=(y=(f=t.value)==null?void 0:f.album)==null?void 0:y.images)!=null&&b[0]?t.value.album.images[0]:null)}),r=E(()=>{var u,d,f,y,b,v;if((d=(u=t.value)==null?void 0:u.tracks)!=null&&d.items&&t.value.tracks.items.length>0){const m=t.value.tracks.items[0];return!!(m!=null&&m.preview_url||m!=null&&m.previewUrl)}else if((f=t.value)!=null&&f.tracks&&((y=t.value)==null?void 0:y.tracks.length)>0){const m=t.value.tracks[0];return!!(m!=null&&m.preview_url||m!=null&&m.previewUrl)}return!!((b=t.value)!=null&&b.preview_url||(v=t.value)!=null&&v.previewUrl)}),o=E(()=>!!s.value),n=E(()=>r.value&&o.value?"playable":!r.value&&o.value?"unplayable half-opacity":r.value&&!o.value?"playable no-image":"unplayable no-image half-opacity"),i=E(()=>{var u;if(o.value&&((u=s.value)!=null&&u.url))try{return{"background-image":`url(${encodeURI(s.value.url)})`}}catch(d){return console.warn("Invalid image URL:",s.value.url,d),{}}return{}}),a=E(()=>r.value?"auto":"none"),c=E(()=>{var d,f,y,b,v;const u=((d=t.value)==null?void 0:d.preview_url)||((f=t.value)==null?void 0:f.previewUrl);if(u)try{return encodeURI(u)}catch(m){return console.warn("Invalid direct audio URL:",u,m),""}if((b=(y=t.value)==null?void 0:y.tracks)!=null&&b.items&&t.value.tracks.items.length>0){const m=t.value.tracks.items[0],p=(m==null?void 0:m.preview_url)||(m==null?void 0:m.previewUrl);if(p)try{return encodeURI(p)}catch(_){return console.warn("Invalid track audio URL:",p,_),""}}if((v=t.value)!=null&&v.tracks&&Array.isArray(t.value.tracks)&&t.value.tracks.length>0){const m=t.value.tracks.find(p=>p.previewUrl||p.preview_url);if(m){const p=m.previewUrl||m.preview_url;if(p)try{return encodeURI(p)}catch(_){return console.warn("Invalid array track audio URL:",p,_),""}}}return""});return{image:s,hasPreview:r,hasImage:o,displayClass:n,backgroundStyle:i,audioPreload:a,audioSrc:c}}const fh={class:"mobile-top-tracks"},ph={class:""},hh={class:"header-content"},mh={class:"header-text"},vh={class:"section-title"},gh={class:"header-actions"},yh=["title"],wh={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},bh={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},kh={class:"controls-container"},_h={class:"search-container"},Sh={class:"search-bar"},Ah=["placeholder"],Th={class:"releases-container"},$h={key:0,class:"empty-search"},Ch={key:1,class:"empty-state"},Ph=["onClick"],xh={class:"item-cover",style:{position:"relative"}},Rh=["src","alt"],Mh={key:1,class:"release-cover"},Eh={key:2,class:"playing-indicator"},Ih=["onClick"],Lh={class:"item-name"},Dh={key:0},zh={class:"item-artist"},Oh={class:"album-type-badge"},Zl={__name:"ReleaseSelector",props:{releases:{type:Array,default:()=>[]},selectedRelease:{type:String,default:""},placeholder:{type:String,default:"Search releases..."},title:{type:String,default:"New Releases"},itemsPerPage:{type:Number,default:50}},emits:["release-select","search","load-more","refresh"],setup(t,{emit:e}){const s=t,r=e,o=ve();me();const n=nt(),i=U(""),a=U(1),c=E(()=>i.value?s.releases.filter(T=>{var z;return T.name.toLowerCase().includes(i.value.toLowerCase())||((z=T.artists)==null?void 0:z.some(L=>L.name.toLowerCase().includes(i.value.toLowerCase())))}):s.releases),u=E(()=>{const T=(a.value-1)*s.itemsPerPage,z=T+s.itemsPerPage;return c.value.slice(T,z)}),d=E(()=>Math.ceil(c.value.length/s.itemsPerPage)),f=T=>{if(T.tracks&&T.tracks.items&&T.tracks.items.length>0){const z=T.tracks.items[0];return o.mobileIsTrackPlaying(z.id)}return!1},y=T=>!!b(T),b=T=>T.tracks&&T.tracks.items&&T.tracks.items.length>0?T.tracks.items[0].preview_url||T.tracks.items[0].previewUrl:null,v=(T,z)=>{r("release-select",T,z)},m=(T,z)=>{if(T.tracks&&T.tracks.items&&T.tracks.items.length>0){const L=T.tracks.items[0],se=L.preview_url||L.previewUrl;se&&o.mobileToggleTrack(L.id,se)}},p=T=>{i.value=T.target.value,A(),r("search",T)},_=()=>{i.value="",A(),r("search",{target:{value:""}})},k=()=>{n.toggleViewMode()},S=T=>{a.value=T,a.value===d.value&&r("load-more")},A=()=>{a.value=1},x=()=>{r("refresh")},P=T=>!T||!Array.isArray(T)?"Unknown Artist":T.map(z=>z.name).join(", "),I=T=>T?new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return(T,z)=>(h(),g("div",fh,[l("div",ph,[l("div",hh,[l("div",mh,[l("h2",vh,M(t.title)+" | "+M(t.releases.length)+" items",1)]),l("div",gh,[l("button",{class:"refresh-btn",onClick:x,title:"Refresh"},z[1]||(z[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:k,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",wh,z[2]||(z[2]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",bh,z[3]||(z[3]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,yh)])]),l("div",kh,[l("div",_h,[l("div",Sh,[z[5]||(z[5]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"search-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1)),we(l("input",{type:"text",placeholder:t.placeholder,class:"search-input","onUpdate:modelValue":z[0]||(z[0]=L=>i.value=L),onInput:p},null,40,Ah),[[Ss,i.value]]),i.value?(h(),g("button",{key:0,onClick:_,class:"clear-button",type:"button"},z[4]||(z[4]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"clear-icon"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))):R("",!0)])])]),l("div",Th,[c.value.length===0&&i.value?(h(),g("div",$h,z[6]||(z[6]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})])],-1),l("h4",null,"No releases found",-1),l("p",null,"Try adjusting your search terms",-1)]))):t.releases.length===0?(h(),g("div",Ch,z[7]||(z[7]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z","clip-rule":"evenodd"})])],-1),l("h4",null,"No releases available",-1),l("p",null,"Check back later for new releases",-1)]))):(h(),g("div",{key:2,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,te(u.value,(L,se)=>(h(),g("div",{key:se,class:"song-item",onClick:fe=>m(L)},[l("div",xh,[L.images&&L.images[0]?(h(),g("img",{key:0,src:L.images[0].url,alt:L.name},null,8,Rh)):(h(),g("div",Mh,z[8]||(z[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"release-icon"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z","clip-rule":"evenodd"})],-1)]))),y(L)&&f(L)?(h(),g("div",Eh,z[9]||(z[9]=[l("span",{class:"playing-icon"},"",-1)]))):R("",!0)]),l("div",{class:"item-info",onClick:fe=>v(L.id,fe)},[l("div",Lh,M(L.name),1),L.release_date?(h(),g("span",Dh,M(I(L.release_date)),1)):R("",!0),l("div",zh,M(P(L.artists)),1),l("div",Oh,M(L.type),1)],8,Ih)],8,Ph))),128))],2))]),d.value>1?(h(),Z(Yr,{key:0,"current-page":a.value,"total-pages":d.value,onPageChange:S},null,8,["current-page","total-pages"])):R("",!0)])]))}},Uh={class:"new-releases-page"},Fh={key:0,class:"loading-state"},qh={key:1,class:"new-releases-content"},Vh={class:"releases-section"},Nh={__name:"NewReleasesPage",setup(t){const e=he(),s=me(),r=U(!1),o=U(null);U(!1);const n=E(()=>e.getNewReleases||[]),i=async()=>{if(e.getNewReleases&&e.getNewReleases.length>0){console.log("Using cached new releases data");return}r.value=!0;try{await e.fetchNewReleases(0)}catch(u){console.error("Failed to load new releases:",u)}finally{r.value=!1}},a=async(u,d)=>{o.value=u;const f=n.value.find(y=>y.id===u);console.log("Release selected:",f),f&&await s.getAlbumDetails(f,"newReleases")},c=()=>{e.newReleases=[],e.fetchNewReleases(0)};return Ce(()=>{i()}),(u,d)=>(h(),g("div",Uh,[r.value?(h(),g("div",Fh,d[0]||(d[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading new releases...",-1)]))):(h(),g("div",qh,[l("div",Vh,[W(Zl,{releases:n.value,"selected-release":o.value,title:"New Releases",placeholder:"Search releases...","items-per-page":20,onReleaseSelect:a,onRefresh:c},null,8,["releases","selected-release"])])]))]))}};async function Hh(){try{return console.log("Music store initialized successfully"),console.log("Current service:",le.getCurrentServiceType()),console.log("Available services:",le.getAvailableServices()),!0}catch(t){return console.error("Failed to initialize music store:",t),!1}}function rt(){return le.getCurrentServiceType()}const Bh={class:"mobile-header"},Kh={class:"header-actions"},jh=["title"],Gh={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Qh={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Wh={class:"artist-info-section"},Xh=["src","alt"],Yh={key:1,class:"artist-placeholder"},Jh={key:2,class:"playing-indicator"},Zh={class:"artist-details"},em={class:"artist-title"},tm={class:"artist-stats"},sm={class:"followers-count"},rm={key:0,class:"genres-section"},om={class:"genres-list"},nm=["onClick"],im={class:"artist-actions"},lm=["href"],am={class:"follow-section"},cm={class:"follow-checkbox"},um={key:0,class:"loading-state"},dm={key:1},fm={key:0,class:"section"},pm={key:1,class:"section"},hm=["onClick"],mm={class:"item-cover"},vm=["src","alt"],gm={key:1,class:"album-placeholder"},ym={class:"item-info"},wm={class:"item-name"},bm={class:"item-artist"},km={key:2,class:"section"},_m=["onClick"],Sm={class:"item-cover"},Am=["src","alt"],Tm={key:1,class:"album-placeholder"},$m={class:"item-info"},Cm={class:"item-name"},Pm={class:"item-artist"},xm={key:3,class:"section"},Rm=["onClick"],Mm={class:"item-cover"},Em=["src","alt"],Im={key:1,class:"album-placeholder"},Lm={class:"item-info"},Dm={class:"item-name"},zm={class:"item-artist"},Om={key:4,class:"section"},Um=["onClick"],Fm={class:"item-cover"},qm=["src","alt"],Vm={key:1,class:"artist-placeholder"},Nm={class:"item-info"},Hm={class:"item-name"},Bm={key:0,class:"item-artist"},Km={key:1,class:"item-artist"},jm={__name:"MobileDeeperArtist",props:["d","num"],setup(t){const e=t;he();const s=E(()=>e.d.data&&Array.isArray(e.d.data)&&e.d.data.find(q=>q.type==="trackartist")||e.d),r=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const O=e.d.data.find(q=>q.type==="top_tracks");return console.log("topTracksItem",O),(O==null?void 0:O.tracks)||[]}return e.d.top_tracks||[]}),o=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const O=e.d.data.find(q=>q.type==="albums");return(O==null?void 0:O.items)||[]}return e.d.albums||[]}),n=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const O=e.d.data.find(q=>q.type==="single");return(O==null?void 0:O.items)||[]}return e.d.singles||[]}),i=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const O=e.d.data.find(q=>q.type==="appears_on");return(O==null?void 0:O.items)||[]}return e.d.appears_on||[]}),a=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const O=e.d.data.find(q=>q.type==="related-artists");return(O==null?void 0:O.artists)||[]}return e.d.related_artists||[]});useSpotifyStore();const c=me(),u=De(),d=ve(),f=nt(),y=Le(),b=U(null),v=U(!0),{displayClass:m,backgroundStyle:p,hasPreview:_,trackId:k}=cs(E(()=>s.value)),S=E(()=>s.value.images&&s.value.images.length>0&&s.value.images[0]&&s.value.images[0].url),A=()=>{const O=`trackartist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;y.hideComponent(O),console.log(e.d.parentKey),e.d.parentKey&&y.showComponent(e.d.parentKey)},x=async(O,q)=>{if(c.getIsGloballyLoading)return;const Ie=pe(e.num);await c.getTrackDetails(O,Ie),u.addToQueue(O)},P=async(O,q)=>{console.log("Cover clicked for:",O.name);const Ie=O.preview_url||O.previewUrl;Ie?(console.log("Playing audio preview for:",O.name),await d.mobileToggleTrack(O.id,Ie)):console.log("No preview URL available for:",O.name)},I=async(O,q)=>{if(console.log("Info clicked for:",O.name),c.getIsGloballyLoading)return;const Ie=pe(e.num);await c.getTrackDetails(O,Ie),u.addToQueue(O)},T=async(O,q)=>{if(c.getIsGloballyLoading)return;const Ie=pe(e.num);await c.getAlbumDetails(O,Ie,e.d.id)},z=async(O,q)=>{if(c.getIsGloballyLoading)return;const Ie=pe(e.num);await c.getArtistDetails(O,Ie,e.d.id);const it=`trackartist_${O.id}__p:${e.d.id}__`;y.showComponent(it),console.log("Showing MobileDeeperArtist for related artist:",O.name,"with key:",it)},L=async O=>{try{console.log("Getting the sound of:",O),await c.getGenreRecommendations(O,pe(e.num))}catch(q){console.error("Failed to get genre recommendations:",q)}};async function se(O){try{console.log("Following/unfollowing artist:",O.name),await c.followArtist(O.id,!O.followed),O.followed=!O.followed}catch(q){console.error("Failed to follow/unfollow artist:",q)}}const fe=()=>{c.getSeedArtistRecommendations(s.value,pe(e.num),e.d.id)},ze=O=>{O.stopPropagation(),console.log("Artist cover clicked for:",s.value.name)},Fe=()=>{f.toggleViewMode()},Oe=async()=>{try{await c.getArtistDetails(e.d,pe(e.num),e.d.id),console.log("Artist details fetched:",{topTracks:topTracks.length,albums:albums.length,singles:singles.length,appearsOn:appearsOn.length,relatedArtists:relatedArtists.length})}catch(O){console.error("Error fetching artist details:",O)}finally{v.value=!1}},xe=O=>O>=1e6?`${(O/1e6).toFixed(1)}M`:O>=1e3?`${(O/1e3).toFixed(1)}K`:O.toString(),G=O=>!O||O.length===0?"No genres":O.slice(0,3).join(", ");return Ce(async()=>{await ot();const O=`trackartist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;y.registerComponent(O,b),b.value&&(b.value.style.display="none"),console.log("MobileDeeperArtist registered with key:",O),e.d.data&&Array.isArray(e.d.data)?(console.log("Using existing trackartist data structure"),v.value=!1):await Oe()}),Vt(()=>{const O=`trackartist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;y.unregisterComponent(O),console.log("MobileDeeperArtist unregistered:",O)}),(O,q)=>{var Ie,it;return h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:b},[l("div",Bh,[l("button",{class:"back-button",onClick:A},q[7]||(q[7]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Ae("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),q[10]||(q[10]=l("h2",{class:"mobile-deeper-header"},"Artist",-1)),l("div",Kh,[l("button",{class:"view-toggle-btn",onClick:Fe,title:w(f).viewMode==="list"?"Grid view":"List view"},[w(f).viewMode==="list"?(h(),g("svg",Gh,q[8]||(q[8]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",Qh,q[9]||(q[9]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,jh)])]),l("div",Wh,[l("div",null,[S.value?(h(),g("img",{key:0,class:K(["artist-cover",w(m)]),style:Se(w(p)),onClick:ze,src:s.value.images[0].url,alt:s.value.name,onError:q[0]||(q[0]=ee=>ee.target.style.display="none")},null,46,Xh)):(h(),g("div",Yh,q[11]||(q[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),w(_)&&w(d).mobileIsTrackPlaying(w(k))?(h(),g("div",Jh,q[12]||(q[12]=[l("span",{class:"playing-icon"},"",-1)]))):R("",!0)]),l("div",Zh,[l("h1",em,M(s.value.name),1),l("div",tm,[l("span",sm,M(xe(((Ie=s.value.followers)==null?void 0:Ie.total)||0))+" followers",1)]),s.value.genres&&s.value.genres.length>0?(h(),g("div",rm,[l("div",om,[(h(!0),g(j,null,te(s.value.genres.slice(0,3),(ee,Ne)=>(h(),g("span",{key:Ne,class:"genre-tag",onClick:vn=>L(ee)},M(ee),9,nm))),128))])])):R("",!0)]),l("div",im,[l("button",{class:"action-button",onClick:fe},q[13]||(q[13]=[l("span",{class:"btn-icon"},"",-1),Ae(" Get Recommendations ",-1)])),l("a",{class:K(w(rt)()+"-link"),href:(it=t.d.external_urls)==null?void 0:it.spotify,target:"_blank",rel:"noopener"},[q[14]||(q[14]=l("span",{class:"link-icon"},"",-1)),Ae(" Open in "+M(w(rt)().charAt(0).toUpperCase()+w(rt)().slice(1)),1)],10,lm),l("div",am,[q[16]||(q[16]=l("span",{class:"follow-label"},"Follow",-1)),l("label",cm,[we(l("input",{type:"checkbox","onUpdate:modelValue":q[1]||(q[1]=ee=>t.d.followed=ee),onClick:q[2]||(q[2]=ee=>se(t.d))},null,512),[[Kt,t.d.followed]]),q[15]||(q[15]=l("span",{class:"checkmark"},null,-1))])])])]),v.value?(h(),g("div",um,q[17]||(q[17]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading artist details...",-1)]))):(h(),g("div",dm,[r.value.length>0?(h(),g("div",fm,[q[18]||(q[18]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Top Tracks")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,te(r.value,ee=>(h(),Z(Jt,{key:ee.id,track:ee,num:t.num,"view-mode":w(f).viewMode,onClick:x,onCoverClick:P,onInfoClick:I},null,8,["track","num","view-mode"]))),128))],2)])):R("",!0),o.value.length>0?(h(),g("div",pm,[q[20]||(q[20]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Albums")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,te(o.value,ee=>(h(),g("div",{key:ee.id,class:"song-item",onClick:Ne=>T(ee)},[l("div",mm,[ee.images&&ee.images[0]?(h(),g("img",{key:0,src:ee.images[0].url,alt:ee.name,onError:q[3]||(q[3]=Ne=>Ne.target.style.display="none")},null,40,vm)):(h(),g("div",gm,q[19]||(q[19]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",ym,[l("div",wm,M(ee.name),1),l("div",bm,M(ee.album_type||"Album"),1)])],8,hm))),128))],2)])):R("",!0),n.value.length>0?(h(),g("div",km,[q[22]||(q[22]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Singles")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,te(n.value,ee=>(h(),g("div",{key:ee.id,class:"song-item",onClick:Ne=>T(ee)},[l("div",Sm,[ee.images&&ee.images[0]?(h(),g("img",{key:0,src:ee.images[0].url,alt:ee.name,onError:q[4]||(q[4]=Ne=>Ne.target.style.display="none")},null,40,Am)):(h(),g("div",Tm,q[21]||(q[21]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",$m,[l("div",Cm,M(ee.name),1),l("div",Pm,M(ee.album_type||"Single"),1)])],8,_m))),128))],2)])):R("",!0),i.value.length>0?(h(),g("div",xm,[q[24]||(q[24]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Appears On")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,te(i.value,ee=>(h(),g("div",{key:ee.id,class:"song-item",onClick:Ne=>T(ee)},[l("div",Mm,[ee.images&&ee.images[0]?(h(),g("img",{key:0,src:ee.images[0].url,alt:ee.name,onError:q[5]||(q[5]=Ne=>Ne.target.style.display="none")},null,40,Em)):(h(),g("div",Im,q[23]||(q[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",Lm,[l("div",Dm,M(ee.name),1),l("div",zm,M(ee.album_type||"Compilation"),1)])],8,Rm))),128))],2)])):R("",!0),a.value.length>0?(h(),g("div",Om,[q[26]||(q[26]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Related Artists")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,te(a.value,ee=>(h(),g("div",{key:ee.id,class:"song-item",onClick:Ne=>z(ee)},[l("div",Fm,[ee.images&&ee.images.length>0?(h(),g("img",{key:0,src:ee.images[0].url,alt:ee.name,onError:q[6]||(q[6]=Ne=>Ne.target.style.display="none")},null,40,qm)):(h(),g("div",Vm,q[25]||(q[25]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})],-1)])))]),l("div",Nm,[l("div",Hm,M(ee.name),1),ee.followers?(h(),g("div",Bm,M(xe(ee.followers.total))+" followers ",1)):R("",!0),ee.genres&&ee.genres.length>0?(h(),g("div",Km,M(G(ee.genres)),1)):R("",!0)])],8,Um))),128))],2)])):R("",!0)]))],512)}}},Gm={class:"track-info-section"},Qm={style:{position:"relative"}},Wm=["src","alt"],Xm={key:1,class:"track-placeholder"},Ym={key:2,class:"playing-indicator"},Jm={class:"track-details"},Zm={class:"track-title"},e0={class:"artists-section"},t0={key:0,class:"separator"},s0={key:1,class:"separator"},r0={class:"artist-item"},o0=["onClick"],n0={class:"track-meta"},i0={key:0,class:"duration"},l0={key:1,class:"popularity"},a0={key:2,class:"release-info"},c0={class:"release-date"},u0={class:"track-actions px-4"},d0={key:0,class:"loading-section"},f0={__name:"MobileDeeperTracks",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me();U();const n=U(null),i=U(null);U(null);const a=U(!1),{displayClass:c,backgroundStyle:u,hasPreview:d,previewUrl:f,trackId:y}=cs(E(()=>e.d)),b=Le();function v(){console.log(e.d),e.d.album&&e.d.album.images?n.value=e.d.album.images[0]:e.d.images?n.value=e.d.images[0]:e.d.track&&e.d.track.album&&e.d.track.album.images&&e.d.track.album.images[0]&&(n.value=e.d.track.album.images[0]),console.log(n.value)}const m=()=>{const x=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.hideComponent(x),e.d.parentKey&&b.showComponent(e.d.parentKey)},p=async(x,P)=>{o.getIsGloballyLoading||await o.getArtistDetails(x,pe(e.num),e.d.parentKey||e.d.id)},_=x=>{x.stopPropagation(),d.value&&f.value&&s.mobileToggleTrack(y.value,f.value)},k=x=>{const P=Math.floor(x/6e4),I=(x%6e4/1e3).toFixed(0);return`${P}:${I.padStart(2,"0")}`},S=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",A=async()=>{try{a.value=!0;const x=pe(e.num);await o.getSeedTrackRecommendations(e.d,x,e.d.id)}catch(x){console.error("Failed to get recommendations:",x),alert("Failed to load recommendations. Please try again.")}finally{a.value=!1}};return Ce(async()=>{var P,I;v(),await ot();const x=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering component with ref:",i.value),console.log("Ref element:",(P=i.value)==null?void 0:P.tagName,(I=i.value)==null?void 0:I.className),console.log("Registering with key:",x),b.registerComponent(x,i),console.log("Showing component after registration:",x),b.showComponent(x)}),Vt(()=>{const x=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.unregisterComponent(x),console.log("MobileDeeperTracks unregistered:",x)}),(x,P)=>(h(),g("div",{class:"mobile-deeper-track",ref_key:"componentRef",ref:i},[l("div",{class:"mobile-header"},[l("button",{class:"back-button",onClick:m},P[2]||(P[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Ae("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),P[3]||(P[3]=l("h2",{class:"mobile-deeper-header"},"Track Details",-1))]),l("div",Gm,[l("div",Qm,[n.value?(h(),g("img",{key:0,class:K(["track-cover",w(c)]),style:Se(w(u)),onClick:_,src:n.value.url,alt:t.d.name,onError:P[0]||(P[0]=I=>I.target.style.display="none")},null,46,Wm)):n.value?R("",!0):(h(),g("div",Xm,P[4]||(P[4]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010 1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),w(d)&&w(s).mobileIsTrackPlaying(w(y))?(h(),g("div",Ym,P[5]||(P[5]=[l("span",{class:"playing-icon"},"",-1)]))):R("",!0)]),l("div",Jm,[l("h1",Zm,M(t.d.name),1),l("div",e0,[P[6]||(P[6]=l("span",{class:"meta-icon"},"",-1)),P[7]||(P[7]=l("span",{class:"artists-label"},"By",-1)),(h(!0),g(j,null,te(t.d.artists,(I,T)=>(h(),g(j,{key:T},[t.d.artists.length>1&&t.d.artists.length-1===T?(h(),g("div",t0,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==T&&T!==0?(h(),g("div",s0,",")):R("",!0),l("div",r0,[l("button",{class:"artist-link",onClick:z=>p(I)},M(I.name),9,o0)])],64))),128))])]),l("div",n0,[t.d.duration_ms?(h(),g("div",i0,[P[8]||(P[8]=l("span",{class:"meta-icon"},"",-1)),Ae(" "+M(k(t.d.duration_ms)),1)])):R("",!0),t.d.popularity?(h(),g("div",l0,[P[9]||(P[9]=l("span",{class:"meta-icon"},"",-1)),Ae(" "+M(t.d.popularity)+"% popular ",1)])):R("",!0),t.d.album&&t.d.album.release_date?(h(),g("div",a0,[l("span",c0,[P[10]||(P[10]=l("span",{class:"meta-icon"},"",-1)),Ae(" Released "+M(S(t.d.album.release_date)),1)])])):R("",!0)])]),l("div",u0,[l("button",{class:"play-btn",onClick:_},P[11]||(P[11]=[l("span",{class:"btn-icon"},"",-1),Ae(" Play Track ",-1)])),l("button",{class:"action-button",onClick:A},P[12]||(P[12]=[l("span",{class:"btn-icon"},"",-1),Ae(" Get Recommendations ",-1)])),l("button",{class:"queue-btn",onClick:P[1]||(P[1]=I=>w(r).addToQueue(t.d))},P[13]||(P[13]=[l("span",{class:"btn-icon"},"",-1),Ae(" Add to Queue ",-1)]))]),a.value?(h(),g("div",d0,P[14]||(P[14]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading recommendations...",-1)]))):R("",!0)],512))}},p0={class:"album-info-section"},h0=["src","alt"],m0={key:1,class:"album-placeholder"},v0=["src"],g0={class:"album-details"},y0={class:"album-title"},w0={class:"artists-section"},b0={class:"artists-list"},k0={key:0,class:"separator"},_0={key:1,class:"separator"},S0={class:"artist-item"},A0=["onClick"],T0={class:"album-meta"},$0={key:0,class:"release-date"},C0={key:1,class:"track-count"},P0={class:"tracks-section"},x0={class:"releases-container"},R0={__name:"MobileDeeperAlbum",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=U(),i=U([]),a=U(null),{displayClass:c,backgroundStyle:u,hasPreview:d,previewUrl:f,trackId:y}=cs(E(()=>e.d)),b=Le();function v(I){n.value=I}function m(){e.d.tracks&&e.d.tracks.items?i.value=e.d.tracks.items:e.d.tracks?i.value=e.d.tracks:e.d.items&&(i.value=e.d.items)}const p=()=>{const I=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.hideComponent(I),e.d.parentKey&&b.showComponent(e.d.parentKey)},_=async(I,T)=>{if(o.getIsGloballyLoading)return;v(I.id),await o.getTrackDetails(I,pe(e.num),e.d.id),r.addToQueue(I);const z=I.preview_url||I.previewUrl;z&&await s.mobileToggleTrack(I.id,z)},k=async(I,T)=>{console.log("Cover clicked for:",I.name);const z=I.preview_url||I.previewUrl;z?(console.log("Playing audio preview for:",I.name),await s.mobileToggleTrack(I.id,z)):console.log("No preview URL available for:",I.name)},S=async(I,T)=>{console.log("Info clicked for:",I.name),!o.getIsGloballyLoading&&(v(I.id),await o.getTrackDetails(I,"albumTracks"),r.addToQueue(I))},A=async(I,T)=>{o.getIsGloballyLoading||await o.getArtistDetails(I,pe(e.num),e.d.id)},x=async()=>{d.value&&f.value&&await s.mobileToggleTrack(y.value,f.value)},P=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return Ce(async()=>{m(),await ot();const I=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.registerComponent(I,a),console.log("Showing MobileDeeperAlbum component after registration:",I),b.showComponent(I)}),Vt(()=>{const I=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.unregisterComponent(I),console.log("MobileDeeperAlbum unregistered:",I)}),(I,T)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:a},[l("div",{class:"mobile-header"},[l("button",{class:"back-button",onClick:p},T[1]||(T[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Ae("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),T[2]||(T[2]=l("h2",{class:"mobile-deeper-header"},"Album Details",-1))]),l("div",p0,[l("div",{class:K(["album-cover",w(c)]),style:Se(w(u)),onClick:x},[t.d.images&&t.d.images[0]?(h(),g("img",{key:0,src:t.d.images[0].url,alt:t.d.name,onError:T[0]||(T[0]=z=>z.target.style.display="none")},null,40,h0)):(h(),g("div",m0,T[3]||(T[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010 1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010 1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),w(d)?(h(),g("audio",{key:2,preload:"metadata",src:w(f)},null,8,v0)):R("",!0)],6),l("div",g0,[l("h1",y0,M(t.d.name),1),l("div",w0,[T[4]||(T[4]=l("span",{class:"artists-label"},"By",-1)),l("div",b0,[(h(!0),g(j,null,te(t.d.artists,(z,L)=>(h(),g(j,{key:L},[t.d.artists.length>1&&t.d.artists.length-1===L?(h(),g("div",k0,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==L&&L!==0?(h(),g("div",_0,",")):R("",!0),l("div",S0,[l("button",{class:"artist-link",onClick:se=>A(z)},M(z.name),9,A0)])],64))),128))])])]),l("div",T0,[t.d.release_date?(h(),g("span",$0,[T[5]||(T[5]=l("span",{class:"meta-icon"},"",-1)),Ae(" "+M(P(t.d.release_date)),1)])):R("",!0),i.value.length>0?(h(),g("span",C0,[T[6]||(T[6]=l("span",{class:"meta-icon"},"",-1)),Ae(" "+M(i.value.length)+" tracks ",1)])):R("",!0)])]),l("div",P0,[T[7]||(T[7]=l("div",{class:"tracks-header"},[l("span",{class:"tracks-icon"},""),l("h3",{class:"tracks-title"},"Tracks")],-1)),l("div",x0,[(h(!0),g(j,null,te(i.value,z=>(h(),Z(Jt,{key:z.id,track:z,num:t.num,onClick:_,onCoverClick:k,onInfoClick:S},null,8,["track","num"]))),128))])])],512))}},M0={class:"seed-content"},E0={class:"mobile-header"},I0={class:"seed-title"},L0={class:"title-text"},D0={class:"header-actions"},z0=["title"],O0={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},U0={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},F0={class:"mobile-tracks-container"},q0={key:0,class:"empty-state"},V0={__name:"SeedArtistsMob",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=nt();U();const i=U(""),a=U(null),c=Le(),u=E(()=>{const p=e.d.tracks||[];return i.value?[...p].sort((_,k)=>{switch(i.value){case"track":return _.name.localeCompare(k.name);case"album":return _.album.name.localeCompare(k.album.name);case"artist":return _.artists[0].name.localeCompare(k.artists[0].name);case"popularity":return k.popularity-_.popularity;case"release_date":return new Date(k.album.release_date)-new Date(_.album.release_date);case"duration":return _.duration_ms-k.duration_ms;default:return 0}}):p}),d=async(p,_)=>{if(o.getIsGloballyLoading)return;const k=pe(e.num);await o.getTrackDetails(p,k,e.d.id),r.addToQueue(p)},f=async(p,_)=>{console.log("Cover clicked for:",p.name);const k=p.preview_url||p.previewUrl;k?(console.log("Playing audio preview for:",p.name),await s.mobileToggleTrack(p.id,k)):console.log("No preview URL available for:",p.name)},y=async(p,_)=>{if(console.log("Info clicked for:",p.name),o.getIsGloballyLoading)return;const k=pe(e.num);await o.getTrackDetails(p,k,e.d.id),r.addToQueue(p)},b=async()=>{try{console.log("Refreshing seed artists for:",e.d.id),await o.getSeedArtistRecommendations(e.d,pe(e.num),e.d.parentKey)}catch(p){console.error("Failed to refresh seed artists:",p)}},v=()=>{const p=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.hideComponent(p),e.d.parentKey&&c.showComponent(e.d.parentKey)},m=()=>{n.toggleViewMode()};return Ce(async()=>{await ot();const p=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(p,a),console.log("Showing SeedArtistsMob component after registration:",p),c.showComponent(p)}),Vt(()=>{const p=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.unregisterComponent(p),console.log("SeedArtistsMob component unregistered:",p)}),(p,_)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:a},[l("div",M0,[l("div",E0,[l("button",{class:"back-button",onClick:v},_[1]||(_[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),l("div",I0,[_[2]||(_[2]=l("span",{class:"title-icon pe-2"},"",-1)),l("span",L0,"Recommended songs based on "+M(t.d.name),1)]),l("div",D0,[l("button",{class:"refresh-button",onClick:b},_[3]||(_[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"refresh-icon"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:m,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",O0,_[4]||(_[4]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",U0,_[5]||(_[5]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,z0),we(l("select",{class:"sort-select","onUpdate:modelValue":_[0]||(_[0]=k=>i.value=k)},_[6]||(_[6]=[Xe('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="duration">Sort by duration</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="track">Sort by track name</option>',7)]),512),[[As,i.value]])])]),l("div",F0,[u.value.length===0?(h(),g("div",q0,_[7]||(_[7]=[l("div",{class:"empty-icon"},"",-1),l("h3",null,"No recommended tracks",-1),l("p",null,"Try refreshing to get new recommendations",-1)]))):(h(),g("div",{key:1,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,te(u.value,k=>(h(),Z(Jt,{key:k.id,track:k,num:t.num,"view-mode":w(n).viewMode,onClick:S=>d(k),onCoverClick:S=>f(k),onInfoClick:S=>y(k)},null,8,["track","num","view-mode","onClick","onCoverClick","onInfoClick"]))),128))],2))])])],512))}},N0={class:"seed-content"},H0={class:"mobile-header"},B0={class:"mobile-deeper-header"},K0={class:"title-text"},j0={class:"header-actions"},G0=["title"],Q0={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},W0={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},X0={key:0,class:"lastfm-indicator"},Y0={key:0,class:"lastfm-stats"},J0={class:"stat-item"},Z0={class:"stat-number"},e1={class:"stat-item"},t1={class:"stat-number"},s1={class:"stat-item"},r1={class:"stat-number"},o1={class:"mobile-tracks-container"},n1={key:0,class:"empty-state"},i1={__name:"SeedTracksMob",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=nt();U();const i=U(""),a=U(null),c=Le(),u=E(()=>{const k=e.d.tracks||[];return i.value?[...k].sort((S,A)=>{switch(i.value){case"track":return S.name.localeCompare(A.name);case"album":return S.album.name.localeCompare(A.album.name);case"artist":return S.artists[0].name.localeCompare(A.artists[0].name);case"popularity":return A.popularity-S.popularity;case"release_date":return new Date(A.album.release_date)-new Date(S.album.release_date);case"duration":return S.duration_ms-A.duration_ms;default:return 0}}):k});function d(){if(!e.d.tracks)return 0;const k=new Set;return e.d.tracks.forEach(S=>{S.artists&&S.artists.length>0&&k.add(S.artists[0].name)}),k.size}function f(){if(!e.d.tracks)return 0;const k=new Set;return e.d.tracks.forEach(S=>{S.album&&S.album.name&&k.add(S.album.name)}),k.size}const y=async(k,S)=>{if(o.getIsGloballyLoading)return;const A=pe(e.num);await o.getTrackDetails(k,A,e.d.id),r.addToQueue(k)},b=async(k,S)=>{console.log("Cover clicked for:",k.name);const A=k.preview_url||k.previewUrl;A?(console.log("Playing audio preview for:",k.name),await s.mobileToggleTrack(k.id,A)):console.log("No preview URL available for:",k.name)},v=async(k,S)=>{if(console.log("Info clicked for:",k.name),o.getIsGloballyLoading)return;const A=pe(e.num);await o.getTrackDetails(k,A,e.d.id),r.addToQueue(k)},m=async()=>{try{console.log("Refreshing seed tracks for:",e.d.id),await o.getSeedTrackRecommendations(e.d,pe(e.num),e.d.parentKey)}catch(k){console.error("Failed to refresh seed tracks:",k)}},p=()=>{const k=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.hideComponent(k),e.d.parentKey&&c.showComponent(e.d.parentKey)},_=()=>{n.toggleViewMode()};return Ce(async()=>{await ot();const k=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(k,a),console.log("Showing SeedTracksMob component after registration:",k),c.showComponent(k)}),Vt(()=>{const k=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.unregisterComponent(k),console.log("SeedTracksMob component unregistered:",k)}),(k,S)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:a},[l("div",N0,[l("div",H0,[l("button",{class:"back-button",onClick:p},S[1]||(S[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Ae("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),l("div",B0,[S[2]||(S[2]=l("span",{class:"title-icon pe-2"},"",-1)),l("span",K0,"Recommended songs based on "+M(t.d.name),1)]),l("div",j0,[l("button",{class:"refresh-button",onClick:m},S[3]||(S[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"refresh-icon"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:_,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",Q0,S[4]||(S[4]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",W0,S[5]||(S[5]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,G0),we(l("select",{class:"sort-select","onUpdate:modelValue":S[0]||(S[0]=A=>i.value=A)},S[6]||(S[6]=[Xe('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="duration">Sort by duration</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="track">Sort by track name</option>',7)]),512),[[As,i.value]])])]),w(rt)()==="deezer"?(h(),g("div",X0,[S[12]||(S[12]=Xe('<div class="lastfm-header"><div class="lastfm-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg></div><div class="lastfm-info"><span class="lastfm-title">Powered by Last.fm</span><span class="lastfm-subtitle">Similar tracks discovered via Last.fm API</span></div></div>',1)),t.d.tracks&&t.d.tracks.length>0?(h(),g("div",Y0,[l("div",J0,[l("span",Z0,M(t.d.tracks.length),1),S[7]||(S[7]=l("span",{class:"stat-label"},"tracks found",-1))]),S[10]||(S[10]=l("div",{class:"stat-divider"},null,-1)),l("div",e1,[l("span",t1,M(d()),1),S[8]||(S[8]=l("span",{class:"stat-label"},"artists",-1))]),S[11]||(S[11]=l("div",{class:"stat-divider"},null,-1)),l("div",s1,[l("span",r1,M(f()),1),S[9]||(S[9]=l("span",{class:"stat-label"},"albums",-1))])])):R("",!0)])):R("",!0),l("div",o1,[u.value.length===0?(h(),g("div",n1,S[13]||(S[13]=[l("div",{class:"empty-icon"},"",-1),l("h3",null,"No recommended tracks",-1),l("p",null,"Try refreshing to get new recommendations",-1)]))):(h(),g("div",{key:1,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,te(u.value,A=>(h(),Z(Jt,{key:A.id,track:A,num:t.num,"view-mode":w(n).viewMode,onClick:x=>y(A),onCoverClick:x=>b(A),onInfoClick:x=>v(A)},null,8,["track","num","view-mode","onClick","onCoverClick","onInfoClick"]))),128))],2))])])],512))}},l1={class:"user-playlists-header"},a1={class:"user-info"},c1={class:"user-playlists-title"},u1={class:"user-meta"},d1={class:"playlist-count"},f1={class:"playlists-grid"},p1=["onClick","onMouseover","onMouseleave"],h1={class:"playlist-overlay"},m1={class:"playlist-name"},v1={class:"playlist-meta"},g1={key:0,class:"track-count"},y1={key:1,class:"playlist-visibility"},w1=["preload","src"],b1={key:0,class:"empty-state"},k1={__name:"MobileUserPlaylists",props:["d","num"],setup(t){const e=t,s=he(),r=ve();De();const o=me(),{currentServiceType:n}=Yt(s),i=U(),a=U(null),c=Le();function u(y){return ut(E(()=>y))}function d(y){i.value=y}function f(y){d(y.id),o.getPlaylistDetails(y,pe(e.num),e.d.id)}return Ce(()=>{const y=`user-playlists_${e.d.user.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering MobileUserPlaylists component with key:",y),c.registerComponent(y,a),console.log("Showing MobileUserPlaylists component after registration:",y),c.showComponent(y)}),(y,b)=>(h(),g("div",{class:"mobile-user-playlists",ref_key:"componentRef",ref:a},[l("div",l1,[l("div",a1,[l("h2",c1,M(t.d.name),1),l("div",u1,[l("span",d1,M(t.d.playlists.length)+" playlists",1)])])]),l("div",f1,[(h(!0),g(j,null,te(t.d.playlists,(v,m)=>(h(),g("div",{key:m,class:K(["playlist-card",u(v).displayClass.value,i.value===v.id?"selected":""]),style:Se(u(v).backgroundStyle.value),onClick:p=>f(v),onMouseover:p=>u(v).hasPreview.value&&w(r).handleAudioHover(p),onMouseleave:p=>u(v).hasPreview.value&&w(r).handleAudioLeave(p)},[l("div",h1,[l("div",m1,M(v.name),1),l("div",v1,[v.tracks&&v.tracks.total?(h(),g("span",g1,M(v.tracks.total)+" tracks ",1)):R("",!0),v.public!==void 0?(h(),g("span",y1,M(v.public?"Public":"Private"),1)):R("",!0)])]),l("audio",{preload:u(v).audioPreload.value,src:u(v).audioSrc.value},null,8,w1)],46,p1))),128))]),t.d.playlists.length===0?(h(),g("div",b1,b[0]||(b[0]=[l("div",{class:"empty-icon"},"",-1),l("h3",null,"No playlists found",-1),l("p",null,"This user doesn't have any public playlists.",-1)]))):R("",!0)],512))}},_1=ke(k1,[["__scopeId","data-v-6e462971"]]),S1={class:"rec_track"},A1={__name:"RecTrackM",props:["num"],setup(t){const e=t,s=me();function r(){const o=pe(e.num);console.log(14,o);let n=s.getSectionData(o);console.log("RecTrack - Num:",e.num,"Section name:",o,"Data length:",n.length,"Data:",n),s.setCurrentSection(o);const i=n.map(a=>a.type);return console.log("RecTrack: Will render components of types:",i),n}return(o,n)=>(h(),g("div",S1,[(h(!0),g(j,null,te(r(),(i,a)=>(h(),g(j,{key:`${i.type}_${i.id}${i.parentKey?`__p:${i.parentKey}__`:""}`},[i.type==="seed_tracks"?(h(),Z(i1,{key:0,d:i,num:t.num},null,8,["d","num"])):i.type==="trackartist"?(h(),Z(jm,{key:1,d:i,num:t.num},null,8,["d","num"])):i.type==="deepertracks"||i.type==="track"?(h(),Z(f0,{key:2,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperalbum"?(h(),Z(R0,{key:3,d:i,num:t.num},null,8,["d","num"])):i.type==="seed_artists"?(h(),Z(V0,{key:4,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperplaylist"?(h(),Z(nh,{key:5,d:i,num:t.num},null,8,["d","num"])):i.type==="user-playlists"?(h(),Z(_1,{key:6,d:i,num:t.num},null,8,["d","num"])):R("",!0)],64))),128))]))}},T1={class:"playlists-page"},$1={key:0,class:"loading-state"},C1={key:1,class:"playlists-content"},P1={class:"playlists-section"},x1={__name:"SpotifyPlaylistsPage",setup(t){const e=he(),s=me(),r=U(!1),o=U(null);U(null);const n=U(null);Ve();const i=async()=>{const d=e.getPlaylists&&e.getPlaylists.length>0,f=e.getSpotifyPlaylists&&e.getSpotifyPlaylists.length>0;if(d&&f){console.log("Using cached playlists data");return}r.value=!0,o.value=null;try{await Promise.all([d?Promise.resolve():e.fetchPlaylists(0),f?Promise.resolve():e.fetchSpotifyPlaylists(0)])}catch(y){o.value="Failed to load playlists",console.error("Error loading playlists:",y)}finally{r.value=!1}},a=async()=>{try{const d=e.getSpotifyPlaylists.length;await e.fetchSpotifyPlaylists(d)}catch(d){console.error("Failed to load more Spotify playlists:",d)}},c=async d=>{if(console.log("Spotify playlist arrow clicked:",d),d)try{await s.getPlaylistDetails(d,"spotifyPlaylists"),console.log("Playlist details fetched and added to section")}catch(f){console.error("Error fetching playlist details:",f)}},u=d=>{console.log("Searching for playlists:",d.target.value)};return Ce(()=>{i()}),(d,f)=>(h(),g("div",T1,[r.value?(h(),g("div",$1,f[0]||(f[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading playlists...",-1)]))):(h(),g("div",C1,[l("div",P1,[W(Jl,{playlists:w(e).getSpotifyPlaylists,"selected-playlist":n.value,title:"Spotify Playlists",placeholder:"Search Spotify playlists...","items-per-page":10,onPlaylistArrowClick:c,onSearch:u,onLoadMore:a},null,8,["playlists","selected-playlist"])])]))]))}},R1=ke(x1,[["__scopeId","data-v-c7a44125"]]),M1="modulepreload",E1=function(t){return"/"+t},di={},I1=function(e,s,r){let o=Promise.resolve();if(s&&s.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=i(s.map(u=>{if(u=E1(u),u in di)return;di[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":M1,d||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};function ea(t={}){const{message:e="Loading...",initialState:s=!1}=t,r=U(s),o=U(e),n=U(0),i=E(()=>r.value),a=E(()=>`${n.value}%`),c=b=>{r.value=!0,b&&(o.value=b),n.value=0},u=()=>{r.value=!1,n.value=100},d=b=>{n.value=Math.max(0,Math.min(100,b))};return{loading:r,loadingMessage:o,loadingProgress:n,isLoading:i,progressPercentage:a,startLoading:c,stopLoading:u,setProgress:d,withLoading:async(b,v={})=>{const{message:m,onProgress:p,onError:_}=v;try{c(m);const k=await b(S=>{p&&(d(S),p(S))});return u(),k}catch(k){if(u(),_)_(k);else throw console.error("Loading operation failed:",k),k}},withMultipleLoading:async(b,v={})=>{const{message:m,onProgress:p}=v;try{c(m);const _=b.length,k=[];for(let S=0;S<_;S++){const A=await b[S];k.push(A);const x=(S+1)/_*100;d(x),p&&p(x)}return u(),k}catch(_){throw u(),console.error("Multiple loading operations failed:",_),_}}}}const L1={class:"mobile-top-tracks"},D1={class:"section-header"},z1={class:"header-content"},O1={class:"header-text"},U1={class:"section-title"},F1={class:"header-actions"},q1=["title"],V1={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},N1={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},H1=["onClick"],B1=["onClick"],K1=["src","alt"],j1={key:1,class:"artist-placeholder"},G1={key:2,class:"playing-indicator"},Q1=["onClick"],W1={class:"item-name"},X1={key:0,class:"item-artist"},Y1={key:1,class:"item-genres"},J1=["src"],Z1={key:0,class:"empty-state"},ta={__name:"MobileArtistDisplaySection",props:{artists:{type:Array,required:!0},title:{type:String,required:!0}},emits:["artist-click","artist-cover-click","artist-info-click"],setup(t,{emit:e}){const s=he();me();const r=nt(),o=ve(),n=e;U(!1),Ve(),U([]);const i=()=>{r.toggleViewMode()},a=async()=>{s.followedArtists=[],await loadFollowedArtists()},c=v=>v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v.toString(),u=v=>!v||v.length===0?"":v.slice(0,2).map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(", "),d=(v,m)=>{n("artist-click",v,m)},f=async(v,m)=>{m.stopPropagation(),console.log("Artist cover clicked for:",v.name);const p=v.preview_url||v.previewUrl;p?(console.log("Playing audio preview for artist:",v.name),await o.mobileToggleTrack(v.id,p)):console.log("No preview URL available for artist:",v.name),n("artist-cover-click",v,m)},y=(v,m)=>{m.stopPropagation(),console.log("Artist info clicked for:",v.name),n("artist-info-click",v,m)},b=v=>{const m=cs(E(()=>v));return{hasPreview:m.hasPreview.value,displayClass:m.displayClass.value,previewUrl:m.previewUrl.value,trackId:m.trackId.value}};return(v,m)=>(h(),g("div",L1,[l("div",D1,[l("div",z1,[l("div",O1,[l("h2",U1,M(t.title),1)]),l("div",F1,[l("button",{class:"refresh-btn",onClick:a,title:"Refresh"},m[0]||(m[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:i,title:w(r).viewMode==="list"?"Grid view":"List view"},[w(r).viewMode==="list"?(h(),g("svg",V1,m[1]||(m[1]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",N1,m[2]||(m[2]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,q1)])])]),l("div",{class:K(["releases-container",w(r).viewMode])},[(h(!0),g(j,null,te(t.artists,(p,_)=>(h(),g("div",{key:_,class:"song-item",onClick:k=>d(p,k)},[l("div",{class:"item-cover",onClick:k=>f(p,k),style:{position:"relative"}},[p.images&&p.images.length>0?(h(),g("img",{key:0,src:p.images[0].url,alt:p.name,class:K(b(p).displayClass)},null,10,K1)):(h(),g("div",j1,m[3]||(m[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})],-1)]))),b(p).hasPreview&&w(o).mobileIsTrackPlaying(p.id)?(h(),g("div",G1,m[4]||(m[4]=[l("span",{class:"playing-icon"},"",-1)]))):R("",!0)],8,B1),l("div",{class:"item-info",onClick:k=>y(p,k)},[l("div",W1,M(p.name),1),p.followers?(h(),g("div",X1,M(c(p.followers.total))+" followers ",1)):R("",!0),p.genres&&p.genres.length>0?(h(),g("div",Y1,M(u(p.genres)),1)):R("",!0)],8,Q1),b(p).hasPreview?(h(),g("audio",{key:0,preload:"none",src:b(p).previewUrl},null,8,J1)):R("",!0)],8,H1))),128))],2),t.artists.length?R("",!0):(h(),g("div",Z1,m[5]||(m[5]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M15.75 4.5a3 3 0 11.825 2.066l-8.421 4.679a3.002 3.002 0 010 1.51l8.421 4.679a3 3 0 11-.729 1.31l-8.421-4.678a3 3 0 110-4.132l8.421-4.679a3 3 0 01-.096-.755z","clip-rule":"evenodd"})])],-1),l("h4",null,"No followed artists",-1),l("p",null,"Start following your favorite artists to see them here",-1)])))]))}},ev={key:0,class:"progress-ring"},tv=["width","height"],sv=["cx","cy","r","stroke-width"],rv=["cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset"],ov={key:0,class:"progress-text"},nv={key:1,class:"spinner-ring"},iv={__name:"LoadingSpinner",props:{size:{type:Number,default:40},color:{type:String,default:"var(--active-tab, #007bff)"},backgroundColor:{type:String,default:"var(--item-border, #e9ecef)"},progress:{type:Number,default:0},showProgress:{type:Boolean,default:!1},showProgressText:{type:Boolean,default:!1},strokeWidth:{type:Number,default:3}},setup(t){const e=t,s=E(()=>e.size<=24?"spinner-small":e.size<=32?"spinner-medium":e.size<=48?"spinner-large":"spinner-xl"),r=E(()=>({"--spinner-color":e.color,"--spinner-bg-color":e.backgroundColor,"--spinner-size":`${e.size}px`})),o=E(()=>e.size/2),n=E(()=>(e.size-e.strokeWidth)/2),i=E(()=>2*Math.PI*n.value),a=E(()=>i.value-e.progress/100*i.value);return(c,u)=>(h(),g("div",{class:K(["loading-spinner",s.value]),style:Se(r.value)},[t.showProgress?(h(),g("div",ev,[(h(),g("svg",{class:"progress-circle",width:t.size,height:t.size},[l("circle",{class:"progress-circle-bg",cx:o.value,cy:o.value,r:n.value,"stroke-width":t.strokeWidth},null,8,sv),l("circle",{class:"progress-circle-fg",cx:o.value,cy:o.value,r:n.value,"stroke-width":t.strokeWidth,"stroke-dasharray":i.value,"stroke-dashoffset":a.value,style:Se({transformOrigin:`${o.value}px ${o.value}px`})},null,12,rv)],8,tv)),t.showProgressText?(h(),g("div",ov,M(t.progress)+"% ",1)):R("",!0)])):(h(),g("div",nv,[(h(),g(j,null,te(3,d=>l("div",{class:"spinner-dot",key:d,style:Se({animationDelay:`${d*.1}s`})},null,4)),64))]))],6))}},lv=ke(iv,[["__scopeId","data-v-b263e1d3"]]),av={class:"loading-content"},cv={key:0,class:"loading-text"},uv={key:1,class:"loading-details"},dv={key:2,class:"loading-actions"},fv={__name:"LoadingState",props:{message:{type:String,default:"Loading..."},details:{type:String,default:null},progress:{type:Number,default:0},showProgress:{type:Boolean,default:!1},showProgressText:{type:Boolean,default:!1},spinnerSize:{type:Number,default:40},spinnerColor:{type:String,default:"var(--active-tab, #007bff)"},spinnerBackgroundColor:{type:String,default:"var(--item-border, #e9ecef)"},variant:{type:String,default:"default",validator:t=>["default","inline","fullscreen","minimal"]},overlay:{type:Boolean,default:!1},overlayClickable:{type:Boolean,default:!1},padding:{type:String,default:null},minHeight:{type:String,default:null}},emits:["overlay-click"],setup(t){const e=t,s=E(()=>`loading-${e.variant}`),r=E(()=>({"--loading-padding":e.padding,"--loading-min-height":e.minHeight}));return(o,n)=>(h(),g("div",{class:K(["loading-state",s.value]),style:Se(r.value)},[l("div",av,[W(lv,{size:t.spinnerSize,color:t.spinnerColor,"background-color":t.spinnerBackgroundColor,progress:t.progress,"show-progress":t.showProgress,"show-progress-text":t.showProgressText},null,8,["size","color","background-color","progress","show-progress","show-progress-text"]),t.message||o.$slots.default?(h(),g("div",cv,[Ao(o.$slots,"default",{},()=>[l("p",null,M(t.message),1)],!0)])):R("",!0),t.details?(h(),g("div",uv,[l("small",null,M(t.details),1)])):R("",!0),o.$slots.actions?(h(),g("div",dv,[Ao(o.$slots,"actions",{},void 0,!0)])):R("",!0)]),t.overlay?(h(),g("div",{key:0,class:"loading-overlay",onClick:n[0]||(n[0]=i=>t.overlayClickable?o.$emit("overlay-click"):null)})):R("",!0)],6))}},sa=ke(fv,[["__scopeId","data-v-cf8c984f"]]),pv={class:"mobile-top-tracks"},hv={class:"section-header"},mv={class:"time-range-selector"},vv=["onClick"],gv={__name:"MobileTopArtists",setup(t){const e=he();ve();const s=me(),r=nt(),{setSelectedItem:o}=Ve(),{isLoading:n,loadingMessage:i,withLoading:a}=ea({message:"Loading top artists..."}),c=U(1),u=E(()=>{switch(c.value){case 1:return e.getTopArtistsShort||[];case 2:return e.getTopArtistsMedium||[];case 3:return e.getTopArtistsLong||[];default:return e.getTopArtistsShort||[]}});E(()=>{switch(c.value){case 1:return"Last month";case 2:return"Last 6 months";case 3:return"All time";default:return"Last month"}});const d=async m=>{const p=m===1?"short_term":m===2?"medium_term":"long_term",_=p==="short_term"?"short":p==="medium_term"?"medium":"long",k=e[`getTopArtists${_.charAt(0).toUpperCase()+_.slice(1)}`];if(k&&k.length>0){console.log("Using cached top artists data for",p);return}try{await e.fetchTopArtists(p)}catch(S){console.error("Failed to load top artists:",S)}},f=async m=>{c.value=m,await a(async()=>{await d(m)},{message:"Loading top artists..."})},y=async(m,p)=>{o(m.id),await s.getArtistDetails(m,"topArtists");const{useVisibilityManager:k}=await I1(async()=>{const{useVisibilityManager:x}=await Promise.resolve().then(()=>$f);return{useVisibilityManager:x}},void 0),S=k(),A=`trackartist_${m.id}__p:topArtistsPage__`;S.showComponent(A),console.log("Showing deeper artist for:",m.name,"with key:",A)},b=async(m,p)=>{console.log("Artist cover clicked for:",m.name)},v=async(m,p)=>{console.log("Artist info clicked for:",m.name),await y(m)};return Ce(async()=>{await a(async()=>{await d(c.value)},{message:"Loading your top artists..."})}),(m,p)=>(h(),g("div",pv,[l("div",hv,[l("div",mv,[(h(),g(j,null,te([{id:1,label:"Month"},{id:2,label:"6 Months"},{id:3,label:"All Time"}],_=>l("button",{key:_.id,class:K(["time-range-btn",{active:c.value===_.id}]),onClick:k=>f(_.id)},M(_.label),11,vv)),64))])]),w(n)?(h(),Z(sa,{key:0,message:w(i),variant:"default"},null,8,["message"])):R("",!0),W(ta,{title:"Top Artists",artists:u.value,"view-mode":w(r).viewMode,onArtistClick:y,onArtistCoverClick:b,onArtistInfoClick:v},null,8,["artists","view-mode"])]))}},yv={class:"mobile-top-tracks"},wv={class:"section-header"},bv={class:"time-range-selector"},kv=["onClick"],_v={class:"header-content"},Sv={class:"header-actions"},Av=["title"],Tv={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},$v={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Cv={key:0,class:"loading-state"},Pv={key:1,class:"section-content"},xv={key:0,class:"empty-state"},Rv={__name:"MobileTopTracks",setup(t){const e=he(),s=ve(),r=De(),o=me(),n=nt(),{setSelectedItem:i}=Ve(),a=U(1),c=U(!1),u=E(()=>{switch(a.value){case 1:return e.getTopTracksShort||[];case 2:return e.getTopTracksMedium||[];case 3:return e.getTopTracksLong||[];default:return e.getTopTracksShort||[]}});E(()=>{switch(a.value){case 1:return"Last month";case 2:return"Last 6 months";case 3:return"All time";default:return"Last month"}});const d=async _=>{const k=_===1?"short_term":_===2?"medium_term":"long_term",S=k==="short_term"?"short":k==="medium_term"?"medium":"long",A=e[`getTopTracks${S.charAt(0).toUpperCase()+S.slice(1)}`];if(A&&A.length>0){console.log("Using cached top tracks data for",k);return}c.value=!0;try{await e.fetchTopTracks(k)}catch(x){console.error("Failed to load top tracks:",x)}finally{c.value=!1}},f=async _=>{a.value=_,await d(_)},y=async(_,k)=>{console.log("Track clicked:",_.name,"Preview URL:",_.preview_url||_.previewUrl),i(_.id),await o.getTrackDetails(_,"topTracks"),r.addToQueue(_);const S=_.preview_url||_.previewUrl;S?(console.log("Playing audio preview for:",_.name),await s.mobileToggleTrack(_.id,S)):console.log("No preview URL available for:",_.name)},b=async(_,k)=>{console.log("Cover clicked for:",_.name);const S=_.preview_url||_.previewUrl;S?(console.log("Playing audio preview for:",_.name),await s.mobileToggleTrack(_.id,S)):console.log("No preview URL available for:",_.name)},v=async(_,k)=>{console.log("Info clicked for:",_.name),i(_.id),await o.getTrackDetails(_,"topTracks"),r.addToQueue(_)},m=async()=>{const _=a.value===1?"short_term":a.value===2?"medium_term":"long_term",k=_==="short_term"?"short":_==="medium_term"?"medium":"long";e[`topTracks.${k}`]=[],await d(a.value)},p=()=>{n.toggleViewMode()};return Ce(async()=>{await d(a.value)}),(_,k)=>(h(),g("div",yv,[l("div",wv,[l("div",bv,[(h(),g(j,null,te([{id:1,label:"Month"},{id:2,label:"6 Months"},{id:3,label:"All Time"}],S=>l("button",{key:S.id,class:K(["time-range-btn",{active:a.value===S.id}]),onClick:A=>f(S.id)},M(S.label),11,kv)),64))]),l("div",_v,[k[3]||(k[3]=l("div",{class:"header-text"},[l("h2",{class:"section-title"},"Top Tracks")],-1)),l("div",Sv,[l("button",{class:"refresh-btn",onClick:m,title:"Refresh"},k[0]||(k[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:p,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",Tv,k[1]||(k[1]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",$v,k[2]||(k[2]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Av)])])]),c.value?(h(),g("div",Cv,k[4]||(k[4]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading top tracks...",-1)]))):(h(),g("div",Pv,[u.value.length===0?(h(),g("div",xv,k[5]||(k[5]=[l("div",{class:"empty-icon"},"",-1),l("h3",null,"No tracks found",-1),l("p",null,"Your top tracks will appear here",-1)]))):(h(),g("div",{key:1,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,te(u.value,(S,A)=>(h(),Z(Jt,{key:S.id,track:S,num:3,"view-mode":w(n).viewMode,onClick:y,onCoverClick:b,onInfoClick:v},null,8,["track","view-mode"]))),128))],2))]))]))}},Mv={class:"mobile-top-tracks"},Ev={key:0,class:"loading-state"},Iv={key:1,class:"new-releases-content"},Lv={class:"releases-section"},Dv={__name:"MobileSavedAlbums",setup(t){const e=he(),s=me();Ve();const r=U(!1),o=U(null),n=U([]),i=async()=>{if(e.getSavedAlbums&&e.getSavedAlbums.length>0){console.log("Using cached saved albums data"),n.value=e.getSavedAlbums.map(u=>u.album);return}r.value=!0;try{await e.fetchSavedAlbums(0),n.value=(e.getSavedAlbums||[]).map(u=>u.album)}catch(u){console.error("Failed to load saved albums:",u)}finally{r.value=!1}},a=async(u,d)=>{console.log("ReleaseSelect",u,d),o.value=u;const f=n.value.find(y=>y.id===u);console.log("Release selected:",f),f&&await s.getAlbumDetails(f,"savedAlbums")},c=async()=>{e.savedAlbums=[],await i()};return Ce(async()=>{await i()}),(u,d)=>(h(),g("div",Mv,[r.value?(h(),g("div",Ev,d[0]||(d[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading saved albums...",-1)]))):(h(),g("div",Iv,[l("div",Lv,[W(Zl,{releases:n.value,"selected-release":o.value,title:"Saved Albums",placeholder:"Search releases...","items-per-page":20,onReleaseSelect:a,onRefresh:c},null,8,["releases","selected-release"])])]))]))}};function us(){const t=(d,f)=>{const y=[...d];switch(f){case"track":return y.sort((b,v)=>b.track.name.localeCompare(v.track.name));case"album":return y.sort((b,v)=>b.track.album.name.localeCompare(v.track.album.name));case"artist":return y.sort((b,v)=>b.track.artists[0].name.localeCompare(v.track.artists[0].name));case"popularity":return y.sort((b,v)=>b.track.popularity>v.track.popularity);case"release_date":return y.sort((b,v)=>b.track.album.release_date.localeCompare(v.track.album.release_date));case"duration":return y.sort((b,v)=>b.track.duration_ms>v.track.duration_ms);default:return y}},e=(d,f)=>{const y=[...d];switch(f){case"track":return y.sort((b,v)=>b.name.localeCompare(v.name));case"album":return y.sort((b,v)=>b.album.name.localeCompare(v.album.name));case"artist":return y.sort((b,v)=>b.artists[0].name.localeCompare(v.artists[0].name));case"popularity":return y.sort((b,v)=>b.popularity>v.popularity);case"release_date":return y.sort((b,v)=>b.album.release_date.localeCompare(v.album.release_date));case"duration":return y.sort((b,v)=>b.duration_ms>v.duration_ms);default:return y}},s=(d,f)=>{const y=[...d];switch(f){case"artist":return y.sort((b,v)=>b.name.localeCompare(v.name));case"popularity":return y.sort((b,v)=>b.popularity>v.popularity);case"followers":return y.sort((b,v)=>b.followers>v.followers);default:return y}},r=(d,f)=>{const y=[...d];switch(f){case"name":case"album":return y.sort((b,v)=>b.name.localeCompare(v.name));case"artist":return y.sort((b,v)=>b.artists[0].name.localeCompare(v.artists[0].name));case"popularity":return y.sort((b,v)=>b.popularity>v.popularity);case"release_date":return y.sort((b,v)=>b.release_date.localeCompare(v.release_date));case"number_of_tracks":return y.sort((b,v)=>b.total_tracks>v.total_tracks);default:return y}},o=(d,f)=>{const y=[...d];switch(f){case"name":case"album":return y.sort((b,v)=>b.album.name.localeCompare(v.album.name));case"artist":return y.sort((b,v)=>b.album.artists[0].name.localeCompare(v.album.artists[0].name));case"popularity":return y.sort((b,v)=>b.album.popularity>v.album.popularity);case"release_date":return y.sort((b,v)=>b.album.release_date.localeCompare(v.album.release_date));case"number_of_tracks":return y.sort((b,v)=>b.album.total_tracks>v.album.total_tracks);default:return y}};return{sortTracks:e,sortArtists:s,sortAlbums:o,createPlaylistTrackSorter:(d,f)=>E(()=>t(d.value,f.value)),createTrackSorter:(d,f)=>E(()=>e(d.value,f.value)),createArtistSorter:(d,f)=>E(()=>s(d.value,f.value)),createAlbumSorter:(d,f)=>E(()=>o(d.value,f.value)),createNewReleaseSorter:(d,f)=>E(()=>r(d.value,f.value))}}const zv={class:"mobile-followed-artists"},Ov={__name:"MobileFollowedArtists",setup(t){const e=he(),s=me(),r=nt(),{createArtistSorter:o}=us(),{setSelectedItem:n}=Ve(),i=U(""),a=U(!1),c=U([]),u=async()=>{if(e.getFollowedArtists&&e.getFollowedArtists.length>0){console.log("Using cached followed artists data"),c.value=e.getFollowedArtists;return}a.value=!0;try{await e.fetchFollowedArtists(),c.value=e.getFollowedArtists||[]}catch(v){console.error("Failed to load followed artists:",v)}finally{a.value=!1}},d=async(v,m)=>{console.log("Artist clicked:",v.name,v),n(v.id);try{console.log("Getting artist details for followedArtists section..."),await s.getArtistDetails(v,"followedArtists"),console.log("Artist details loaded successfully")}catch(p){console.error("Failed to load artist details:",p)}},f=async(v,m)=>{console.log("Artist cover clicked for:",v.name)},y=async(v,m)=>{console.log("Artist info clicked for:",v.name),await d(v)},b=o(E(()=>{const v=e.getFollowedArtists||[];return console.log("Creating sorted items from:",v.length,"artists"),v}),i);return Ce(async()=>{console.log("MobileFollowedArtists mounted, loading data..."),await u()}),(v,m)=>(h(),g("div",zv,[W(ta,{title:"Followed Artists",artists:w(b),"view-mode":w(r).viewMode,onArtistClick:d,onArtistCoverClick:f,onArtistInfoClick:y},null,8,["artists","view-mode"])]))}},Uv={class:"mobile-top-tracks"},Fv={class:"section-header"},qv={class:"header-content"},Vv={class:"header-actions"},Nv=["title"],Hv={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Bv={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Kv={key:0,class:"loading-state"},jv={key:1,class:"loading-more"},Gv={key:3,class:"empty-state"},vo=20,Qv={__name:"MobileSavedTracks",props:{num:{type:Number,default:5}},setup(t){const e=t,s=he(),r=ve(),o=De(),n=me(),i=nt(),{setSelectedItem:a}=Ve(),c=U(!1),u=U([]),d=U(1),f=U(!1),y=async()=>{if(s.getSavedTracks&&s.getSavedTracks.length>0){console.log("Using cached saved tracks data"),u.value=s.getSavedTracks.map(P=>P.track);return}c.value=!0;try{await s.fetchSavedTracks(0),u.value=(s.getSavedTracks||[]).map(P=>P.track)}catch(P){console.error("Failed to load saved tracks:",P)}finally{c.value=!1}},b=async(P,I)=>{a(P.id),await n.getTrackDetails(P,"savedTracks"),o.addToQueue(P)},v=async(P,I)=>{console.log("Cover clicked for:",P.name);const T=P.preview_url||P.previewUrl;T?(console.log("Playing audio preview for:",P.name),await r.mobileToggleTrack(P.id,T)):console.log("No preview URL available for:",P.name)},m=async(P,I)=>{console.log("Info clicked for:",P.name),a(P.id),await n.getTrackDetails(P,"savedTracks"),o.addToQueue(P)},p=async()=>{s.savedTracks=[],d.value=1,await y()},_=()=>{i.toggleViewMode()},k=E(()=>s.savedTracksTotal),S=E(()=>Math.ceil(k.value/vo)),A=E(()=>{const P=d.value*vo;return u.value.slice(0,P)}),x=async P=>{if(P>d.value){const I=s.savedTracks.length;if((P-1)*vo>=I){f.value=!0;try{await s.fetchSavedTracks(I),u.value=(s.getSavedTracks||[]).map(z=>z.track)}catch(z){console.error("Failed to load more tracks:",z)}finally{f.value=!1}}}d.value=P};return Ce(async()=>{await y()}),(P,I)=>(h(),g("div",Uv,[l("div",Fv,[l("div",qv,[I[3]||(I[3]=l("div",{class:"header-text"},[l("h2",{class:"section-title"},"Saved Tracks")],-1)),l("div",Vv,[l("button",{class:"refresh-btn",onClick:p,title:"Refresh"},I[0]||(I[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:_,title:w(i).viewMode==="list"?"Grid view":"List view"},[w(i).viewMode==="list"?(h(),g("svg",Hv,I[1]||(I[1]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",Bv,I[2]||(I[2]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Nv)])])]),c.value?(h(),g("div",Kv,I[4]||(I[4]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading saved tracks...",-1)]))):R("",!0),f.value?(h(),g("div",jv,I[5]||(I[5]=[l("div",{class:"loading-spinner"},null,-1),l("span",null,"Loading more tracks...",-1)]))):u.value.length>0?(h(),g("div",{key:2,class:K(["releases-container",w(i).viewMode])},[(h(!0),g(j,null,te(A.value,T=>(h(),Z(Jt,{key:T.id,track:T,num:e.num,onClick:b,onCoverClick:v,onInfoClick:m},null,8,["track","num"]))),128))],2)):(h(),g("div",Gv,I[6]||(I[6]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z","clip-rule":"evenodd"})])],-1),l("h4",null,"No saved tracks",-1),l("p",null,"Start saving your favorite tracks to see them here",-1)]))),S.value>1?(h(),Z(Yr,{key:4,"current-page":d.value,"total-pages":S.value,onPageChange:x},null,8,["current-page","total-pages"])):R("",!0)]))}},Wv=ke(Qv,[["__scopeId","data-v-1d2639e8"]]),Xv={class:"mobile-search-page"},Yv={class:"search-header"},Jv={class:"search-input-container"},Zv={key:0,class:"loading-container"},eg={key:1,class:"search-results"},tg={class:"results-header"},sg={class:"results-info"},rg={class:"results-count"},og={class:"header-actions"},ng=["title"],ig={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},lg={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ag={key:0,class:"mobile-search-section"},cg={key:1,class:"mobile-search-section"},ug=["onClick"],dg={class:"item-cover"},fg=["src","alt"],pg={class:"item-info"},hg={class:"item-name"},mg={class:"item-artist"},vg={key:2,class:"mobile-search-section"},gg=["onClick"],yg={class:"item-cover"},wg=["src","alt"],bg={class:"item-info"},kg={class:"item-name"},_g={class:"item-artist"},Sg={key:3,class:"mobile-search-section"},Ag=["onClick"],Tg={class:"item-cover"},$g=["src","alt"],Cg={class:"item-info"},Pg={class:"item-name"},xg={class:"item-artist"},Rg={key:2,class:"empty-state"},Mg={key:3,class:"empty-state"},Eg={__name:"MobileSearchPage",setup(t){const e=he(),s=me(),r=De(),o=nt(),n=ve(),i=U(""),a=E(()=>e.getSearchTracks.length>0||e.getSearchArtists.length>0||e.getSearchAlbums.length>0||e.getSearchPlaylists.length>0),c=E(()=>e.getSearchTracks.length+e.getSearchArtists.length+e.getSearchAlbums.length+e.getSearchPlaylists.length),u=()=>{i.value.trim()&&e.search(i.value)},d=()=>{i.value="",e.clearSearchResults()},f=()=>{o.toggleViewMode()},y=async(k,S)=>{s.getIsGloballyLoading||(await s.getTrackDetails(k,"search"),r.addToQueue(k))},b=async(k,S)=>{console.log("Cover clicked for:",k.name);const A=k.preview_url||k.previewUrl;A?(console.log("Playing audio preview for:",k.name),await n.mobileToggleTrack(k.id,A)):console.log("No preview URL available for:",k.name)},v=async(k,S)=>{console.log("Info clicked for:",k.name),!s.getIsGloballyLoading&&(await s.getTrackDetails(k,"search"),r.addToQueue(k))},m=async(k,S)=>{s.getIsGloballyLoading||await s.getArtistDetails(k,"search")},p=async(k,S)=>{s.getIsGloballyLoading||await s.getAlbumDetails(k,"search")},_=async(k,S)=>{s.getIsGloballyLoading||await s.getPlaylistDetails(k,"search")};return(k,S)=>(h(),g("div",Xv,[l("div",Yv,[l("div",Jv,[S[2]||(S[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"search-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1)),we(l("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=A=>i.value=A),onInput:u,placeholder:"Search for songs, artists, albums...",class:"search-input"},null,544),[[Ss,i.value]]),i.value?(h(),g("button",{key:0,onClick:d,class:"clear-button"},S[1]||(S[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"clear-icon"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))):R("",!0)])]),w(e).isLoading?(h(),g("div",Zv,S[3]||(S[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",{class:"loading-text"},"Searching...",-1)]))):a.value?(h(),g("div",eg,[l("div",tg,[l("div",sg,[S[4]||(S[4]=l("h3",{class:"results-title"},"Search Results",-1)),l("p",rg,M(c.value)+" results found",1)]),l("div",og,[l("button",{class:"view-toggle-btn",onClick:f,title:w(o).viewMode==="list"?"Grid view":"List view"},[w(o).viewMode==="list"?(h(),g("svg",ig,S[5]||(S[5]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",lg,S[6]||(S[6]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,ng)])]),w(e).getSearchTracks.length>0?(h(),g("div",ag,[S[7]||(S[7]=l("h3",{class:"section-title"},"Songs",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,te(w(e).getSearchTracks,(A,x)=>(h(),Z(Jt,{key:x,track:A,num:0,"view-mode":w(o).viewMode,onClick:y,onCoverClick:b,onInfoClick:v},null,8,["track","view-mode"]))),128))],2)])):R("",!0),w(e).getSearchArtists.length>0?(h(),g("div",cg,[S[8]||(S[8]=l("h3",{class:"section-title"},"Artists",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,te(w(e).getSearchArtists,(A,x)=>{var P,I,T;return h(),g("div",{key:x,class:"song-item",onClick:z=>m(A)},[l("div",dg,[l("img",{src:((I=(P=A.images)==null?void 0:P[0])==null?void 0:I.url)||"/default-artist.png",alt:A.name,class:"cover-image"},null,8,fg)]),l("div",pg,[l("div",hg,M(A.name),1),l("div",mg,M(((T=A.genres)==null?void 0:T.slice(0,2).join(", "))||"Artist"),1)])],8,ug)}),128))],2)])):R("",!0),w(e).getSearchAlbums.length>0?(h(),g("div",vg,[S[9]||(S[9]=l("h3",{class:"section-title"},"Albums",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,te(w(e).getSearchAlbums,(A,x)=>{var P,I;return h(),g("div",{key:x,class:"song-item",onClick:T=>p(A)},[l("div",yg,[l("img",{src:((I=(P=A.images)==null?void 0:P[0])==null?void 0:I.url)||"/default-album.png",alt:A.name,class:"cover-image"},null,8,wg)]),l("div",bg,[l("div",kg,M(A.name),1),l("div",_g,M(A.artists.map(T=>T.name).join(", ")),1)])],8,gg)}),128))],2)])):R("",!0),w(e).getSearchPlaylists.length>0?(h(),g("div",Sg,[S[10]||(S[10]=l("h3",{class:"section-title"},"Playlists",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,te(w(e).getSearchPlaylists,(A,x)=>{var P,I,T;return h(),g("div",{key:x,class:"song-item",onClick:z=>_(A)},[l("div",Tg,[l("img",{src:((I=(P=A.images)==null?void 0:P[0])==null?void 0:I.url)||"/default-playlist.png",alt:A.name,class:"cover-image"},null,8,$g)]),l("div",Cg,[l("div",Pg,M(A.name),1),l("div",xg,M(((T=A.owner)==null?void 0:T.display_name)||"Playlist"),1)])],8,Ag)}),128))],2)])):R("",!0)])):i.value&&!w(e).isLoading?(h(),g("div",Rg,S[11]||(S[11]=[l("div",{class:"empty-state-icon"},"",-1),l("h3",{class:"empty-state-title"},"No results found",-1),l("p",{class:"empty-state-text"},"Try searching for something else",-1)]))):(h(),g("div",Mg,S[12]||(S[12]=[l("div",{class:"empty-state-icon"},"",-1),l("h3",{class:"empty-state-title"},"Search Music",-1),l("p",{class:"empty-state-text"},"Find your favorite songs, artists, albums, and playlists",-1)])))]))}},Ig={key:0,class:"global-preloader"},Lg={__name:"GlobalPreloader",setup(t){const e=me(),s=E(()=>e.getIsGloballyLoading);return(r,o)=>s.value?(h(),g("div",Ig,o[0]||(o[0]=[l("div",{class:"global-preloader-content"},[l("div",{class:"global-preloader-spinner"}),l("div",{class:"global-preloader-text"},[l("span",{class:"loading waitingForConnection"},[Ae("Loading"),l("span",null,"."),l("span",null,"."),l("span",null,".")])])],-1)]))):R("",!0)}},ra=ke(Lg,[["__scopeId","data-v-b4e42ee3"]]),Dg={class:"mobile-layout"},zg={class:"sidebar-navigation"},Og={class:"sidebar-section"},Ug={class:"sidebar-section"},Fg={class:"sidebar-section"},qg={class:"sidebar-section"},Vg={class:"mobile-main"},Ng={key:0},Hg={key:1},Bg={key:2},Kg={key:3},jg={key:4},Gg={key:5},Qg={key:6},Wg={key:7},Xg={key:8},Yg={key:9},Jg={key:10},Zg={__name:"MobileLayout",emits:["search"],setup(t,{emit:e}){const s=U(0);U("");const r=U(!1),o=he(),{currentServiceType:n}=Yt(o),i=E(()=>n.value!=="deezer"),a=d=>{s.value=d},c=()=>{r.value=!r.value},u=()=>{r.value=!1};return ws(n,d=>{console.log("MobileLayout: Service changed to",d),d==="deezer"&&(s.value===2||s.value===3)&&(console.log("MobileLayout: Redirecting from Top Artists/Tracks to Playlists for Deezer"),a(1))},{immediate:!0}),Ce(async()=>{var f;await o.initializeServices();const d=(f=o.currentService)==null?void 0:f.serviceType;d&&d!==n.value&&(console.log("MobileLayout: Syncing service type from",n.value,"to",d),o.currentServiceType=d)}),(d,f)=>(h(),g("div",Dg,[l("header",{class:"mobile-header"},[l("div",{class:"header-content"},[l("button",{class:"hamburger-button",onClick:c},f[11]||(f[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"hamburger-icon"},[l("path",{"fill-rule":"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})],-1)])),f[12]||(f[12]=Xe('<div class="header-text"><h1 class="app-title"><img class="logo" src="'+bl+'" alt="Discover Mobily"><span class="ps-2"> Discover Mobily </span></h1><p class="app-subtitle">Your music discovery companion</p></div>',1))])]),l("aside",{class:K(["mobile-sidebar",{"sidebar-open":r.value}])},[l("nav",zg,[l("div",Og,[f[16]||(f[16]=l("h3",{class:"sidebar-section-title"},"Your Music",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===1}]),onClick:f[0]||(f[0]=y=>{a(1),u()})},f[13]||(f[13]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Playlists",-1)]),2),i.value?(h(),g("button",{key:0,class:K(["sidebar-nav-item",{active:s.value===2}]),onClick:f[1]||(f[1]=y=>{a(2),u()})},f[14]||(f[14]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Top Artists",-1)]),2)):R("",!0),i.value?(h(),g("button",{key:1,class:K(["sidebar-nav-item",{active:s.value===3}]),onClick:f[2]||(f[2]=y=>{a(3),u()})},f[15]||(f[15]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})],-1),l("span",{class:"sidebar-nav-label"},"Top Tracks",-1)]),2)):R("",!0)]),l("div",Ug,[f[20]||(f[20]=l("h3",{class:"sidebar-section-title"},"Library",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===4}]),onClick:f[3]||(f[3]=y=>{a(4),u()})},f[17]||(f[17]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1),l("span",{class:"sidebar-nav-label"},"Saved Albums",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===5}]),onClick:f[4]||(f[4]=y=>{a(5),u()})},f[18]||(f[18]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M8.25 4.5a3.75 3.75 0 117.5 0v8.25a3.75 3.75 0 11-7.5 0V4.5z"}),l("path",{d:"M6 10.5a.75.75 0 01.75.75v1.5a5.25 5.25 0 1010.5 0v-1.5a.75.75 0 011.5 0v1.5a6.751 6.751 0 01-6 6.709v2.291h3a.75.75 0 010 1.5h-7.5a.75.75 0 010-1.5h3v-2.291a6.751 6.751 0 01-6-6.709v-1.5A.75.75 0 016 10.5z"})],-1),l("span",{class:"sidebar-nav-label"},"Saved Tracks",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===6}]),onClick:f[5]||(f[5]=y=>{a(6),u()})},f[19]||(f[19]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Followed Artists",-1)]),2)]),l("div",Fg,[f[24]||(f[24]=l("h3",{class:"sidebar-section-title"},"Discover",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===0}]),onClick:f[6]||(f[6]=y=>{a(0),u()})},f[21]||(f[21]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Search",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===7}]),onClick:f[7]||(f[7]=y=>{a(7),u()})},f[22]||(f[22]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"New Releases",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===8}]),onClick:f[8]||(f[8]=y=>{a(8),u()})},f[23]||(f[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Spotify Playlists",-1)]),2)]),l("div",qg,[f[27]||(f[27]=l("h3",{class:"sidebar-section-title"},"Settings",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===12}]),onClick:f[9]||(f[9]=y=>{a(12),u()})},f[25]||(f[25]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z"})],-1),l("span",{class:"sidebar-nav-label"},"Queue",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===11}]),onClick:f[10]||(f[10]=y=>{a(11),u()})},f[26]||(f[26]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Profile",-1)]),2)])])],2),l("div",{class:K(["sidebar-overlay",{"overlay-active":r.value}]),onClick:u},null,2),l("main",Vg,[s.value===0?(h(),g("div",Ng,[W(Eg)])):s.value===1?(h(),g("div",Hg,[W(dh)])):s.value===2&&i.value?(h(),g("div",Bg,[W(gv)])):s.value===3&&i.value?(h(),g("div",Kg,[W(Rv)])):s.value===4?(h(),g("div",jg,[W(Dv)])):s.value===5?(h(),g("div",Gg,[W(Wv)])):s.value===6?(h(),g("div",Qg,[W(Ov)])):s.value===7?(h(),g("div",Wg,[W(Nh)])):s.value===8?(h(),g("div",Xg,[W(R1)])):R("",!0),s.value===11?(h(),g("div",Yg,[W(Of)])):s.value===12?(h(),g("div",Jg,[Ao(d.$slots,"queue",{},()=>[W(dp)])])):R("",!0)]),W(A1,{num:s.value},null,8,["num"]),W(ra)]))}};function ey(){const t=U("");return{search:t,clearSearch:()=>{t.value=""}}}const Jr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAMlQTFRFAAAAfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19v5caSAAAAEN0Uk5TAA1w1vn834cYBQwSzf7//eGYjdc/BwM2m2/YGinwfu86C13ZjhsADgIETsZF0oxj5TyyMw+X9DJf5+Db+hYgoPb7tTQvpGkAAAB/SURBVHicLYjpGoFQAAVPCNE9FbKTbBVlV3bx/g+l+2V+zQwApVAsqeVKVasBdV1QGKRpNaDobLbsdscku+iJ/gDAcCRj7EwgcaezObTFEjmuBz/4O2wfq3WYpxdtsCV3+8wDiwcZzhE4ndU4wSW60rjdH4zDbD1f75T8fBPgB7lkDCCRTYbXAAAAAElFTkSuQmCC",is={__name:"SortTracks",props:Ac(["full_width"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=rn(t,"modelValue");return(s,r)=>(h(),g("div",{class:K(["sort-container py-2",{"w-100":t.full_width}])},[we(l("select",{class:"modern-select w-100","onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o)},r[1]||(r[1]=[Xe('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="duration">Sort by duration</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="track">Sort by track name</option>',7)]),512),[[As,e.value]]),r[2]||(r[2]=l("div",{class:"select-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 10l5 5 5-5z"})])],-1))],2))}},ty={class:"seed-header"},sy={class:"seed-title"},ry={class:"title-text"},oy={class:"seed-actions"},ny={key:0,class:"lastfm-indicator"},iy={key:0,class:"lastfm-stats"},ly={class:"stat-item"},ay={class:"stat-number"},cy={class:"stat-item"},uy={class:"stat-number"},dy={class:"stat-item"},fy={class:"stat-number"},py={class:"tracks-container"},hy=["onMouseover","onMouseleave","onClick"],my={class:"track-overlay"},vy={class:"track-info"},gy={class:"track-artists"},yy={class:"track-name"},wy=["preload","src"],by={__name:"SeedTracks",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=U(),i=U(""),a=U(null),c=Le(),u=E(()=>{const m=e.d.tracks||[];return i.value?[...m].sort((p,_)=>{switch(i.value){case"track":return p.name.localeCompare(_.name);case"album":return p.album.name.localeCompare(_.album.name);case"artist":return p.artists[0].name.localeCompare(_.artists[0].name);case"popularity":return _.popularity-p.popularity;case"release_date":return new Date(_.album.release_date)-new Date(p.album.release_date);case"duration":return p.duration_ms-_.duration_ms;default:return 0}}):m});function d(m){return ut(E(()=>m))}function f(){if(!e.d.tracks)return 0;const m=new Set;return e.d.tracks.forEach(p=>{p.artists&&p.artists.length>0&&m.add(p.artists[0].name)}),m.size}function y(){if(!e.d.tracks)return 0;const m=new Set;return e.d.tracks.forEach(p=>{p.album&&p.album.name&&m.add(p.album.name)}),m.size}function b(m){n.value=m}async function v(){try{console.log("Refreshing seed tracks for:",e.d.id),await o.getSeedTrackRecommendations(e.d,pe(e.num),e.d.parentKey)}catch(m){console.error("Failed to refresh seed tracks:",m)}}return Ce(async()=>{await ot();const m=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(m,a),console.log("Showing SeedTracks component after registration:",m),c.showComponent(m)}),(m,p)=>(h(),g("div",{class:"modern-seed-tracks",ref_key:"componentRef",ref:a},[l("div",ty,[l("div",sy,[p[1]||(p[1]=l("span",{class:"title-icon"},"",-1)),l("span",ry,"Recommended songs based on "+M(t.d.name),1)]),l("div",oy,[l("button",{class:"refresh-button",onClick:v},p[2]||(p[2]=[l("img",{class:"refresh-icon",src:Jr,alt:"Refresh"},null,-1)])),W(is,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=_=>i.value=_)},null,8,["modelValue"])])]),w(rt)()==="deezer"?(h(),g("div",ny,[p[8]||(p[8]=Xe('<div class="lastfm-header" data-v-863f6c73><div class="lastfm-icon" data-v-863f6c73><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" data-v-863f6c73><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" data-v-863f6c73></path></svg></div><div class="lastfm-info" data-v-863f6c73><span class="lastfm-title" data-v-863f6c73>Powered by Last.fm</span><span class="lastfm-subtitle" data-v-863f6c73>Similar tracks discovered via Last.fm API</span></div></div>',1)),t.d.tracks&&t.d.tracks.length>0?(h(),g("div",iy,[l("div",ly,[l("span",ay,M(t.d.tracks.length),1),p[3]||(p[3]=l("span",{class:"stat-label"},"tracks found",-1))]),p[6]||(p[6]=l("div",{class:"stat-divider"},null,-1)),l("div",cy,[l("span",uy,M(f()),1),p[4]||(p[4]=l("span",{class:"stat-label"},"artists",-1))]),p[7]||(p[7]=l("div",{class:"stat-divider"},null,-1)),l("div",dy,[l("span",fy,M(y()),1),p[5]||(p[5]=l("span",{class:"stat-label"},"albums",-1))])])):R("",!0)])):R("",!0),l("div",py,[(h(!0),g(j,null,te(u.value,(_,k)=>(h(),g("div",{key:k,class:K(["media-card",d(_).displayClass.value,n.value===_.id?"selected":""]),style:Se(d(_).backgroundStyle.value),onMouseover:S=>d(_).hasPreview.value&&w(s).handleAudioHover(S),onMouseleave:S=>d(_).hasPreview.value&&w(s).handleAudioLeave(S),onClick:S=>{b(_.id),w(o).getTrackDetails(_,w(pe)(t.num),t.d.id),w(r).addToQueue(_)}},[l("div",my,[l("div",vy,[l("div",gy,M(_.artists.map(S=>S.name).join(", ")),1),l("div",yy,M(_.name),1)])]),l("audio",{preload:d(_).audioPreload.value,src:d(_).audioSrc.value},null,8,wy)],46,hy))),128))])],512))}},ky=ke(by,[["__scopeId","data-v-863f6c73"]]),_y={key:0,class:"artist-section"},Sy={class:"deeper-header"},Ay={class:"cover-overlay"},Ty={class:"artist-name"},$y=["preload","src"],Cy={class:"artist-info"},Py={class:"artist-title"},xy={class:"artist-stats"},Ry={class:"followers-count"},My={key:0,class:"genres-section"},Ey={class:"gnr-list"},Iy={key:0,class:"separator"},Ly={key:1,class:"separator"},Dy=["onClick"],zy={class:"artist-actions"},Oy=["href"],Uy={class:"follow-section"},Fy={class:"follow-checkbox"},qy={class:"info-section"},Vy={key:0,class:"section-header py-2"},Ny={key:1,class:"albums-grid"},Hy=["onMouseover","onMouseleave","onClick"],By={class:"track-overlay"},Ky={class:"track-name"},jy=["preload","src"],Gy={key:2,class:"section-header py-2"},Qy={key:3,class:"albums-grid"},Wy=["onClick","onMouseover","onMouseleave"],Xy={class:"track-overlay"},Yy={class:"track-name"},Jy=["preload","src"],Zy={key:4,class:"section-header py-2"},e5={key:5,class:"albums-grid"},t5=["onClick","onMouseover","onMouseleave"],s5={class:"track-overlay"},r5={class:"track-name"},o5=["preload","src"],n5={key:6,class:"section-header py-2"},i5={key:7,class:"albums-grid"},l5=["onClick","onMouseover","onMouseleave"],a5={class:"track-overlay"},c5={class:"track-name"},u5=["preload","src"],d5={key:8,class:"section-header py-2"},f5={key:9,class:"albums-grid"},p5=["onClick","onMouseover","onMouseleave"],h5={class:"track-overlay"},m5={class:"track-name"},v5={key:0,class:"playlist-info"},g5={class:"playlist-owner"},y5=["preload","src"],w5={key:10,class:"section-header py-2"},b5={key:11,class:"albums-grid"},k5=["onMouseover","onMouseleave","onClick"],_5={class:"track-overlay"},S5={class:"track-name"},A5=["preload","src"],T5={__name:"TrackArtist",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=U(),i=U(null),a=Le(),c=E(()=>e.d.data&&Array.isArray(e.d.data)&&e.d.data.find(A=>A.type==="trackartist")||e.d),u=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(A=>A.type==="top_tracks");return(S==null?void 0:S.tracks)||[]}return[]}),d=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(A=>A.type==="albums");return(S==null?void 0:S.items)||[]}return[]}),f=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(A=>A.type==="single");return(S==null?void 0:S.items)||[]}return[]}),y=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(A=>A.type==="appears_on");return(S==null?void 0:S.items)||[]}return[]}),b=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(A=>A.type==="playlists");return(S==null?void 0:S.items)||[]}return[]}),v=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(A=>A.type==="related-artists");return(S==null?void 0:S.artists)||[]}return[]});function m(S){return ut(E(()=>S))}function p(S){n.value=S}async function _(S){try{console.log("Following/unfollowing artist:",S.name),await o.followArtist(S.id,!S.followed),S.followed=!S.followed}catch(A){console.error("Failed to follow/unfollow artist:",A)}}async function k(S){try{console.log("Getting the sound of:",S.name),await o.getGenreRecommendations(S.name,pe(S.num))}catch(A){console.error("Failed to get genre recommendations:",A)}}return Ce(async()=>{var A,x;await ot(),console.log("TrackArtist component mounted with props:",e.d);const S=`trackartist_${((A=e.d)==null?void 0:A.id)||"default"}${(x=e.d)!=null&&x.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering TrackArtist component with key:",S),a.registerComponent(S,i),console.log("Showing TrackArtist component after registration:",S),a.showComponent(S)}),(S,A)=>{var x,P,I;return h(),g("div",{class:"modern-track-artist",ref_key:"componentRef",ref:i},[c.value?(h(),g("div",_y,[l("div",Sy,[l("div",{class:K(["artist-cover",m(c.value).displayClass.value]),style:Se(m(c.value).backgroundStyle.value),onMouseover:A[0]||(A[0]=T=>m(c.value).hasPreview.value&&w(s).handleAudioHover(T)),onMouseleave:A[1]||(A[1]=T=>m(c.value).hasPreview.value&&w(s).handleAudioLeave(T))},[l("div",Ay,[l("div",Ty,M(c.value.name),1)]),l("audio",{preload:m(c.value).audioPreload.value,src:m(c.value).audioSrc.value},null,8,$y)],38),l("div",Cy,[l("h2",Py,M(c.value.name),1),l("div",xy,[l("span",Ry,M((P=(x=c.value.followers)==null?void 0:x.total)==null?void 0:P.toLocaleString())+" followers",1)]),c.value.genres&&c.value.genres.length>0?(h(),g("div",My,[l("div",Ey,[(h(!0),g(j,null,te(c.value.genres,(T,z)=>(h(),g(j,{key:"genre-"+z},[c.value.genres.length>1&&c.value.genres.length-1===z?(h(),g("span",Iy,"&")):R("",!0),c.value.genres.length>=2&&c.value.genres.length-1!==z&&z!==0?(h(),g("span",Ly,",")):R("",!0),l("button",{class:"genre-tag",onClick:L=>k({name:T,num:t.num,sib:"trackartist",child:!1})},M(T),9,Dy)],64))),128))])])):R("",!0)]),l("div",zy,[l("button",{class:"action-button",onClick:A[2]||(A[2]=T=>w(o).getSeedArtistRecommendations(c.value,w(pe)(t.num),t.d.id))},A[7]||(A[7]=[l("span",{class:"btn-icon"},"",-1),Ae(" Recommended artists songs based on this ",-1)])),l("a",{class:K(w(rt)()+"-link"),href:(I=c.value.external_urls)==null?void 0:I.spotify,target:"_blank",rel:"noopener"},[A[8]||(A[8]=l("span",{class:"link-icon"},"",-1)),Ae(" Open in "+M(w(rt)().charAt(0).toUpperCase()+w(rt)().slice(1)),1)],10,Oy),l("div",Uy,[A[10]||(A[10]=l("span",{class:"follow-label"},"Follow",-1)),l("label",Fy,[c.value.followed?we((h(),g("input",{key:0,type:"checkbox",onClickOnce:A[3]||(A[3]=T=>_(c.value)),checked:"","onUpdate:modelValue":A[4]||(A[4]=T=>c.value.followed=T)},null,544)),[[Kt,c.value.followed]]):we((h(),g("input",{key:1,type:"checkbox",onClickOnce:A[5]||(A[5]=T=>_(c.value)),"onUpdate:modelValue":A[6]||(A[6]=T=>c.value.followed=T)},null,544)),[[Kt,c.value.followed]]),A[9]||(A[9]=l("span",{class:"checkmark"},null,-1))])])])])])):R("",!0),l("div",qy,[u.value.length>0?(h(),g("div",Vy,A[11]||(A[11]=[l("h3",{class:"section-title"},"Top tracks",-1)]))):R("",!0),u.value.length>0?(h(),g("div",Ny,[(h(!0),g(j,null,te(u.value,(T,z)=>(h(),g("div",{key:z,class:K(["track-card",m(T).displayClass.value,n.value===T.id?"selected":""]),style:Se(m(T).backgroundStyle.value),onMouseover:L=>m(T).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(T).hasPreview.value&&w(s).handleAudioLeave(L),onClick:L=>{p(T.id),w(o).getTrackDetails(T,w(pe)(t.num),t.d.id),w(r).addToQueue(T)}},[l("div",By,[l("div",Ky,M(T.name),1)]),l("audio",{preload:m(T).audioPreload.value,src:m(T).audioSrc.value},null,8,jy)],46,Hy))),128))])):R("",!0),d.value.length>0?(h(),g("div",Gy,A[12]||(A[12]=[l("h3",{class:"section-title"},"Albums",-1)]))):R("",!0),d.value.length>0?(h(),g("div",Qy,[(h(!0),g(j,null,te(d.value,(T,z)=>(h(),g("div",{key:z},[l("div",{class:K(["track-card",m(T).displayClass.value,n.value===T.id?"selected":""]),style:Se(m(T).backgroundStyle.value),onClick:L=>{p(T.id),w(o).getAlbumDetails(T,w(pe)(t.num),t.d.id)},onMouseover:L=>m(T).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(T).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",Xy,[l("div",Yy,M(T.name),1)]),l("audio",{preload:m(T).audioPreload.value,src:m(T).audioSrc.value},null,8,Jy)],46,Wy)]))),128))])):R("",!0),f.value.length>0?(h(),g("div",Zy,A[13]||(A[13]=[l("h3",{class:"section-title"},"Singles",-1)]))):R("",!0),f.value.length>0?(h(),g("div",e5,[(h(!0),g(j,null,te(f.value,(T,z)=>(h(),g("div",{key:z},[l("div",{class:K(["track-card",m(T).displayClass.value,n.value===T.id?"selected":""]),style:Se(m(T).backgroundStyle.value),onClick:L=>{p(T.id),w(o).getAlbumDetails(T,w(pe)(t.num),t.d.id)},onMouseover:L=>m(T).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(T).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",s5,[l("div",r5,M(T.name),1)]),l("audio",{preload:m(T).audioPreload.value,src:m(T).audioSrc.value},null,8,o5)],46,t5)]))),128))])):R("",!0),y.value.length>0?(h(),g("div",n5,A[14]||(A[14]=[l("h3",{class:"section-title"},"Appears on",-1)]))):R("",!0),y.value.length>0?(h(),g("div",i5,[(h(!0),g(j,null,te(y.value,(T,z)=>(h(),g("div",{key:z},[l("div",{class:K(["track-card",m(T).displayClass.value,n.value===T.id?"selected":""]),style:Se(m(T).backgroundStyle.value),onClick:L=>{p(T.id),w(o).getAlbumDetails(T,w(pe)(t.num),t.d.id)},onMouseover:L=>m(T).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(T).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",a5,[l("div",c5,M(T.name),1)]),l("audio",{preload:m(T).audioPreload.value,src:m(T).audioSrc.value},null,8,u5)],46,l5)]))),128))])):R("",!0),b.value.length>0?(h(),g("div",d5,A[15]||(A[15]=[l("h3",{class:"section-title"},"Featured in Playlists",-1)]))):R("",!0),b.value.length>0?(h(),g("div",f5,[(h(!0),g(j,null,te(b.value,(T,z)=>(h(),g("div",{key:z},[l("div",{class:K(["track-card",m(T).displayClass.value,n.value===T.id?"selected":""]),style:Se(m(T).backgroundStyle.value),onClick:L=>{p(T.id),w(o).getPlaylistDetails(T,w(pe)(t.num),t.d.id)},onMouseover:L=>m(T).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(T).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",h5,[l("div",m5,M(T.name),1),T.owner?(h(),g("div",v5,[l("span",g5,"by "+M(T.owner.display_name),1)])):R("",!0)]),l("audio",{preload:m(T).audioPreload.value,src:m(T).audioSrc.value},null,8,y5)],46,p5)]))),128))])):R("",!0),v.value.length>0?(h(),g("div",w5,A[16]||(A[16]=[l("h3",{class:"section-title"},"Related Artists",-1)]))):R("",!0),v.value.length>0?(h(),g("div",b5,[(h(!0),g(j,null,te(v.value,(T,z)=>(h(),g("div",{key:z,class:K(["track-card",m(T).displayClass.value,n.value===T.id?"selected":""]),style:Se(m(T).backgroundStyle.value),onMouseover:L=>m(T).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(T).hasPreview.value&&w(s).handleAudioLeave(L),onClick:L=>{p(T.id),w(o).getArtistDetails(T,w(pe)(t.num),t.d.id)}},[l("div",_5,[l("div",S5,M(T.name),1)]),l("audio",{preload:m(T).audioPreload.value,src:m(T).audioSrc.value},null,8,A5)],46,k5))),128))])):R("",!0)])],512)}}},$5={class:"track-overlay"},C5={class:"track-info"},P5={class:"track-name"},x5=["preload","src"],Zr={__name:"TrackCover",props:["d","cover"],setup(t){const e=t,s=ve(),{displayClass:r,backgroundStyle:o,audioPreload:n,audioSrc:i,hasPreview:a}=ut(E(()=>e.d),E(()=>e.cover));return(c,u)=>(h(),g("div",{class:K(["artist-cover",w(r)]),style:Se(w(o)),onMouseover:u[0]||(u[0]=d=>w(a)&&w(s).handleAudioHover(d)),onMouseleave:u[1]||(u[1]=d=>w(a)&&w(s).handleAudioLeave(d))},[l("div",$5,[l("div",C5,[l("div",P5,M(t.d.name),1)])]),l("audio",{preload:w(n),src:w(i)},null,8,x5)],38))}},R5={key:1,class:"deeper-header p-4"},M5={class:"track-info"},E5={class:"track-title"},I5={class:"artists-section"},L5={class:"artists-list"},D5={key:0,class:"separator"},z5={key:1,class:"separator"},O5={class:"artist-item"},U5=["onClick"],F5=["href"],q5={__name:"DeeperTracks",props:["d","num"],setup(t){const e=t,s=he();ve(),De();const r=me(),{currentServiceType:o}=Yt(s);E(()=>o.value!=="deezer"),U();const n=U(null),i=U(null),a=U(!1),{isLoading:c,loadingMessage:u,withLoading:d}=ea({message:"Loading track details..."}),f=Le(),y=async()=>{try{r.setGlobalLoading(!0);const v=pe(e.num);await r.getSeedTrackRecommendations(e.d,v,e.d.id)}catch(v){console.error("Failed to get recommendations:",v),alert("Failed to load recommendations. Please try again.")}finally{r.setGlobalLoading(!1)}};function b(){console.log(e.d),e.d.album&&e.d.album.images?n.value=e.d.album.images[0]:e.d.images?n.value=e.d.images[0]:e.d.track&&e.d.track.album&&e.d.track.album.images&&e.d.track.album.images[0]&&(n.value=e.d.track.album.images[0]),console.log(n.value)}return Ce(async()=>{await d(async()=>{var m,p;b(),await ot();const v=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering component with ref:",i.value),console.log("Ref element:",(m=i.value)==null?void 0:m.tagName,(p=i.value)==null?void 0:p.className),console.log("Registering with key:",v),f.registerComponent(v,i),console.log("Showing component after registration:",v),f.showComponent(v)},{message:"Initializing track view..."})}),a.value=window.innerWidth<768,window.addEventListener("resize",()=>{a.value=window.innerWidth<768}),(v,m)=>{var p;return h(),g("div",{class:"modern-track-card",ref_key:"componentRef",ref:i},[w(c)?(h(),Z(sa,{key:0,message:w(u),variant:"default"},null,8,["message"])):(h(),g("div",R5,[W(Zr,{d:t.d,cover:n.value},null,8,["d","cover"]),l("div",M5,[l("h3",E5,M(t.d.name),1),l("div",I5,[m[0]||(m[0]=l("span",{class:"artists-label"},"By",-1)),l("div",L5,[(h(!0),g(j,null,te(t.d.artists,(_,k)=>(h(),g(j,{key:k},[t.d.artists.length>1&&t.d.artists.length-1===k?(h(),g("div",D5,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==k&&k!==0?(h(),g("div",z5,",")):R("",!0),l("div",O5,[l("button",{class:"artist-link",onClick:S=>w(r).getArtistDetails(_,w(pe)(t.num),t.d.id)},M(_.name),9,U5)])],64))),128))])])]),l("div",{class:K(["artist-actions",{"grid-column-2":a.value}])},[l("button",{class:"action-button",onClick:y},m[1]||(m[1]=[l("span",{class:"btn-icon"},"",-1),Ae(" Recommended songs based on this ",-1)])),l("a",{class:K(w(rt)()+"-link"),href:(p=t.d.external_urls)==null?void 0:p.spotify,target:"_blank",rel:"noopener"},[m[2]||(m[2]=l("span",{class:"link-icon"},"",-1)),Ae(" Open in "+M(w(rt)().charAt(0).toUpperCase()+w(rt)().slice(1)),1)],10,F5)],2)]))],512)}}},V5=ke(q5,[["__scopeId","data-v-c28dab80"]]),N5={class:"deeper-header"},H5={class:"track-info"},B5={class:"track-title"},K5={class:"artists-section"},j5={class:"artists-list"},G5={key:0,class:"separator"},Q5={key:1,class:"separator"},W5={class:"artist-item"},X5=["onClick"],Y5={class:"release-date"},J5={class:"tracks-section"},Z5={class:"tracks-container"},ew=["onMouseover","onMouseleave","onClick"],tw={class:"album-overlay"},sw={class:"album-name"},rw=["preload","src"],ow={__name:"DeeperAlbum",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=U(),i=U([]),a=U(null),c=Le();function u(y){var b;return ut(E(()=>y),(b=e.d.images)==null?void 0:b[0])}function d(y){n.value=y}function f(){e.d.tracks&&e.d.tracks.items?i.value=e.d.tracks.items:e.d.tracks?i.value=e.d.tracks:e.d.items&&(i.value=e.d.items)}return Ce(async()=>{f(),await ot();const y=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(y,a),console.log("Showing DeeperAlbum component after registration:",y),c.showComponent(y)}),(y,b)=>(h(),g("div",{class:"modern-album-card",ref_key:"componentRef",ref:a},[l("div",N5,[W(Zr,{d:t.d,cover:t.d.images[0]},null,8,["d","cover"]),l("div",H5,[l("h3",B5,M(t.d.name),1),l("div",K5,[b[0]||(b[0]=l("span",{class:"artists-label"},"By",-1)),l("div",j5,[(h(!0),g(j,null,te(t.d.artists,(v,m)=>(h(),g(j,{key:m},[t.d.artists.length>1&&t.d.artists.length-1===m?(h(),g("div",G5,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==m&&m!==0?(h(),g("div",Q5,",")):R("",!0),l("div",W5,[l("button",{class:"artist-link",onClick:p=>w(o).getArtistDetails(v,w(pe)(t.num),t.d.id)},M(v.name),9,X5)])],64))),128))])]),l("div",Y5,[b[1]||(b[1]=l("span",{class:"meta-icon"},"",-1)),l("span",null,M(t.d.release_date),1)]),b[2]||(b[2]=l("div",{class:"album-actions"},null,-1))])]),l("div",J5,[b[3]||(b[3]=l("div",{class:"tracks-header"},[l("span",{class:"tracks-icon"},""),l("h3",{class:"tracks-title"},"Tracks")],-1)),l("div",Z5,[(h(!0),g(j,null,te(i.value,(v,m)=>(h(),g("div",{key:m,class:K(["media-card",u(v).displayClass.value,n.value===v.id?"selected":""]),style:Se(u(v).backgroundStyle.value),onMouseover:p=>u(v).hasPreview.value&&w(s).handleAudioHover(p),onMouseleave:p=>u(v).hasPreview.value&&w(s).handleAudioLeave(p),onClick:p=>{d(v.id),w(o).getTrackDetails(v,w(pe)(t.num),t.d.id),w(r).addToQueue(v)}},[l("div",tw,[l("div",sw,M(v.name),1)]),l("audio",{preload:u(v).audioPreload.value,src:u(v).audioSrc.value},null,8,rw)],46,ew))),128))])])],512))}},nw=ke(ow,[["__scopeId","data-v-917516fd"]]),iw={class:"seed-header"},lw={class:"seed-title"},aw={class:"title-text"},cw={class:"seed-actions"},uw={class:"tracks-container"},dw=["onMouseover","onMouseleave","onClick"],fw={class:"track-overlay"},pw={class:"track-info"},hw={class:"track-artists"},mw={class:"track-name"},vw=["preload","src"],gw={__name:"SeedArtists",props:["d","num"],setup(t){const e=t;he();const s=ve(),r=De(),o=me(),n=U(),i=U(""),a=U(null),c=Le(),u=E(()=>{const b=e.d.tracks||[];return i.value?[...b].sort((v,m)=>{switch(i.value){case"track":return v.name.localeCompare(m.name);case"album":return v.album.name.localeCompare(m.album.name);case"artist":return v.artists[0].name.localeCompare(m.artists[0].name);case"popularity":return m.popularity-v.popularity;case"release_date":return new Date(m.album.release_date)-new Date(v.album.release_date);case"duration":return v.duration_ms-m.duration_ms;default:return 0}}):b});function d(b){return ut(E(()=>b))}function f(b){n.value=b}async function y(){try{console.log("Refreshing seed artists for:",e.d.id),await o.getSeedArtistRecommendations(e.d,pe(e.num),e.d.parentKey)}catch(b){console.error("Failed to refresh seed artists:",b)}}return Ce(async()=>{await ot();const b=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(b,a),console.log("Showing SeedArtists component after registration:",b),c.showComponent(b)}),(b,v)=>(h(),g("div",{class:"modern-seed-artists",ref_key:"componentRef",ref:a},[l("div",iw,[l("div",lw,[v[1]||(v[1]=l("span",{class:"title-icon"},"",-1)),l("span",aw,"Recommended songs based on "+M(t.d.name),1)]),l("div",cw,[l("button",{class:"refresh-button",onClick:y},v[2]||(v[2]=[l("img",{class:"refresh-icon",src:Jr,alt:"Refresh"},null,-1)])),W(is,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=m=>i.value=m)},null,8,["modelValue"])])]),l("div",uw,[(h(!0),g(j,null,te(u.value,(m,p)=>(h(),g("div",{key:p,class:K(["media-card",d(m).displayClass.value,n.value===m.id?"selected":""]),style:Se(d(m).backgroundStyle.value),onMouseover:_=>d(m).hasPreview.value&&w(s).handleAudioHover(_),onMouseleave:_=>d(m).hasPreview.value&&w(s).handleAudioLeave(_),onClick:_=>{f(m.id),w(o).getTrackDetails(m,w(pe)(t.num),t.d.id),w(r).addToQueue(m)}},[l("div",fw,[l("div",pw,[l("div",hw,M(m.artists.map(_=>_.name).join(", ")),1),l("div",mw,M(m.name),1)])]),l("audio",{preload:d(m).audioPreload.value,src:d(m).audioSrc.value},null,8,vw)],46,dw))),128))])],512))}},yw=ke(gw,[["__scopeId","data-v-3ac9f0d6"]]),ww={class:"track-overlay"},bw={class:"track-info"},kw={class:"track-artists"},_w={class:"track-name"},Sw=["preload","src"],Aw={__name:"PlaylistTrackItem",props:{track:{type:Object,required:!0},trackItem:{type:Object,required:!0},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=p=>Ps.formatArtistNamesSimple(p),{hasPreview:n,hasImage:i,displayClass:a,backgroundStyle:c,audioPreload:u,audioSrc:d}=ut(E(()=>s.track)),f=p=>{r("click",s.trackItem,p)},y=p=>{r("hover",p)},b=p=>{r("leave",p)},v=E(()=>n.value&&i.value?!0:i.value&&!n.value?s.unplayableTracks:n.value&&!i.value?!0:s.unplayableTracks),m=E(()=>{const p="media-card",_=s.selected?"selected":"";return`${p} ${a.value} ${_}`.trim()});return(p,_)=>v.value?(h(),g("div",{key:0,tabindex:"0",class:K(m.value),style:Se(w(c)),onClick:Xt(f,["stop"]),onMouseover:y,onMouseleave:b},[l("div",ww,[l("div",bw,[l("div",kw,M(o(t.track.artists)),1),l("div",_w,M(t.track.name),1)])]),l("audio",{preload:w(u),src:w(d)},null,8,Sw)],38)):R("",!0)}},Tw={key:1},$w=["src"],Cw={class:"playlist-info"},Pw={class:"playlist-title-section"},xw={class:"playlist-title"},Rw=["innerHTML"],Mw={key:0,class:"playlist-meta"},Ew={key:1,class:"playlist-meta"},Iw={key:2,class:"playlist-meta"},Lw={key:3,class:"follow-section"},Dw={class:"follow-checkbox"},zw=["href"],Ow={class:"tracks-container"},Uw={__name:"DeeperPlaylist",props:["d","num"],setup(t){var A;const e=t,s=he(),r=ve(),o=De(),n=me(),{currentServiceType:i}=Yt(s),a=U(),c=U(""),u=U(null),d=Le(),f=E(()=>{var P;const x=((P=e.d.tracks)==null?void 0:P.items)||e.d.tracks||[];return console.log("DeeperPlaylist items:",x,"props.d:",e.d),c.value?[...x].sort((I,T)=>{const z=I.track||I,L=T.track||T;switch(c.value){case"track":return z.name.localeCompare(L.name);case"album":return z.album.name.localeCompare(L.album.name);case"artist":return z.artists[0].name.localeCompare(L.artists[0].name);case"popularity":return L.popularity-z.popularity;case"release_date":return new Date(L.album.release_date)-new Date(z.album.release_date);case"duration":return z.duration_ms-L.duration_ms;default:return 0}}):x}),{image:y,hasImage:b}=ut(E(()=>e.d),(A=e.images)==null?void 0:A[0]);function v(x){a.value=x}const m=x=>{emit("refresh",x)};function p(x,P){const I=x.track||x;v(I.id),n.getTrackDetails(x,pe(e.num),e.d.id),o.addToQueue(I)}function _(){e.d.owner&&e.d.owner.id&&n.getUserPlaylists(e.d.owner,pe(e.num),e.d.id)}Ce(()=>{const x=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;d.registerComponent(x,u),u.value&&(u.value.style.display="none")});const k=x=>({[ie.SPOTIFY]:"/img/spotify-icon.svg",[ie.DEEZER]:"/img/deezer-icon.svg",[ie.TIDAL]:"/img/tidal-icon.svg"})[x]||"/img/default-service-icon.svg",S=E(()=>k(i.value));return(x,P)=>{var I;return h(),g(j,null,[l("div",{class:"deeper-header",ref_key:"componentRef",ref:u},[l("div",null,[w(b)?(h(),Z(Zr,{key:0,d:t.d,cover:w(y)},null,8,["d","cover"])):(h(),g("div",Tw,[l("img",{src:S.value},null,8,$w)]))]),l("div",Cw,[l("div",Pw,[l("h2",xw,M(t.d.name),1),l("button",{class:"refresh-button",onClick:m},P[4]||(P[4]=[l("img",{class:"refresh-icon",src:Jr,alt:"Refresh"},null,-1)]))]),l("div",{class:"playlist-description",innerHTML:t.d.description},null,8,Rw),t.d.owner?(h(),g("div",Mw,[l("span",{class:"playlist-owner clickable-owner",onClick:_}," By "+M(t.d.owner.display_name),1)])):R("",!0),t.d.tracks&&t.d.tracks.total?(h(),g("div",Ew,M(t.d.tracks.total)+" tracks ",1)):R("",!0),t.d.public!==void 0?(h(),g("div",Iw,M(t.d.public?"Public":"Private"),1)):R("",!0),w(le).currentServiceType!=="deezer"?(h(),g("div",Lw,[P[6]||(P[6]=l("span",{class:"follow-label"},"Follow",-1)),l("label",Dw,[we(l("input",{type:"checkbox","onUpdate:modelValue":P[0]||(P[0]=T=>t.d.followed=T),disabled:""},null,512),[[Kt,t.d.followed]]),P[5]||(P[5]=l("span",{class:"checkmark"},null,-1))])])):R("",!0)]),l("div",null,[l("a",{class:K(w(rt)()+"-link"),href:(I=t.d.external_urls)==null?void 0:I.spotify,target:"_blank",rel:"noopener"},[P[7]||(P[7]=l("span",{class:"link-icon"},"",-1)),Ae(" Open in "+M(w(rt)().charAt(0).toUpperCase()+w(rt)().slice(1)),1)],10,zw),W(is,{modelValue:c.value,"onUpdate:modelValue":P[1]||(P[1]=T=>c.value=T),full_width:!0},null,8,["modelValue"])])],512),l("div",Ow,[(h(!0),g(j,null,te(f.value,(T,z)=>(h(),g(j,{key:z},[T.track||T.id?(h(),Z(Aw,{key:0,track:T.track||T,"track-item":T,onClick:p,onHover:P[2]||(P[2]=L=>w(r).handleAudioHover(L)),onLeave:P[3]||(P[3]=L=>w(r).handleAudioLeave(L))},null,8,["track","track-item"])):R("",!0)],64))),128))])],64)}}},fi=ke(Uw,[["__scopeId","data-v-e293cec1"]]),Fw={class:"track-overlay"},qw={class:"track-info"},Vw={class:"track-name"},Nw={key:0,class:"track-meta"},Hw=["preload","src"],Bw={__name:"PlaylistPreview",props:{playlist:{type:Object,required:!0}},emits:["click"],setup(t,{emit:e}){const s=t,r=e,o=ve(),n=U(null),{displayClass:i,backgroundStyle:a,audioPreload:c,audioSrc:u,hasPreview:d}=ut(E(()=>s.playlist),E(()=>s.playlist.images[0])),f=()=>{r("click",s.playlist)},y=v=>{d&&n.value&&o.handleAudioHover(v)},b=v=>{d&&n.value&&o.handleAudioLeave(v)};return(v,m)=>(h(),g("div",{class:K(["media-card",w(i)]),style:Se(w(a)),onClick:f,onMouseover:y,onMouseleave:b},[l("div",Fw,[l("div",qw,[l("div",Vw,M(t.playlist.name),1),t.playlist.totalTracks?(h(),g("div",Nw,M(t.playlist.totalTracks)+" tracks ",1)):R("",!0)])]),l("audio",{preload:w(c),src:w(u),ref_key:"audioElement",ref:n},null,8,Hw)],38))}},Kw={class:"deeper-header"},jw={class:"track-info"},Gw={class:"track-title"},Qw={class:"release-date"},Ww={class:"releases-container grid"},Xw={key:0,class:"empty-state"},Yw={__name:"UserPlaylists",props:["d","num"],setup(t){const e=t,s=he();ve(),De();const r=me(),{currentServiceType:o}=Yt(s),n=U(),i=U(null),{displayClass:a}=ut(E(()=>e.d)),c=Le();function u(f){n.value=f}function d(f){u(f.id),r.getPlaylistDetails(f,pe(e.num),e.d.id)}return E(()=>{const f="media-card",y=e.selected?"selected":"";return`${f} ${a.value} ${y}`.trim()}),Ce(()=>{const f=`user-playlists_${e.d.owner.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering UserPlaylists component with key:",f),c.registerComponent(f,i),console.log("Showing UserPlaylists component after registration:",f),c.showComponent(f)}),(f,y)=>(h(),g("div",{class:"modern-track-card",ref_key:"componentRef",ref:i},[l("div",Kw,[W(Zr,{d:t.d,cover:t.d.owner.picture_medium},null,8,["d","cover"]),l("div",jw,[l("h3",Gw,M(t.d.name),1),l("div",Qw,M(t.d.playlists.length)+" playlists ",1),y[0]||(y[0]=l("div",{class:"album-actions"},null,-1))])]),l("div",Ww,[(h(!0),g(j,null,te(t.d.playlists,(b,v)=>(h(),Z(Bw,{key:v,playlist:b,onClick:d},null,8,["playlist"]))),128))]),t.d.playlists.length===0?(h(),g("div",Xw,y[1]||(y[1]=[l("div",{class:"empty-icon"},"",-1),l("h3",null,"No playlists found",-1),l("p",null,"This user doesn't have any public playlists.",-1)]))):R("",!0)],512))}},Jw=ke(Yw,[["__scopeId","data-v-78d51735"]]),Zw={class:"modern-recommendations"},e2={class:"rec_track"},t2={__name:"RecTrack",props:["num"],setup(t){const e=t,s=me();function r(){const o=pe(e.num),n=s.getSectionData(o);console.log("RecTrack - Num:",e.num,"Section name:",o,"Data length:",n.length,"Data:",n),s.setCurrentSection(o);const i=n.map(a=>a.type);return console.log("RecTrack: Will render components of types:",i),n}return(o,n)=>(h(),g("div",Zw,[l("div",e2,[(h(!0),g(j,null,te(r(),(i,a)=>(h(),g(j,{key:`${i.type}_${i.id}${i.parentKey?`__p:${i.parentKey}__`:""}`},[i.type==="seed_tracks"?(h(),Z(ky,{key:0,d:i,num:t.num},null,8,["d","num"])):i.type==="trackartist"?(h(),Z(T5,{key:1,d:i,num:t.num},null,8,["d","num"])):i.type==="deepertracks"?(h(),Z(V5,{key:2,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperalbum"?(h(),Z(nw,{key:3,d:i,num:t.num},null,8,["d","num"])):i.type==="seed_artists"?(h(),Z(yw,{key:4,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperplaylist"?(h(),Z(fi,{key:5,d:i,num:t.num},null,8,["d","num"])):i.type==="user-playlists"?(h(),Z(Jw,{key:6,d:i,num:t.num},null,8,["d","num"])):i.type==="category-playlist"?(h(),Z(fi,{key:7,d:i,num:t.num},null,8,["d","num"])):R("",!0)],64))),128))])]))}},s2={},r2={style:{width:"100%"},id:"loader",class:"loading waitingForConnection"};function o2(t,e){return h(),g("div",r2,e[0]||(e[0]=[Ae("Loading",-1),l("span",null,".",-1),l("span",null,".",-1),l("span",null,".",-1)]))}const Ct=ke(s2,[["render",o2]]),n2={class:"current-service"},i2=["src","alt"],l2={class:"service-name"},a2={key:0,class:"service-dropdown"},c2={class:"service-list"},u2=["src","alt"],d2={class:"option-name"},f2={key:0,class:"current-badge"},p2={key:1,class:"coming-soon-badge"},h2={__name:"ServiceIndicator",emits:["openServiceSelector"],setup(t,{emit:e}){const s=e,r=he(),o=U(!1),n=U([]),i=U(ie.SPOTIFY),a=[ie.SPOTIFY,ie.DEEZER,ie.APPLE],c=E(()=>r.currentServiceName),u=E(()=>v(i.value));Ce(async()=>{await r.initializeServices(),n.value=r.availableServices,i.value=r.currentServiceType,document.addEventListener("click",d)}),Vt(()=>{document.removeEventListener("click",d)});const d=_=>{_.target.closest(".service-indicator")||(o.value=!1)},f=()=>{o.value=!o.value},y=()=>{o.value=!1},b=_=>a.includes(_),v=_=>({[ie.SPOTIFY]:"/img/spotify-icon.svg",[ie.DEEZER]:"/img/deezer-icon.svg",[ie.TIDAL]:"/img/tidal-icon.svg",[ie.APPLE]:"/img/apple-music-icon.svg"})[_]||"/img/default-service-icon.svg",m=()=>{o.value=!1,s("openServiceSelector")},p=_=>{_.target.src="/img/default-service-icon.svg"};return(_,k)=>(h(),g("div",{class:"service-indicator",onClick:f},[l("div",n2,[l("img",{src:u.value,alt:c.value,class:"service-logo",onError:p},null,40,i2),l("span",l2,M(c.value),1),l("i",{class:K(["dropdown-arrow",{open:o.value}])},"",2)]),o.value?(h(),g("div",a2,[l("div",{class:"dropdown-header"},[k[0]||(k[0]=l("h4",null,"Switch Music Service",-1)),l("button",{onClick:y,class:"close-btn"},"")]),l("div",c2,[(h(!0),g(j,null,te(n.value,S=>(h(),g("div",{key:S.type,class:K(["service-option",{active:S.type===i.value,disabled:!b(S.type)}])},[l("img",{src:v(S.type),alt:S.name,class:"option-icon",onError:p},null,40,u2),l("span",d2,M(S.name),1),S.type===i.value?(h(),g("span",f2,"Current")):b(S.type)?R("",!0):(h(),g("span",p2,"Soon"))],2))),128))]),l("div",{class:"dropdown-footer"},[l("button",{onClick:m,class:"manage-services-btn"}," Manage Services ")])])):R("",!0)]))}},m2=ke(h2,[["__scopeId","data-v-60ebb180"]]),v2={class:"modern-footer"},g2={class:"footer-container"},y2={class:"footer-content"},w2={class:"footer-section"},b2={class:"copyright"},k2={class:"service-section"},_2={__name:"Footer",emits:["openServiceSelector"],setup(t,{emit:e}){const s=e,r=new Date().getFullYear(),o=()=>{s("openServiceSelector")};return(n,i)=>(h(),g("footer",v2,[l("div",g2,[l("div",y2,[l("div",w2,[l("span",b2," 2021-"+M(w(r))+" Discover Mobily",1)]),i[0]||(i[0]=l("div",{class:"footer-section"},[l("div",{class:"footer-links"},[l("span",{class:"inspired-text"},"Inspired by"),l("a",{href:"https://discoverquickly.com/",class:"inspiration-link",target:"_blank",rel:"noopener"}," Discover Quickly ")])],-1)),l("div",k2,[W(m2,{onOpenServiceSelector:o})]),i[1]||(i[1]=l("div",{class:"footer-section"},[l("a",{href:"https://github.com/vitokorn/vue-quickly",class:"github-link",target:"_blank",rel:"noopener","aria-label":"View source code on GitHub"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",fill:"currentColor"},[l("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})])])],-1))])])]))}},S2=ke(_2,[["__scopeId","data-v-b6a6f5c7"]]),A2={class:"modern-tabs"},T2={class:"tabs-list"},$2=["id","onClick"],C2={class:"tab-content"},P2={class:"tabs-tab-icon"},x2={class:"tabs-tab-text"},R2={class:"tab-item search-tab",id:"srch"},M2={class:"search-container"},E2={__name:"ModernTabs",props:{selectedTab:{type:Number,required:!0}},emits:["tab-click","search"],setup(t,{emit:e}){const s=U(""),r=he(),{currentServiceType:o}=Yt(r),n=e,i=E(()=>[{id:"option1",value:1,icon:"",text:"Your Playlists"},{id:"option2",value:2,icon:"",text:"Top Artists"},{id:"option3",value:3,icon:"",text:"Top Tracks"},{id:"option4",value:4,icon:"",text:"Saved Albums"},{id:"option5",value:5,icon:"",text:"Saved Tracks"},{id:"option6",value:6,icon:"",text:"Followed Artists"},{id:"option7",value:7,icon:"",text:"New Releases"},{id:"option8",value:8,icon:"",text:`${o.value.charAt(0).toUpperCase()}${o.value.slice(1)} Playlists`},{id:"option9",value:9,icon:"",text:"Categories"},{id:"option11",value:11,icon:"",text:"Genres"}]),a=E(()=>{const d=i.value;return o.value==="deezer"?d.filter(f=>f.value!==2&&f.value!==3):d}),c=(d,f)=>{f.stopPropagation(),n("tab-click",d,f)},u=d=>{n("search",d)};return(d,f)=>(h(),g("nav",A2,[l("ul",T2,[(h(!0),g(j,null,te(a.value,y=>(h(),g("li",{key:y.id,id:y.id,class:K(["tab-item",{active:t.selectedTab===y.value}]),onClick:b=>c(y.value,b)},[l("div",C2,[l("span",P2,M(y.icon),1),l("span",x2,M(y.text),1)])],10,$2))),128))]),l("li",R2,[l("div",M2,[we(l("input",{type:"search",class:"modern-search","onUpdate:modelValue":f[0]||(f[0]=y=>s.value=y),onKeyup:u,placeholder:"Search music..."},null,544),[[Ss,s.value]]),f[1]||(f[1]=l("span",{class:"search-icon"},"",-1))])])]))}},I2=["disabled","title"],ds={__name:"RefreshButton",props:{onClick:{type:Function,required:!0},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,r=e,o=i=>{s.disabled||(r("click",i),s.onClick(i))},n=E(()=>{const i="refresh-button",a=`refresh-button-${s.size}`,c=s.disabled?"disabled":"";return`${i} ${a} ${c}`.trim()});return(i,a)=>(h(),g("button",{class:K(n.value),onClick:o,disabled:t.disabled,title:t.disabled?"Loading...":"Refresh"},a[0]||(a[0]=[l("img",{class:"refresh-icon",src:Jr,alt:"Refresh"},null,-1)]),10,I2))}},L2={class:"playlist-selector"},D2={class:"p-2 flex-between-center"},z2={class:"grid-2-1"},O2={class:"ps-2"},U2=["placeholder","title"],F2={class:"playlists grid-auto-columns py-2 my-2"},q2=["id","onClick"],go={__name:"PlaylistSelector",props:{playlists:{type:Array,default:()=>[]},selectedPlaylist:{type:String,default:""},placeholder:{type:String,default:"Please enter a search term.."},title:{type:String,default:"Type in a name"}},emits:["playlist-select","search"],setup(t,{emit:e}){const s=t,r=e,o=U(""),n=he(),i=E(()=>o.value?s.playlists.filter(u=>u.name.toLowerCase().includes(o.value.toLowerCase())):s.playlists),a=(u,d)=>{r("playlist-select",u,d)},c=u=>{o.value=u.target.value,r("search",u)};return(u,d)=>(h(),g("div",L2,[l("div",D2,[l("div",z2,[l("h4",null,M(t.title),1),l("div",O2,[W(ds,{"on-click":()=>w(n).fetchPlaylists(0)},null,8,["on-click"])])]),we(l("input",{class:"playlist-search py-2 me-2",type:"text","onUpdate:modelValue":d[0]||(d[0]=f=>o.value=f),onInput:c,placeholder:t.placeholder,title:t.title},null,40,U2),[[Ss,o.value]])]),l("div",F2,[(h(!0),g(j,null,te(i.value,f=>(h(),g("div",{key:f.id,id:f.id,onClick:y=>a(f,y),class:K(["hr-line-dashed flex-center p-3",t.selectedPlaylist===f.id?"active_tab":""])},M(f.name),11,q2))),128))])]))}},V2=["id"],N2={class:"search-result-text"},H2=["src"],B2=["id"],K2={class:"search-result-text"},j2=["id"],G2={class:"search-result-text"},Q2={__name:"SearchResultItem",props:{item:{type:Object,required:!0},type:{type:String,required:!0,validator:t=>["song","artist","album","playlist"].includes(t)},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=p=>Ps.formatArtistNamesSimple(p),n=p=>{r("click",s.item,p)},i=p=>{r("hover",p)},a=p=>{r("leave",p)},c=E(()=>s.type==="song"||s.type==="artist"?s.item.preview_url:!1),u=E(()=>s.type==="song"?s.item.album&&s.item.album.images&&s.item.album.images[0]:s.type==="artist"?s.item.images&&s.item.images[1]:s.type==="album"||s.type==="playlist"?s.item.images&&s.item.images[0]:!1),d=E(()=>s.type==="song"&&u.value?s.item.album.images[0].url:s.type==="artist"&&u.value?s.item.images[1].url:(s.type==="album"||s.type==="playlist")&&u.value?s.item.images[0].url:""),f=E(()=>s.type==="song"?`${o(s.item.artists)} - ${s.item.name}`:s.type==="artist"?s.item.name:s.type==="album"?`${o(s.item.artists)} - ${s.item.name}`:s.type==="playlist"?s.item.name:""),y=E(()=>`${s.type}${s.item.id}`),b=E(()=>{const p="search-result-item",_=s.selected?"search-result-item--selected":"",k=!c.value&&s.unplayableTracks?"search-result-item--disabled":"";return`${p} ${_} ${k}`.trim()}),v=E(()=>u.value?{"background-image":`url(${d.value})`}:{}),m=E(()=>c.value?s.item.preview_url:"");return E(()=>c.value?!0:u.value&&!c.value?s.unplayableTracks:!0),(p,_)=>c.value?(h(),g("div",{key:0,tabindex:"0",class:K(b.value),id:y.value,onClick:n},[l("div",{class:"search-result-content",onMouseenter:i,onMouseleave:a},[l("div",{class:"search-result-image",style:Se(v.value)},null,4),l("div",N2,M(f.value),1)],32),l("audio",{preload:"auto",src:m.value},null,8,H2)],10,V2)):u.value&&t.unplayableTracks?(h(),g("div",{key:1,tabindex:"0",class:K(b.value),id:y.value,onClick:n},[l("div",{class:"search-result-content",onMouseenter:i,onMouseleave:a},[l("div",{class:"search-result-image",style:Se([v.value,{opacity:"0.5"}])},null,4),l("div",K2,M(f.value),1)],32),_[0]||(_[0]=l("audio",{preload:"auto"},null,-1))],10,B2)):(h(),g("div",{key:2,tabindex:"0",class:K(b.value),id:y.value,onClick:n},[l("div",{class:"search-result-content",onMouseenter:i,onMouseleave:a},[_[1]||(_[1]=l("div",{class:"search-result-image search-result-image--placeholder"},null,-1)),l("div",G2,M(f.value),1)],32)],10,j2))}},W2={class:"search-category"},X2={class:"search-category-title"},Y2={class:"search-category-items"},fr={__name:"SearchCategory",props:{title:{type:String,required:!0},items:{type:Array,required:!0},type:{type:String,required:!0,validator:t=>["song","artist","album","playlist"].includes(t)},selectedItem:{type:String,default:""},unplayableTracks:{type:Boolean,default:!1}},emits:["item-click","item-hover","item-leave"],setup(t,{emit:e}){const s=e,r=(i,a)=>{s("item-click",i,a)},o=i=>{s("item-hover",i)},n=i=>{s("item-leave",i)};return(i,a)=>(h(),g("div",W2,[l("h3",X2,M(t.title),1),l("div",Y2,[(h(!0),g(j,null,te(t.items,(c,u)=>(h(),g("div",{key:u,class:"search-item-wrapper"},[W(Q2,{item:c,type:t.type,selected:t.selectedItem===`${t.type}${c.id}`,"unplayable-tracks":t.unplayableTracks,onClick:r,onHover:o,onLeave:n},null,8,["item","type","selected","unplayable-tracks"])]))),128))])]))}},J2={__name:"WelcomeModal",props:{isVisible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const s=e,r=()=>{s("close")},o=()=>{s("close")};return(n,i)=>t.isVisible?(h(),g("div",{key:0,class:"welcome-modal-overlay",onClick:o},[l("div",{class:"welcome-modal",onClick:i[0]||(i[0]=Xt(()=>{},["stop"]))},[i[1]||(i[1]=Xe('<div class="modal-header" data-v-92b59fe7><h1 class="modal-title" data-v-92b59fe7>Welcome back!</h1><p class="modal-subtitle" data-v-92b59fe7>Just a reminder... this website plays (lots of) music.</p></div><div class="interactive-instructions" data-v-92b59fe7><div class="instruction-column" data-v-92b59fe7><div class="instruction-icon" data-v-92b59fe7><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-92b59fe7><path d="M3 3L21 12L3 21V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path></svg></div><div class="instruction-text" data-v-92b59fe7><span class="instruction-label" data-v-92b59fe7>Hover</span><span class="instruction-description" data-v-92b59fe7>to listen</span></div></div><div class="instruction-column" data-v-92b59fe7><div class="instruction-icon" data-v-92b59fe7><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-92b59fe7><path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path><path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" data-v-92b59fe7></path></svg></div><div class="instruction-text" data-v-92b59fe7><span class="instruction-label" data-v-92b59fe7>Click</span><span class="instruction-description" data-v-92b59fe7>to dig deeper</span></div></div><div class="instruction-column" data-v-92b59fe7><div class="instruction-icon" data-v-92b59fe7><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-92b59fe7><path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path><path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path></svg></div><div class="instruction-text" data-v-92b59fe7><span class="instruction-label" data-v-92b59fe7>Save</span><span class="instruction-description" data-v-92b59fe7>to build your collection</span></div></div></div><div class="intro-text" data-v-92b59fe7><p class="intro-paragraph" data-v-92b59fe7> Start with <strong data-v-92b59fe7>something you know</strong>, like your top tracks or favorite playlist. Or a <strong data-v-92b59fe7>Spotify recommendation</strong>, like Discover Weekly or Release Radar. Or a <strong data-v-92b59fe7>completely random</strong> genre or artist... whatever strikes your fancy. </p><p class="intro-paragraph highlight" data-v-92b59fe7> Then follow your ears to find new music you love. </p></div>',3)),l("div",{class:"cta-section"},[l("button",{class:"cta-button",onClick:r}," JUMP IN ")])])])):R("",!0)}},Z2=ke(J2,[["__scopeId","data-v-92b59fe7"]]),eb="/img/deezer-icon.svg",tb={class:"form-section"},sb={class:"input-group"},rb=["disabled"],ob={key:0,class:"error-message"},nb={key:1,class:"success-message"},ib={class:"action-buttons"},lb=["disabled"],ab={key:0,class:"loading-spinner"},cb=["disabled"],ub={__name:"DeezerWelcomeModal",props:{isVisible:{type:Boolean,default:!1}},emits:["close","user-saved"],setup(t,{emit:e}){const s=e,r=U(""),o=U(!1),n=U(""),i=U(""),a=async()=>{if(!r.value.trim()){n.value="Please enter your Deezer User ID";return}o.value=!0,n.value="",i.value="";try{const f=await mt.createService("deezer").getUser(r.value.trim());document.cookie=`deezer-user-id=${r.value.trim()}`,localStorage.setItem("deezer-user-id",r.value.trim()),localStorage.setItem("deezer-username",f.display_name),localStorage.setItem("deezer-user-data",JSON.stringify(f)),i.value=`Welcome, ${f.display_name}!`,s("user-saved",f),setTimeout(()=>{s("close")},1500)}catch(d){console.error("Error fetching Deezer user data:",d),n.value="Invalid User ID or unable to fetch user data. Please check your ID and try again."}finally{o.value=!1}},c=()=>{s("close")},u=()=>{o.value||s("close")};return(d,f)=>t.isVisible?(h(),g("div",{key:0,class:"welcome-modal-overlay",onClick:u},[l("div",{class:"welcome-modal",onClick:f[1]||(f[1]=Xt(()=>{},["stop"]))},[f[4]||(f[4]=Xe('<div class="modal-header" data-v-5b538f11><div class="service-logo" data-v-5b538f11><img src="'+eb+'" alt="Deezer" class="logo" data-v-5b538f11></div><h1 class="modal-title" data-v-5b538f11>Welcome to Deezer!</h1><p class="modal-subtitle" data-v-5b538f11>Enter your Deezer User ID to access your personal music data</p></div>',1)),l("div",tb,[l("div",sb,[f[2]||(f[2]=l("label",{for:"deezer-id",class:"input-label"},"Deezer User ID",-1)),we(l("input",{id:"deezer-id","onUpdate:modelValue":f[0]||(f[0]=y=>r.value=y),type:"text",class:"input-field",placeholder:"Enter your Deezer User ID (e.g., 2354623523)",disabled:o.value},null,8,rb),[[Ss,r.value]]),f[3]||(f[3]=l("p",{class:"input-help"},[Ae(" You can find your User ID in your Deezer profile URL: "),l("code",null,"https://www.deezer.com/profile/YOUR_USER_ID")],-1))]),n.value?(h(),g("div",ob,M(n.value),1)):R("",!0),i.value?(h(),g("div",nb,M(i.value),1)):R("",!0)]),l("div",ib,[l("button",{class:"save-button",onClick:a,disabled:!r.value||o.value},[o.value?(h(),g("span",ab)):R("",!0),Ae(" "+M(o.value?"Loading...":"Save & Continue"),1)],8,lb),l("button",{class:"skip-button",onClick:c,disabled:o.value}," Skip for now ",8,cb)])])])):R("",!0)}},db=ke(ub,[["__scopeId","data-v-5b538f11"]]),fb={class:"service-selector"},pb={class:"service-grid"},hb=["onClick"],mb={class:"service-icon"},vb=["src","alt"],gb={class:"service-info"},yb={key:0,class:"coming-soon"},wb={key:1,class:"current-service"},bb={key:2,class:"service-description"},kb={class:"service-status"},_b={key:0,class:"status-indicator active"},Sb={key:1,class:"status-indicator disabled"},Ab={key:2,class:"status-indicator available"},Tb={key:0,class:"switch-warning"},$b={key:1,class:"loading-overlay"},Cb={__name:"ServiceSelector",props:{isVisible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const s=t,r=e,o=he(),n=U([]),i=U(ie.SPOTIFY),a=U(!1),c=U(null),u=U(!1),d=[ie.SPOTIFY,ie.DEEZER,ie.APPLE];Ce(async()=>{await o.initializeServices(),n.value=o.availableServices,i.value=o.currentServiceType});const f=k=>d.includes(k),y=k=>({[ie.SPOTIFY]:"/img/spotify-icon.svg",[ie.DEEZER]:"/img/deezer-icon.svg",[ie.TIDAL]:"/img/tidal-icon.svg",[ie.APPLE]:"/img/apple-music-icon.svg"})[k]||"/img/default-service-icon.svg",b=k=>({[ie.SPOTIFY]:"Access your Spotify library and playlists",[ie.DEEZER]:"Connect to your Deezer account",[ie.TIDAL]:"High-quality music streaming",[ie.APPLE]:"Access your Apple Music library and playlists"})[k]||"Music streaming service",v=k=>{f(k)&&k!==i.value&&(c.value=k,a.value=!0)},m=async()=>{if(c.value){u.value=!0,a.value=!1;try{await o.switchService(c.value),i.value=c.value,o.isAuthenticated||await o.authenticate()}catch(k){console.error("Failed to switch service:",k)}finally{u.value=!1,c.value=null}}},p=()=>{a.value=!1,c.value=null},_=k=>{k.target.src="/img/default-service-icon.svg"};return(k,S)=>s.isVisible?(h(),g("div",{key:0,class:"service-selector-modal-overlay",onClick:S[0]||(S[0]=Xt(A=>r("close"),["self"]))},[l("div",fb,[S[7]||(S[7]=l("div",{class:"service-selector-header"},[l("h3",null,"Music Service"),l("p",null,"Choose your preferred music streaming service")],-1)),l("div",pb,[(h(!0),g(j,null,te(n.value,A=>(h(),g("div",{key:A.type,class:K(["service-card",{active:A.type===i.value,disabled:!f(A.type)}]),onClick:x=>v(A.type)},[l("div",mb,[l("img",{src:y(A.type),alt:A.name,onError:_},null,40,vb)]),l("div",gb,[l("h4",null,M(A.name),1),f(A.type)?A.type===i.value?(h(),g("p",wb," Currently Active ")):(h(),g("p",bb,M(b(A.type)),1)):(h(),g("p",yb," Coming Soon "))]),l("div",kb,[A.type===i.value?(h(),g("div",_b,S[1]||(S[1]=[l("i",{class:"check-icon"},"",-1)]))):f(A.type)?(h(),g("div",Ab,S[3]||(S[3]=[l("i",{class:"arrow-icon"},"",-1)]))):(h(),g("div",Sb,S[2]||(S[2]=[l("i",{class:"lock-icon"},"",-1)])))])],10,hb))),128))]),a.value?(h(),g("div",Tb,[l("div",{class:"warning-content"},[S[4]||(S[4]=l("i",{class:"warning-icon"},"",-1)),S[5]||(S[5]=l("div",{class:"warning-text"},[l("h4",null,"Switch Music Service?"),l("p",null,"Switching services will clear your current data and require re-authentication.")],-1)),l("div",{class:"warning-actions"},[l("button",{onClick:m,class:"btn-confirm"},"Switch"),l("button",{onClick:p,class:"btn-cancel"},"Cancel")])])])):R("",!0),u.value?(h(),g("div",$b,S[6]||(S[6]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Switching service...",-1)]))):R("",!0)])])):R("",!0)}},Pb=ke(Cb,[["__scopeId","data-v-69c0168f"]]),xb={},Rb={href:"spotify/login"};function Mb(t,e){return h(),g("a",Rb,e[0]||(e[0]=[l("button",{class:"inp"},"Login",-1)]))}const Eb=ke(xb,[["render",Mb]]);function pi(){let t=document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1");return t.length===0&&localStorage.removeItem("queue"),t.length!==0}function oa(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(console.log("54 prefered dark"),"dark"):localStorage.getItem("user-theme")?localStorage.getItem("user-theme"):"dq"}const Ib={class:"settings-container"},Lb={key:0,class:"settings-menu"},Db={class:"settings-section"},zb={class:"setting-item"},Ob={class:"setting-label"},Ub={class:"setting-item"},Fb={class:"setting-label"},qb={class:"setting-item"},Vb={class:"setting-label"},Nb={class:"setting-item"},Hb={class:"setting-label"},Bb={class:"settings-section"},Kb={__name:"Settings",setup(t){const e=U(!1),s=ve(),r=()=>{e.value=!e.value},o=()=>{localStorage.clear(),window.location.reload()},n=()=>{localStorage.removeItem("welcome-modal-seen"),window.location.reload()};return(i,a)=>(h(),g("div",Ib,[l("button",{class:"settings-toggle",onClick:r},a[8]||(a[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),l("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z","clip-rule":"evenodd"})],-1)])),e.value?(h(),g("div",Lb,[l("div",Db,[a[13]||(a[13]=l("h3",null,"Audio Settings",-1)),l("div",zb,[l("label",Ob,[we(l("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=c=>w(s).audioPreview=c),onChange:a[1]||(a[1]=c=>w(s).setAudioPreview(c.target.checked))},null,544),[[Kt,w(s).audioPreview]]),a[9]||(a[9]=l("span",{class:"setting-text"},"Audio Preview",-1))])]),l("div",Ub,[l("label",Fb,[we(l("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=c=>w(s).restartSongOnHover=c),onChange:a[3]||(a[3]=c=>w(s).setRestartSongOnHover(c.target.checked))},null,544),[[Kt,w(s).restartSongOnHover]]),a[10]||(a[10]=l("span",{class:"setting-text"},"Restart song on hover",-1))])]),l("div",qb,[l("label",Vb,[we(l("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=c=>w(s).unplayableTracks=c),onChange:a[5]||(a[5]=c=>w(s).setUnplayableTracks(c.target.checked))},null,544),[[Kt,w(s).unplayableTracks]]),a[11]||(a[11]=l("span",{class:"setting-text"},"Show unplayable tracks",-1))])]),l("div",Nb,[l("label",Hb,[we(l("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=c=>w(s).openLinks=c),onChange:a[7]||(a[7]=c=>w(s).setOpenLinks(c.target.checked))},null,544),[[Kt,w(s).openLinks]]),a[12]||(a[12]=l("span",{class:"setting-text"},"Open links in new tab",-1))])])]),l("div",{class:"settings-section"},[a[16]||(a[16]=l("h3",null,"Actions",-1)),l("button",{class:"action-button",onClick:o},a[14]||(a[14]=[l("span",{class:"action-icon"},"",-1),l("span",{class:"action-text"},"Clear Cache",-1)])),l("button",{class:"action-button",onClick:n},a[15]||(a[15]=[l("span",{class:"action-icon"},"",-1),l("span",{class:"action-text"},"Show Welcome Modal",-1)]))]),l("div",Bb,[W(kl)])])):R("",!0)]))}};function Fo(){const t="ontouchstart"in window||navigator.maxTouchPoints>0,e=window.innerWidth<=768;if("userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.mobile;const s=navigator.userAgent||navigator.vendor||window.opera||"",r=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet|silk|kindle|playbook|bb10|meego|fennec|minimo|symbian|psp|nintendo|wii|palm|phone|mobile\s*safari|opera\s*mobi|windows\s*phone|bada|tizen|sailfish|ubuntu\s*touch|firefox\s*mobile|chrome\s*mobile|samsung|huawei|xiaomi|oppo|vivo|oneplus|lg\-|motorola|nokia|htc\-|sony|asus|acer|lenovo|alcatel|zte|tcl|realme|honor|redmi/i,o=[/iPhone|iPad|iPod/i,/Android.+Mobile|Android.+Tablet/i,/Windows Phone|WPDesktop/i,/BlackBerry|PlayBook|BB10/i,/Opera Mini|Opera Mobi/i,/Mobile.*Firefox|FxiOS/i,/CriOS|Chrome.*Mobile|Chrome.*Tablet/i,/Edge.*Mobile|EdgiOS/i,/Samsung.*Mobile|SM-[A-Z]/i,/Huawei|Honor|HMA-|LYA-|SNE-/i,/Xiaomi|Mi\s|Redmi|M2\d{3}/i,/OnePlus|ONEPLUS/i,/OPPO|CPH\d{4}|PBCM30|PBEM00/i,/vivo|V\d{4}|PD\d{4}/i,/LG-|LM-|VS\d{3}|H\d{3}/i,/Pixel|Nexus/i,/Tesla/i];if(r.test(s))return console.log("Mobile detected via main regex"),!0;for(const a of o)if(a.test(s))return console.log("Mobile detected via modern pattern:",a),!0;return/tablet|ipad|playbook|silk|android(?!.*mobile)/i.test(s)?(console.log("Tablet detected"),!0):t&&e?(console.log("Mobile detected via touch + screen size fallback"),!0):t&&(window.screen.width<=1024||window.innerWidth<=1024)&&"orientation"in window?(console.log("Mobile detected via feature detection fallback"),!0):(console.log("Desktop detected"),!1)}const jb={class:"modern-header"},Gb={class:"header-container"},Qb={class:"theme-switcher"},Wb={class:"theme-option"},Xb={class:"theme-option"},Yb={class:"theme-option"},Jb={class:"theme-option"},Zb={class:"user-section"},ek={key:0,class:"user-greeting"},tk={class:"username"},sk={class:"user-actions"},rk={key:0,class:"queue-badge"},ok={__name:"Header",setup(t){const e=De(),s=oa();let r=document.cookie.replace(/(?:(?:^|.*;\s*)nickname\s*\=\s*([^;]*).*$)|^.*$/,"$1"),o=U(localStorage.getItem("user-theme"));const n=U(!1);a(s);const i=E(()=>le.getCurrentServiceType()==="deezer"?localStorage.getItem("deezer-username")||"Deezer User":r);function a(c){localStorage.setItem("user-theme",c),o.value=c,document.documentElement.className=c}return window.addEventListener("resize",()=>{n.value=window.innerWidth<1076}),(c,u)=>(h(),g("header",jb,[l("div",Gb,[u[15]||(u[15]=l("div",{class:"brand-section"},[l("div",{class:"logo-container"},[l("img",{class:"logo",src:bl,alt:"Discover Mobily"})]),l("h1",{class:"brand-title"},"Discover Mobily")],-1)),l("div",{class:K(["theme-section",n.value||w(Fo)()?"mobile-themes":"desktop-themes"])},[l("div",Qb,[l("div",Wb,[we(l("input",{id:"light",type:"radio","onUpdate:modelValue":u[0]||(u[0]=d=>Pe(o)?o.value=d:o=d),value:"light",onClick:u[1]||(u[1]=d=>a("light"))},null,512),[[dr,w(o)]]),u[9]||(u[9]=l("label",{for:"light",class:"theme-label"},[l("div",{class:"theme-preview light-theme"}),l("span",{class:"theme-name"},"Light")],-1))]),l("div",Xb,[we(l("input",{id:"dark",type:"radio","onUpdate:modelValue":u[2]||(u[2]=d=>Pe(o)?o.value=d:o=d),value:"dark",onClick:u[3]||(u[3]=d=>a("dark"))},null,512),[[dr,w(o)]]),u[10]||(u[10]=l("label",{for:"dark",class:"theme-label"},[l("div",{class:"theme-preview dark-theme"}),l("span",{class:"theme-name"},"Dark")],-1))]),l("div",Yb,[we(l("input",{id:"dark-blue",type:"radio","onUpdate:modelValue":u[4]||(u[4]=d=>Pe(o)?o.value=d:o=d),value:"dark-blue",onClick:u[5]||(u[5]=d=>a("dark-blue"))},null,512),[[dr,w(o)]]),u[11]||(u[11]=l("label",{for:"dark-blue",class:"theme-label"},[l("div",{class:"theme-preview dark-blue-theme"}),l("span",{class:"theme-name"},"Blue")],-1))]),l("div",Jb,[we(l("input",{id:"dq",type:"radio","onUpdate:modelValue":u[6]||(u[6]=d=>Pe(o)?o.value=d:o=d),value:"dq",onClick:u[7]||(u[7]=d=>a("dq"))},null,512),[[dr,w(o)]]),u[12]||(u[12]=l("label",{for:"dq",class:"theme-label"},[l("div",{class:"theme-preview dq-theme"}),l("span",{class:"theme-name"},"DQ")],-1))])])],2),l("div",Zb,[w(pi)()?(h(),g("div",ek,[u[13]||(u[13]=l("span",{class:"greeting-text"},"Hello,",-1)),l("span",tk,M(i.value),1)])):R("",!0),l("div",sk,[W(Kb),w(pi)()?R("",!0):(h(),Z(Eb,{key:0})),l("div",{class:"queue-button",onClick:u[8]||(u[8]=d=>w(e).setQueueModal(!0))},[u[14]||(u[14]=l("div",{class:"queue-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor"},[l("path",{d:"M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"})])],-1)),w(e).getQueue?(h(),g("div",rk,M(w(e).getQueue),1)):R("",!0)])])])])]))}},nk={class:"modal-header"},ik={class:"modal-actions"},lk={class:"playlist-selector"},ak=["value"],ck={class:"queue-list"},uk={class:"track-info"},dk={class:"track-image"},fk={key:1,class:"track-cover no-image"},pk={class:"track-details"},hk={class:"track-name"},mk={class:"track-artists"},vk=["onClick"],gk={__name:"QueueModal",setup(t){const e=De(),s=he(),r=async()=>{try{await e.saveQueue()}catch(i){console.error("Failed to save queue:",i)}},o=async i=>{try{await e.saveQueueToPlaylist(i)}catch(a){console.error("Failed to save queue to playlist:",a)}},n=async()=>{const i=prompt("Name for your playlist:","Discovered");if(i)try{await s.createPlaylist(i),await s.fetchPlaylists(0)}catch(a){console.error("Failed to create playlist:",a)}};return(i,a)=>w(e).isQueueModalOpen?(h(),g("div",{key:0,class:"modal-overlay",onClick:a[4]||(a[4]=c=>w(e).setQueueModal(!1))},[l("div",{class:"modal-content",onClick:a[3]||(a[3]=Xt(()=>{},["stop"]))},[l("div",nk,[a[6]||(a[6]=l("h2",{class:"modal-title"},"Queue",-1)),l("button",{class:"modal-close",onClick:a[0]||(a[0]=c=>w(e).setQueueModal(!1))},a[5]||(a[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M6.225 4.811a1 1 0 00-1.414 1.414L10.586 12 4.81 17.775a1 1 0 101.414 1.414L12 13.414l5.775 5.775a1 1 0 001.414-1.414L13.414 12l5.775-5.775a1 1 0 00-1.414-1.414L12 10.586 6.225 4.81z"})],-1)]))]),l("div",ik,[l("button",{class:"action-btn save-btn",onClick:r},a[7]||(a[7]=[l("span",{class:"btn-icon"},"",-1),l("span",{class:"btn-text"},"Save all tracks",-1)])),l("div",lk,[l("select",{class:"playlist-select",onChange:a[1]||(a[1]=c=>o(c.target.value))},[a[8]||(a[8]=l("option",{selected:"",disabled:""},"Add all to playlist",-1)),l("option",{value:"new",onClick:n},"New playlist"),(h(!0),g(j,null,te(w(s).getPlaylists,(c,u)=>(h(),g("option",{key:u,value:c.id},M(c.name),9,ak))),128))],32)]),l("button",{class:"action-btn clear-btn",onClick:a[2]||(a[2]=c=>w(e).clearQueue())},a[9]||(a[9]=[l("span",{class:"btn-icon"},"",-1),l("span",{class:"btn-text"},"Clear queue",-1)]))]),l("div",ck,[(h(!0),g(j,null,te(w(e).getQueueArr,(c,u)=>(h(),g("div",{key:u,class:"queue-item"},[l("div",uk,[l("div",dk,[c.image?(h(),g("div",{key:0,class:"track-cover",style:Se({"background-image":"url("+c.image.url+")"})},null,4)):(h(),g("div",fk,a[10]||(a[10]=[l("span",{class:"no-image-icon"},"",-1)])))]),l("div",pk,[l("div",hk,M(c.name),1),l("div",mk,M(c.artists),1)])]),l("button",{class:"remove-btn",onClick:d=>w(e).removeFromQueue(c.id)},a[11]||(a[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M6.225 4.811a1 1 0 00-1.414 1.414L10.586 12 4.81 17.775a1 1 0 101.414 1.414L12 13.414l5.775 5.775a1 1 0 001.414-1.414L13.414 12l5.775-5.775a1 1 0 00-1.414-1.414L12 10.586 6.225 4.81z"})],-1)]),8,vk)]))),128))]),a[12]||(a[12]=l("div",{class:"modal-footer"},[l("p",{class:"premium-notice"},[l("span",{class:"notice-icon"},""),Ae(" Spotify Premium required to play the full song in Discover Mobily. Save these tracks above to listen in the main Spotify app. ")])],-1))])])):R("",!0)}},yk={class:"time-range-selector"},wk={class:"display-flex align-items-center"},bk=["id","onClick"],na={__name:"TimeRangeSelector",props:{selectedRange:{type:Number,required:!0},ranges:{type:Array,default:()=>[{id:1,label:"Last month",fetchMethod:"fetchArtist",reloadMethod:"reloadartists"},{id:2,label:"Last 6 month",fetchMethod:"fetchArtist2",reloadMethod:"reloadartists"},{id:3,label:"All time",fetchMethod:"fetchArtist3",reloadMethod:"reloadartists"}]},sectionType:{type:String,default:"artists"}},emits:["range-change","refresh"],setup(t,{emit:e}){const s=e,r=(o,n)=>{s("range-change",o.id,n)};return(o,n)=>(h(),g("div",yk,[l("div",wk,[(h(!0),g(j,null,te(t.ranges,(i,a)=>(h(),g("span",{key:i.id,id:`top${t.sectionType}${i.id===1?"":i.id}`,onClick:c=>r(i,c),class:K([t.selectedRange===i.id?"active_tab":"",{"mx-2":a>0}])},M(i.label),11,bk))),128))])]))}},kk={class:"track-overlay"},_k={class:"track-info"},Sk={class:"track-artists"},Ak={class:"track-name"},Tk=["preload","src"],ia={__name:"TrackItem",props:{track:{type:Object,required:!0},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},trackPrefix:{type:String,default:""}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=p=>Ps.formatArtistNamesSimple(p),{hasPreview:n,hasImage:i,displayClass:a,backgroundStyle:c,audioPreload:u,audioSrc:d}=ut(E(()=>s.track)),f=p=>{r("click",s.track,p)},y=p=>{r("hover",p)},b=p=>{r("leave",p)},v=E(()=>n.value&&i.value?!0:i.value&&!n.value?s.unplayableTracks:n.value&&!i.value?!0:s.unplayableTracks),m=E(()=>{const p="media-card",_=s.selected?"selected":"";return`${p} ${a.value} ${_}`.trim()});return(p,_)=>v.value?(h(),g("div",{key:0,tabindex:"0",class:K(m.value),style:Se(w(c)),onClick:Xt(f,["stop"]),onMouseover:y,onMouseleave:b},[l("div",kk,[l("div",_k,[l("div",Sk,M(o(t.track.artists)),1),l("div",Ak,M(t.track.name),1)])]),l("audio",{preload:w(u),src:w(d)},null,8,Tk)],38)):R("",!0)}},$k=["id"],Ck={class:"display-flex flex-wrap py-2 gap-8"},Pk={__name:"TrackDisplaySection",props:{tracks:{type:Array,required:!0},sectionId:{type:String,required:!0},isVisible:{type:Boolean,default:!0},trackPrefix:{type:String,default:"3"}},emits:["track-click","track-hover","track-leave"],setup(t,{emit:e}){const s=t,r=e,o=ve(),n=he(),{selectedItem:i}=Ve(),a=E(()=>s.isVisible?"":"d-none"),c=(f,y)=>{r("track-click",f,y)},u=f=>{r("track-hover",f)},d=f=>{r("track-leave",f)};return(f,y)=>(h(),g(j,null,[w(n).isLoading?(h(),Z(Ct,{key:0})):R("",!0),l("div",{id:t.sectionId,class:K(["display-flex flex-wrap",a.value]),style:{color:"black",width:"auto"}},[l("div",Ck,[(h(!0),g(j,null,te(t.tracks,(b,v)=>(h(),Z(ia,{key:v,track:b,selected:w(i)===t.trackPrefix+b.id,"unplayable-tracks":w(o).unplayableTracks,"track-prefix":t.trackPrefix,onClick:c,onHover:u,onLeave:d},null,8,["track","selected","unplayable-tracks","track-prefix"]))),128))])],10,$k)],64))}},yo=ke(Pk,[["__scopeId","data-v-6b40db1c"]]),xk={class:"p-2 flex-between-center"},Rk={class:"grid-2-1"},Mk={class:"ps-2"},Ek={__name:"TopTracks",props:{selectedTopMenu:{type:Number,required:!0}},emits:["track-click","track-hover","track-leave"],setup(t,{emit:e}){const s=e,r=he(),o=ve(),n=De(),i=me(),{createTrackSorter:a}=us(),{setSelectedItem:c}=Ve(),u=U(""),d=U(""),f=U(""),y=a(E(()=>r.getTopTracksShort||[]),u),b=a(E(()=>r.getTopTracksMedium||[]),d),v=a(E(()=>r.getTopTracksLong||[]),f),m=async(A,x)=>{c(A.id),await i.getTrackDetails(A,"topTracks"),n.addToQueue(A),s("track-click",A,x)},p=A=>{o.handleAudioHover(A),s("track-hover",A)},_=A=>{o.handleAudioLeave(A),s("track-leave",A)},k=async(A,x)=>{r.setSelectedTracksRange(A);const P=A===1?"short_term":A===2?"medium_term":"long_term";(A===1&&!r.getTopTracksShort.length||A===2&&!r.getTopTracksMedium.length||A===3&&!r.getTopTracksLong.length)&&await r.fetchTopTracks(P)},S=async(A,x)=>{const P=A===1?"short_term":A===2?"medium_term":"long_term";await r.fetchTopTracks(P)};return(A,x)=>(h(),g("div",null,[l("div",xk,[l("div",Rk,[x[3]||(x[3]=l("h4",null,"Top Tracks",-1)),l("div",Mk,[W(ds,{"on-click":()=>S(w(r).selectedTracksRange)},null,8,["on-click"])])]),w(r).selectedTracksRange===1?(h(),Z(is,{key:0,"model-value":u.value,"onUpdate:modelValue":x[0]||(x[0]=P=>u.value=P)},null,8,["model-value"])):R("",!0),w(r).selectedTracksRange===2?(h(),Z(is,{key:1,"model-value":d.value,"onUpdate:modelValue":x[1]||(x[1]=P=>d.value=P)},null,8,["model-value"])):R("",!0),w(r).selectedTracksRange===3?(h(),Z(is,{key:2,"model-value":f.value,"onUpdate:modelValue":x[2]||(x[2]=P=>f.value=P)},null,8,["model-value"])):R("",!0)]),we(W(na,{"selected-range":w(r).selectedTracksRange,"section-type":"tracks",ranges:[{id:1,label:"Last month",fetchMethod:"fetchTopTracks",reloadMethod:"fetchTopTracks"},{id:2,label:"Last 6 month",fetchMethod:"fetchTopTracks",reloadMethod:"fetchTopTracks"},{id:3,label:"All time",fetchMethod:"fetchTopTracks",reloadMethod:"fetchTopTracks"}],onRangeChange:k,onRefresh:S},null,8,["selected-range"]),[[Gt,t.selectedTopMenu===3]]),w(r).selectedTracksRange===1?(h(),Z(yo,{key:0,tracks:w(y),"section-id":"toptracks","is-visible":w(r).selectedTracksRange===1,"track-prefix":"3","selected-sort-option":u.value,onTrackClick:m,onTrackHover:p,onTrackLeave:_},null,8,["tracks","is-visible","selected-sort-option"])):R("",!0),w(r).selectedTracksRange===2?(h(),Z(yo,{key:1,tracks:w(b),"section-id":"toptracks6","is-visible":w(r).selectedTracksRange===2,"track-prefix":"3","selected-sort-option":d.value,onTrackClick:m,onTrackHover:p,onTrackLeave:_},null,8,["tracks","is-visible","selected-sort-option"])):R("",!0),w(r).selectedTracksRange===3?(h(),Z(yo,{key:2,tracks:w(v),"section-id":"toptracksall","is-visible":w(r).selectedTracksRange===3,"track-prefix":"3","selected-sort-option":f.value,onTrackClick:m,onTrackHover:p,onTrackLeave:_},null,8,["tracks","is-visible","selected-sort-option"])):R("",!0)]))}},Ik=ke(Ek,[["__scopeId","data-v-17bc7535"]]),Lk=["preload","src"],la={__name:"ArtistItem",props:{artist:{type:Object,required:!0},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},artistPrefix:{type:String,default:""}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,{hasPreview:o,hasImage:n,displayClass:i,backgroundStyle:a,audioPreload:c,audioSrc:u}=ut(E(()=>s.artist)),d=m=>{r("click",s.artist,m)},f=m=>{r("hover",m)},y=m=>{r("leave",m)},b=E(()=>o.value&&n.value?!0:n.value&&!o.value?s.unplayableTracks:o.value&&!n.value?!0:s.unplayableTracks),v=E(()=>{const m="media-card",p=s.selected?"selected":"";return`${m} ${i.value} ${p}`.trim()});return(m,p)=>b.value?(h(),g("div",{key:0,tabindex:"0",class:K(v.value),style:Se(w(a)),onClick:Xt(d,["stop"]),onMouseover:f,onMouseleave:y},[Ae(M(t.artist.name)+" ",1),l("audio",{preload:w(c),src:w(u)},null,8,Lk)],38)):R("",!0)}},Dk=["id"],zk={class:"display-flex flex-wrap py-2 gap-8"},Ok={__name:"ArtistDisplaySection",props:{artists:{type:Array,required:!0},sectionId:{type:String,required:!0},isVisible:{type:Boolean,default:!0},artistPrefix:{type:String,default:"2"},selectedSortOption:{type:String,default:""}},emits:["sort-change","artist-click","artist-hover","artist-leave"],setup(t,{emit:e}){const s=t,r=e,o=ve(),n=he(),{selectedItem:i}=Ve(),a=E(()=>s.isVisible?"":"d-none"),c=(f,y)=>{r("artist-click",f,y)},u=f=>{r("artist-hover",f)},d=f=>{r("artist-leave",f)};return(f,y)=>(h(),g(j,null,[w(n).isLoading?(h(),Z(Ct,{key:0})):R("",!0),l("div",{id:t.sectionId,class:K(["display-flex flex-wrap",a.value]),style:{width:"auto"}},[l("div",zk,[(h(!0),g(j,null,te(t.artists,(b,v)=>(h(),Z(la,{key:v,artist:b,selected:w(i)===t.artistPrefix+b.id,"unplayable-tracks":w(o).unplayableTracks,"artist-prefix":t.artistPrefix,onClick:c,onHover:u,onLeave:d},null,8,["artist","selected","unplayable-tracks","artist-prefix"]))),128))])],10,Dk)],64))}},wo=ke(Ok,[["__scopeId","data-v-38ac4360"]]),Uk={class:"sort-container"},kr={__name:"SortArtists",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=rn(t,"modelValue");return(s,r)=>(h(),g("div",Uk,[we(l("select",{class:"modern-select","onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o)},r[1]||(r[1]=[l("option",{value:""},"Initial",-1),l("option",{value:"artist"},"Name",-1),l("option",{value:"popularity"},"Sort by popularity",-1),l("option",{value:"followers"},"Sort by followers",-1)]),512),[[As,e.value]]),r[2]||(r[2]=l("div",{class:"select-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 10l5 5 5-5z"})])],-1))]))}},Fk={class:"p-2 flex-between-center"},qk={class:"grid-2-1"},Vk={class:"ps-2"},Nk={__name:"TopArtists",props:{selectedTopMenu:{type:Number,required:!0}},emits:["artist-click","artist-hover","artist-leave"],setup(t,{emit:e}){const s=e,r=he(),o=ve(),n=me(),{createArtistSorter:i}=us(),{setSelectedItem:a}=Ve(),c=U(""),u=U(""),d=U(""),f=i(E(()=>r.getTopArtistsShort||[]),c),y=i(E(()=>r.getTopArtistsMedium||[]),u),b=i(E(()=>r.getTopArtistsLong||[]),d),v=async(S,A)=>{a(S.id),await n.getArtistDetails(S,"topArtists"),s("artist-click",S,A)},m=S=>{o.handleAudioHover(S),s("artist-hover",S)},p=S=>{o.handleAudioLeave(S),s("artist-leave",S)},_=async(S,A)=>{r.setSelectedArtistsRange(S);const x=S===1?"short_term":S===2?"medium_term":"long_term";(S===1&&!r.getTopArtistsShort.length||S===2&&!r.getTopArtistsMedium.length||S===3&&!r.getTopArtistsLong.length)&&await r.fetchTopArtists(x)},k=async(S,A)=>{const x=S===1?"short_term":S===2?"medium_term":"long_term";await r.fetchTopArtists(x)};return(S,A)=>(h(),g("div",null,[l("div",Fk,[l("div",qk,[A[3]||(A[3]=l("h4",null,"Top Artists",-1)),l("div",Vk,[W(ds,{"on-click":()=>k(w(r).selectedArtistsRange)},null,8,["on-click"])])]),w(r).selectedArtistsRange===1?(h(),Z(kr,{key:0,"model-value":c.value,"onUpdate:modelValue":A[0]||(A[0]=x=>c.value=x)},null,8,["model-value"])):R("",!0),w(r).selectedArtistsRange===2?(h(),Z(kr,{key:1,"model-value":u.value,"onUpdate:modelValue":A[1]||(A[1]=x=>u.value=x)},null,8,["model-value"])):R("",!0),w(r).selectedArtistsRange===3?(h(),Z(kr,{key:2,"model-value":d.value,"onUpdate:modelValue":A[2]||(A[2]=x=>d.value=x)},null,8,["model-value"])):R("",!0)]),we(W(na,{"selected-range":w(r).selectedArtistsRange,"section-type":"artists",ranges:[{id:1,label:"Last month",fetchMethod:"fetchTopArtists",reloadMethod:"fetchTopArtists"},{id:2,label:"Last 6 month",fetchMethod:"fetchTopArtists",reloadMethod:"fetchTopArtists"},{id:3,label:"All time",fetchMethod:"fetchTopArtists",reloadMethod:"fetchTopArtists"}],onRangeChange:_},null,8,["selected-range"]),[[Gt,t.selectedTopMenu===2]]),w(r).selectedArtistsRange===1?(h(),Z(wo,{key:0,artists:w(f),"section-id":"topartist","is-visible":w(r).selectedArtistsRange===1,"artist-prefix":"2","selected-sort-option":c.value,onArtistClick:v,onArtistHover:m,onArtistLeave:p},null,8,["artists","is-visible","selected-sort-option"])):R("",!0),w(r).selectedArtistsRange===2?(h(),Z(wo,{key:1,artists:w(y),"section-id":"topartist6","is-visible":w(r).selectedArtistsRange===2,"artist-prefix":"2","selected-sort-option":u.value,onArtistClick:v,onArtistHover:m,onArtistLeave:p},null,8,["artists","is-visible","selected-sort-option"])):R("",!0),w(r).selectedArtistsRange===3?(h(),Z(wo,{key:2,artists:w(b),"section-id":"topartista","is-visible":w(r).selectedArtistsRange===3,"artist-prefix":"2","selected-sort-option":d.value,onArtistClick:v,onArtistHover:m,onArtistLeave:p},null,8,["artists","is-visible","selected-sort-option"])):R("",!0)]))}},Hk=ke(Nk,[["__scopeId","data-v-aba4705e"]]),Bk={class:"sort-container"},aa={__name:"SortAlbums",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=rn(t,"modelValue");return(s,r)=>(h(),g("div",Bk,[we(l("select",{class:"modern-select","onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o)},r[1]||(r[1]=[Xe('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="name">Sort by name</option><option value="number_of_tracks">Sort by number of tracks</option>',7)]),512),[[As,e.value]]),r[2]||(r[2]=l("div",{class:"select-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 10l5 5 5-5z"})])],-1))]))}},Kk={class:"track-overlay"},jk={class:"track-info"},Gk={class:"track-artists"},Qk={class:"track-name"},Wk=["preload","src"],ca={__name:"AlbumItem",props:{album:{type:Object,required:!0},selected:{type:Boolean,default:!1},albumPrefix:{type:String,default:""}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=b=>Ps.formatArtistNamesSimple(b),{displayClass:n,backgroundStyle:i,audioPreload:a,audioSrc:c}=ut(E(()=>s.album)),u=b=>{r("click",s.album,b)},d=b=>{r("hover",b)},f=b=>{r("leave",b)},y=E(()=>{const b="media-card",v=s.selected?"selected":"";return`${b} ${n.value} ${v}`.trim()});return(b,v)=>(h(),g("div",{tabindex:"0",class:K(y.value),style:Se(w(i)),onClick:Xt(u,["stop"]),onMouseover:d,onMouseleave:f},[l("div",Kk,[l("div",jk,[l("div",Gk,M(o(t.album.artists)),1),l("div",Qk,M(t.album.name),1)])]),l("audio",{preload:w(a),src:w(c)},null,8,Wk)],38))}},Xk={class:"p-2 flex-between-center"},Yk={class:"grid-2-1"},Jk={class:"ps-2"},Zk={id:"savedalbum",class:"display-flex flex-wrap"},e3={class:"display-flex flex-wrap py-2 gap-8"},t3={__name:"SavedAlbums",props:{selectedTopMenu:{type:Number,required:!0}},emits:["album-click"],setup(t,{emit:e}){const s=e,r=ve(),o=he(),n=me(),{createAlbumSorter:i}=us(),{selectedItem:a,setSelectedItem:c}=Ve(),u=U(""),d=i(E(()=>o.getSavedAlbums||[]),u),f=async(m,p)=>{c("4"+m.id),await n.getAlbumDetails(m,"savedAlbums"),s("album-click",m,p)},y=()=>{o.savedAlbums=[],o.fetchSavedAlbums(0)},b=m=>{r.handleAudioHover(m)},v=m=>{r.handleAudioLeave(m)};return(m,p)=>(h(),g("div",null,[l("div",Xk,[l("div",Yk,[p[1]||(p[1]=l("h4",null,"Saved Albums",-1)),l("div",Jk,[W(ds,{"on-click":()=>y()},null,8,["on-click"])])]),W(aa,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=_=>u.value=_)},null,8,["modelValue"])]),w(o).isLoading?(h(),Z(Ct,{key:0})):R("",!0),we(l("div",Zk,[l("div",e3,[(h(!0),g(j,null,te(w(d),(_,k)=>(h(),Z(ca,{key:k,album:_.album,selected:w(a)==="4"+_.album.id,"album-prefix":"4",onClick:f,onHover:b,onLeave:v},null,8,["album","selected"]))),128))])],512),[[Gt,t.selectedTopMenu===4]])]))}},s3=ke(t3,[["__scopeId","data-v-e89cdce7"]]),r3={key:0,class:"pagination-container"},o3={key:0,class:"pagination-info"},n3=["disabled"],i3={__name:"PaginationContainer",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},itemsPerPage:{type:Number,default:50},totalItems:{type:Number,default:0},showInfo:{type:Boolean,default:!0}},emits:["page-change"],setup(t,{emit:e}){const s=t,r=e,o=n=>{n>=1&&n<=s.totalPages&&r("page-change",n)};return(n,i)=>t.totalItems>0?(h(),g("div",r3,[t.showInfo?(h(),g("div",o3,[t.totalItems>0?(h(),g(j,{key:0},[Ae("Page "+M(t.currentPage)+" of "+M(t.totalPages),1)],64)):R("",!0)])):R("",!0),l("button",{onClick:i[0]||(i[0]=a=>o(t.currentPage+1)),disabled:t.currentPage===t.totalPages,class:"action-button"}," Load more ",8,n3)])):R("",!0)}},l3={class:"p-2 flex-between-center"},a3={class:"grid-2-1"},c3={class:"ps-2"},u3={key:1,class:"loading-more"},d3={id:"savedtrack",class:"display-flex flex-wrap"},f3={class:"display-flex flex-wrap py-2 gap-8"},pr=50,p3={__name:"SavedTracks",props:{selectedTopMenu:{type:Number,required:!0}},emits:["track-click","track-hover","track-leave"],setup(t,{emit:e}){const s=e,r=he(),o=ve(),n=De(),i=me(),{createTrackSorter:a}=us(),{selectedItem:c,setSelectedItem:u}=Ve(),d=U(""),f=U(1),y=U(!1),b=a(E(()=>r.getSavedTracks||[]),d),v=E(()=>r.savedTracksTotal),m=E(()=>Math.ceil(v.value/pr)),p=E(()=>{const P=f.value*pr;return b.value.slice(0,P)}),_=async(P,I)=>{u("5"+P.id),await i.getTrackDetails(P,"savedTracks"),n.addToQueue(P),s("track-click",P,I)},k=P=>{o.handleAudioHover(P),s("track-hover",P)},S=P=>{o.handleAudioLeave(P),s("track-leave",P)},A=()=>{r.savedTracks=[],r.fetchSavedTracks(0),f.value=1},x=async P=>{if(P>f.value){const I=r.savedTracks.length;if((P-1)*pr>=I){y.value=!0;try{await r.fetchSavedTracks(I)}catch(z){console.error("Failed to load more tracks:",z)}finally{y.value=!1}}}f.value=P};return(P,I)=>(h(),g("div",null,[l("div",l3,[l("div",a3,[I[1]||(I[1]=l("h4",null,"Saved Tracks",-1)),l("div",c3,[W(ds,{"on-click":()=>A()},null,8,["on-click"])])]),W(is,{modelValue:d.value,"onUpdate:modelValue":I[0]||(I[0]=T=>d.value=T)},null,8,["modelValue"])]),w(r).isLoading?(h(),Z(Ct,{key:0})):R("",!0),y.value?(h(),g("div",u3,I[2]||(I[2]=[l("div",{class:"loading-spinner"},null,-1),l("span",null,"Loading more tracks...",-1)]))):R("",!0),we(l("div",d3,[l("div",f3,[(h(!0),g(j,null,te(p.value,(T,z)=>(h(),Z(ia,{key:z,track:T.track,selected:w(c)==="5"+T.track.id,"unplayable-tracks":w(o).unplayableTracks,"track-prefix":"5",onClick:_,onHover:k,onLeave:S},null,8,["track","selected","unplayable-tracks"]))),128))])],512),[[Gt,t.selectedTopMenu===5]]),m.value>1?(h(),Z(i3,{key:2,"current-page":f.value,"total-pages":m.value,"items-per-page":pr,"total-items":v.value,onPageChange:x},null,8,["current-page","total-pages","total-items"])):R("",!0)]))}},h3=ke(p3,[["__scopeId","data-v-ce9fd0de"]]),m3={class:"p-2 flex-between-center"},v3={class:"grid-2-1"},g3={class:"ps-2"},y3={id:"followedartist",class:"display-flex flex-wrap"},w3={class:"display-flex flex-wrap py-2 gap-8"},b3={__name:"FollowedArtists",props:{selectedTopMenu:{type:Number,required:!0}},emits:["artist-click","artist-hover","artist-leave"],setup(t,{emit:e}){const s=e,r=he(),o=ve(),n=me(),{createArtistSorter:i}=us(),{selectedItem:a,setSelectedItem:c}=Ve(),u=U(""),d=i(E(()=>r.getFollowedArtists||[]),u),f=async(m,p)=>{c("6"+m.id),await n.getArtistDetails(m,"followedArtists"),s("artist-click",m,p)},y=m=>{o.handleAudioHover(m),s("artist-hover",m)},b=m=>{o.handleAudioLeave(m),s("artist-leave",m)},v=()=>{r.followedArtists=[],r.fetchFollowedArtists()};return(m,p)=>(h(),g("div",null,[l("div",m3,[l("div",v3,[p[1]||(p[1]=l("h4",null,"Followed Artists",-1)),l("div",g3,[W(ds,{"on-click":()=>v()},null,8,["on-click"])])]),W(kr,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=_=>u.value=_)},null,8,["modelValue"])]),w(r).isLoading?(h(),Z(Ct,{key:0})):R("",!0),we(l("div",y3,[l("div",w3,[(h(!0),g(j,null,te(w(d),(_,k)=>(h(),Z(la,{key:k,artist:_,selected:w(a)==="6"+_.id,"unplayable-tracks":w(o).unplayableTracks,"artist-prefix":"6",onClick:f,onHover:y,onLeave:b},null,8,["artist","selected","unplayable-tracks"]))),128))])],512),[[Gt,t.selectedTopMenu===6]])]))}},k3=ke(b3,[["__scopeId","data-v-07644d38"]]),_3={class:"p-2 flex-between-center"},S3={class:"grid-2-1"},A3={class:"ps-2"},T3={id:"newrelease",class:"display-flex flex-wrap"},$3={class:"display-flex flex-wrap py-2 gap-8"},C3={__name:"NewReleases",props:{selectedTopMenu:{type:Number,required:!0}},emits:["album-click","album-hover","album-leave"],setup(t,{emit:e}){const s=e,r=he(),o=ve(),n=me(),{createNewReleaseSorter:i}=us(),{selectedItem:a,setSelectedItem:c}=Ve(),u=U(""),d=i(E(()=>r.getNewReleases||[]),u),f=async(m,p)=>{c("7"+m.id),await n.getAlbumDetails(m,"newReleases"),s("album-click",m,p)},y=m=>{o.handleAudioHover(m),s("album-hover",m)},b=m=>{o.handleAudioLeave(m),s("album-leave",m)},v=()=>{r.newReleases=[],r.fetchNewReleases(0)};return(m,p)=>(h(),g("div",null,[l("div",_3,[l("div",S3,[p[1]||(p[1]=l("h4",null,"New Releases",-1)),l("div",A3,[W(ds,{"on-click":()=>v()},null,8,["on-click"])])]),W(aa,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=_=>u.value=_)},null,8,["modelValue"])]),w(r).isLoading?(h(),Z(Ct,{key:0})):R("",!0),we(l("div",T3,[l("div",$3,[(h(!0),g(j,null,te(w(d),(_,k)=>(h(),Z(ca,{key:k,album:_,selected:w(a)==="7"+_.id,"album-prefix":"7",onClick:f,onHover:y,onLeave:b},null,8,["album","selected"]))),128))])],512),[[Gt,t.selectedTopMenu===7]])]))}},P3=ke(C3,[["__scopeId","data-v-7e8bdc6e"]]),x3={class:"categories-container"},R3={class:"categories-header"},M3={key:0,class:"pagination-controls"},E3=["disabled"],I3={class:"pagination-info"},L3=["disabled"],D3={key:0,class:"loading-container"},z3={key:1,class:"empty-state"},O3={key:2,class:"categories-grid"},U3=["onClick"],F3={class:"category-image"},q3=["src","alt"],V3={key:1,class:"category-placeholder"},N3={class:"category-info"},H3={class:"category-name"},B3={key:3,class:"category-playlists-section"},K3={class:"category-playlists-header"},j3={key:0,class:"loading-container"},G3={key:1,class:"empty-state"},Q3={key:2,class:"playlists-grid"},W3=["onClick"],X3={class:"playlist-image"},Y3=["src","alt"],J3={key:1,class:"playlist-placeholder"},Z3={class:"playlist-info"},e7={class:"playlist-name"},t7={key:0,class:"playlist-description"},s7={class:"playlist-tracks"},r7={__name:"Categories",setup(t){const e=me(),s=U([]),r=U([]),o=U(null),n=U(!1),i=U(!1),a=U(0),c=U({total:0,limit:50,next:null,previous:null}),u=E(()=>"categories"),d=async(p=0)=>{n.value=!0;try{p===0&&(e.clearSection(u.value),s.value=[]);const _=await e.getCategories(u.value,p,c.value.limit);c.value={total:_.total,limit:c.value.limit,next:_.next,previous:_.previous},a.value=p;const k=e.getSectionData(u.value);s.value=k.filter(S=>S.type==="category")}catch(_){console.error("Failed to load categories:",_)}finally{n.value=!1}},f=()=>{c.value.next&&!n.value&&d(a.value+c.value.limit)},y=()=>{if(c.value.previous&&!n.value){const p=Math.max(0,a.value-c.value.limit);d(p)}},b=async p=>{o.value=p,i.value=!0,r.value=[];try{const _=await e.getCategoryPlaylists(p.id,"categoryPlaylists",p.id),k=e.getSectionData("categoryPlaylists");r.value=k.filter(S=>S.type==="category-playlist"&&S.parentKey===p.id)}catch(_){console.error("Failed to load category playlists:",_)}finally{i.value=!1}},v=p=>{e.getPlaylistDetails(p,"categories",o.value.id)},m=p=>{p.target.style.display="none"};return Ce(()=>{d()}),(p,_)=>(h(),g("div",x3,[l("div",R3,[_[0]||(_[0]=l("h2",null,"Browse Categories",-1)),c.value.total>c.value.limit?(h(),g("div",M3,[l("button",{onClick:y,disabled:!c.value.previous||n.value,class:"pagination-btn"}," Previous ",8,E3),l("span",I3,M(a.value+1)+"-"+M(Math.min(a.value+c.value.limit,c.value.total))+" of "+M(c.value.total),1),l("button",{onClick:f,disabled:!c.value.next||n.value,class:"pagination-btn"}," Next ",8,L3)])):R("",!0)]),n.value?(h(),g("div",D3,_[1]||(_[1]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading categories...",-1)]))):s.value.length===0?(h(),g("div",z3,_[2]||(_[2]=[l("p",null,"No categories found.",-1)]))):(h(),g("div",O3,[(h(!0),g(j,null,te(s.value,k=>(h(),g("div",{key:k.id,class:"category-card",onClick:S=>b(k)},[l("div",F3,[k.icons&&k.icons.length>0?(h(),g("img",{key:0,src:k.icons[0].url,alt:k.name,onError:m},null,40,q3)):(h(),g("div",V3,[l("span",null,M(k.name.charAt(0).toUpperCase()),1)]))]),l("div",N3,[l("h3",H3,M(k.name),1)])],8,U3))),128))])),o.value?(h(),g("div",B3,[l("div",K3,[l("h3",null,M(o.value.name)+" Playlists",1)]),i.value?(h(),g("div",j3,_[3]||(_[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading playlists...",-1)]))):r.value.length===0?(h(),g("div",G3,_[4]||(_[4]=[l("p",null,"No playlists found for this category.",-1)]))):(h(),g("div",Q3,[(h(!0),g(j,null,te(r.value,k=>(h(),g("div",{key:k.id,class:"playlist-card",onClick:S=>v(k)},[l("div",X3,[k.images&&k.images.length>0?(h(),g("img",{key:0,src:k.images[0].url,alt:k.name,onError:m},null,40,Y3)):(h(),g("div",J3,[l("span",null,M(k.name.charAt(0).toUpperCase()),1)]))]),l("div",Z3,[l("h4",e7,M(k.name),1),k.description?(h(),g("p",t7,M(k.description),1)):R("",!0),l("p",s7,M(k.totalTracks)+" tracks",1)])],8,W3))),128))]))])):R("",!0)]))}},o7=ke(r7,[["__scopeId","data-v-e7315908"]]),n7={class:"main-layout"},i7={class:"content-wrapper"},l7={class:"modern-content"},a7={class:"content-container"},c7={key:0},u7={id:"yourplaylists",class:"flex-stretch"},d7={key:1},f7={key:2},p7={key:3},h7={key:4},m7={key:5},v7={key:6},g7={key:7},y7={id:"sptplaylists",class:"flex-stretch"},w7={key:8},b7={key:9},k7={class:"flex-stretch"},_7={key:10,class:"search-section"},S7={class:"search-header"},A7={class:"search-title"},T7={class:"search-grid"},$7={__name:"MainLayout",setup(t){const e=he(),s=ve(),r=De(),o=me(),{currentServiceType:n}=Yt(e),{selectedItem:i,selectedTopMenu:a,selectedPersonalPlaylist:c,selectedSpotifyPlaylist:u,selectedGenrePlaylist:d,setSelectedItem:f,setSelectedTopMenu:y}=Ve(),{search:b}=ey(),v=U(localStorage.getItem("welcome-modal-seen")!=="true"),m=U(!1),p=U(!1);ws(n,G=>{if(console.log("Service changed to:",G),G==="deezer"){const O=localStorage.getItem("deezer-user-id");console.log("Deezer User ID in localStorage:",O),O?console.log("Deezer User ID found, not showing modal"):(console.log("Showing Deezer welcome modal"),m.value=!0),(a.value===2||a.value===3)&&(console.log("Redirecting from Top Artists/Tracks to Your Playlists for Deezer"),y(1))}},{immediate:!0});const _=async(G,O)=>{if(o.getIsGloballyLoading){console.log("Track click blocked - global loading in progress");return}f(G.id);const q=z(a.value);await o.getTrackDetails(G,q),a.value in[1,8]?r.addToQueue(G.track):r.addToQueue(G)},k=G=>{s.handleAudioHover(G)},S=G=>{s.handleAudioLeave(G)},A=async(G,O)=>{if(o.getIsGloballyLoading){console.log("Artist click blocked - global loading in progress");return}f(G.id);const q=z(a.value);await o.getArtistDetails(G,q)},x=G=>{s.handleAudioHover(G)},P=G=>{s.handleAudioLeave(G)};async function I(G,O){const q=z(a.value);await o.getPlaylistDetails(G,q)}async function T(G,O){if(o.getIsGloballyLoading){console.log("Genre playlist click blocked - global loading in progress");return}const q=z(a.value);await o.getGenreDetails(G,q)}const z=G=>{switch(G){case 1:return"yourPlaylists";case 2:return"topArtists";case 3:return"topTracks";case 4:return"savedAlbums";case 5:return"savedTracks";case 6:return"followedArtists";case 7:return"newReleases";case 8:return"spotifyPlaylists";case 9:return"categories";case 11:return"genres";case 10:return"search";default:return"search"}},L=async(G,O)=>{O.stopPropagation(),y(G);try{switch(G){case 1:o.clearSection("yourPlaylists"),(!e.getPlaylists||e.getPlaylists.length===0)&&await e.fetchPlaylists(0);break;case 2:o.clearSection("topArtists"),e.setSelectedArtistsRange(1),(!e.getTopArtistsShort||e.getTopArtistsShort.length===0)&&await e.fetchTopArtists("short_term");break;case 3:o.clearSection("topTracks"),e.setSelectedTracksRange(1),(!e.getTopTracksShort||e.getTopTracksShort.length===0)&&await e.fetchTopTracks("short_term");break;case 4:o.clearSection("savedAlbums"),(!e.getSavedAlbums||e.getSavedAlbums.length===0)&&await e.fetchSavedAlbums(0);break;case 5:o.clearSection("savedTracks"),(!e.getSavedTracks||e.getSavedTracks.length===0)&&await e.fetchSavedTracks(0);break;case 6:o.clearSection("followedArtists"),(!e.getFollowedArtists||e.getFollowedArtists.length===0)&&await e.fetchFollowedArtists();break;case 7:o.clearSection("newReleases"),(!e.getNewReleases||e.getNewReleases.length===0)&&await e.fetchNewReleases(0);break;case 8:o.clearSection("spotifyPlaylists"),(!e.getSpotifyPlaylists||e.getSpotifyPlaylists.length===0)&&await e.fetchSpotifyPlaylists(0);break;case 9:o.clearSection("categories");break;case 11:(!e.getGenrePlaylists||e.getGenrePlaylists.length===0)&&await e.fetchGenrePlaylists(0);break}}catch(q){console.error("Failed to fetch data for tab:",G,q)}},se=G=>{a.value=10,e.search(G.target.value)},fe=async(G,O)=>{o.sections.search=[],O==="song"?(f("song"+G.id),await o.getTrackDetails(G,"search")):O==="artist"?(f("artist"+G.id),await o.getArtistDetails(G,"search")):O==="album"?(f("album"+G.id),await o.getAlbumDetails(G,"search")):O==="playlist"&&(f("playlist"+G.id),await o.getPlaylistDetails(G,"search"))},ze=()=>{v.value=!1,localStorage.setItem("welcome-modal-seen","true")},Fe=()=>{m.value=!1},Oe=G=>{console.log("Deezer user saved:",G)},xe=()=>{p.value=!0};return(G,O)=>(h(),g(j,null,[W(ok),W(gk),l("div",n7,[W(Z2,{"is-visible":v.value,onClose:ze},null,8,["is-visible"]),W(db,{"is-visible":m.value,onClose:Fe,onUserSaved:Oe},null,8,["is-visible"]),W(Pb,{"is-visible":p.value,onClose:O[0]||(O[0]=q=>p.value=!1)},null,8,["is-visible"]),l("div",i7,[W(E2,{"selected-tab":w(a),"search-query":w(b),onTabClick:L,onSearch:se},null,8,["selected-tab","search-query"]),l("div",l7,[l("div",a7,[w(a)===1?(h(),g("div",c7,[l("div",u7,[w(e).isLoading?(h(),Z(Ct,{key:0})):R("",!0),W(go,{playlists:w(e).getPlaylists,"selected-playlist":w(c),title:"Your Personal Playlists",placeholder:"Search personal playlists...",onPlaylistSelect:I},null,8,["playlists","selected-playlist"])])])):R("",!0),w(a)===2&&w(n)!=="deezer"?(h(),g("div",d7,[W(Hk,{"selected-top-menu":w(a),onArtistClick:A,onArtistHover:x,onArtistLeave:P},null,8,["selected-top-menu"])])):R("",!0),w(a)===3&&w(n)!=="deezer"?(h(),g("div",f7,[W(Ik,{"selected-top-menu":w(a),onTrackClick:_,onTrackHover:k,onTrackLeave:S},null,8,["selected-top-menu"])])):R("",!0),w(a)===4?(h(),g("div",p7,[W(s3,{"selected-top-menu":w(a),onAlbumClick:O[1]||(O[1]=async(q,Ie)=>{w(o).getIsGloballyLoading||(w(f)("4"+q.id),await w(o).getAlbumDetails(q,"savedAlbums"))})},null,8,["selected-top-menu"])])):R("",!0),w(a)===5?(h(),g("div",h7,[W(h3,{"selected-top-menu":w(a),onTrackClick:O[2]||(O[2]=async(q,Ie)=>{w(o).getIsGloballyLoading||(w(f)("5"+q.id),await w(o).getTrackDetails(q,"savedTracks"),w(r).addToQueue(q))}),onTrackHover:k,onTrackLeave:S},null,8,["selected-top-menu"])])):R("",!0),w(a)===6?(h(),g("div",m7,[W(k3,{"selected-top-menu":w(a),onArtistClick:A,onArtistHover:x,onArtistLeave:P},null,8,["selected-top-menu"])])):R("",!0),w(a)===7?(h(),g("div",v7,[W(P3,{"selected-top-menu":w(a),onAlbumClick:O[3]||(O[3]=async(q,Ie)=>{w(o).getIsGloballyLoading||(w(f)("7"+q.id),await w(o).getAlbumDetails(q,"newReleases"))}),onAlbumHover:k,onAlbumLeave:S},null,8,["selected-top-menu"])])):R("",!0),w(a)===8?(h(),g("div",g7,[w(e).isLoading?(h(),Z(Ct,{key:0})):R("",!0),we(l("div",y7,[W(go,{playlists:w(e).getSpotifyPlaylists,"selected-playlist":w(u),title:w(n).charAt(0).toUpperCase()+w(n).slice(1)+" Playlists",placeholder:"Search Spotify playlists...",onPlaylistSelect:I},null,8,["playlists","selected-playlist","title"])],512),[[Gt,w(a)===8]])])):R("",!0),w(a)===9?(h(),g("div",w7,[W(o7)])):R("",!0),w(a)===11?(h(),g("div",b7,[w(e).isLoading?(h(),Z(Ct,{key:0})):R("",!0),we(l("div",k7,[W(go,{playlists:w(e).getGenrePlaylists,"selected-playlist":w(d),title:"Genre Playlists",placeholder:"Search genre playlists...",onPlaylistSelect:T},null,8,["playlists","selected-playlist"])],512),[[Gt,!w(e).isLoading]])])):R("",!0),w(a)===10?(h(),g("div",_7,[w(e).isLoading?(h(),Z(Ct,{key:0})):R("",!0),l("div",S7,[l("h2",A7,M(w(e).searchInput),1)]),l("div",T7,[W(fr,{title:"Songs",items:w(e).getSearchTracks,type:"song","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:O[4]||(O[4]=async(q,Ie)=>{w(o).getIsGloballyLoading||await fe(q,"song")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"]),W(fr,{title:"Artists",items:w(e).getSearchArtists,type:"artist","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:O[5]||(O[5]=async(q,Ie)=>{w(o).getIsGloballyLoading||await fe(q,"artist")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"]),W(fr,{title:"Albums",items:w(e).getSearchAlbums,type:"album","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:O[6]||(O[6]=async(q,Ie)=>{w(o).getIsGloballyLoading||await fe(q,"album")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"]),W(fr,{title:"Playlists",items:w(e).getSearchPlaylists,type:"playlist","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:O[7]||(O[7]=async(q,Ie)=>{w(o).getIsGloballyLoading||await fe(q,"playlist")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"])])])):R("",!0)]),W(t2,{num:w(a)},null,8,["num"])]),W(S2,{onOpenServiceSelector:xe})])]),W(ra)],64))}},C7={key:0,class:"container"},P7={__name:"App",setup(t){return(e,s)=>(h(),g(j,null,[w(Fo)()?R("",!0):(h(),g("div",C7,[W($7)])),w(Fo)()?(h(),Z(Zg,{key:1})):R("",!0)],64))}};function x7(){const t=oa();localStorage.setItem("user-theme",t),document.documentElement.className=t}x7();const R7=Nu(),M7=zu(P7);M7.use(R7).mount("#app");Hh().then(t=>{t?console.log("Music store initialization completed"):console.warn("Music store initialization failed")});
