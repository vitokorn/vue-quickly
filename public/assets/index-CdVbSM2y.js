var fa=Object.defineProperty;var pa=(t,e,s)=>e in t?fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var lr=(t,e,s)=>pa(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function jo(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Se={},gs=[],xt=()=>{},ma=()=>!1,Dr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Go=t=>t.startsWith("onUpdate:"),Ye=Object.assign,Qo=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},ha=Object.prototype.hasOwnProperty,Ae=(t,e)=>ha.call(t,e),ne=Array.isArray,ys=t=>Xs(t)==="[object Map]",Ts=t=>Xs(t)==="[object Set]",_n=t=>Xs(t)==="[object Date]",de=t=>typeof t=="function",Fe=t=>typeof t=="string",yt=t=>typeof t=="symbol",Ie=t=>t!==null&&typeof t=="object",hi=t=>(Ie(t)||de(t))&&de(t.then)&&de(t.catch),vi=Object.prototype.toString,Xs=t=>vi.call(t),va=t=>Xs(t).slice(8,-1),gi=t=>Xs(t)==="[object Object]",Wo=t=>Fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Us=jo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},ga=/-(\w)/g,Ut=zr(t=>t.replace(ga,(e,s)=>s?s.toUpperCase():"")),ya=/\B([A-Z])/g,Xt=zr(t=>t.replace(ya,"-$1").toLowerCase()),yi=zr(t=>t.charAt(0).toUpperCase()+t.slice(1)),lo=zr(t=>t?`on${yi(t)}`:""),rt=(t,e)=>!Object.is(t,e),mr=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},$o=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},_r=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Sn;const Ur=()=>Sn||(Sn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $e(t){if(ne(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],o=Fe(r)?_a(r):$e(r);if(o)for(const n in o)e[n]=o[n]}return e}else if(Fe(t)||Ie(t))return t}const wa=/;(?![^(]*\))/g,ba=/:([^]+)/,ka=/\/\*[^]*?\*\//g;function _a(t){const e={};return t.replace(ka,"").split(wa).forEach(s=>{if(s){const r=s.split(ba);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function K(t){let e="";if(Fe(t))e=t;else if(ne(t))for(let s=0;s<t.length;s++){const r=K(t[s]);r&&(e+=r+" ")}else if(Ie(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Sa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ta=jo(Sa);function wi(t){return!!t||t===""}function Aa(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=as(t[r],e[r]);return s}function as(t,e){if(t===e)return!0;let s=_n(t),r=_n(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=yt(t),r=yt(e),s||r)return t===e;if(s=ne(t),r=ne(e),s||r)return s&&r?Aa(t,e):!1;if(s=Ie(t),r=Ie(e),s||r){if(!s||!r)return!1;const o=Object.keys(t).length,n=Object.keys(e).length;if(o!==n)return!1;for(const i in t){const a=t.hasOwnProperty(i),c=e.hasOwnProperty(i);if(a&&!c||!a&&c||!as(t[i],e[i]))return!1}}return String(t)===String(e)}function Yo(t,e){return t.findIndex(s=>as(s,e))}const bi=t=>!!(t&&t.__v_isRef===!0),M=t=>Fe(t)?t:t==null?"":ne(t)||Ie(t)&&(t.toString===vi||!de(t.toString))?bi(t)?M(t.value):JSON.stringify(t,ki,2):String(t),ki=(t,e)=>bi(e)?ki(t,e.value):ys(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,o],n)=>(s[ao(r,n)+" =>"]=o,s),{})}:Ts(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>ao(s))}:yt(e)?ao(e):Ie(e)&&!ne(e)&&!gi(e)?String(e):e,ao=(t,e="")=>{var s;return yt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ke;class _i{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ke,!e&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ke;try{return Ke=this,e()}finally{Ke=s}}}on(){++this._on===1&&(this.prevScope=Ke,Ke=this)}off(){this._on>0&&--this._on===0&&(Ke=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Si(t){return new _i(t)}function Ti(){return Ke}function $a(t,e=!1){Ke&&Ke.cleanups.push(t)}let Ee;const co=new WeakSet;class Ai{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ke&&Ke.active&&Ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,co.has(this)&&(co.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ci(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Tn(this),Pi(this);const e=Ee,s=gt;Ee=this,gt=!0;try{return this.fn()}finally{xi(this),Ee=e,gt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Zo(e);this.deps=this.depsTail=void 0,Tn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?co.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Co(this)&&this.run()}get dirty(){return Co(this)}}let $i=0,Os,Fs;function Ci(t,e=!1){if(t.flags|=8,e){t.next=Fs,Fs=t;return}t.next=Os,Os=t}function Xo(){$i++}function Jo(){if(--$i>0)return;if(Fs){let e=Fs;for(Fs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Os;){let e=Os;for(Os=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function Pi(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xi(t){let e,s=t.depsTail,r=s;for(;r;){const o=r.prevDep;r.version===-1?(r===s&&(s=o),Zo(r),Ca(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}t.deps=e,t.depsTail=s}function Co(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ri(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ri(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ks)||(t.globalVersion=Ks,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Co(t))))return;t.flags|=2;const e=t.dep,s=Ee,r=gt;Ee=t,gt=!0;try{Pi(t);const o=t.fn(t._value);(e.version===0||rt(o,t._value))&&(t.flags|=128,t._value=o,e.version++)}catch(o){throw e.version++,o}finally{Ee=s,gt=r,xi(t),t.flags&=-3}}function Zo(t,e=!1){const{dep:s,prevSub:r,nextSub:o}=t;if(r&&(r.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let n=s.computed.deps;n;n=n.nextDep)Zo(n,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ca(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let gt=!0;const Mi=[];function Ot(){Mi.push(gt),gt=!1}function Ft(){const t=Mi.pop();gt=t===void 0?!0:t}function Tn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Ee;Ee=void 0;try{e()}finally{Ee=s}}}let Ks=0;class Pa{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Or{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ee||!gt||Ee===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ee)s=this.activeLink=new Pa(Ee,this),Ee.deps?(s.prevDep=Ee.depsTail,Ee.depsTail.nextDep=s,Ee.depsTail=s):Ee.deps=Ee.depsTail=s,Ei(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=Ee.depsTail,s.nextDep=void 0,Ee.depsTail.nextDep=s,Ee.depsTail=s,Ee.deps===s&&(Ee.deps=r)}return s}trigger(e){this.version++,Ks++,this.notify(e)}notify(e){Xo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Jo()}}}function Ei(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ei(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Sr=new WeakMap,os=Symbol(""),Po=Symbol(""),js=Symbol("");function je(t,e,s){if(gt&&Ee){let r=Sr.get(t);r||Sr.set(t,r=new Map);let o=r.get(s);o||(r.set(s,o=new Or),o.map=r,o.key=s),o.track()}}function It(t,e,s,r,o,n){const i=Sr.get(t);if(!i){Ks++;return}const a=c=>{c&&c.trigger()};if(Xo(),e==="clear")i.forEach(a);else{const c=ne(t),u=c&&Wo(s);if(c&&s==="length"){const d=Number(r);i.forEach((f,y)=>{(y==="length"||y===js||!yt(y)&&y>=d)&&a(f)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),u&&a(i.get(js)),e){case"add":c?u&&a(i.get("length")):(a(i.get(os)),ys(t)&&a(i.get(Po)));break;case"delete":c||(a(i.get(os)),ys(t)&&a(i.get(Po)));break;case"set":ys(t)&&a(i.get(os));break}}Jo()}function xa(t,e){const s=Sr.get(t);return s&&s.get(e)}function ms(t){const e=be(t);return e===t?e:(je(e,"iterate",js),mt(t)?e:e.map(Ve))}function Fr(t){return je(t=be(t),"iterate",js),t}const Ra={__proto__:null,[Symbol.iterator](){return uo(this,Symbol.iterator,Ve)},concat(...t){return ms(this).concat(...t.map(e=>ne(e)?ms(e):e))},entries(){return uo(this,"entries",t=>(t[1]=Ve(t[1]),t))},every(t,e){return Mt(this,"every",t,e,void 0,arguments)},filter(t,e){return Mt(this,"filter",t,e,s=>s.map(Ve),arguments)},find(t,e){return Mt(this,"find",t,e,Ve,arguments)},findIndex(t,e){return Mt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Mt(this,"findLast",t,e,Ve,arguments)},findLastIndex(t,e){return Mt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Mt(this,"forEach",t,e,void 0,arguments)},includes(...t){return fo(this,"includes",t)},indexOf(...t){return fo(this,"indexOf",t)},join(t){return ms(this).join(t)},lastIndexOf(...t){return fo(this,"lastIndexOf",t)},map(t,e){return Mt(this,"map",t,e,void 0,arguments)},pop(){return Es(this,"pop")},push(...t){return Es(this,"push",t)},reduce(t,...e){return An(this,"reduce",t,e)},reduceRight(t,...e){return An(this,"reduceRight",t,e)},shift(){return Es(this,"shift")},some(t,e){return Mt(this,"some",t,e,void 0,arguments)},splice(...t){return Es(this,"splice",t)},toReversed(){return ms(this).toReversed()},toSorted(t){return ms(this).toSorted(t)},toSpliced(...t){return ms(this).toSpliced(...t)},unshift(...t){return Es(this,"unshift",t)},values(){return uo(this,"values",Ve)}};function uo(t,e,s){const r=Fr(t),o=r[e]();return r!==t&&!mt(t)&&(o._next=o.next,o.next=()=>{const n=o._next();return n.value&&(n.value=s(n.value)),n}),o}const Ma=Array.prototype;function Mt(t,e,s,r,o,n){const i=Fr(t),a=i!==t&&!mt(t),c=i[e];if(c!==Ma[e]){const f=c.apply(t,n);return a?Ve(f):f}let u=s;i!==t&&(a?u=function(f,y){return s.call(this,Ve(f),y,t)}:s.length>2&&(u=function(f,y){return s.call(this,f,y,t)}));const d=c.call(i,u,r);return a&&o?o(d):d}function An(t,e,s,r){const o=Fr(t);let n=s;return o!==t&&(mt(t)?s.length>3&&(n=function(i,a,c){return s.call(this,i,a,c,t)}):n=function(i,a,c){return s.call(this,i,Ve(a),c,t)}),o[e](n,...r)}function fo(t,e,s){const r=be(t);je(r,"iterate",js);const o=r[e](...s);return(o===-1||o===!1)&&sn(s[0])?(s[0]=be(s[0]),r[e](...s)):o}function Es(t,e,s=[]){Ot(),Xo();const r=be(t)[e].apply(t,s);return Jo(),Ft(),r}const Ea=jo("__proto__,__v_isRef,__isVue"),Ii=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(yt));function Ia(t){yt(t)||(t=String(t));const e=be(this);return je(e,"has",t),e.hasOwnProperty(t)}class Li{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const o=this._isReadonly,n=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return n;if(s==="__v_raw")return r===(o?n?Ha:Oi:n?Ui:zi).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const i=ne(e);if(!o){let c;if(i&&(c=Ra[s]))return c;if(s==="hasOwnProperty")return Ia}const a=Reflect.get(e,s,xe(e)?e:r);return(yt(s)?Ii.has(s):Ea(s))||(o||je(e,"get",s),n)?a:xe(a)?i&&Wo(s)?a:a.value:Ie(a)?o?Fi(a):Js(a):a}}class Di extends Li{constructor(e=!1){super(!1,e)}set(e,s,r,o){let n=e[s];if(!this._isShallow){const c=Qt(n);if(!mt(r)&&!Qt(r)&&(n=be(n),r=be(r)),!ne(e)&&xe(n)&&!xe(r))return c?!1:(n.value=r,!0)}const i=ne(e)&&Wo(s)?Number(s)<e.length:Ae(e,s),a=Reflect.set(e,s,r,xe(e)?e:o);return e===be(o)&&(i?rt(r,n)&&It(e,"set",s,r):It(e,"add",s,r)),a}deleteProperty(e,s){const r=Ae(e,s);e[s];const o=Reflect.deleteProperty(e,s);return o&&r&&It(e,"delete",s,void 0),o}has(e,s){const r=Reflect.has(e,s);return(!yt(s)||!Ii.has(s))&&je(e,"has",s),r}ownKeys(e){return je(e,"iterate",ne(e)?"length":os),Reflect.ownKeys(e)}}class La extends Li{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Da=new Di,za=new La,Ua=new Di(!0);const xo=t=>t,ar=t=>Reflect.getPrototypeOf(t);function Oa(t,e,s){return function(...r){const o=this.__v_raw,n=be(o),i=ys(n),a=t==="entries"||t===Symbol.iterator&&i,c=t==="keys"&&i,u=o[t](...r),d=s?xo:e?Tr:Ve;return!e&&je(n,"iterate",c?Po:os),{next(){const{value:f,done:y}=u.next();return y?{value:f,done:y}:{value:a?[d(f[0]),d(f[1])]:d(f),done:y}},[Symbol.iterator](){return this}}}}function cr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Fa(t,e){const s={get(o){const n=this.__v_raw,i=be(n),a=be(o);t||(rt(o,a)&&je(i,"get",o),je(i,"get",a));const{has:c}=ar(i),u=e?xo:t?Tr:Ve;if(c.call(i,o))return u(n.get(o));if(c.call(i,a))return u(n.get(a));n!==i&&n.get(o)},get size(){const o=this.__v_raw;return!t&&je(be(o),"iterate",os),Reflect.get(o,"size",o)},has(o){const n=this.__v_raw,i=be(n),a=be(o);return t||(rt(o,a)&&je(i,"has",o),je(i,"has",a)),o===a?n.has(o):n.has(o)||n.has(a)},forEach(o,n){const i=this,a=i.__v_raw,c=be(a),u=e?xo:t?Tr:Ve;return!t&&je(c,"iterate",os),a.forEach((d,f)=>o.call(n,u(d),u(f),i))}};return Ye(s,t?{add:cr("add"),set:cr("set"),delete:cr("delete"),clear:cr("clear")}:{add(o){!e&&!mt(o)&&!Qt(o)&&(o=be(o));const n=be(this);return ar(n).has.call(n,o)||(n.add(o),It(n,"add",o,o)),this},set(o,n){!e&&!mt(n)&&!Qt(n)&&(n=be(n));const i=be(this),{has:a,get:c}=ar(i);let u=a.call(i,o);u||(o=be(o),u=a.call(i,o));const d=c.call(i,o);return i.set(o,n),u?rt(n,d)&&It(i,"set",o,n):It(i,"add",o,n),this},delete(o){const n=be(this),{has:i,get:a}=ar(n);let c=i.call(n,o);c||(o=be(o),c=i.call(n,o)),a&&a.call(n,o);const u=n.delete(o);return c&&It(n,"delete",o,void 0),u},clear(){const o=be(this),n=o.size!==0,i=o.clear();return n&&It(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Oa(o,t,e)}),s}function en(t,e){const s=Fa(t,e);return(r,o,n)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(Ae(s,o)&&o in r?s:r,o,n)}const qa={get:en(!1,!1)},Va={get:en(!1,!0)},Na={get:en(!0,!1)};const zi=new WeakMap,Ui=new WeakMap,Oi=new WeakMap,Ha=new WeakMap;function Ba(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ka(t){return t.__v_skip||!Object.isExtensible(t)?0:Ba(va(t))}function Js(t){return Qt(t)?t:tn(t,!1,Da,qa,zi)}function ja(t){return tn(t,!1,Ua,Va,Ui)}function Fi(t){return tn(t,!0,za,Na,Oi)}function tn(t,e,s,r,o){if(!Ie(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=Ka(t);if(n===0)return t;const i=o.get(t);if(i)return i;const a=new Proxy(t,n===2?r:s);return o.set(t,a),a}function zt(t){return Qt(t)?zt(t.__v_raw):!!(t&&t.__v_isReactive)}function Qt(t){return!!(t&&t.__v_isReadonly)}function mt(t){return!!(t&&t.__v_isShallow)}function sn(t){return t?!!t.__v_raw:!1}function be(t){const e=t&&t.__v_raw;return e?be(e):t}function rn(t){return!Ae(t,"__v_skip")&&Object.isExtensible(t)&&$o(t,"__v_skip",!0),t}const Ve=t=>Ie(t)?Js(t):t,Tr=t=>Ie(t)?Fi(t):t;function xe(t){return t?t.__v_isRef===!0:!1}function z(t){return Ga(t,!1)}function Ga(t,e){return xe(t)?t:new Qa(t,e)}class Qa{constructor(e,s){this.dep=new Or,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:be(e),this._value=s?e:Ve(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||mt(e)||Qt(e);e=r?e:be(e),rt(e,s)&&(this._rawValue=e,this._value=r?e:Ve(e),this.dep.trigger())}}function w(t){return xe(t)?t.value:t}const Wa={get:(t,e,s)=>e==="__v_raw"?t:w(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const o=t[e];return xe(o)&&!xe(s)?(o.value=s,!0):Reflect.set(t,e,s,r)}};function qi(t){return zt(t)?t:new Proxy(t,Wa)}class Ya{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new Or,{get:r,set:o}=e(s.track.bind(s),s.trigger.bind(s));this._get=r,this._set=o}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Xa(t){return new Ya(t)}function Ja(t){const e=ne(t)?new Array(t.length):{};for(const s in t)e[s]=Vi(t,s);return e}class Za{constructor(e,s,r){this._object=e,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return xa(be(this._object),this._key)}}class ec{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function tc(t,e,s){return xe(t)?t:de(t)?new ec(t):Ie(t)&&arguments.length>1?Vi(t,e,s):z(t)}function Vi(t,e,s){const r=t[e];return xe(r)?r:new Za(t,e,s)}class sc{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Or(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ee!==this)return Ci(this,!0),!0}get value(){const e=this.dep.track();return Ri(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function rc(t,e,s=!1){let r,o;return de(t)?r=t:(r=t.get,o=t.set),new sc(r,o,s)}const ur={},Ar=new WeakMap;let ss;function oc(t,e=!1,s=ss){if(s){let r=Ar.get(s);r||Ar.set(s,r=[]),r.push(t)}}function nc(t,e,s=Se){const{immediate:r,deep:o,once:n,scheduler:i,augmentJob:a,call:c}=s,u=T=>o?T:mt(T)||o===!1||o===0?Lt(T,1):Lt(T);let d,f,y,b,v=!1,m=!1;if(xe(t)?(f=()=>t.value,v=mt(t)):zt(t)?(f=()=>u(t),v=!0):ne(t)?(m=!0,v=t.some(T=>zt(T)||mt(T)),f=()=>t.map(T=>{if(xe(T))return T.value;if(zt(T))return u(T);if(de(T))return c?c(T,2):T()})):de(t)?e?f=c?()=>c(t,2):t:f=()=>{if(y){Ot();try{y()}finally{Ft()}}const T=ss;ss=d;try{return c?c(t,3,[b]):t(b)}finally{ss=T}}:f=xt,e&&o){const T=f,P=o===!0?1/0:o;f=()=>Lt(T(),P)}const p=Ti(),k=()=>{d.stop(),p&&p.active&&Qo(p.effects,d)};if(n&&e){const T=e;e=(...P)=>{T(...P),k()}}let _=m?new Array(t.length).fill(ur):ur;const S=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(e){const P=d.run();if(o||v||(m?P.some((x,D)=>rt(x,_[D])):rt(P,_))){y&&y();const x=ss;ss=d;try{const D=[P,_===ur?void 0:m&&_[0]===ur?[]:_,b];_=P,c?c(e,3,D):e(...D)}finally{ss=x}}}else d.run()};return a&&a(S),d=new Ai(f),d.scheduler=i?()=>i(S,!1):S,b=T=>oc(T,!1,d),y=d.onStop=()=>{const T=Ar.get(d);if(T){if(c)c(T,4);else for(const P of T)P();Ar.delete(d)}},e?r?S(!0):_=d.run():i?i(S.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function Lt(t,e=1/0,s){if(e<=0||!Ie(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,xe(t))Lt(t.value,e,s);else if(ne(t))for(let r=0;r<t.length;r++)Lt(t[r],e,s);else if(Ts(t)||ys(t))t.forEach(r=>{Lt(r,e,s)});else if(gi(t)){for(const r in t)Lt(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Lt(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zs(t,e,s,r){try{return r?t(...r):t()}catch(o){qr(o,e,s)}}function Rt(t,e,s,r){if(de(t)){const o=Zs(t,e,s,r);return o&&hi(o)&&o.catch(n=>{qr(n,e,s)}),o}if(ne(t)){const o=[];for(let n=0;n<t.length;n++)o.push(Rt(t[n],e,s,r));return o}}function qr(t,e,s,r=!0){const o=e?e.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||Se;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}a=a.parent}if(n){Ot(),Zs(n,null,10,[t,c,u]),Ft();return}}ic(t,s,o,r,i)}function ic(t,e,s,r=!0,o=!1){if(o)throw t;console.error(t)}const Je=[];let At=-1;const ws=[];let Kt=null,vs=0;const Ni=Promise.resolve();let $r=null;function at(t){const e=$r||Ni;return t?e.then(this?t.bind(this):t):e}function lc(t){let e=At+1,s=Je.length;for(;e<s;){const r=e+s>>>1,o=Je[r],n=Gs(o);n<t||n===t&&o.flags&2?e=r+1:s=r}return e}function on(t){if(!(t.flags&1)){const e=Gs(t),s=Je[Je.length-1];!s||!(t.flags&2)&&e>=Gs(s)?Je.push(t):Je.splice(lc(e),0,t),t.flags|=1,Hi()}}function Hi(){$r||($r=Ni.then(Ki))}function ac(t){ne(t)?ws.push(...t):Kt&&t.id===-1?Kt.splice(vs+1,0,t):t.flags&1||(ws.push(t),t.flags|=1),Hi()}function $n(t,e,s=At+1){for(;s<Je.length;s++){const r=Je[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Je.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Bi(t){if(ws.length){const e=[...new Set(ws)].sort((s,r)=>Gs(s)-Gs(r));if(ws.length=0,Kt){Kt.push(...e);return}for(Kt=e,vs=0;vs<Kt.length;vs++){const s=Kt[vs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Kt=null,vs=0}}const Gs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ki(t){try{for(At=0;At<Je.length;At++){const e=Je[At];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Zs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;At<Je.length;At++){const e=Je[At];e&&(e.flags&=-2)}At=-1,Je.length=0,Bi(),$r=null,(Je.length||ws.length)&&Ki()}}let Qe=null,ji=null;function Cr(t){const e=Qe;return Qe=t,ji=t&&t.type.__scopeId||null,e}function cc(t,e=Qe,s){if(!e||t._n)return t;const r=(...o)=>{r._d&&Ln(-1);const n=Cr(e);let i;try{i=t(...o)}finally{Cr(n),r._d&&Ln(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function ge(t,e){if(Qe===null)return t;const s=Br(Qe),r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[n,i,a,c=Se]=e[o];n&&(de(n)&&(n={mounted:n,updated:n}),n.deep&&Lt(i),r.push({dir:n,instance:s,value:i,oldValue:void 0,arg:a,modifiers:c}))}return t}function es(t,e,s,r){const o=t.dirs,n=e&&e.dirs;for(let i=0;i<o.length;i++){const a=o[i];n&&(a.oldValue=n[i].value);let c=a.dir[r];c&&(Ot(),Rt(c,s,8,[t.el,a,t,e]),Ft())}}const uc=Symbol("_vte"),dc=t=>t.__isTeleport;function nn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,nn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gi(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function qs(t,e,s,r,o=!1){if(ne(t)){t.forEach((v,m)=>qs(v,e&&(ne(e)?e[m]:e),s,r,o));return}if(bs(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&qs(t,e,s,r.component.subTree);return}const n=r.shapeFlag&4?Br(r.component):r.el,i=o?null:n,{i:a,r:c}=t,u=e&&e.r,d=a.refs===Se?a.refs={}:a.refs,f=a.setupState,y=be(f),b=f===Se?()=>!1:v=>Ae(y,v);if(u!=null&&u!==c&&(Fe(u)?(d[u]=null,b(u)&&(f[u]=null)):xe(u)&&(u.value=null)),de(c))Zs(c,a,12,[i,d]);else{const v=Fe(c),m=xe(c);if(v||m){const p=()=>{if(t.f){const k=v?b(c)?f[c]:d[c]:c.value;o?ne(k)&&Qo(k,n):ne(k)?k.includes(n)||k.push(n):v?(d[c]=[n],b(c)&&(f[c]=d[c])):(c.value=[n],t.k&&(d[t.k]=c.value))}else v?(d[c]=i,b(c)&&(f[c]=i)):m&&(c.value=i,t.k&&(d[t.k]=i))};i?(p.id=-1,dt(p,s)):p()}}}Ur().requestIdleCallback;Ur().cancelIdleCallback;const bs=t=>!!t.type.__asyncLoader,Qi=t=>t.type.__isKeepAlive;function fc(t,e){Wi(t,"a",e)}function pc(t,e){Wi(t,"da",e)}function Wi(t,e,s=Ze){const r=t.__wdc||(t.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Vr(e,r,s),s){let o=s.parent;for(;o&&o.parent;)Qi(o.parent.vnode)&&mc(r,e,s,o),o=o.parent}}function mc(t,e,s,r){const o=Vr(e,t,r,!0);Nt(()=>{Qo(r[e],o)},s)}function Vr(t,e,s=Ze,r=!1){if(s){const o=s[t]||(s[t]=[]),n=e.__weh||(e.__weh=(...i)=>{Ot();const a=er(s),c=Rt(e,s,t,i);return a(),Ft(),c});return r?o.unshift(n):o.push(n),n}}const Vt=t=>(e,s=Ze)=>{(!Ws||t==="sp")&&Vr(t,(...r)=>e(...r),s)},hc=Vt("bm"),Pe=Vt("m"),vc=Vt("bu"),gc=Vt("u"),yc=Vt("bum"),Nt=Vt("um"),wc=Vt("sp"),bc=Vt("rtg"),kc=Vt("rtc");function _c(t,e=Ze){Vr("ec",t,e)}const Sc=Symbol.for("v-ndc");function ee(t,e,s,r){let o;const n=s,i=ne(t);if(i||Fe(t)){const a=i&&zt(t);let c=!1,u=!1;a&&(c=!mt(t),u=Qt(t),t=Fr(t)),o=new Array(t.length);for(let d=0,f=t.length;d<f;d++)o[d]=e(c?u?Tr(Ve(t[d])):Ve(t[d]):t[d],d,void 0,n)}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=e(a+1,a,void 0,n)}else if(Ie(t))if(t[Symbol.iterator])o=Array.from(t,(a,c)=>e(a,c,void 0,n));else{const a=Object.keys(t);o=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const d=a[c];o[c]=e(t[d],d,c,n)}}else o=[];return o}function Ro(t,e,s={},r,o){if(Qe.ce||Qe.parent&&bs(Qe.parent)&&Qe.parent.ce)return e!=="default"&&(s.name=e),h(),J(j,null,[Q("slot",s,r&&r())],64);let n=t[e];n&&n._c&&(n._d=!1),h();const i=n&&Yi(n(s)),a=s.key||i&&i.key,c=J(j,{key:(a&&!yt(a)?a:`_${e}`)+(!i&&r?"_fb":"")},i||(r?r():[]),i&&t._===1?64:-2);return!o&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),n&&n._c&&(n._d=!0),c}function Yi(t){return t.some(e=>dn(e)?!(e.type===qt||e.type===j&&!Yi(e.children)):!0)?t:null}const Mo=t=>t?vl(t)?Br(t):Mo(t.parent):null,Vs=Ye(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Mo(t.parent),$root:t=>Mo(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ji(t),$forceUpdate:t=>t.f||(t.f=()=>{on(t.update)}),$nextTick:t=>t.n||(t.n=at.bind(t.proxy)),$watch:t=>Qc.bind(t)}),po=(t,e)=>t!==Se&&!t.__isScriptSetup&&Ae(t,e),Tc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:o,props:n,accessCache:i,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const b=i[e];if(b!==void 0)switch(b){case 1:return r[e];case 2:return o[e];case 4:return s[e];case 3:return n[e]}else{if(po(r,e))return i[e]=1,r[e];if(o!==Se&&Ae(o,e))return i[e]=2,o[e];if((u=t.propsOptions[0])&&Ae(u,e))return i[e]=3,n[e];if(s!==Se&&Ae(s,e))return i[e]=4,s[e];Eo&&(i[e]=0)}}const d=Vs[e];let f,y;if(d)return e==="$attrs"&&je(t.attrs,"get",""),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(s!==Se&&Ae(s,e))return i[e]=4,s[e];if(y=c.config.globalProperties,Ae(y,e))return y[e]},set({_:t},e,s){const{data:r,setupState:o,ctx:n}=t;return po(o,e)?(o[e]=s,!0):r!==Se&&Ae(r,e)?(r[e]=s,!0):Ae(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(n[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:o,propsOptions:n}},i){let a;return!!s[i]||t!==Se&&Ae(t,i)||po(e,i)||(a=n[0])&&Ae(a,i)||Ae(r,i)||Ae(Vs,i)||Ae(o.config.globalProperties,i)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Ae(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Pr(t){return ne(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}function Ac(t,e){return!t||!e?t||e:ne(t)&&ne(e)?t.concat(e):Ye({},Pr(t),Pr(e))}let Eo=!0;function $c(t){const e=Ji(t),s=t.proxy,r=t.ctx;Eo=!1,e.beforeCreate&&Cn(e.beforeCreate,t,"bc");const{data:o,computed:n,methods:i,watch:a,provide:c,inject:u,created:d,beforeMount:f,mounted:y,beforeUpdate:b,updated:v,activated:m,deactivated:p,beforeDestroy:k,beforeUnmount:_,destroyed:S,unmounted:T,render:P,renderTracked:x,renderTriggered:D,errorCaptured:A,serverPrefetch:O,expose:L,inheritAttrs:se,components:he,directives:Le,filters:qe}=e;if(u&&Cc(u,r,null),i)for(const me in i){const I=i[me];de(I)&&(r[me]=I.bind(s))}if(o){const me=o.call(s,s);Ie(me)&&(t.data=Js(me))}if(Eo=!0,n)for(const me in n){const I=n[me],q=de(I)?I.bind(s,s):de(I.get)?I.get.bind(s,s):xt,ie=!de(I)&&de(I.set)?I.set.bind(s):xt,Oe=E({get:q,set:ie});Object.defineProperty(r,me,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:Z=>Oe.value=Z})}if(a)for(const me in a)Xi(a[me],r,s,me);if(c){const me=de(c)?c.call(s):c;Reflect.ownKeys(me).forEach(I=>{Ic(I,me[I])})}d&&Cn(d,t,"c");function Re(me,I){ne(I)?I.forEach(q=>me(q.bind(s))):I&&me(I.bind(s))}if(Re(hc,f),Re(Pe,y),Re(vc,b),Re(gc,v),Re(fc,m),Re(pc,p),Re(_c,A),Re(kc,x),Re(bc,D),Re(yc,_),Re(Nt,T),Re(wc,O),ne(L))if(L.length){const me=t.exposed||(t.exposed={});L.forEach(I=>{Object.defineProperty(me,I,{get:()=>s[I],set:q=>s[I]=q,enumerable:!0})})}else t.exposed||(t.exposed={});P&&t.render===xt&&(t.render=P),se!=null&&(t.inheritAttrs=se),he&&(t.components=he),Le&&(t.directives=Le),O&&Gi(t)}function Cc(t,e,s=xt){ne(t)&&(t=Io(t));for(const r in t){const o=t[r];let n;Ie(o)?"default"in o?n=Ns(o.from||r,o.default,!0):n=Ns(o.from||r):n=Ns(o),xe(n)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:i=>n.value=i}):e[r]=n}}function Cn(t,e,s){Rt(ne(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function Xi(t,e,s,r){let o=r.includes(".")?ul(s,r):()=>s[r];if(Fe(t)){const n=e[t];de(n)&&ks(o,n)}else if(de(t))ks(o,t.bind(s));else if(Ie(t))if(ne(t))t.forEach(n=>Xi(n,e,s,r));else{const n=de(t.handler)?t.handler.bind(s):e[t.handler];de(n)&&ks(o,n,t)}}function Ji(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:o,optionsCache:n,config:{optionMergeStrategies:i}}=t.appContext,a=n.get(e);let c;return a?c=a:!o.length&&!s&&!r?c=e:(c={},o.length&&o.forEach(u=>xr(c,u,i,!0)),xr(c,e,i)),Ie(e)&&n.set(e,c),c}function xr(t,e,s,r=!1){const{mixins:o,extends:n}=e;n&&xr(t,n,s,!0),o&&o.forEach(i=>xr(t,i,s,!0));for(const i in e)if(!(r&&i==="expose")){const a=Pc[i]||s&&s[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const Pc={data:Pn,props:xn,emits:xn,methods:zs,computed:zs,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:zs,directives:zs,watch:Rc,provide:Pn,inject:xc};function Pn(t,e){return e?t?function(){return Ye(de(t)?t.call(this,this):t,de(e)?e.call(this,this):e)}:e:t}function xc(t,e){return zs(Io(t),Io(e))}function Io(t){if(ne(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Xe(t,e){return t?[...new Set([].concat(t,e))]:e}function zs(t,e){return t?Ye(Object.create(null),t,e):e}function xn(t,e){return t?ne(t)&&ne(e)?[...new Set([...t,...e])]:Ye(Object.create(null),Pr(t),Pr(e??{})):e}function Rc(t,e){if(!t)return e;if(!e)return t;const s=Ye(Object.create(null),t);for(const r in e)s[r]=Xe(t[r],e[r]);return s}function Zi(){return{app:null,config:{isNativeTag:ma,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mc=0;function Ec(t,e){return function(r,o=null){de(r)||(r=Ye({},r)),o!=null&&!Ie(o)&&(o=null);const n=Zi(),i=new WeakSet,a=[];let c=!1;const u=n.app={_uid:Mc++,_component:r,_props:o,_container:null,_context:n,_instance:null,version:pu,get config(){return n.config},set config(d){},use(d,...f){return i.has(d)||(d&&de(d.install)?(i.add(d),d.install(u,...f)):de(d)&&(i.add(d),d(u,...f))),u},mixin(d){return n.mixins.includes(d)||n.mixins.push(d),u},component(d,f){return f?(n.components[d]=f,u):n.components[d]},directive(d,f){return f?(n.directives[d]=f,u):n.directives[d]},mount(d,f,y){if(!c){const b=u._ceVNode||Q(r,o);return b.appContext=n,y===!0?y="svg":y===!1&&(y=void 0),t(b,d,y),c=!0,u._container=d,d.__vue_app__=u,Br(b.component)}},onUnmount(d){a.push(d)},unmount(){c&&(Rt(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return n.provides[d]=f,u},runWithContext(d){const f=ns;ns=u;try{return d()}finally{ns=f}}};return u}}let ns=null;function Ic(t,e){if(Ze){let s=Ze.provides;const r=Ze.parent&&Ze.parent.provides;r===s&&(s=Ze.provides=Object.create(r)),s[t]=e}}function Ns(t,e,s=!1){const r=pn();if(r||ns){let o=ns?ns._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return s&&de(e)?e.call(r&&r.proxy):e}}function Lc(){return!!(pn()||ns)}const el={},tl=()=>Object.create(el),sl=t=>Object.getPrototypeOf(t)===el;function Dc(t,e,s,r=!1){const o={},n=tl();t.propsDefaults=Object.create(null),rl(t,e,o,n);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);s?t.props=r?o:ja(o):t.type.props?t.props=o:t.props=n,t.attrs=n}function zc(t,e,s,r){const{props:o,attrs:n,vnode:{patchFlag:i}}=t,a=be(o),[c]=t.propsOptions;let u=!1;if((r||i>0)&&!(i&16)){if(i&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let y=d[f];if(Nr(t.emitsOptions,y))continue;const b=e[y];if(c)if(Ae(n,y))b!==n[y]&&(n[y]=b,u=!0);else{const v=Ut(y);o[v]=Lo(c,a,v,b,t,!1)}else b!==n[y]&&(n[y]=b,u=!0)}}}else{rl(t,e,o,n)&&(u=!0);let d;for(const f in a)(!e||!Ae(e,f)&&((d=Xt(f))===f||!Ae(e,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Lo(c,a,f,void 0,t,!0)):delete o[f]);if(n!==a)for(const f in n)(!e||!Ae(e,f))&&(delete n[f],u=!0)}u&&It(t.attrs,"set","")}function rl(t,e,s,r){const[o,n]=t.propsOptions;let i=!1,a;if(e)for(let c in e){if(Us(c))continue;const u=e[c];let d;o&&Ae(o,d=Ut(c))?!n||!n.includes(d)?s[d]=u:(a||(a={}))[d]=u:Nr(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,i=!0)}if(n){const c=be(s),u=a||Se;for(let d=0;d<n.length;d++){const f=n[d];s[f]=Lo(o,c,f,u[f],t,!Ae(u,f))}}return i}function Lo(t,e,s,r,o,n){const i=t[s];if(i!=null){const a=Ae(i,"default");if(a&&r===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&de(c)){const{propsDefaults:u}=o;if(s in u)r=u[s];else{const d=er(o);r=u[s]=c.call(null,e),d()}}else r=c;o.ce&&o.ce._setProp(s,r)}i[0]&&(n&&!a?r=!1:i[1]&&(r===""||r===Xt(s))&&(r=!0))}return r}const Uc=new WeakMap;function ol(t,e,s=!1){const r=s?Uc:e.propsCache,o=r.get(t);if(o)return o;const n=t.props,i={},a=[];let c=!1;if(!de(t)){const d=f=>{c=!0;const[y,b]=ol(f,e,!0);Ye(i,y),b&&a.push(...b)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!n&&!c)return Ie(t)&&r.set(t,gs),gs;if(ne(n))for(let d=0;d<n.length;d++){const f=Ut(n[d]);Rn(f)&&(i[f]=Se)}else if(n)for(const d in n){const f=Ut(d);if(Rn(f)){const y=n[d],b=i[f]=ne(y)||de(y)?{type:y}:Ye({},y),v=b.type;let m=!1,p=!0;if(ne(v))for(let k=0;k<v.length;++k){const _=v[k],S=de(_)&&_.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(p=!1)}else m=de(v)&&v.name==="Boolean";b[0]=m,b[1]=p,(m||Ae(b,"default"))&&a.push(f)}}const u=[i,a];return Ie(t)&&r.set(t,u),u}function Rn(t){return t[0]!=="$"&&!Us(t)}const ln=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",an=t=>ne(t)?t.map($t):[$t(t)],Oc=(t,e,s)=>{if(e._n)return e;const r=cc((...o)=>an(e(...o)),s);return r._c=!1,r},nl=(t,e,s)=>{const r=t._ctx;for(const o in t){if(ln(o))continue;const n=t[o];if(de(n))e[o]=Oc(o,n,r);else if(n!=null){const i=an(n);e[o]=()=>i}}},il=(t,e)=>{const s=an(e);t.slots.default=()=>s},ll=(t,e,s)=>{for(const r in e)(s||!ln(r))&&(t[r]=e[r])},Fc=(t,e,s)=>{const r=t.slots=tl();if(t.vnode.shapeFlag&32){const o=e.__;o&&$o(r,"__",o,!0);const n=e._;n?(ll(r,e,s),s&&$o(r,"_",n,!0)):nl(e,r)}else e&&il(t,e)},qc=(t,e,s)=>{const{vnode:r,slots:o}=t;let n=!0,i=Se;if(r.shapeFlag&32){const a=e._;a?s&&a===1?n=!1:ll(o,e,s):(n=!e.$stable,nl(e,o)),i=e}else e&&(il(t,e),i={default:1});if(n)for(const a in o)!ln(a)&&i[a]==null&&delete o[a]},dt=eu;function Vc(t){return Nc(t)}function Nc(t,e){const s=Ur();s.__VUE__=!0;const{insert:r,remove:o,patchProp:n,createElement:i,createText:a,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:y,setScopeId:b=xt,insertStaticContent:v}=t,m=($,C,F,H=null,V=null,N=null,Y=void 0,W=null,G=!!C.dynamicChildren)=>{if($===C)return;$&&!Is($,C)&&(H=ir($),Z($,V,N,!0),$=null),C.patchFlag===-2&&(G=!1,C.dynamicChildren=null);const{type:B,ref:oe,shapeFlag:X}=C;switch(B){case Hr:p($,C,F,H);break;case qt:k($,C,F,H);break;case hr:$==null&&_(C,F,H,Y);break;case j:he($,C,F,H,V,N,Y,W,G);break;default:X&1?P($,C,F,H,V,N,Y,W,G):X&6?Le($,C,F,H,V,N,Y,W,G):(X&64||X&128)&&B.process($,C,F,H,V,N,Y,W,G,Rs)}oe!=null&&V?qs(oe,$&&$.ref,N,C||$,!C):oe==null&&$&&$.ref!=null&&qs($.ref,null,N,$,!0)},p=($,C,F,H)=>{if($==null)r(C.el=a(C.children),F,H);else{const V=C.el=$.el;C.children!==$.children&&u(V,C.children)}},k=($,C,F,H)=>{$==null?r(C.el=c(C.children||""),F,H):C.el=$.el},_=($,C,F,H)=>{[$.el,$.anchor]=v($.children,C,F,H,$.el,$.anchor)},S=({el:$,anchor:C},F,H)=>{let V;for(;$&&$!==C;)V=y($),r($,F,H),$=V;r(C,F,H)},T=({el:$,anchor:C})=>{let F;for(;$&&$!==C;)F=y($),o($),$=F;o(C)},P=($,C,F,H,V,N,Y,W,G)=>{C.type==="svg"?Y="svg":C.type==="math"&&(Y="mathml"),$==null?x(C,F,H,V,N,Y,W,G):O($,C,V,N,Y,W,G)},x=($,C,F,H,V,N,Y,W)=>{let G,B;const{props:oe,shapeFlag:X,transition:re,dirs:ae}=$;if(G=$.el=i($.type,N,oe&&oe.is,oe),X&8?d(G,$.children):X&16&&A($.children,G,null,H,V,mo($,N),Y,W),ae&&es($,null,H,"created"),D(G,$,$.scopeId,Y,H),oe){for(const Me in oe)Me!=="value"&&!Us(Me)&&n(G,Me,null,oe[Me],N,H);"value"in oe&&n(G,"value",null,oe.value,N),(B=oe.onVnodeBeforeMount)&&St(B,H,$)}ae&&es($,null,H,"beforeMount");const we=Hc(V,re);we&&re.beforeEnter(G),r(G,C,F),((B=oe&&oe.onVnodeMounted)||we||ae)&&dt(()=>{B&&St(B,H,$),we&&re.enter(G),ae&&es($,null,H,"mounted")},V)},D=($,C,F,H,V)=>{if(F&&b($,F),H)for(let N=0;N<H.length;N++)b($,H[N]);if(V){let N=V.subTree;if(C===N||pl(N.type)&&(N.ssContent===C||N.ssFallback===C)){const Y=V.vnode;D($,Y,Y.scopeId,Y.slotScopeIds,V.parent)}}},A=($,C,F,H,V,N,Y,W,G=0)=>{for(let B=G;B<$.length;B++){const oe=$[B]=W?jt($[B]):$t($[B]);m(null,oe,C,F,H,V,N,Y,W)}},O=($,C,F,H,V,N,Y)=>{const W=C.el=$.el;let{patchFlag:G,dynamicChildren:B,dirs:oe}=C;G|=$.patchFlag&16;const X=$.props||Se,re=C.props||Se;let ae;if(F&&ts(F,!1),(ae=re.onVnodeBeforeUpdate)&&St(ae,F,C,$),oe&&es(C,$,F,"beforeUpdate"),F&&ts(F,!0),(X.innerHTML&&re.innerHTML==null||X.textContent&&re.textContent==null)&&d(W,""),B?L($.dynamicChildren,B,W,F,H,mo(C,V),N):Y||I($,C,W,null,F,H,mo(C,V),N,!1),G>0){if(G&16)se(W,X,re,F,V);else if(G&2&&X.class!==re.class&&n(W,"class",null,re.class,V),G&4&&n(W,"style",X.style,re.style,V),G&8){const we=C.dynamicProps;for(let Me=0;Me<we.length;Me++){const Ce=we[Me],tt=X[Ce],st=re[Ce];(st!==tt||Ce==="value")&&n(W,Ce,tt,st,V,F)}}G&1&&$.children!==C.children&&d(W,C.children)}else!Y&&B==null&&se(W,X,re,F,V);((ae=re.onVnodeUpdated)||oe)&&dt(()=>{ae&&St(ae,F,C,$),oe&&es(C,$,F,"updated")},H)},L=($,C,F,H,V,N,Y)=>{for(let W=0;W<C.length;W++){const G=$[W],B=C[W],oe=G.el&&(G.type===j||!Is(G,B)||G.shapeFlag&198)?f(G.el):F;m(G,B,oe,null,H,V,N,Y,!0)}},se=($,C,F,H,V)=>{if(C!==F){if(C!==Se)for(const N in C)!Us(N)&&!(N in F)&&n($,N,C[N],null,V,H);for(const N in F){if(Us(N))continue;const Y=F[N],W=C[N];Y!==W&&N!=="value"&&n($,N,W,Y,V,H)}"value"in F&&n($,"value",C.value,F.value,V)}},he=($,C,F,H,V,N,Y,W,G)=>{const B=C.el=$?$.el:a(""),oe=C.anchor=$?$.anchor:a("");let{patchFlag:X,dynamicChildren:re,slotScopeIds:ae}=C;ae&&(W=W?W.concat(ae):ae),$==null?(r(B,F,H),r(oe,F,H),A(C.children||[],F,oe,V,N,Y,W,G)):X>0&&X&64&&re&&$.dynamicChildren?(L($.dynamicChildren,re,F,V,N,Y,W),(C.key!=null||V&&C===V.subTree)&&al($,C,!0)):I($,C,F,oe,V,N,Y,W,G)},Le=($,C,F,H,V,N,Y,W,G)=>{C.slotScopeIds=W,$==null?C.shapeFlag&512?V.ctx.activate(C,F,H,Y,G):qe(C,F,H,V,N,Y,G):Ue($,C,G)},qe=($,C,F,H,V,N,Y)=>{const W=$.component=lu($,H,V);if(Qi($)&&(W.ctx.renderer=Rs),au(W,!1,Y),W.asyncDep){if(V&&V.registerDep(W,Re,Y),!$.el){const G=W.subTree=Q(qt);k(null,G,C,F),$.placeholder=G.el}}else Re(W,$,C,F,V,N,Y)},Ue=($,C,F)=>{const H=C.component=$.component;if(Jc($,C,F))if(H.asyncDep&&!H.asyncResolved){me(H,C,F);return}else H.next=C,H.update();else C.el=$.el,H.vnode=C},Re=($,C,F,H,V,N,Y)=>{const W=()=>{if($.isMounted){let{next:X,bu:re,u:ae,parent:we,vnode:Me}=$;{const kt=cl($);if(kt){X&&(X.el=Me.el,me($,X,Y)),kt.asyncDep.then(()=>{$.isUnmounted||W()});return}}let Ce=X,tt;ts($,!1),X?(X.el=Me.el,me($,X,Y)):X=Me,re&&mr(re),(tt=X.props&&X.props.onVnodeBeforeUpdate)&&St(tt,we,X,Me),ts($,!0);const st=En($),bt=$.subTree;$.subTree=st,m(bt,st,f(bt.el),ir(bt),$,V,N),X.el=st.el,Ce===null&&Zc($,st.el),ae&&dt(ae,V),(tt=X.props&&X.props.onVnodeUpdated)&&dt(()=>St(tt,we,X,Me),V)}else{let X;const{el:re,props:ae}=C,{bm:we,m:Me,parent:Ce,root:tt,type:st}=$,bt=bs(C);ts($,!1),we&&mr(we),!bt&&(X=ae&&ae.onVnodeBeforeMount)&&St(X,Ce,C),ts($,!0);{tt.ce&&tt.ce._def.shadowRoot!==!1&&tt.ce._injectChildStyle(st);const kt=$.subTree=En($);m(null,kt,F,H,$,V,N),C.el=kt.el}if(Me&&dt(Me,V),!bt&&(X=ae&&ae.onVnodeMounted)){const kt=C;dt(()=>St(X,Ce,kt),V)}(C.shapeFlag&256||Ce&&bs(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&$.a&&dt($.a,V),$.isMounted=!0,C=F=H=null}};$.scope.on();const G=$.effect=new Ai(W);$.scope.off();const B=$.update=G.run.bind(G),oe=$.job=G.runIfDirty.bind(G);oe.i=$,oe.id=$.uid,G.scheduler=()=>on(oe),ts($,!0),B()},me=($,C,F)=>{C.component=$;const H=$.vnode.props;$.vnode=C,$.next=null,zc($,C.props,H,F),qc($,C.children,F),Ot(),$n($),Ft()},I=($,C,F,H,V,N,Y,W,G=!1)=>{const B=$&&$.children,oe=$?$.shapeFlag:0,X=C.children,{patchFlag:re,shapeFlag:ae}=C;if(re>0){if(re&128){ie(B,X,F,H,V,N,Y,W,G);return}else if(re&256){q(B,X,F,H,V,N,Y,W,G);return}}ae&8?(oe&16&&xs(B,V,N),X!==B&&d(F,X)):oe&16?ae&16?ie(B,X,F,H,V,N,Y,W,G):xs(B,V,N,!0):(oe&8&&d(F,""),ae&16&&A(X,F,H,V,N,Y,W,G))},q=($,C,F,H,V,N,Y,W,G)=>{$=$||gs,C=C||gs;const B=$.length,oe=C.length,X=Math.min(B,oe);let re;for(re=0;re<X;re++){const ae=C[re]=G?jt(C[re]):$t(C[re]);m($[re],ae,F,null,V,N,Y,W,G)}B>oe?xs($,V,N,!0,!1,X):A(C,F,H,V,N,Y,W,G,X)},ie=($,C,F,H,V,N,Y,W,G)=>{let B=0;const oe=C.length;let X=$.length-1,re=oe-1;for(;B<=X&&B<=re;){const ae=$[B],we=C[B]=G?jt(C[B]):$t(C[B]);if(Is(ae,we))m(ae,we,F,null,V,N,Y,W,G);else break;B++}for(;B<=X&&B<=re;){const ae=$[X],we=C[re]=G?jt(C[re]):$t(C[re]);if(Is(ae,we))m(ae,we,F,null,V,N,Y,W,G);else break;X--,re--}if(B>X){if(B<=re){const ae=re+1,we=ae<oe?C[ae].el:H;for(;B<=re;)m(null,C[B]=G?jt(C[B]):$t(C[B]),F,we,V,N,Y,W,G),B++}}else if(B>re)for(;B<=X;)Z($[B],V,N,!0),B++;else{const ae=B,we=B,Me=new Map;for(B=we;B<=re;B++){const ut=C[B]=G?jt(C[B]):$t(C[B]);ut.key!=null&&Me.set(ut.key,B)}let Ce,tt=0;const st=re-we+1;let bt=!1,kt=0;const Ms=new Array(st);for(B=0;B<st;B++)Ms[B]=0;for(B=ae;B<=X;B++){const ut=$[B];if(tt>=st){Z(ut,V,N,!0);continue}let _t;if(ut.key!=null)_t=Me.get(ut.key);else for(Ce=we;Ce<=re;Ce++)if(Ms[Ce-we]===0&&Is(ut,C[Ce])){_t=Ce;break}_t===void 0?Z(ut,V,N,!0):(Ms[_t-we]=B+1,_t>=kt?kt=_t:bt=!0,m(ut,C[_t],F,null,V,N,Y,W,G),tt++)}const wn=bt?Bc(Ms):gs;for(Ce=wn.length-1,B=st-1;B>=0;B--){const ut=we+B,_t=C[ut],bn=C[ut+1],kn=ut+1<oe?bn.el||bn.placeholder:H;Ms[B]===0?m(null,_t,F,kn,V,N,Y,W,G):bt&&(Ce<0||B!==wn[Ce]?Oe(_t,F,kn,2):Ce--)}}},Oe=($,C,F,H,V=null)=>{const{el:N,type:Y,transition:W,children:G,shapeFlag:B}=$;if(B&6){Oe($.component.subTree,C,F,H);return}if(B&128){$.suspense.move(C,F,H);return}if(B&64){Y.move($,C,F,Rs);return}if(Y===j){r(N,C,F);for(let X=0;X<G.length;X++)Oe(G[X],C,F,H);r($.anchor,C,F);return}if(Y===hr){S($,C,F);return}if(H!==2&&B&1&&W)if(H===0)W.beforeEnter(N),r(N,C,F),dt(()=>W.enter(N),V);else{const{leave:X,delayLeave:re,afterLeave:ae}=W,we=()=>{$.ctx.isUnmounted?o(N):r(N,C,F)},Me=()=>{X(N,()=>{we(),ae&&ae()})};re?re(N,we,Me):Me()}else r(N,C,F)},Z=($,C,F,H=!1,V=!1)=>{const{type:N,props:Y,ref:W,children:G,dynamicChildren:B,shapeFlag:oe,patchFlag:X,dirs:re,cacheIndex:ae}=$;if(X===-2&&(V=!1),W!=null&&(Ot(),qs(W,null,F,$,!0),Ft()),ae!=null&&(C.renderCache[ae]=void 0),oe&256){C.ctx.deactivate($);return}const we=oe&1&&re,Me=!bs($);let Ce;if(Me&&(Ce=Y&&Y.onVnodeBeforeUnmount)&&St(Ce,C,$),oe&6)da($.component,F,H);else{if(oe&128){$.suspense.unmount(F,H);return}we&&es($,null,C,"beforeUnmount"),oe&64?$.type.remove($,C,F,Rs,H):B&&!B.hasOnce&&(N!==j||X>0&&X&64)?xs(B,C,F,!1,!0):(N===j&&X&384||!V&&oe&16)&&xs(G,C,F),H&&Be($)}(Me&&(Ce=Y&&Y.onVnodeUnmounted)||we)&&dt(()=>{Ce&&St(Ce,C,$),we&&es($,null,C,"unmounted")},F)},Be=$=>{const{type:C,el:F,anchor:H,transition:V}=$;if(C===j){gn(F,H);return}if(C===hr){T($);return}const N=()=>{o(F),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if($.shapeFlag&1&&V&&!V.persisted){const{leave:Y,delayLeave:W}=V,G=()=>Y(F,N);W?W($.el,N,G):G()}else N()},gn=($,C)=>{let F;for(;$!==C;)F=y($),o($),$=F;o(C)},da=($,C,F)=>{const{bum:H,scope:V,job:N,subTree:Y,um:W,m:G,a:B,parent:oe,slots:{__:X}}=$;Mn(G),Mn(B),H&&mr(H),oe&&ne(X)&&X.forEach(re=>{oe.renderCache[re]=void 0}),V.stop(),N&&(N.flags|=8,Z(Y,$,C,F)),W&&dt(W,C),dt(()=>{$.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},xs=($,C,F,H=!1,V=!1,N=0)=>{for(let Y=N;Y<$.length;Y++)Z($[Y],C,F,H,V)},ir=$=>{if($.shapeFlag&6)return ir($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const C=y($.anchor||$.el),F=C&&C[uc];return F?y(F):C};let io=!1;const yn=($,C,F)=>{$==null?C._vnode&&Z(C._vnode,null,null,!0):m(C._vnode||null,$,C,null,null,null,F),C._vnode=$,io||(io=!0,$n(),Bi(),io=!1)},Rs={p:m,um:Z,m:Oe,r:Be,mt:qe,mc:A,pc:I,pbc:L,n:ir,o:t};return{render:yn,hydrate:void 0,createApp:Ec(yn)}}function mo({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function ts({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Hc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function al(t,e,s=!1){const r=t.children,o=e.children;if(ne(r)&&ne(o))for(let n=0;n<r.length;n++){const i=r[n];let a=o[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[n]=jt(o[n]),a.el=i.el),!s&&a.patchFlag!==-2&&al(i,a)),a.type===Hr&&(a.el=i.el),a.type===qt&&!a.el&&(a.el=i.el)}}function Bc(t){const e=t.slice(),s=[0];let r,o,n,i,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(o=s[s.length-1],t[o]<u){e[r]=o,s.push(r);continue}for(n=0,i=s.length-1;n<i;)a=n+i>>1,t[s[a]]<u?n=a+1:i=a;u<t[s[n]]&&(n>0&&(e[r]=s[n-1]),s[n]=r)}}for(n=s.length,i=s[n-1];n-- >0;)s[n]=i,i=e[i];return s}function cl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:cl(e)}function Mn(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Kc=Symbol.for("v-scx"),jc=()=>Ns(Kc);function Gc(t,e){return cn(t,null,{flush:"sync"})}function ks(t,e,s){return cn(t,e,s)}function cn(t,e,s=Se){const{immediate:r,deep:o,flush:n,once:i}=s,a=Ye({},s),c=e&&r||!e&&n!=="post";let u;if(Ws){if(n==="sync"){const b=jc();u=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=xt,b.resume=xt,b.pause=xt,b}}const d=Ze;a.call=(b,v,m)=>Rt(b,d,v,m);let f=!1;n==="post"?a.scheduler=b=>{dt(b,d&&d.suspense)}:n!=="sync"&&(f=!0,a.scheduler=(b,v)=>{v?b():on(b)}),a.augmentJob=b=>{e&&(b.flags|=4),f&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const y=nc(t,e,a);return Ws&&(u?u.push(y):c&&y()),y}function Qc(t,e,s){const r=this.proxy,o=Fe(t)?t.includes(".")?ul(r,t):()=>r[t]:t.bind(r,r);let n;de(e)?n=e:(n=e.handler,s=e);const i=er(this),a=cn(o,n.bind(r),s);return i(),a}function ul(t,e){const s=e.split(".");return()=>{let r=t;for(let o=0;o<s.length&&r;o++)r=r[s[o]];return r}}function un(t,e,s=Se){const r=pn(),o=Ut(e),n=Xt(e),i=dl(t,o),a=Xa((c,u)=>{let d,f=Se,y;return Gc(()=>{const b=t[o];rt(d,b)&&(d=b,u())}),{get(){return c(),s.get?s.get(d):d},set(b){const v=s.set?s.set(b):b;if(!rt(v,d)&&!(f!==Se&&rt(b,f)))return;const m=r.vnode.props;m&&(e in m||o in m||n in m)&&(`onUpdate:${e}`in m||`onUpdate:${o}`in m||`onUpdate:${n}`in m)||(d=b,u()),r.emit(`update:${e}`,v),rt(b,v)&&rt(b,f)&&!rt(v,y)&&u(),f=b,y=v}}});return a[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?i||Se:a,done:!1}:{done:!0}}}},a}const dl=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ut(e)}Modifiers`]||t[`${Xt(e)}Modifiers`];function Wc(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||Se;let o=s;const n=e.startsWith("update:"),i=n&&dl(r,e.slice(7));i&&(i.trim&&(o=s.map(d=>Fe(d)?d.trim():d)),i.number&&(o=s.map(_r)));let a,c=r[a=lo(e)]||r[a=lo(Ut(e))];!c&&n&&(c=r[a=lo(Xt(e))]),c&&Rt(c,t,6,o);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Rt(u,t,6,o)}}function fl(t,e,s=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const n=t.emits;let i={},a=!1;if(!de(t)){const c=u=>{const d=fl(u,e,!0);d&&(a=!0,Ye(i,d))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!n&&!a?(Ie(t)&&r.set(t,null),null):(ne(n)?n.forEach(c=>i[c]=null):Ye(i,n),Ie(t)&&r.set(t,i),i)}function Nr(t,e){return!t||!Dr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ae(t,e[0].toLowerCase()+e.slice(1))||Ae(t,Xt(e))||Ae(t,e))}function En(t){const{type:e,vnode:s,proxy:r,withProxy:o,propsOptions:[n],slots:i,attrs:a,emit:c,render:u,renderCache:d,props:f,data:y,setupState:b,ctx:v,inheritAttrs:m}=t,p=Cr(t);let k,_;try{if(s.shapeFlag&4){const T=o||r,P=T;k=$t(u.call(P,T,d,f,b,y,v)),_=a}else{const T=e;k=$t(T.length>1?T(f,{attrs:a,slots:i,emit:c}):T(f,null)),_=e.props?a:Yc(a)}}catch(T){Hs.length=0,qr(T,t,1),k=Q(qt)}let S=k;if(_&&m!==!1){const T=Object.keys(_),{shapeFlag:P}=S;T.length&&P&7&&(n&&T.some(Go)&&(_=Xc(_,n)),S=_s(S,_,!1,!0))}return s.dirs&&(S=_s(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&nn(S,s.transition),k=S,Cr(p),k}const Yc=t=>{let e;for(const s in t)(s==="class"||s==="style"||Dr(s))&&((e||(e={}))[s]=t[s]);return e},Xc=(t,e)=>{const s={};for(const r in t)(!Go(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function Jc(t,e,s){const{props:r,children:o,component:n}=t,{props:i,children:a,patchFlag:c}=e,u=n.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return r?In(r,i,u):!!i;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const y=d[f];if(i[y]!==r[y]&&!Nr(u,y))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?In(r,i,u):!0:!!i;return!1}function In(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const n=r[o];if(e[n]!==t[n]&&!Nr(s,n))return!0}return!1}function Zc({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const pl=t=>t.__isSuspense;function eu(t,e){e&&e.pendingBranch?ne(t)?e.effects.push(...t):e.effects.push(t):ac(t)}const j=Symbol.for("v-fgt"),Hr=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),hr=Symbol.for("v-stc"),Hs=[];let ft=null;function h(t=!1){Hs.push(ft=t?null:[])}function tu(){Hs.pop(),ft=Hs[Hs.length-1]||null}let Qs=1;function Ln(t,e=!1){Qs+=t,t<0&&ft&&e&&(ft.hasOnce=!0)}function ml(t){return t.dynamicChildren=Qs>0?ft||gs:null,tu(),Qs>0&&ft&&ft.push(t),t}function g(t,e,s,r,o,n){return ml(l(t,e,s,r,o,n,!0))}function J(t,e,s,r,o){return ml(Q(t,e,s,r,o,!0))}function dn(t){return t?t.__v_isVNode===!0:!1}function Is(t,e){return t.type===e.type&&t.key===e.key}const hl=({key:t})=>t??null,vr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Fe(t)||xe(t)||de(t)?{i:Qe,r:t,k:e,f:!!s}:t:null);function l(t,e=null,s=null,r=0,o=null,n=t===j?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&hl(e),ref:e&&vr(e),scopeId:ji,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Qe};return a?(fn(c,s),n&128&&t.normalize(c)):s&&(c.shapeFlag|=Fe(s)?8:16),Qs>0&&!i&&ft&&(c.patchFlag>0||n&6)&&c.patchFlag!==32&&ft.push(c),c}const Q=su;function su(t,e=null,s=null,r=0,o=null,n=!1){if((!t||t===Sc)&&(t=qt),dn(t)){const a=_s(t,e,!0);return s&&fn(a,s),Qs>0&&!n&&ft&&(a.shapeFlag&6?ft[ft.indexOf(t)]=a:ft.push(a)),a.patchFlag=-2,a}if(fu(t)&&(t=t.__vccOpts),e){e=ru(e);let{class:a,style:c}=e;a&&!Fe(a)&&(e.class=K(a)),Ie(c)&&(sn(c)&&!ne(c)&&(c=Ye({},c)),e.style=$e(c))}const i=Fe(t)?1:pl(t)?128:dc(t)?64:Ie(t)?4:de(t)?2:0;return l(t,e,s,r,o,i,n,!0)}function ru(t){return t?sn(t)||sl(t)?Ye({},t):t:null}function _s(t,e,s=!1,r=!1){const{props:o,ref:n,patchFlag:i,children:a,transition:c}=t,u=e?ou(o||{},e):o,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&hl(u),ref:e&&e.ref?s&&n?ne(n)?n.concat(vr(e)):[n,vr(e)]:vr(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==j?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_s(t.ssContent),ssFallback:t.ssFallback&&_s(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&nn(d,c.clone(d)),d}function Te(t=" ",e=0){return Q(Hr,null,t,e)}function Ne(t,e){const s=Q(hr,null,t);return s.staticCount=e,s}function R(t="",e=!1){return e?(h(),J(qt,null,t)):Q(qt,null,t)}function $t(t){return t==null||typeof t=="boolean"?Q(qt):ne(t)?Q(j,null,t.slice()):dn(t)?jt(t):Q(Hr,null,String(t))}function jt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_s(t)}function fn(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ne(e))s=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),fn(t,o()),o._c&&(o._d=!0));return}else{s=32;const o=e._;!o&&!sl(e)?e._ctx=Qe:o===3&&Qe&&(Qe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:Qe},s=32):(e=String(e),r&64?(s=16,e=[Te(e)]):s=8);t.children=e,t.shapeFlag|=s}function ou(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=K([e.class,r.class]));else if(o==="style")e.style=$e([e.style,r.style]);else if(Dr(o)){const n=e[o],i=r[o];i&&n!==i&&!(ne(n)&&n.includes(i))&&(e[o]=n?[].concat(n,i):i)}else o!==""&&(e[o]=r[o])}return e}function St(t,e,s,r=null){Rt(t,e,7,[s,r])}const nu=Zi();let iu=0;function lu(t,e,s){const r=t.type,o=(e?e.appContext:t.appContext)||nu,n={uid:iu++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _i(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ol(r,o),emitsOptions:fl(r,o),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:r.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=Wc.bind(null,n),t.ce&&t.ce(n),n}let Ze=null;const pn=()=>Ze||Qe;let Rr,Do;{const t=Ur(),e=(s,r)=>{let o;return(o=t[s])||(o=t[s]=[]),o.push(r),n=>{o.length>1?o.forEach(i=>i(n)):o[0](n)}};Rr=e("__VUE_INSTANCE_SETTERS__",s=>Ze=s),Do=e("__VUE_SSR_SETTERS__",s=>Ws=s)}const er=t=>{const e=Ze;return Rr(t),t.scope.on(),()=>{t.scope.off(),Rr(e)}},Dn=()=>{Ze&&Ze.scope.off(),Rr(null)};function vl(t){return t.vnode.shapeFlag&4}let Ws=!1;function au(t,e=!1,s=!1){e&&Do(e);const{props:r,children:o}=t.vnode,n=vl(t);Dc(t,r,n,e),Fc(t,o,s||e);const i=n?cu(t,e):void 0;return e&&Do(!1),i}function cu(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Tc);const{setup:r}=s;if(r){Ot();const o=t.setupContext=r.length>1?du(t):null,n=er(t),i=Zs(r,t,0,[t.props,o]),a=hi(i);if(Ft(),n(),(a||t.sp)&&!bs(t)&&Gi(t),a){if(i.then(Dn,Dn),e)return i.then(c=>{zn(t,c)}).catch(c=>{qr(c,t,0)});t.asyncDep=i}else zn(t,i)}else gl(t)}function zn(t,e,s){de(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ie(e)&&(t.setupState=qi(e)),gl(t)}function gl(t,e,s){const r=t.type;t.render||(t.render=r.render||xt);{const o=er(t);Ot();try{$c(t)}finally{Ft(),o()}}}const uu={get(t,e){return je(t,"get",""),t[e]}};function du(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,uu),slots:t.slots,emit:t.emit,expose:e}}function Br(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(qi(rn(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Vs)return Vs[s](t)},has(e,s){return s in e||s in Vs}})):t.proxy}function fu(t){return de(t)&&"__vccOpts"in t}const E=(t,e)=>rc(t,e,Ws),pu="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zo;const Un=typeof window<"u"&&window.trustedTypes;if(Un)try{zo=Un.createPolicy("vue",{createHTML:t=>t})}catch{}const yl=zo?t=>zo.createHTML(t):t=>t,mu="http://www.w3.org/2000/svg",hu="http://www.w3.org/1998/Math/MathML",Et=typeof document<"u"?document:null,On=Et&&Et.createElement("template"),vu={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const o=e==="svg"?Et.createElementNS(mu,t):e==="mathml"?Et.createElementNS(hu,t):s?Et.createElement(t,{is:s}):Et.createElement(t);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Et.createTextNode(t),createComment:t=>Et.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Et.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,o,n){const i=s?s.previousSibling:e.lastChild;if(o&&(o===n||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),s),!(o===n||!(o=o.nextSibling)););else{On.innerHTML=yl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=On.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,s)}return[i?i.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},gu=Symbol("_vtc");function yu(t,e,s){const r=t[gu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Mr=Symbol("_vod"),wl=Symbol("_vsh"),Wt={beforeMount(t,{value:e},{transition:s}){t[Mr]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Ls(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:r}){!e!=!s&&(r?e?(r.beforeEnter(t),Ls(t,!0),r.enter(t)):r.leave(t,()=>{Ls(t,!1)}):Ls(t,e))},beforeUnmount(t,{value:e}){Ls(t,e)}};function Ls(t,e){t.style.display=e?t[Mr]:"none",t[wl]=!e}const wu=Symbol(""),bu=/(^|;)\s*display\s*:/;function ku(t,e,s){const r=t.style,o=Fe(s);let n=!1;if(s&&!o){if(e)if(Fe(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&gr(r,a,"")}else for(const i in e)s[i]==null&&gr(r,i,"");for(const i in s)i==="display"&&(n=!0),gr(r,i,s[i])}else if(o){if(e!==s){const i=r[wu];i&&(s+=";"+i),r.cssText=s,n=bu.test(s)}}else e&&t.removeAttribute("style");Mr in t&&(t[Mr]=n?r.display:"",t[wl]&&(r.display="none"))}const Fn=/\s*!important$/;function gr(t,e,s){if(ne(s))s.forEach(r=>gr(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=_u(t,e);Fn.test(s)?t.setProperty(Xt(r),s.replace(Fn,""),"important"):t[r]=s}}const qn=["Webkit","Moz","ms"],ho={};function _u(t,e){const s=ho[e];if(s)return s;let r=Ut(e);if(r!=="filter"&&r in t)return ho[e]=r;r=yi(r);for(let o=0;o<qn.length;o++){const n=qn[o]+r;if(n in t)return ho[e]=n}return e}const Vn="http://www.w3.org/1999/xlink";function Nn(t,e,s,r,o,n=Ta(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Vn,e.slice(6,e.length)):t.setAttributeNS(Vn,e,s):s==null||n&&!wi(s)?t.removeAttribute(e):t.setAttribute(e,n?"":yt(s)?String(s):s)}function Hn(t,e,s,r,o){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?yl(s):s);return}const n=t.tagName;if(e==="value"&&n!=="PROGRESS"&&!n.includes("-")){const a=n==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(a!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let i=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=wi(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{t[e]=s}catch{}i&&t.removeAttribute(o||e)}function Dt(t,e,s,r){t.addEventListener(e,s,r)}function Su(t,e,s,r){t.removeEventListener(e,s,r)}const Bn=Symbol("_vei");function Tu(t,e,s,r,o=null){const n=t[Bn]||(t[Bn]={}),i=n[e];if(r&&i)i.value=r;else{const[a,c]=Au(e);if(r){const u=n[e]=Pu(r,o);Dt(t,a,u,c)}else i&&(Su(t,a,i,c),n[e]=void 0)}}const Kn=/(?:Once|Passive|Capture)$/;function Au(t){let e;if(Kn.test(t)){e={};let r;for(;r=t.match(Kn);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Xt(t.slice(2)),e]}let vo=0;const $u=Promise.resolve(),Cu=()=>vo||($u.then(()=>vo=0),vo=Date.now());function Pu(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;Rt(xu(r,s.value),e,5,[r])};return s.value=t,s.attached=Cu(),s}function xu(t,e){if(ne(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const jn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ru=(t,e,s,r,o,n)=>{const i=o==="svg";e==="class"?yu(t,r,i):e==="style"?ku(t,s,r):Dr(e)?Go(e)||Tu(t,e,s,r,n):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Mu(t,e,r,i))?(Hn(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Nn(t,e,r,i,n,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Fe(r))?Hn(t,Ut(e),r,n,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Nn(t,e,r,i))};function Mu(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&jn(e)&&de(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return jn(e)&&Fe(s)?!1:e in t}const Yt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ne(e)?s=>mr(e,s):e};function Eu(t){t.target.composing=!0}function Gn(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ht=Symbol("_assign"),Ct={created(t,{modifiers:{lazy:e,trim:s,number:r}},o){t[ht]=Yt(o);const n=r||o.props&&o.props.type==="number";Dt(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;s&&(a=a.trim()),n&&(a=_r(a)),t[ht](a)}),s&&Dt(t,"change",()=>{t.value=t.value.trim()}),e||(Dt(t,"compositionstart",Eu),Dt(t,"compositionend",Gn),Dt(t,"change",Gn))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:o,number:n}},i){if(t[ht]=Yt(i),t.composing)return;const a=(n||t.type==="number")&&!/^0\d/.test(t.value)?_r(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||o&&t.value.trim()===c)||(t.value=c))}},Gt={deep:!0,created(t,e,s){t[ht]=Yt(s),Dt(t,"change",()=>{const r=t._modelValue,o=Ss(t),n=t.checked,i=t[ht];if(ne(r)){const a=Yo(r,o),c=a!==-1;if(n&&!c)i(r.concat(o));else if(!n&&c){const u=[...r];u.splice(a,1),i(u)}}else if(Ts(r)){const a=new Set(r);n?a.add(o):a.delete(o),i(a)}else i(bl(t,n))})},mounted:Qn,beforeUpdate(t,e,s){t[ht]=Yt(s),Qn(t,e,s)}};function Qn(t,{value:e,oldValue:s},r){t._modelValue=e;let o;if(ne(e))o=Yo(e,r.props.value)>-1;else if(Ts(e))o=e.has(r.props.value);else{if(e===s)return;o=as(e,bl(t,!0))}t.checked!==o&&(t.checked=o)}const dr={created(t,{value:e},s){t.checked=as(e,s.props.value),t[ht]=Yt(s),Dt(t,"change",()=>{t[ht](Ss(t))})},beforeUpdate(t,{value:e,oldValue:s},r){t[ht]=Yt(r),e!==s&&(t.checked=as(e,r.props.value))}},As={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const o=Ts(e);Dt(t,"change",()=>{const n=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>s?_r(Ss(i)):Ss(i));t[ht](t.multiple?o?new Set(n):n:n[0]),t._assigning=!0,at(()=>{t._assigning=!1})}),t[ht]=Yt(r)},mounted(t,{value:e}){Wn(t,e)},beforeUpdate(t,e,s){t[ht]=Yt(s)},updated(t,{value:e}){t._assigning||Wn(t,e)}};function Wn(t,e){const s=t.multiple,r=ne(e);if(!(s&&!r&&!Ts(e))){for(let o=0,n=t.options.length;o<n;o++){const i=t.options[o],a=Ss(i);if(s)if(r){const c=typeof a;c==="string"||c==="number"?i.selected=e.some(u=>String(u)===String(a)):i.selected=Yo(e,a)>-1}else i.selected=e.has(a);else if(as(Ss(i),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ss(t){return"_value"in t?t._value:t.value}function bl(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Iu=["ctrl","shift","alt","meta"],Lu={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Iu.some(s=>t[`${s}Key`]&&!e.includes(s))},Ht=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(o,...n)=>{for(let i=0;i<e.length;i++){const a=Lu[e[i]];if(a&&a(o,e))return}return t(o,...n)})},Du=Ye({patchProp:Ru},vu);let Yn;function zu(){return Yn||(Yn=Vc(Du))}const Uu=(...t)=>{const e=zu().createApp(...t),{mount:s}=e;return e.mount=r=>{const o=Fu(r);if(!o)return;const n=e._component;!de(n)&&!n.render&&!n.template&&(n.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=s(o,!1,Ou(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},e};function Ou(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Fu(t){return Fe(t)?document.querySelector(t):t}const kl="/assets/logo-small-OTvP_XFC.png",_e=(t,e)=>{const s=t.__vccOpts||t;for(const[r,o]of e)s[r]=o;return s},qu={},Vu={href:"spotify/logout"};function Nu(t,e){return h(),g("a",Vu,e[0]||(e[0]=[l("button",{class:"inp"},"Logout",-1)]))}const _l=_e(qu,[["render",Nu]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Sl;const Kr=t=>Sl=t,Tl=Symbol();function Uo(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Bs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Bs||(Bs={}));function Hu(){const t=Si(!0),e=t.run(()=>z({}));let s=[],r=[];const o=rn({install(n){Kr(o),o._a=n,n.provide(Tl,o),n.config.globalProperties.$pinia=o,r.forEach(i=>s.push(i)),r=[]},use(n){return this._a?s.push(n):r.push(n),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return o}const Al=()=>{};function Xn(t,e,s,r=Al){t.push(e);const o=()=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),r())};return!s&&Ti()&&$a(o),o}function hs(t,...e){t.slice().forEach(s=>{s(...e)})}const Bu=t=>t(),Jn=Symbol(),go=Symbol();function Oo(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,r)=>t.set(r,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const r=e[s],o=t[s];Uo(o)&&Uo(r)&&t.hasOwnProperty(s)&&!xe(r)&&!zt(r)?t[s]=Oo(o,r):t[s]=r}return t}const Ku=Symbol();function ju(t){return!Uo(t)||!Object.prototype.hasOwnProperty.call(t,Ku)}const{assign:Bt}=Object;function Gu(t){return!!(xe(t)&&t.effect)}function Qu(t,e,s,r){const{state:o,actions:n,getters:i}=e,a=s.state.value[t];let c;function u(){a||(s.state.value[t]=o?o():{});const d=Ja(s.state.value[t]);return Bt(d,n,Object.keys(i||{}).reduce((f,y)=>(f[y]=rn(E(()=>{Kr(s);const b=s._s.get(t);return i[y].call(b,b)})),f),{}))}return c=$l(t,u,e,s,r,!0),c}function $l(t,e,s={},r,o,n){let i;const a=Bt({actions:{}},s),c={deep:!0};let u,d,f=[],y=[],b;const v=r.state.value[t];!n&&!v&&(r.state.value[t]={}),z({});let m;function p(A){let O;u=d=!1,typeof A=="function"?(A(r.state.value[t]),O={type:Bs.patchFunction,storeId:t,events:b}):(Oo(r.state.value[t],A),O={type:Bs.patchObject,payload:A,storeId:t,events:b});const L=m=Symbol();at().then(()=>{m===L&&(u=!0)}),d=!0,hs(f,O,r.state.value[t])}const k=n?function(){const{state:O}=s,L=O?O():{};this.$patch(se=>{Bt(se,L)})}:Al;function _(){i.stop(),f=[],y=[],r._s.delete(t)}const S=(A,O="")=>{if(Jn in A)return A[go]=O,A;const L=function(){Kr(r);const se=Array.from(arguments),he=[],Le=[];function qe(me){he.push(me)}function Ue(me){Le.push(me)}hs(y,{args:se,name:L[go],store:P,after:qe,onError:Ue});let Re;try{Re=A.apply(this&&this.$id===t?this:P,se)}catch(me){throw hs(Le,me),me}return Re instanceof Promise?Re.then(me=>(hs(he,me),me)).catch(me=>(hs(Le,me),Promise.reject(me))):(hs(he,Re),Re)};return L[Jn]=!0,L[go]=O,L},T={_p:r,$id:t,$onAction:Xn.bind(null,y),$patch:p,$reset:k,$subscribe(A,O={}){const L=Xn(f,A,O.detached,()=>se()),se=i.run(()=>ks(()=>r.state.value[t],he=>{(O.flush==="sync"?d:u)&&A({storeId:t,type:Bs.direct,events:b},he)},Bt({},c,O)));return L},$dispose:_},P=Js(T);r._s.set(t,P);const D=(r._a&&r._a.runWithContext||Bu)(()=>r._e.run(()=>(i=Si()).run(()=>e({action:S}))));for(const A in D){const O=D[A];if(xe(O)&&!Gu(O)||zt(O))n||(v&&ju(O)&&(xe(O)?O.value=v[A]:Oo(O,v[A])),r.state.value[t][A]=O);else if(typeof O=="function"){const L=S(O,A);D[A]=L,a.actions[A]=O}}return Bt(P,D),Bt(be(P),D),Object.defineProperty(P,"$state",{get:()=>r.state.value[t],set:A=>{p(O=>{Bt(O,A)})}}),r._p.forEach(A=>{Bt(P,i.run(()=>A({store:P,app:r._a,pinia:r,options:a})))}),v&&n&&s.hydrate&&s.hydrate(P.$state,v),u=!0,d=!0,P}/*! #__NO_SIDE_EFFECTS__ */function tr(t,e,s){let r;const o=typeof e=="function";r=o?s:e;function n(i,a){const c=Lc();return i=i||(c?Ns(Tl,null):null),i&&Kr(i),i=Sl,i._s.has(t)||(o?$l(t,e,r,i):Qu(t,r,i)),i._s.get(t)}return n.$id=t,n}function Jt(t){const e=be(t),s={};for(const r in e){const o=e[r];o.effect?s[r]=E({get:()=>t[r],set(n){t[r]=n}}):(xe(o)||zt(o))&&(s[r]=tc(t,r))}return s}const ye=tr("audio",{state:()=>({currentTrack:null,audioPreview:!0,restartSongOnHover:!1,restartSongOnClick:!1,unplayableTracks:!0,openLinks:!0,mobileCurrentAudio:null,mobileCurrentTrackId:null,mobileIsPlaying:!1}),getters:{isAudioEnabled:t=>t.audioPreview,shouldRestartOnHover:t=>t.restartSongOnHover,shouldRestartSongOnClick:t=>t.restartSongOnClick},actions:{setCurrentTrack(t){this.currentTrack=t},setAudioPreview(t){this.audioPreview=t},setRestartSongOnHover(t){this.restartSongOnHover=t},setRestartSongOnClick(t){this.restartSongOnClick=t},setUnplayableTracks(t){this.unplayableTracks=t},setOpenLinks(t){this.openLinks=t},playAudio(t){!this.audioPreview||!t||(this.currentTrack&&this.currentTrack!==t&&this.pauseAudio(this.currentTrack),t.play(),this.currentTrack=t)},pauseAudio(t){t&&(t.pause(),this.restartSongOnHover&&(t.currentTime=0))},handleAudioClick(t){const e=t.target,s=e.lastChild||e;!s||typeof s.play!="function"||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},handleAudioHover(t){const e=t.target,s=e.lastChild||e;!this.audioPreview||!s||typeof s.play!="function"||!s.src||s.src===""||s.play().catch(r=>{console.debug("Audio play failed:",r.message)})},handleAudioLeave(t){const e=t.target,s=e.lastChild||e;!this.audioPreview||!s||typeof s.pause!="function"||!s.src||s.src===""||this.pauseAudio(s)},handleParentAudioClick(t){var r;const s=(r=t.target.firstChild)==null?void 0:r.lastChild;!this.audioPreview||!s||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},handleParentAudioHover(t){const s=t.target.parentElement.lastChild;!this.audioPreview||!s||!s.src||s.src===""||s.play().catch(r=>{console.debug("Audio play failed:",r.message)})},handleParentAudioLeave(t){const s=t.target.parentElement.lastChild;!this.audioPreview||!s||this.pauseAudio(s)},handleSpecialClick(t){var r,o,n;const s=(n=(o=(r=t.target.parentElement)==null?void 0:r.parentElement)==null?void 0:o.firstElementChild)==null?void 0:n.lastChild;!this.audioPreview||!s||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},handleSearchClick(t){var r,o;const s=(o=(r=t.target.parentElement)==null?void 0:r.firstChild)==null?void 0:o.lastChild;!this.audioPreview||!s||(this.currentTrack&&this.currentTrack!==s&&this.pauseAudio(this.currentTrack),s.paused===!1?this.pauseAudio(s):this.playAudio(s))},stopAllAudio(){this.currentTrack&&(this.pauseAudio(this.currentTrack),this.currentTrack=null)},async mobilePlayTrack(t,e){if(!this.audioPreview){console.log("Audio preview is disabled");return}if(!e){console.log("No preview URL available for this track");return}this.mobileCurrentAudio&&this.mobilePauseCurrentAudio(),(!this.mobileCurrentAudio||this.mobileCurrentTrackId!==t)&&(this.mobileCurrentAudio=new Audio(e),this.mobileCurrentTrackId=t,this.mobileCurrentAudio.addEventListener("ended",()=>{this.mobileIsPlaying=!1,this.mobileCurrentTrackId=null}),this.mobileCurrentAudio.addEventListener("error",s=>{console.error("Audio playback error:",s),this.mobileIsPlaying=!1,this.mobileCurrentTrackId=null}));try{await this.mobileCurrentAudio.play(),this.mobileIsPlaying=!0,console.log("Audio started playing for track:",t)}catch(s){console.error("Failed to play audio:",s),this.mobileIsPlaying=!1}},mobileStopCurrentAudio(){this.mobileCurrentAudio&&(this.mobileCurrentAudio.pause(),this.mobileCurrentAudio.currentTime=0,this.mobileCurrentAudio=null),this.mobileIsPlaying=!1,this.mobileCurrentTrackId=null},mobilePauseCurrentAudio(){this.mobileCurrentAudio&&this.mobileCurrentAudio.pause(),this.mobileIsPlaying=!1},async mobileToggleTrack(t,e){console.log("mobileToggleTrack called:",t,"previewUrl:",e),this.mobileCurrentTrackId===t&&this.mobileIsPlaying?(console.log("Track is already playing, toggling pause"),this.restartSongOnClick?this.mobileCurrentAudio&&this.mobileStopCurrentAudio():this.mobilePauseCurrentAudio()):(console.log("Starting to play track:",t),await this.mobilePlayTrack(t,e))},mobileIsTrackPlaying(t){return this.mobileCurrentTrackId===t&&this.mobileIsPlaying}}}),ct=tr("preferences",{state:()=>({viewMode:"list"}),getters:{getViewMode:t=>t.viewMode,isGridView:t=>t.viewMode==="grid",isListView:t=>t.viewMode==="list"},actions:{setViewMode(t){(t==="list"||t==="grid")&&(this.viewMode=t)},toggleViewMode(){this.viewMode=this.viewMode==="list"?"grid":"list"}}}),te={SPOTIFY:"spotify",DEEZER:"deezer",TIDAL:"tidal",APPLE:"apple",YOUTUBE:"youtube"},ot={SHORT:"short_term",MEDIUM:"medium_term",LONG:"long_term"};class et{constructor(e,s=null,r=null){this.url=e,this.width=s,this.height=r}}class We{constructor(e,s={}){this.service=e,this.urls=s}}class jr{constructor(e){this.id=e.id,this.name=e.name,this.images=e.images||[],this.genres=e.genres||[],this.externalUrls=e.externalUrls||new We(e.service),this.service=e.service,this.popularity=e.popularity||0,this.followers=e.followers||0,this.followed=e.followed||!1}}class Gr{constructor(e){this.id=e.id,this.name=e.name,this.artists=e.artists||[],this.images=e.images||[],this.releaseDate=e.releaseDate,this.totalTracks=e.totalTracks||0,this.externalUrls=e.externalUrls||new We(e.service),this.service=e.service,this.albumType=e.albumType||"album",this.followed=e.followed||!1}}class Qr{constructor(e){this.id=e.id,this.name=e.name,this.title_short=e.title_short||this.generateShortTitle(e.name),this.artists=e.artists||[],this.album=e.album,this.duration=e.duration||0,this.previewUrl=e.previewUrl,this.externalUrls=e.externalUrls||new We(e.service),this.service=e.service,this.popularity=e.popularity||0,this.trackNumber=e.trackNumber||0,this.discNumber=e.discNumber||1,this.followed=e.followed||!1}generateShortTitle(e){if(!e)return"";let s=e.trim();const r=[/\s*-\s*[^-]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)\s*$/i,/\s*\([^)]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^)]*\)\s*$/i,/\s*\[[^\]]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^\]]*\]\s*$/i];for(const n of r)s=s.replace(n,"");const o=[/^(?:feat\.|ft\.|featuring)\s*/i,/^(?:prod\.|produced by)\s*/i];for(const n of o)s=s.replace(n,"");return s.trim()}}class Wr{constructor(e){this.id=e.id,this.name=e.name,this.description=e.description||"",this.images=e.images||[],this.owner=e.owner,this.public=e.public||!1,this.totalTracks=e.totalTracks||0,this.externalUrls=e.externalUrls||new We(e.service),this.service=e.service,this.followed=e.followed||!1,this.tracks=e.tracks||[]}}class Er{constructor(e){this.tracks=e.tracks||[],this.artists=e.artists||[],this.albums=e.albums||[],this.playlists=e.playlists||[],this.total=e.total||0}}class Yr{constructor(e){this.id=e.id,this.displayName=e.displayName,this.email=e.email,this.country=e.country,this.images=e.images||[],this.followers=e.followers||0,this.service=e.service}}class us{constructor(){if(this.constructor===us)throw new Error("MusicServiceInterface is abstract and cannot be instantiated")}async authenticate(){throw new Error("authenticate() must be implemented by subclass")}async refreshToken(){throw new Error("refreshToken() must be implemented by subclass")}logout(){throw new Error("logout() must be implemented by subclass")}isAuthenticated(){throw new Error("isAuthenticated() must be implemented by subclass")}async getCurrentUser(){throw new Error("getCurrentUser() must be implemented by subclass")}async getTopTracks(e=ot.SHORT){throw new Error("getTopTracks() must be implemented by subclass")}async getTopArtists(e=ot.SHORT){throw new Error("getTopArtists() must be implemented by subclass")}async getSavedAlbums(e=0,s=20){throw new Error("getSavedAlbums() must be implemented by subclass")}async getSavedTracks(e=0,s=50){throw new Error("getSavedTracks() must be implemented by subclass")}async getFollowedArtists(e=50){throw new Error("getFollowedArtists() must be implemented by subclass")}async getPlaylists(e=0,s=50){throw new Error("getPlaylists() must be implemented by subclass")}async getPlaylist(e){throw new Error("getPlaylist() must be implemented by subclass")}async getPlaylistTracks(e,s=0,r=100){throw new Error("getPlaylistTracks() must be implemented by subclass")}async createPlaylist(e,s=""){throw new Error("createPlaylist() must be implemented by subclass")}async addTracksToPlaylist(e,s){throw new Error("addTracksToPlaylist() must be implemented by subclass")}async getArtist(e){throw new Error("getArtist() must be implemented by subclass")}async getArtistTopTracks(e,s="US",r=!0){throw new Error("getArtistTopTracks() must be implemented by subclass")}async getArtistAlbums(e,s="album",r=10){throw new Error("getArtistAlbums() must be implemented by subclass")}async getRelatedArtists(e){throw new Error("getRelatedArtists() must be implemented by subclass")}async getArtistAppearances(e,s=10){throw new Error("getArtistAppearances() must be implemented by subclass")}async getArtistPlaylists(e,s=10){throw new Error("getArtistPlaylists() must be implemented by subclass")}async getUserPlaylists(e,s=20){throw new Error("getUserPlaylists() must be implemented by subclass")}async getAlbum(e){throw new Error("getAlbum() must be implemented by subclass")}async getAlbumTracks(e){throw new Error("getAlbumTracks() must be implemented by subclass")}async getTrack(e){throw new Error("getTrack() must be implemented by subclass")}async search(e,s=["track","artist","album","playlist"],r=5){throw new Error("search() must be implemented by subclass")}async getNewReleases(e=20,s=0){throw new Error("getNewReleases() must be implemented by subclass")}async getRecommendations(e){throw new Error("getRecommendations() must be implemented by subclass")}async getCategories(e=0,s=50){throw new Error("getCategories() must be implemented by subclass")}async getCategoryPlaylists(e,s=0,r=50){throw new Error("getCategoryPlaylists() must be implemented by subclass")}async followArtist(e){throw new Error("followArtist() must be implemented by subclass")}async unfollowArtist(e){throw new Error("unfollowArtist() must be implemented by subclass")}async followAlbum(e){throw new Error("followAlbum() must be implemented by subclass")}async unfollowAlbum(e){throw new Error("unfollowAlbum() must be implemented by subclass")}async followTrack(e){throw new Error("followTrack() must be implemented by subclass")}async unfollowTrack(e){throw new Error("unfollowTrack() must be implemented by subclass")}async followPlaylist(e){throw new Error("followPlaylist() must be implemented by subclass")}async unfollowPlaylist(e){throw new Error("unfollowPlaylist() must be implemented by subclass")}async checkFollowingArtist(e){throw new Error("checkFollowingArtist() must be implemented by subclass")}async checkFollowingAlbum(e){throw new Error("checkFollowingAlbum() must be implemented by subclass")}async checkFollowingTrack(e){throw new Error("checkFollowingTrack() must be implemented by subclass")}async checkFollowingPlaylist(e){throw new Error("checkFollowingPlaylist() must be implemented by subclass")}getServiceName(){throw new Error("getServiceName() must be implemented by subclass")}getServiceType(){throw new Error("getServiceType() must be implemented by subclass")}transformTrack(e){return new Qr(e)}transformArtist(e){return new jr(e)}transformAlbum(e){return new Gr(e)}transformPlaylist(e){return new Wr(e)}transformUser(e){return new Yr(e)}}function Cl(t,e){return function(){return t.apply(e,arguments)}}const{toString:Wu}=Object.prototype,{getPrototypeOf:mn}=Object,{iterator:Xr,toStringTag:Pl}=Symbol,Jr=(t=>e=>{const s=Wu.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),wt=t=>(t=t.toLowerCase(),e=>Jr(e)===t),Zr=t=>e=>typeof e===t,{isArray:$s}=Array,Ys=Zr("undefined");function sr(t){return t!==null&&!Ys(t)&&t.constructor!==null&&!Ys(t.constructor)&&nt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xl=wt("ArrayBuffer");function Yu(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xl(t.buffer),e}const Xu=Zr("string"),nt=Zr("function"),Rl=Zr("number"),rr=t=>t!==null&&typeof t=="object",Ju=t=>t===!0||t===!1,yr=t=>{if(Jr(t)!=="object")return!1;const e=mn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Pl in t)&&!(Xr in t)},Zu=t=>{if(!rr(t)||sr(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ed=wt("Date"),td=wt("File"),sd=wt("Blob"),rd=wt("FileList"),od=t=>rr(t)&&nt(t.pipe),nd=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||nt(t.append)&&((e=Jr(t))==="formdata"||e==="object"&&nt(t.toString)&&t.toString()==="[object FormData]"))},id=wt("URLSearchParams"),[ld,ad,cd,ud]=["ReadableStream","Request","Response","Headers"].map(wt),dd=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function or(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),$s(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{if(sr(t))return;const n=s?Object.getOwnPropertyNames(t):Object.keys(t),i=n.length;let a;for(r=0;r<i;r++)a=n[r],e.call(null,t[a],a,t)}}function Ml(t,e){if(sr(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,o;for(;r-- >0;)if(o=s[r],e===o.toLowerCase())return o;return null}const rs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,El=t=>!Ys(t)&&t!==rs;function Fo(){const{caseless:t}=El(this)&&this||{},e={},s=(r,o)=>{const n=t&&Ml(e,o)||o;yr(e[n])&&yr(r)?e[n]=Fo(e[n],r):yr(r)?e[n]=Fo({},r):$s(r)?e[n]=r.slice():e[n]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&or(arguments[r],s);return e}const fd=(t,e,s,{allOwnKeys:r}={})=>(or(e,(o,n)=>{s&&nt(o)?t[n]=Cl(o,s):t[n]=o},{allOwnKeys:r}),t),pd=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),md=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},hd=(t,e,s,r)=>{let o,n,i;const a={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),n=o.length;n-- >0;)i=o[n],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=s!==!1&&mn(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},vd=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},gd=t=>{if(!t)return null;if($s(t))return t;let e=t.length;if(!Rl(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},yd=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&mn(Uint8Array)),wd=(t,e)=>{const r=(t&&t[Xr]).call(t);let o;for(;(o=r.next())&&!o.done;){const n=o.value;e.call(t,n[0],n[1])}},bd=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},kd=wt("HTMLFormElement"),_d=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,o){return r.toUpperCase()+o}),Zn=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Sd=wt("RegExp"),Il=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};or(s,(o,n)=>{let i;(i=e(o,n,t))!==!1&&(r[n]=i||o)}),Object.defineProperties(t,r)},Td=t=>{Il(t,(e,s)=>{if(nt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(nt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Ad=(t,e)=>{const s={},r=o=>{o.forEach(n=>{s[n]=!0})};return $s(t)?r(t):r(String(t).split(e)),s},$d=()=>{},Cd=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Pd(t){return!!(t&&nt(t.append)&&t[Pl]==="FormData"&&t[Xr])}const xd=t=>{const e=new Array(10),s=(r,o)=>{if(rr(r)){if(e.indexOf(r)>=0)return;if(sr(r))return r;if(!("toJSON"in r)){e[o]=r;const n=$s(r)?[]:{};return or(r,(i,a)=>{const c=s(i,o+1);!Ys(c)&&(n[a]=c)}),e[o]=void 0,n}}return r};return s(t,0)},Rd=wt("AsyncFunction"),Md=t=>t&&(rr(t)||nt(t))&&nt(t.then)&&nt(t.catch),Ll=((t,e)=>t?setImmediate:e?((s,r)=>(rs.addEventListener("message",({source:o,data:n})=>{o===rs&&n===s&&r.length&&r.shift()()},!1),o=>{r.push(o),rs.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",nt(rs.postMessage)),Ed=typeof queueMicrotask<"u"?queueMicrotask.bind(rs):typeof process<"u"&&process.nextTick||Ll,Id=t=>t!=null&&nt(t[Xr]),U={isArray:$s,isArrayBuffer:xl,isBuffer:sr,isFormData:nd,isArrayBufferView:Yu,isString:Xu,isNumber:Rl,isBoolean:Ju,isObject:rr,isPlainObject:yr,isEmptyObject:Zu,isReadableStream:ld,isRequest:ad,isResponse:cd,isHeaders:ud,isUndefined:Ys,isDate:ed,isFile:td,isBlob:sd,isRegExp:Sd,isFunction:nt,isStream:od,isURLSearchParams:id,isTypedArray:yd,isFileList:rd,forEach:or,merge:Fo,extend:fd,trim:dd,stripBOM:pd,inherits:md,toFlatObject:hd,kindOf:Jr,kindOfTest:wt,endsWith:vd,toArray:gd,forEachEntry:wd,matchAll:bd,isHTMLForm:kd,hasOwnProperty:Zn,hasOwnProp:Zn,reduceDescriptors:Il,freezeMethods:Td,toObjectSet:Ad,toCamelCase:_d,noop:$d,toFiniteNumber:Cd,findKey:Ml,global:rs,isContextDefined:El,isSpecCompliantForm:Pd,toJSONObject:xd,isAsyncFn:Rd,isThenable:Md,setImmediate:Ll,asap:Ed,isIterable:Id};function ue(t,e,s,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}U.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const Dl=ue.prototype,zl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zl[t]={value:t}});Object.defineProperties(ue,zl);Object.defineProperty(Dl,"isAxiosError",{value:!0});ue.from=(t,e,s,r,o,n)=>{const i=Object.create(Dl);return U.toFlatObject(t,i,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ue.call(i,t.message,e,s,r,o),i.cause=t,i.name=t.name,n&&Object.assign(i,n),i};const Ld=null;function qo(t){return U.isPlainObject(t)||U.isArray(t)}function Ul(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function ei(t,e,s){return t?t.concat(e).map(function(o,n){return o=Ul(o),!s&&n?"["+o+"]":o}).join(s?".":""):e}function Dd(t){return U.isArray(t)&&!t.some(qo)}const zd=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function eo(t,e,s){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=U.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,p){return!U.isUndefined(p[m])});const r=s.metaTokens,o=s.visitor||d,n=s.dots,i=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(o))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(U.isDate(v))return v.toISOString();if(U.isBoolean(v))return v.toString();if(!c&&U.isBlob(v))throw new ue("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(v)||U.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,m,p){let k=v;if(v&&!p&&typeof v=="object"){if(U.endsWith(m,"{}"))m=r?m:m.slice(0,-2),v=JSON.stringify(v);else if(U.isArray(v)&&Dd(v)||(U.isFileList(v)||U.endsWith(m,"[]"))&&(k=U.toArray(v)))return m=Ul(m),k.forEach(function(S,T){!(U.isUndefined(S)||S===null)&&e.append(i===!0?ei([m],T,n):i===null?m:m+"[]",u(S))}),!1}return qo(v)?!0:(e.append(ei(p,m,n),u(v)),!1)}const f=[],y=Object.assign(zd,{defaultVisitor:d,convertValue:u,isVisitable:qo});function b(v,m){if(!U.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(v),U.forEach(v,function(k,_){(!(U.isUndefined(k)||k===null)&&o.call(e,k,U.isString(_)?_.trim():_,m,y))===!0&&b(k,m?m.concat(_):[_])}),f.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return b(t),e}function ti(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function hn(t,e){this._pairs=[],t&&eo(t,this,e)}const Ol=hn.prototype;Ol.append=function(e,s){this._pairs.push([e,s])};Ol.toString=function(e){const s=e?function(r){return e.call(this,r,ti)}:ti;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function Ud(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fl(t,e,s){if(!e)return t;const r=s&&s.encode||Ud;U.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let n;if(o?n=o(e,s):n=U.isURLSearchParams(e)?e.toString():new hn(e,s).toString(r),n){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class si{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ql={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Od=typeof URLSearchParams<"u"?URLSearchParams:hn,Fd=typeof FormData<"u"?FormData:null,qd=typeof Blob<"u"?Blob:null,Vd={isBrowser:!0,classes:{URLSearchParams:Od,FormData:Fd,Blob:qd},protocols:["http","https","file","blob","url","data"]},vn=typeof window<"u"&&typeof document<"u",Vo=typeof navigator=="object"&&navigator||void 0,Nd=vn&&(!Vo||["ReactNative","NativeScript","NS"].indexOf(Vo.product)<0),Hd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bd=vn&&window.location.href||"http://localhost",Kd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vn,hasStandardBrowserEnv:Nd,hasStandardBrowserWebWorkerEnv:Hd,navigator:Vo,origin:Bd},Symbol.toStringTag,{value:"Module"})),Ge={...Kd,...Vd};function jd(t,e){return eo(t,new Ge.classes.URLSearchParams,{visitor:function(s,r,o,n){return Ge.isNode&&U.isBuffer(s)?(this.append(r,s.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...e})}function Gd(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Qd(t){const e={},s=Object.keys(t);let r;const o=s.length;let n;for(r=0;r<o;r++)n=s[r],e[n]=t[n];return e}function Vl(t){function e(s,r,o,n){let i=s[n++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),c=n>=s.length;return i=!i&&U.isArray(o)?o.length:i,c?(U.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!U.isObject(o[i]))&&(o[i]=[]),e(s,r,o[i],n)&&U.isArray(o[i])&&(o[i]=Qd(o[i])),!a)}if(U.isFormData(t)&&U.isFunction(t.entries)){const s={};return U.forEachEntry(t,(r,o)=>{e(Gd(r),o,s,0)}),s}return null}function Wd(t,e,s){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const nr={transitional:ql,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",o=r.indexOf("application/json")>-1,n=U.isObject(e);if(n&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return o?JSON.stringify(Vl(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return jd(e,this.formSerializer).toString();if((a=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return eo(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return n||o?(s.setContentType("application/json",!1),Wd(e)):e}],transformResponse:[function(e){const s=this.transitional||nr.transitional,r=s&&s.forcedJSONParsing,o=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||o)){const i=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?ue.from(a,ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ge.classes.FormData,Blob:Ge.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{nr.headers[t]={}});const Yd=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xd=t=>{const e={};let s,r,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),s=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!s||e[s]&&Yd[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},ri=Symbol("internals");function Ds(t){return t&&String(t).trim().toLowerCase()}function wr(t){return t===!1||t==null?t:U.isArray(t)?t.map(wr):String(t)}function Jd(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const Zd=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function yo(t,e,s,r,o){if(U.isFunction(r))return r.call(this,e,s);if(o&&(e=s),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function ef(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function tf(t,e){const s=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(o,n,i){return this[r].call(this,e,o,n,i)},configurable:!0})})}let it=class{constructor(e){e&&this.set(e)}set(e,s,r){const o=this;function n(a,c,u){const d=Ds(c);if(!d)throw new Error("header name must be a non-empty string");const f=U.findKey(o,d);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||c]=wr(a))}const i=(a,c)=>U.forEach(a,(u,d)=>n(u,d,c));if(U.isPlainObject(e)||e instanceof this.constructor)i(e,s);else if(U.isString(e)&&(e=e.trim())&&!Zd(e))i(Xd(e),s);else if(U.isObject(e)&&U.isIterable(e)){let a={},c,u;for(const d of e){if(!U.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(c=a[u])?U.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}i(a,s)}else e!=null&&n(s,e,r);return this}get(e,s){if(e=Ds(e),e){const r=U.findKey(this,e);if(r){const o=this[r];if(!s)return o;if(s===!0)return Jd(o);if(U.isFunction(s))return s.call(this,o,r);if(U.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Ds(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||yo(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let o=!1;function n(i){if(i=Ds(i),i){const a=U.findKey(r,i);a&&(!s||yo(r,r[a],a,s))&&(delete r[a],o=!0)}}return U.isArray(e)?e.forEach(n):n(e),o}clear(e){const s=Object.keys(this);let r=s.length,o=!1;for(;r--;){const n=s[r];(!e||yo(this,this[n],n,e,!0))&&(delete this[n],o=!0)}return o}normalize(e){const s=this,r={};return U.forEach(this,(o,n)=>{const i=U.findKey(r,n);if(i){s[i]=wr(o),delete s[n];return}const a=e?ef(n):String(n).trim();a!==n&&delete s[n],s[a]=wr(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return U.forEach(this,(r,o)=>{r!=null&&r!==!1&&(s[o]=e&&U.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[ri]=this[ri]={accessors:{}}).accessors,o=this.prototype;function n(i){const a=Ds(i);r[a]||(tf(o,i),r[a]=!0)}return U.isArray(e)?e.forEach(n):n(e),this}};it.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(it.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});U.freezeMethods(it);function wo(t,e){const s=this||nr,r=e||s,o=it.from(r.headers);let n=r.data;return U.forEach(t,function(a){n=a.call(s,n,o.normalize(),e?e.status:void 0)}),o.normalize(),n}function Nl(t){return!!(t&&t.__CANCEL__)}function Cs(t,e,s){ue.call(this,t??"canceled",ue.ERR_CANCELED,e,s),this.name="CanceledError"}U.inherits(Cs,ue,{__CANCEL__:!0});function Hl(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new ue("Request failed with status code "+s.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function sf(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function rf(t,e){t=t||10;const s=new Array(t),r=new Array(t);let o=0,n=0,i;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[n];i||(i=u),s[o]=c,r[o]=u;let f=n,y=0;for(;f!==o;)y+=s[f++],f=f%t;if(o=(o+1)%t,o===n&&(n=(n+1)%t),u-i<e)return;const b=d&&u-d;return b?Math.round(y*1e3/b):void 0}}function of(t,e){let s=0,r=1e3/e,o,n;const i=(u,d=Date.now())=>{s=d,o=null,n&&(clearTimeout(n),n=null),t(...u)};return[(...u)=>{const d=Date.now(),f=d-s;f>=r?i(u,d):(o=u,n||(n=setTimeout(()=>{n=null,i(o)},r-f)))},()=>o&&i(o)]}const Ir=(t,e,s=3)=>{let r=0;const o=rf(50,250);return of(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,c=i-r,u=o(c),d=i<=a;r=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&d?(a-i)/u:void 0,event:n,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},s)},oi=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},ni=t=>(...e)=>U.asap(()=>t(...e)),nf=Ge.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ge.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ge.origin),Ge.navigator&&/(msie|trident)/i.test(Ge.navigator.userAgent)):()=>!0,lf=Ge.hasStandardBrowserEnv?{write(t,e,s,r,o,n){const i=[t+"="+encodeURIComponent(e)];U.isNumber(s)&&i.push("expires="+new Date(s).toGMTString()),U.isString(r)&&i.push("path="+r),U.isString(o)&&i.push("domain="+o),n===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function af(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function cf(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Bl(t,e,s){let r=!af(e);return t&&(r||s==!1)?cf(t,e):e}const ii=t=>t instanceof it?{...t}:t;function cs(t,e){e=e||{};const s={};function r(u,d,f,y){return U.isPlainObject(u)&&U.isPlainObject(d)?U.merge.call({caseless:y},u,d):U.isPlainObject(d)?U.merge({},d):U.isArray(d)?d.slice():d}function o(u,d,f,y){if(U.isUndefined(d)){if(!U.isUndefined(u))return r(void 0,u,f,y)}else return r(u,d,f,y)}function n(u,d){if(!U.isUndefined(d))return r(void 0,d)}function i(u,d){if(U.isUndefined(d)){if(!U.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const c={url:n,method:n,data:n,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,d,f)=>o(ii(u),ii(d),f,!0)};return U.forEach(Object.keys({...t,...e}),function(d){const f=c[d]||o,y=f(t[d],e[d],d);U.isUndefined(y)&&f!==a||(s[d]=y)}),s}const Kl=t=>{const e=cs({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:n,headers:i,auth:a}=e;e.headers=i=it.from(i),e.url=Fl(Bl(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(U.isFormData(s)){if(Ge.hasStandardBrowserEnv||Ge.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...d].join("; "))}}if(Ge.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&nf(e.url))){const u=o&&n&&lf.read(n);u&&i.set(o,u)}return e},uf=typeof XMLHttpRequest<"u",df=uf&&function(t){return new Promise(function(s,r){const o=Kl(t);let n=o.data;const i=it.from(o.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=o,d,f,y,b,v;function m(){b&&b(),v&&v(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let p=new XMLHttpRequest;p.open(o.method.toUpperCase(),o.url,!0),p.timeout=o.timeout;function k(){if(!p)return;const S=it.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),P={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:t,request:p};Hl(function(D){s(D),m()},function(D){r(D),m()},P),p=null}"onloadend"in p?p.onloadend=k:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(k)},p.onabort=function(){p&&(r(new ue("Request aborted",ue.ECONNABORTED,t,p)),p=null)},p.onerror=function(){r(new ue("Network Error",ue.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let T=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const P=o.transitional||ql;o.timeoutErrorMessage&&(T=o.timeoutErrorMessage),r(new ue(T,P.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,t,p)),p=null},n===void 0&&i.setContentType(null),"setRequestHeader"in p&&U.forEach(i.toJSON(),function(T,P){p.setRequestHeader(P,T)}),U.isUndefined(o.withCredentials)||(p.withCredentials=!!o.withCredentials),a&&a!=="json"&&(p.responseType=o.responseType),u&&([y,v]=Ir(u,!0),p.addEventListener("progress",y)),c&&p.upload&&([f,b]=Ir(c),p.upload.addEventListener("progress",f),p.upload.addEventListener("loadend",b)),(o.cancelToken||o.signal)&&(d=S=>{p&&(r(!S||S.type?new Cs(null,t,p):S),p.abort(),p=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const _=sf(o.url);if(_&&Ge.protocols.indexOf(_)===-1){r(new ue("Unsupported protocol "+_+":",ue.ERR_BAD_REQUEST,t));return}p.send(n||null)})},ff=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,o;const n=function(u){if(!o){o=!0,a();const d=u instanceof Error?u:this.reason;r.abort(d instanceof ue?d:new Cs(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,n(new ue(`timeout ${e} of ms exceeded`,ue.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(n):u.removeEventListener("abort",n)}),t=null)};t.forEach(u=>u.addEventListener("abort",n));const{signal:c}=r;return c.unsubscribe=()=>U.asap(a),c}},pf=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,o;for(;r<s;)o=r+e,yield t.slice(r,o),r=o},mf=async function*(t,e){for await(const s of hf(t))yield*pf(s,e)},hf=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},li=(t,e,s,r)=>{const o=mf(t,e);let n=0,i,a=c=>{i||(i=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await o.next();if(u){a(),c.close();return}let f=d.byteLength;if(s){let y=n+=f;s(y)}c.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(c){return a(c),o.return()}},{highWaterMark:2})},to=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jl=to&&typeof ReadableStream=="function",vf=to&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Gl=(t,...e)=>{try{return!!t(...e)}catch{return!1}},gf=jl&&Gl(()=>{let t=!1;const e=new Request(Ge.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),ai=64*1024,No=jl&&Gl(()=>U.isReadableStream(new Response("").body)),Lr={stream:No&&(t=>t.body)};to&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Lr[e]&&(Lr[e]=U.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new ue(`Response type '${e}' is not supported`,ue.ERR_NOT_SUPPORT,r)})})})(new Response);const yf=async t=>{if(t==null)return 0;if(U.isBlob(t))return t.size;if(U.isSpecCompliantForm(t))return(await new Request(Ge.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(U.isArrayBufferView(t)||U.isArrayBuffer(t))return t.byteLength;if(U.isURLSearchParams(t)&&(t=t+""),U.isString(t))return(await vf(t)).byteLength},wf=async(t,e)=>{const s=U.toFiniteNumber(t.getContentLength());return s??yf(e)},bf=to&&(async t=>{let{url:e,method:s,data:r,signal:o,cancelToken:n,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:y}=Kl(t);u=u?(u+"").toLowerCase():"text";let b=ff([o,n&&n.toAbortSignal()],i),v;const m=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let p;try{if(c&&gf&&s!=="get"&&s!=="head"&&(p=await wf(d,r))!==0){let P=new Request(e,{method:"POST",body:r,duplex:"half"}),x;if(U.isFormData(r)&&(x=P.headers.get("content-type"))&&d.setContentType(x),P.body){const[D,A]=oi(p,Ir(ni(c)));r=li(P.body,ai,D,A)}}U.isString(f)||(f=f?"include":"omit");const k="credentials"in Request.prototype;v=new Request(e,{...y,signal:b,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:k?f:void 0});let _=await fetch(v,y);const S=No&&(u==="stream"||u==="response");if(No&&(a||S&&m)){const P={};["status","statusText","headers"].forEach(O=>{P[O]=_[O]});const x=U.toFiniteNumber(_.headers.get("content-length")),[D,A]=a&&oi(x,Ir(ni(a),!0))||[];_=new Response(li(_.body,ai,D,()=>{A&&A(),m&&m()}),P)}u=u||"text";let T=await Lr[U.findKey(Lr,u)||"text"](_,t);return!S&&m&&m(),await new Promise((P,x)=>{Hl(P,x,{data:T,headers:it.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:v})})}catch(k){throw m&&m(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new ue("Network Error",ue.ERR_NETWORK,t,v),{cause:k.cause||k}):ue.from(k,k&&k.code,t,v)}}),Ho={http:Ld,xhr:df,fetch:bf};U.forEach(Ho,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ci=t=>`- ${t}`,kf=t=>U.isFunction(t)||t===null||t===!1,Ql={getAdapter:t=>{t=U.isArray(t)?t:[t];const{length:e}=t;let s,r;const o={};for(let n=0;n<e;n++){s=t[n];let i;if(r=s,!kf(s)&&(r=Ho[(i=String(s)).toLowerCase()],r===void 0))throw new ue(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+n]=r}if(!r){const n=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=e?n.length>1?`since :
`+n.map(ci).join(`
`):" "+ci(n[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Ho};function bo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Cs(null,t)}function ui(t){return bo(t),t.headers=it.from(t.headers),t.data=wo.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ql.getAdapter(t.adapter||nr.adapter)(t).then(function(r){return bo(t),r.data=wo.call(t,t.transformResponse,r),r.headers=it.from(r.headers),r},function(r){return Nl(r)||(bo(t),r&&r.response&&(r.response.data=wo.call(t,t.transformResponse,r.response),r.response.headers=it.from(r.response.headers))),Promise.reject(r)})}const Wl="1.11.0",so={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{so[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const di={};so.transitional=function(e,s,r){function o(n,i){return"[Axios v"+Wl+"] Transitional option '"+n+"'"+i+(r?". "+r:"")}return(n,i,a)=>{if(e===!1)throw new ue(o(i," has been removed"+(s?" in "+s:"")),ue.ERR_DEPRECATED);return s&&!di[i]&&(di[i]=!0,console.warn(o(i," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(n,i,a):!0}};so.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function _f(t,e,s){if(typeof t!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const n=r[o],i=e[n];if(i){const a=t[n],c=a===void 0||i(a,n,t);if(c!==!0)throw new ue("option "+n+" must be "+c,ue.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ue("Unknown option "+n,ue.ERR_BAD_OPTION)}}const br={assertOptions:_f,validators:so},Tt=br.validators;let is=class{constructor(e){this.defaults=e||{},this.interceptors={request:new si,response:new si}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const n=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?n&&!String(r.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+n):r.stack=n}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=cs(this.defaults,s);const{transitional:r,paramsSerializer:o,headers:n}=s;r!==void 0&&br.assertOptions(r,{silentJSONParsing:Tt.transitional(Tt.boolean),forcedJSONParsing:Tt.transitional(Tt.boolean),clarifyTimeoutError:Tt.transitional(Tt.boolean)},!1),o!=null&&(U.isFunction(o)?s.paramsSerializer={serialize:o}:br.assertOptions(o,{encode:Tt.function,serialize:Tt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),br.assertOptions(s,{baseUrl:Tt.spelling("baseURL"),withXsrfToken:Tt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let i=n&&U.merge(n.common,n[s.method]);n&&U.forEach(["delete","get","head","post","put","patch","common"],v=>{delete n[v]}),s.headers=it.concat(i,n);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(s)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,f=0,y;if(!c){const v=[ui.bind(this),void 0];for(v.unshift(...a),v.push(...u),y=v.length,d=Promise.resolve(s);f<y;)d=d.then(v[f++],v[f++]);return d}y=a.length;let b=s;for(f=0;f<y;){const v=a[f++],m=a[f++];try{b=v(b)}catch(p){m.call(this,p);break}}try{d=ui.call(this,b)}catch(v){return Promise.reject(v)}for(f=0,y=u.length;f<y;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=cs(this.defaults,e);const s=Bl(e.baseURL,e.url,e.allowAbsoluteUrls);return Fl(s,e.params,e.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(e){is.prototype[e]=function(s,r){return this.request(cs(r||{},{method:e,url:s,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function s(r){return function(n,i,a){return this.request(cs(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}is.prototype[e]=s(),is.prototype[e+"Form"]=s(!0)});let Sf=class Yl{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(n){s=n});const r=this;this.promise.then(o=>{if(!r._listeners)return;let n=r._listeners.length;for(;n-- >0;)r._listeners[n](o);r._listeners=null}),this.promise.then=o=>{let n;const i=new Promise(a=>{r.subscribe(a),n=a}).then(o);return i.cancel=function(){r.unsubscribe(n)},i},e(function(n,i,a){r.reason||(r.reason=new Cs(n,i,a),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Yl(function(o){e=o}),cancel:e}}};function Tf(t){return function(s){return t.apply(null,s)}}function Af(t){return U.isObject(t)&&t.isAxiosError===!0}const Bo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bo).forEach(([t,e])=>{Bo[e]=t});function Xl(t){const e=new is(t),s=Cl(is.prototype.request,e);return U.extend(s,is.prototype,e,{allOwnKeys:!0}),U.extend(s,e,null,{allOwnKeys:!0}),s.create=function(o){return Xl(cs(t,o))},s}const ke=Xl(nr);ke.Axios=is;ke.CanceledError=Cs;ke.CancelToken=Sf;ke.isCancel=Nl;ke.VERSION=Wl;ke.toFormData=eo;ke.AxiosError=ue;ke.Cancel=ke.CanceledError;ke.all=function(e){return Promise.all(e)};ke.spread=Tf;ke.isAxiosError=Af;ke.mergeConfig=cs;ke.AxiosHeaders=it;ke.formToJSON=t=>Vl(U.isHTMLForm(t)?new FormData(t):t);ke.getAdapter=Ql.getAdapter;ke.HttpStatusCode=Bo;ke.default=ke;const{Axios:s_,AxiosError:r_,CanceledError:o_,isCancel:n_,CancelToken:i_,VERSION:l_,all:a_,Cancel:c_,isAxiosError:u_,spread:d_,toFormData:f_,AxiosHeaders:p_,HttpStatusCode:m_,formToJSON:h_,getAdapter:v_,mergeConfig:g_}=ke;class $f extends us{constructor(){super(),this.baseURL="https://api.spotify.com/v1",this.serviceType=te.SPOTIFY}getServiceName(){return"Spotify"}getServiceType(){return this.serviceType}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,...s.headers},...s};try{return await ke(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,ke(o);throw i}}async refreshToken(){const e=this.getUsername(),s=await ke.get(`/spotify/refresh_token/${e}`);if(s.status===200)return s.data;throw new Error("Failed to refresh token")}async authenticate(){window.location.href="/spotify/login"}logout(){window.location.href="/spotify/logout"}isAuthenticated(){return!!this.getToken()}async getCurrentUser(){var s,r;const e=await this.request("/me");return this.transformUser({id:e.data.id,displayName:e.data.display_name,email:e.data.email,country:e.data.country,images:((s=e.data.images)==null?void 0:s.map(o=>new et(o.url,o.width,o.height)))||[],followers:((r=e.data.followers)==null?void 0:r.total)||0,service:this.serviceType})}async getTopTracks(e=ot.SHORT){return(await this.request(`/me/top/tracks?time_range=${e}`)).data.items.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTopArtists(e=ot.SHORT){return(await this.request(`/me/top/artists?time_range=${e}`)).data.items.map(r=>this.transformArtist({...r,service:this.serviceType}))}async getSavedAlbums(e=0,s=20){return(await this.request(`/me/albums?offset=${e}&limit=${s}`)).data.items.map(o=>({...o,album:this.transformAlbum({...o.album,service:this.serviceType})}))}async getSavedTracks(e=0,s=50){const r=await this.request(`/me/tracks?offset=${e}&limit=${s}`);return{items:r.data.items.map(n=>({...n,track:this.transformTrack({...n.track,service:this.serviceType})})),total:r.data.total}}async getFollowedArtists(e=50){return(await this.request(`/me/following?type=artist&limit=${e}`)).data.artists.items.map(r=>this.transformArtist({...r,service:this.serviceType}))}async getPlaylists(e=0,s=50){return(await this.request(`/users/spotify/playlists?fields=items(name,id,images,owner,public)&limit=${s}&offset=${e}`)).data.items.map(o=>this.transformPlaylist({...o,service:this.serviceType}))}async getPlaylist(e){const s=await this.request(`/playlists/${e}`);return this.transformPlaylist({...s.data,service:this.serviceType})}async getPlaylistTracks(e,s=0,r=100){return(await this.request(`/playlists/${e}/tracks?offset=${s}&limit=${r}`)).data.items.map(n=>this.transformTrack({...n.track,service:this.serviceType}))}async getGenrePlaylist(e){const s=await this.request(`/playlists/${e}`),r=await this.request(`/playlists/${e}/tracks?limit=50`);console.log("Spotify getGenrePlaylist - playlist:",s.data.name),console.log("Spotify getGenrePlaylist - tracks count:",r.data.items.length);const o={...s.data,tracks:{items:r.data.items,total:r.data.total}};return this.transformPlaylist(o)}async createPlaylist(e,s=""){const r=this.getUsername(),o=await this.request(`/users/${r}/playlists`,{method:"POST",data:{name:e,description:s}});return this.transformPlaylist({...o.data,service:this.serviceType})}async addTracksToPlaylist(e,s){const r=s.map(o=>`spotify:track:${o}`).join(",");await this.request(`/playlists/${e}/tracks?uris=${r}`,{method:"POST"})}async getArtist(e){const s=await this.request(`/artists/${e}`);return this.transformArtist({...s.data,service:this.serviceType})}async getArtistTopTracks(e,s="US"){const r=this.getCountry();return(await this.request(`/artists/${e}/top-tracks?market=${s}${r}`)).data.tracks.map(n=>this.transformTrack({...n,service:this.serviceType}))}async getArtistAlbums(e,s="album",r=10){return(await this.request(`/artists/${e}/albums?include_groups=${s}&limit=${r}`)).data.items.map(n=>this.transformAlbum({...n,service:this.serviceType}))}async getArtistSingles(e,s=10){return(await this.request(`/artists/${e}/albums?include_groups=single&limit=${s}`)).data.items.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getArtistAppearances(e,s=10){return(await this.request(`/artists/${e}/albums?include_groups=appears_on&limit=${s}`)).data.items.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getArtistPlaylists(e,s=10){return console.warn("getArtistPlaylists not fully implemented for Spotify service (returning empty array for now)"),[]}async getRelatedArtists(e){try{return(await this.request(`/artists/${e}/related-artists`)).data.artists.map(r=>this.transformArtist({...r,service:this.serviceType}))}catch(s){return console.warn("Failed to fetch related artists:",s.message),[]}}async getAlbum(e){const s=await this.request(`/albums/${e}`);return this.transformAlbum({...s.data,service:this.serviceType})}async getAlbumTracks(e){return(await this.request(`/albums/${e}/tracks`)).data.items.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTrack(e){const s=await this.request(`/tracks/${e}`);return this.transformTrack({...s.data,service:this.serviceType})}async search(e,s=["track","artist","album","playlist"],r=5){var n,i,a,c,u;const o=await this.request(`/search/?q=${encodeURIComponent(e)}&type=${s.join(",")}&limit=${r}`);return new Er({tracks:((n=o.data.tracks)==null?void 0:n.items.map(d=>this.transformTrack({...d,service:this.serviceType})))||[],artists:((i=o.data.artists)==null?void 0:i.items.map(d=>this.transformArtist({...d,service:this.serviceType})))||[],albums:((a=o.data.albums)==null?void 0:a.items.map(d=>this.transformAlbum({...d,service:this.serviceType})))||[],playlists:((c=o.data.playlists)==null?void 0:c.items.map(d=>this.transformPlaylist({...d,service:this.serviceType})))||[],total:((u=o.data.tracks)==null?void 0:u.total)||0})}async getNewReleases(e=20,s=0){return(await this.request(`/browse/new-releases?limit=${e}&offset=${s}`)).data.albums.items.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getRecommendations(e){const s=Object.entries(e).filter(([o,n])=>n).map(([o,n])=>`${o}=${n}`).join("&");return(await this.request(`/recommendations?${s}`)).data.tracks.map(o=>this.transformTrack({...o,service:this.serviceType}))}async getCategories(e=0,s=50){const r=await this.request(`/browse/categories?offset=${e}&limit=${s}`);return{items:r.data.categories.items.map(o=>({id:o.id,name:o.name,icons:o.icons,href:o.href})),total:r.data.categories.total,next:r.data.categories.next,previous:r.data.categories.previous}}async getCategoryPlaylists(e,s=0,r=50){const o=await this.request(`/browse/categories/${e}/playlists?offset=${s}&limit=${r}`);return{items:o.data.playlists.items.map(n=>this.transformPlaylist({...n,service:this.serviceType})),total:o.data.playlists.total,next:o.data.playlists.next,previous:o.data.playlists.previous}}async getGenres(e=0,s=50){try{let r;const o=["/src/data/the_sound_of.json","/data/the_sound_of.json","./data/the_sound_of.json","../data/the_sound_of.json"];for(const a of o)try{if(r=await fetch(a),r.ok){console.log("✅ Found genres file at:",a);break}}catch(c){console.log("❌ Failed to load from:",a,c.message)}if(!r||!r.ok)throw new Error("Failed to load genres data from any path");const n=await r.json();return{items:n.slice(e,e+s).map(a=>({id:a.id,name:a.name,type:"genre",icons:[],href:`https://open.spotify.com/genre/${a.id}`,description:a.name,images:[]})),total:n.length,next:e+s<n.length?`/genres?offset=${e+s}&limit=${s}`:null,previous:e>0?`/genres?offset=${Math.max(0,e-s)}&limit=${s}`:null}}catch(r){throw console.error("Spotify getGenres error:",r),r}}async followArtist(e){await this.request(`/me/following?type=artist&ids=${e}`,{method:"PUT"})}async unfollowArtist(e){await this.request(`/me/following?type=artist&ids=${e}`,{method:"DELETE"})}async followAlbum(e){await this.request(`/me/albums?ids=${e}`,{method:"PUT"})}async unfollowAlbum(e){await this.request(`/me/albums?ids=${e}`,{method:"DELETE"})}async followTrack(e){await this.request(`/me/tracks?ids=${e}`,{method:"PUT"})}async unfollowTrack(e){await this.request(`/me/tracks?ids=${e}`,{method:"DELETE"})}async followPlaylist(e){await this.request(`/playlists/${e}/followers`,{method:"PUT"})}async unfollowPlaylist(e){await this.request(`/playlists/${e}/followers`,{method:"DELETE"})}async checkFollowingArtist(e){return(await this.request(`/me/following/contains?type=artist&ids=${e}`)).data[0]}async checkFollowingAlbum(e){return(await this.request(`/me/albums/contains?ids=${e}`)).data[0]}async checkFollowingTrack(e){return(await this.request(`/me/tracks/contains?ids=${e}`)).data[0]}async checkFollowingPlaylist(e){const s=this.getUsername();return(await this.request(`/playlists/${e}/followers/contains?ids=${s}`)).data[0]}transformTrack(e){var s;return new Qr({id:e.id,name:e.name,artists:((s=e.artists)==null?void 0:s.map(r=>this.transformArtist({...r,service:this.serviceType})))||[],album:e.album?this.transformAlbum({...e.album,service:this.serviceType}):null,duration:e.duration_ms||e.duration,previewUrl:e.preview_url,externalUrls:new We(this.serviceType,e.external_urls||{}),service:this.serviceType,popularity:e.popularity||0,trackNumber:e.track_number||0,discNumber:e.disc_number||1,followed:e.followed||!1})}transformArtist(e){var s,r;return new jr({id:e.id,name:e.name,images:((s=e.images)==null?void 0:s.map(o=>new et(o.url,o.width,o.height)))||[],genres:e.genres||[],externalUrls:new We(this.serviceType,e.external_urls||{}),service:this.serviceType,popularity:e.popularity||0,followers:((r=e.followers)==null?void 0:r.total)||0,followed:e.followed||!1})}transformAlbum(e){var s,r;return new Gr({id:e.id,name:e.name,artists:((s=e.artists)==null?void 0:s.map(o=>this.transformArtist({...o,service:this.serviceType})))||[],images:((r=e.images)==null?void 0:r.map(o=>new et(o.url,o.width,o.height)))||[],releaseDate:e.release_date,totalTracks:e.total_tracks||0,externalUrls:new We(this.serviceType,e.external_urls||{}),service:this.serviceType,albumType:e.album_type||"album",followed:e.followed||!1})}transformPlaylist(e){var s,r,o,n;return new Wr({id:e.id,name:e.name,description:e.description||"",images:((s=e.images)==null?void 0:s.map(i=>new et(i.url,i.width,i.height)))||[],owner:e.owner,public:e.public||!1,totalTracks:((r=e.tracks)==null?void 0:r.total)||0,externalUrls:new We(this.serviceType,e.external_urls||{}),service:this.serviceType,followed:e.followed||!1,tracks:((n=(o=e.tracks)==null?void 0:o.items)==null?void 0:n.map(i=>this.transformTrack({...i.track,service:this.serviceType})))||[]})}transformUser(e){return new Yr({id:e.id,displayName:e.displayName,email:e.email,country:e.country,images:e.images,followers:e.followers,service:this.serviceType})}async getUserPlaylists(e,s=20){try{let r;e?r=`/users/${e}/playlists?limit=${s}`:r=`/me/playlists?limit=${s}`;const n=(await this.request(r)).data.items||[];for(const i of n)i.tracks=await this.transformTrack({});return n.map(i=>this.transformPlaylist({...i,service:this.serviceType}))}catch(r){throw console.error("Spotify getUserPlaylists error:",r),r}}}const ce=Js({visibleElements:new Map,componentRefs:new Map,activeSection:null,activeParent:null,pendingVisibility:new Map});function De(){return{registerComponent:(m,p)=>{console.log("registerComponent called for:",m),console.log("Current pending requests:",Array.from(ce.pendingVisibility.keys()));const k=ce.componentRefs.has(m);ce.componentRefs.set(m,p),console.log(k?"Component already registered, updating ref:":"Component newly registered:",m),setTimeout(()=>{const _=ce.pendingVisibility.get(m);console.log("Looking for pending request for key:",m,"Found:",_),_?(console.log("Processing pending request for:",m,_),_.shouldShow?(console.log("Showing component from pending request:",m),p.value.classList.contains("row")?p.value.style.display="flex":p.value.classList.contains("deeper-header")?p.value.style.display="grid":p.value.style.display="block",ce.visibleElements.set(m,!0),setTimeout(()=>{if(p.value){console.log("Scrolling to component from pending request:",m);try{p.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(S){console.log("scrollIntoView failed, trying alternative method:",S);let T=p.value.parentElement;for(;T&&T!==document.body;){const P=window.getComputedStyle(T);if(P.overflow==="auto"||P.overflow==="scroll"||P.overflowY==="auto"||P.overflowY==="scroll"){const x=p.value.getBoundingClientRect(),D=T.getBoundingClientRect(),A=T.scrollTop+x.top-D.top;T.scrollTo({top:A,behavior:"smooth"});break}T=T.parentElement}if(!T||T===document.body){const P=p.value.getBoundingClientRect();window.scrollTo({top:window.pageYOffset+P.top-100,behavior:"smooth"})}}}else console.log("Component ref not available for scrolling from pending request:",m)},100)):ce.visibleElements.set(m,!1),ce.pendingVisibility.delete(m)):ce.visibleElements.set(m,!1)},10)},unregisterComponent:m=>{ce.componentRefs.delete(m),ce.visibleElements.delete(m),ce.pendingVisibility.delete(m)},showComponent:m=>{console.log("showComponent called for:",m),console.log("Registered components at showComponent time:",Array.from(ce.componentRefs.keys()));const p=ce.componentRefs.get(m);console.log("Component ref found:",!!p,"Component ref value:",!!(p!=null&&p.value)),p&&p.value?(console.log("Component found, showing:",m),p.value.classList.contains("row")?p.value.style.display="flex":p.value.classList.contains("deeper-header")?p.value.style.display="grid":p.value.style.display="block",ce.visibleElements.set(m,!0),setTimeout(()=>{if(p.value){console.log("Scrolling to component:",m);try{p.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(k){console.log("scrollIntoView failed, trying alternative method:",k);let _=p.value.parentElement;for(;_&&_!==document.body;){const S=window.getComputedStyle(_);if(S.overflow==="auto"||S.overflow==="scroll"||S.overflowY==="auto"||S.overflowY==="scroll"){const T=p.value.getBoundingClientRect(),P=_.getBoundingClientRect(),x=_.scrollTop+T.top-P.top;_.scrollTo({top:x,behavior:"smooth"});break}_=_.parentElement}if(!_||_===document.body){const S=p.value.getBoundingClientRect();window.scrollTo({top:window.pageYOffset+S.top-100,behavior:"smooth"})}}}else console.log("Component ref not available for scrolling:",m)},100)):(console.log("Component not found, storing pending request for:",m),ce.pendingVisibility.set(m,{shouldShow:!0}),console.log("Pending requests after storing:",Array.from(ce.pendingVisibility.keys())))},hideComponent:m=>{const p=ce.componentRefs.get(m);p&&p.value?(p.value.style.display="none",ce.visibleElements.set(m,!1)):ce.pendingVisibility.set(m,{shouldShow:!1})},showSection:(m,p=null)=>{ce.activeSection=m,ce.activeParent=p;for(const[k,_]of ce.componentRefs)_&&_.value&&(_.value.style.display="none",ce.visibleElements.set(k,!1));for(const[k,_]of ce.componentRefs)if(k.startsWith(m)){if(p&&!k.includes(p))continue;_&&_.value&&(_.value.style.display="block",ce.visibleElements.set(k,!0))}},hideSection:m=>{for(const[p,k]of ce.componentRefs)p.startsWith(m)&&k&&k.value&&(k.value.style.display="none",ce.visibleElements.set(p,!1))},hideAllComponents:()=>{for(const[m,p]of ce.componentRefs)p&&p.value&&(p.value.style.display="none",ce.visibleElements.set(m,!1))},scrollToComponent:m=>{const p=ce.componentRefs.get(m);if(p&&p.value){console.log("Manual scroll to component:",m),console.log("Component element:",p.value),console.log("Component position:",p.value.getBoundingClientRect());try{p.value.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(k){console.log("scrollIntoView failed, trying alternative method:",k);let _=p.value.parentElement;for(;_&&_!==document.body;){const S=window.getComputedStyle(_);if(S.overflow==="auto"||S.overflow==="scroll"||S.overflowY==="auto"||S.overflowY==="scroll"){const T=p.value.getBoundingClientRect(),P=_.getBoundingClientRect(),x=_.scrollTop+T.top-P.top;_.scrollTo({top:x,behavior:"smooth"});break}_=_.parentElement}if(!_||_===document.body){const S=p.value.getBoundingClientRect();window.scrollTo({top:window.pageYOffset+S.top-100,behavior:"smooth"})}}}else console.log("Component ref not available for manual scroll:",m)},isComponentVisible:m=>ce.visibleElements.get(m)||!1,isComponentRegistered:m=>ce.componentRefs.has(m),getActiveSection:()=>ce.activeSection,getActiveParent:()=>ce.activeParent,clearAll:()=>{ce.visibleElements.clear(),ce.componentRefs.clear(),ce.pendingVisibility.clear(),ce.activeSection=null,ce.activeParent=null},getRegisteredComponents:()=>Array.from(ce.componentRefs.keys()),getPendingRequests:()=>Array.from(ce.pendingVisibility.entries()),visibilityState:ce}}const Cf=Object.freeze(Object.defineProperty({__proto__:null,useVisibilityManager:De},Symbol.toStringTag,{value:"Module"})),ve=tr("deeper",{state:()=>({currentSection:"search",loading:{tracks:new Set,artists:new Set,albums:new Set,playlists:new Set,"user-playlists":new Set,seedArtists:new Set,seedTracks:new Set,genres:new Set},isGloballyLoading:!1,sections:{yourPlaylists:[],topArtists:[],topArtists6:[],topArtistsAll:[],topTracks:[],topTracks6:[],topTracksAll:[],savedAlbums:[],savedTracks:[],followedArtists:[],newReleases:[],spotifyPlaylists:[],categories:[],categoryPlaylists:[],genres:[],genrePlaylists:[],genreContent:[],search:[],artistDetails:[]},cache:{tracks:new Map,artists:new Map,albums:new Map,playlists:new Map,seedArtists:new Map,seedTracks:new Map,categories:new Map,genres:new Map}}),getters:{getSectionData:t=>e=>t.sections[e]||[],getCachedTrack:t=>e=>t.cache.tracks.get(e),getCachedArtist:t=>e=>t.cache.artists.get(e),getCachedAlbum:t=>e=>t.cache.albums.get(e),getCachedPlaylist:t=>e=>t.cache.playlists.get(e),getCachedSeedArtist:t=>e=>t.cache.seedArtists.get(e),getCachedSeedTrack:t=>e=>t.cache.seedTracks.get(e),getCachedCategory:t=>e=>t.cache.categories.get(e),getCachedGenre:t=>e=>t.cache.genres.get(e),isTrackLoading:t=>e=>t.loading.tracks.has(e),isArtistLoading:t=>e=>t.loading.artists.has(e),isAlbumLoading:t=>e=>t.loading.albums.has(e),isPlaylistLoading:t=>e=>t.loading.playlists.has(e),isSeedArtistLoading:t=>e=>t.loading.seedArtists.has(e),isSeedTrackLoading:t=>e=>t.loading.seedTracks.has(e),getIsGloballyLoading:t=>t.isGloballyLoading},actions:{setCurrentSection(t){this.currentSection=t,console.log("Current section set to:",t)},setLoading(t,e,s){s?this.loading[t].add(e):this.loading[t].delete(e)},clearLoading(t){this.loading[t].clear()},clearAllLoading(){Object.keys(this.loading).forEach(t=>{this.loading[t].clear()})},setGlobalLoading(t){this.isGloballyLoading=t},addToSection(t,e){if(console.log("addToSection called with sectionName:",t,"item:",e.id,"type:",e.type,"parentKey:",e.parentKey),this.sections[t]||(this.sections[t]=[]),e.parentKey!==void 0&&this.sections[t].findIndex(o=>o.id===e.id&&o.type===e.type&&(o.parentKey||null)===(e.parentKey||null))!==-1){console.log("Item already exists in section, skipping");return}this.sections[t].findIndex(r=>r.id===e.id)===-1?(this.sections[t].push(e),console.log("Added item to section. Section now has",this.sections[t].length,"items")):console.log("Item already exists in section")},clearSection(t){this.sections[t]&&(this.sections[t]=[])},removeFromSection(t,e){if(this.sections[t]){const s=this.sections[t].findIndex(r=>r.id===e);s>-1&&this.sections[t].splice(s,1)}},hideRootComponentForParent(t,e,s){if(!s)return;const r=`${t}_${s}`;e.isComponentRegistered(r)&&e.hideComponent(r)},removeSubtree(t,e,s,r=null){const o=this.sections[t]||[],n=new Set([e]);let i=!0;for(;i;){i=!1;for(const c of o)c.parentKey&&n.has(c.parentKey)&&!n.has(c.id)&&(n.add(c.id),i=!0)}if(this.sections[t]=o.filter(c=>!n.has(c.id)),r){const c=`${r}_${e}`;s.isComponentRegistered(c)&&s.hideComponent(c)}for(const c of s.getRegisteredComponents())for(const u of n){const d=`__p:${u}__`;if(c.includes(d)){s.hideComponent(c);break}}const a=s.getPendingRequests();for(const[c]of a)for(const u of n){const d=`__p:${u}__`;c.includes(d)&&s.visibilityState.pendingVisibility.delete(c)}},removeDescendantsOfParent(t,e,s){const r=this.sections[t]||[],o=new Set;let n=!0;for(const i of r)i.parentKey===e&&o.add(i.id);for(;n;){n=!1;for(const i of r)i.parentKey&&o.has(i.parentKey)&&!o.has(i.id)&&(o.add(i.id),n=!0)}if(o.size>0){this.sections[t]=r.filter(a=>!o.has(a.id));for(const a of s.getRegisteredComponents())for(const c of o){(a===`deepertracks_${c}`||a===`deeperalbum_${c}`||a===`trackartist_${c}`||a===`seed_tracks_st${c}`||a===`seed_artists_sa${c}`)&&s.hideComponent(a);const u=`__p:${c}__`;a.includes(u)&&s.hideComponent(a)}const i=s.getPendingRequests();for(const[a]of i)for(const c of o){const u=`__p:${c}__`;a.includes(u)&&s.visibilityState.pendingVisibility.delete(a)}}},hideTypesInParent(t,e,s){if(!s)return;const r=`__p:${s}__`;for(const n of e.getRegisteredComponents())for(const i of t)n.startsWith(`${i}_`)&&n.includes(r)&&e.hideComponent(n);const o=e.getPendingRequests();for(const[n]of o)for(const i of t)n.startsWith(`${i}_`)&&n.includes(r)&&e.visibilityState.pendingVisibility.delete(n)},async getTrackDetails(t,e,s=null){console.log("getTrackDetails called with item:",t.id,"sectionName:",e),this.setLoading("tracks",t.id,!0),this.setGlobalLoading(!0);try{let r=t;const o=this.getCachedTrack(t.id);if(o)r=o,console.log("Using cached track data for:",t.id);else{console.log("Creating new track data for:",t.id),t.track&&typeof t.track=="object"?r={...t.track}:r={...t},r.type="deepertracks",r=be(r);try{const u=await le.getCurrentService().checkFollowingTrack(r.id);r.followed=u}catch(c){console.error(258,c),r.followed=!1}this.cache.tracks.set(r.id,r)}const n=s||null;r={...r,parentKey:n};const i=De();if(n)this.removeDescendantsOfParent(e,n,i);else{const u=(this.sections[e]||[]).find(d=>d.type==="deepertracks"&&(!d.parentKey||d.parentKey===null));u&&u.id!==r.id&&this.removeSubtree(e,u.id,i,"deepertracks")}console.log("Adding track to section:",e,"Track ID:",r.id,"parentKey:",n),this.addToSection(e,r);const a=`deepertracks_${r.id}${n?`__p:${n}__`:""}`;return i.showComponent(a),console.log("Track added to section, component will show when registered"),r}finally{this.setLoading("tracks",t.id,!1),this.setGlobalLoading(!1)}},hideAllComponentsOfType(t,e){console.log("hideAllComponentsOfType called for type:",t);const s=e.getRegisteredComponents();console.log("All registered components:",s);let r=0;for(const o of s)o.startsWith(t+"_")&&(console.log("Hiding component:",o,"because it matches type:",t),e.hideComponent(o),r++);console.log(`Hidden ${r} components of type: ${t}`)},hideVisibleComponentOfType(t,e,s=null){console.log("hideVisibleComponentOfType called for type:",t,"parentKey:",s);const r=e.getRegisteredComponents();console.log("All registered components:",r);let o=0;for(const n of r){if(!n.startsWith(t+"_"))continue;const i=n.includes("__p:");if(s){const c=`__p:${s}__`;if(!n.includes(c))continue}else if(i)continue;const a=e.isComponentVisible(n);console.log(`Component ${n} - type: ${t}, visible: ${a}`),a&&(console.log("Hiding currently visible component:",n,"because it matches type/parent:",t,s),e.hideComponent(n),o++)}console.log(`Hidden ${o} currently visible components of type: ${t}`)},async getArtistDetails(t,e,s=null){console.log("getArtistDetails called with item:",t.id,"sectionName:",e),this.setLoading("artists",t.id,!0),this.setGlobalLoading(!0);try{let r=this.getCachedArtist(t.id);if(r)console.log("Using cached artist data for:",t.id);else{console.log("Fetching new artist data for:",t.id);const a=le.getCurrentService(),[c,u,d,f,y,b,v]=await Promise.all([a.getArtist(t.id),a.getArtistTopTracks(t.id),a.getArtistAlbums(t.id),a.getArtistSingles(t.id),a.getArtistAppearances(t.id),a.getArtistPlaylists(t.id),a.getRelatedArtists(t.id)]);console.log("API responses:",{artistInfo:c,topTracks:u,albums:d,singles:f,appearances:y,playlists:b,related:v});let m=!1;try{m=await le.getCurrentService().checkFollowingArtist(t.id)}catch{m=!1}const p=[],k={...c,followed:m,type:"trackartist"};p.push(k);const _={tracks:u,type:"top_tracks"};p.push(_);const T={items:await this.enrichAlbums(d),type:"albums"};p.push(T);const x={items:await this.enrichAlbums(f),type:"single"};p.push(x);const A={items:await this.enrichAlbums(y),type:"appears_on"};p.push(A);const L={items:await this.enrichPlaylists(b),type:"playlists"};p.push(L);const he={artists:await this.enrichArtists(v),type:"related-artists"};p.push(he),r={id:t.id,type:"trackartist",data:p},this.cache.artists.set(t.id,r)}const o=s||null;r={...r,parentKey:o};const n=De();if(o)this.removeDescendantsOfParent(e,o,n);else{const c=(this.sections[e]||[]).filter(u=>u.type==="trackartist");for(const u of c)u.id!==t.id&&this.removeSubtree(e,u.id,n,"trackartist")}console.log("Adding artist data to section:",e,"parentKey:",o),this.addToSection(e,r),this.hideVisibleComponentOfType("trackartist",n,o);const i=`trackartist_${t.id}${o?`__p:${o}__`:""}`;return n.showComponent(i),console.log("Artist added to section, component will show when registered"),r}finally{this.setLoading("artists",t.id,!1),this.setGlobalLoading(!1)}},async getAlbumDetails(t,e,s=null){this.setLoading("albums",t.id,!0),this.setGlobalLoading(!0);try{let r=t;const o=this.getCachedAlbum(t.id);if(o)r=o;else{t.album?r={...t.album,album:!0}:r={...t},r.type="deeperalbum";try{const u=await le.getCurrentService().checkFollowingAlbum(r.id);r.followed=u}catch{r.followed=!1}this.cache.albums.set(r.id,r)}const n=s||null;r={...r,parentKey:n};const i=De();n&&this.removeDescendantsOfParent(e,n,i),this.addToSection(e,r),this.hideVisibleComponentOfType("deeperalbum",i,n);const a=`deeperalbum_${t.id}${n?`__p:${n}__`:""}`;return i.showComponent(a),console.log("Album added to section, component will show when registered"),r}finally{this.setLoading("albums",t.id,!1),this.setGlobalLoading(!1)}},async getPlaylistDetails(t,e,s=null){this.setLoading("playlists",t.id,!0),this.setGlobalLoading(!0);try{let r=t;const o=this.getCachedPlaylist(t.id);if(o)r=o;else{r={...t},r.type="deeperplaylist";try{const u=await le.getCurrentService().checkFollowingPlaylist(r.id);r.followed=u}catch{r.followed=!1}this.cache.playlists.set(r.id,r)}try{const c=r.tracks&&(r.tracks.items&&r.tracks.items.length>1||Array.isArray(r.tracks)&&r.tracks.length>1),u=r.description&&r.description.trim().length>0;if(!c||!u){const f=await le.getCurrentService().getPlaylist(r.id);f&&(!c&&f.tracks&&(r.tracks=f.tracks),!u&&f.description&&(r.description=f.description),this.cache.playlists.set(r.id,r))}}catch(c){console.warn("Failed to ensure playlist tracks/description; proceeding with existing data",c)}const n=s||null;r={...r,parentKey:n};const i=De();n&&this.removeDescendantsOfParent(e,n,i),this.addToSection(e,r),this.hideVisibleComponentOfType("deeperplaylist",i,n);const a=`deeperplaylist_${t.id}${n?`__p:${n}__`:""}`;return i.showComponent(a),console.log("Playlist added to section, component will show when registered"),r}finally{this.setLoading("playlists",t.id,!1),this.setGlobalLoading(!1)}},async getGenreDetails(t,e,s=null){const r=t.genreId||t.id;this.setLoading("playlists",r,!0),this.setGlobalLoading(!0),console.log(t,e,s);try{const o=le.getCurrentService(),n=De();this.cache.genres.set(t.id,t);let i=await o.getGenrePlaylist(t.id);if(!i)throw new Error("No playlist data returned for genre");console.log("item",t,"playlistData",i);const a=s||null;i={...i,type:"deeperplaylist",parentKey:a},this.cache.playlists.set(i.id,i),a&&this.removeDescendantsOfParent(e,a,n),this.addToSection(e,i),this.hideVisibleComponentOfType("deeperplaylist",n,a);const c=`deeperplaylist_${i.id}${a?`__p:${a}__`:""}`;return n.showComponent(c),console.log("Genre playlist added to section, component will show when registered"),i}catch(o){throw console.error("❌ DeeperStore: Failed to get genre details:",o),o}finally{this.setLoading("playlists",r,!1),this.setGlobalLoading(!1)}},async getUserPlaylists(t,e,s=null){this.setLoading("user-playlists",t.id,!0),this.setGlobalLoading(!0);try{const r=le.getCurrentService(),o=await r.getUserPlaylists(t.id,20),n={id:`user-playlists-${t.id}`,name:`${t.display_name}'s Playlists`,type:"user-playlists",owner:t,playlists:o,parentKey:s};for(const c of n.playlists)c.tracks=await r.getPlaylistTracks(c.id,0,1);console.log("userPlaylistsData",n);const i=De();s&&this.removeDescendantsOfParent(e,s,i),this.addToSection(e,n),this.hideVisibleComponentOfType("user-playlists",i,s);const a=`user-playlists_${t.id}${s?`__p:${s}__`:""}`;return i.showComponent(a),console.log("User playlists added to section, component will show when registered"),n}catch(r){throw console.error("Failed to get user playlists:",r),r}finally{this.setLoading("user-playlists",t.id,!1),this.setGlobalLoading(!1)}},async getSeedArtistRecommendations(t,e,s=null){const r=`sa${t.id}`;this.setLoading("seedArtists",r,!0),this.setGlobalLoading(!0);try{let o=this.getCachedSeedArtist(r);o||(o={tracks:await le.getCurrentService().getRecommendations({seedArtists:[t],limit:50,offset:0,market:"UA"}),type:"seed_artists",id:r,name:t.name,artists:t.artists},this.cache.seedArtists.set(r,o)),o={...o,parentKey:s||null};const n=De();o.parentKey&&this.removeDescendantsOfParent(e,o.parentKey,n),this.addToSection(e,o),this.hideVisibleComponentOfType("seed_artists",n,o.parentKey);const i=`seed_artists_${r}${o.parentKey?`__p:${o.parentKey}__`:""}`;return n.showComponent(i),console.log("Seed artists added to section, component will show when registered"),o}finally{this.setLoading("seedArtists",r,!1),this.setGlobalLoading(!1)}},async getSeedTrackRecommendations(t,e,s=null){const r=`st${t.id}`;this.setLoading("seedTracks",r,!0),this.setGlobalLoading(!0);try{let o=this.getCachedSeedTrack(r);if(!o){const c=await le.getCurrentService().getRecommendations({seedTracks:[t],limit:20,offset:0,market:"UA"});console.log(c),o={tracks:c,type:"seed_tracks",id:r,name:t.name,artists:t.artists},this.cache.seedTracks.set(r,o)}o={...o,parentKey:s||null};const n=De();o.parentKey&&this.removeDescendantsOfParent(e,o.parentKey,n),this.addToSection(e,o),this.hideVisibleComponentOfType("seed_tracks",n,o.parentKey);const i=`seed_tracks_${r}${o.parentKey?`__p:${o.parentKey}__`:""}`;return n.showComponent(i),console.log("Seed tracks added to section, component will show when registered"),o}finally{this.setLoading("seedTracks",r,!1),this.setGlobalLoading(!1)}},async enrichAlbums(t){var s;const e=[];for(const r of t)try{const i=await le.getCurrentService().getAlbumTracks(r.id);r.tracks=i,i.length>0&&(i[0].preview_url||i[0].previewUrl)&&(r.preview_url=i[0].preview_url||i[0].previewUrl),r.images.length>0&&((s=r.images[0])!=null&&s.url)||(r.images[0]={url:""}),e.push(r)}catch(o){console.error(`Failed to enrich album ${r.id}:`,o)}return e},async enrichPlaylists(t){var s,r;const e=[];for(const o of t)try{const a=await le.getCurrentService().getPlaylistTracks(o.id);o.tracks=a,a.length>0&&(a[0].preview_url||a[0].previewUrl)&&(o.preview_url=a[0].preview_url||a[0].previewUrl),o.images.length>0&&((s=o.images[0])!=null&&s.url)||(o.images[0]={url:""}),e.push(o)}catch(n){console.error(`Failed to enrich playlist ${o.id}:`,n),o.images.length>0&&((r=o.images[0])!=null&&r.url)||(o.images[0]={url:""}),e.push(o)}return e},async enrichArtists(t){var s;const e=[];for(const r of t)try{const i=await le.getCurrentService().getArtistTopTracks(r.id,"UA");i.length>0&&(i[0].preview_url||i[0].previewUrl)&&(r.preview_url=i[0].preview_url||i[0].previewUrl),r.images.length>0&&((s=r.images[0])!=null&&s.url)||(r.images[0]={url:""}),e.push(r)}catch(o){console.error(`Failed to enrich artist ${r.id}:`,o)}return e},clearAllSections(){Object.keys(this.sections).forEach(t=>{this.sections[t]=[]})},clearCache(t){t?this.cache[t].clear():Object.keys(this.cache).forEach(e=>{this.cache[e].clear()})},async getCategories(t,e=0,s=50){this.setGlobalLoading(!0);try{const o=await le.getCurrentService().getCategories(e,s);return o.items.forEach(n=>{const i={...n,type:"category",parentKey:null};this.addToSection(t,i),this.cache.categories.set(n.id,i)}),o}catch(r){throw console.error("Failed to get categories:",r),r}finally{this.setGlobalLoading(!1)}},async getCategoryPlaylists(t,e,s=null){this.setGlobalLoading(!0);try{const o=await le.getCurrentService().getCategoryPlaylists(t,0,50);return o.items.forEach(n=>{const i={...n,type:"category-playlist",parentKey:s};this.addToSection(e,i)}),o}catch(r){throw console.error("Failed to get category playlists:",r),r}finally{this.setGlobalLoading(!1)}}}});class Pf extends us{constructor(){super();lr(this,"artistAlbumsCache",new Map);lr(this,"lovedPlaylistIdCache",new Map);this.baseURL="https://api.deezer.com",this.backendUrl="http://localhost:8000",this.serviceType=te.DEEZER}getServiceName(){return"Deezer"}getServiceType(){return this.serviceType}async authenticate(){throw new Error("Deezer authentication not yet implemented")}async refreshToken(){throw new Error("Deezer token refresh not yet implemented")}logout(){throw new Error("Deezer logout not yet implemented")}isAuthenticated(){return!1}async getCurrentUser(){throw new Error("Deezer getCurrentUser not yet implemented")}async getTopTracks(s){throw new Error("Deezer getTopTracks not yet implemented")}async getTopArtists(s){throw new Error("Deezer getTopArtists not yet implemented")}async getSavedAlbums(s,r){try{const o=localStorage.getItem("deezer-user-id");if(!o)return[];const n=typeof r=="number"&&r>0?r:20,i=typeof s=="number"&&s>=0?s:0,a=await this.request(`/user/${o}/albums?limit=${n}&index=${i}`);return((a==null?void 0:a.data)||[]).map(u=>({album:this.transformAlbum(u),added_at:u!=null&&u.time_add?new Date(u.time_add*1e3).toISOString():new Date().toISOString()})).filter(u=>u.album!==null)}catch(o){throw console.error("Deezer getSavedAlbums error:",o),o}}async getSavedTracks(s,r){var o,n,i,a;try{const c=localStorage.getItem("deezer-user-id");if(!c)return{items:[],total:0};const u=await this.getOrFindLovedPlaylistId(c);if(!u)return{items:[],total:0};const d=typeof r=="number"&&r>0?r:50,f=typeof s=="number"&&s>=0?s:0,y=await this.request(`/playlist/${u}?limit=${d}&index=${f}`),b=(((o=y==null?void 0:y.tracks)==null?void 0:o.data)||[]).map(m=>({track:this.transformTrack(m),added_at:m!=null&&m.time_add?new Date(m.time_add*1e3).toISOString():new Date().toISOString()})).filter(m=>m.track!==null),v=(y==null?void 0:y.nb_tracks)||((n=y==null?void 0:y.tracks)==null?void 0:n.total)||((a=(i=y==null?void 0:y.tracks)==null?void 0:i.data)==null?void 0:a.length)||0;return{items:b,total:v}}catch(c){throw console.error("Deezer getSavedTracks error:",c),c}}async getOrFindLovedPlaylistId(s){if(this.lovedPlaylistIdCache.has(s))return this.lovedPlaylistIdCache.get(s);const r=100;let o=0,n=1/0;for(;o<n;){const i=await this.request(`/user/${s}/playlists?limit=${r}&index=${o}`),a=(i==null?void 0:i.data)||[];typeof(i==null?void 0:i.total)=="number"&&(n=i.total);const c=a.find(u=>u&&u.is_loved_track===!0);if(c&&c.id){const u=c.id;return this.lovedPlaylistIdCache.set(s,u),u}if(a.length<r)break;o+=r}return this.lovedPlaylistIdCache.set(s,null),null}async getFollowedArtists(s=50,r=0){try{const o=localStorage.getItem("deezer-user-id");if(!o)return[];const n=typeof s=="number"&&s>0?s:50,i=typeof r=="number"&&r>=0?r:0,a=await this.request(`/user/${o}/artists?limit=${n}&index=${i}`);return((a==null?void 0:a.data)||[]).map(u=>this.transformArtist(u)).filter(u=>u!==null)}catch(o){throw console.error("Deezer getFollowedArtists error:",o),o}}async getPlaylists(s,r){throw new Error("Deezer getPlaylists not yet implemented")}async getSpotifyPlaylists(s,r){throw new Error("Deezer getPlaylists not yet implemented")}async getPlaylist(s){throw new Error("Deezer getPlaylist not yet implemented")}async getPlaylistTracks(s,r=0,o=50){try{return(await this.request(`/playlist/${s}/tracks?limit=${o}&index=${r}`)).data.map(i=>this.transformTrack(i))}catch(n){throw console.error("Deezer getPlaylistTracks error:",n),n}}async getGenrePlaylist(s){const o=ve().getCachedGenre(s);try{const n=await this.getRadioTracks(s,0,50);return{id:`radio_${s}`,name:o.name,description:o.description,images:[],owner:{display_name:"Deezer"},public:!1,totalTracks:n.length,external_urls:{deezer:`https://www.deezer.com/radio/${s}`},service:this.serviceType,tracks:{items:n.map(i=>({track:i})),total:n.length}}}catch(n){throw console.error("Deezer getGenrePlaylist fallback failed",n),n}}async createPlaylist(s,r){throw new Error("Deezer createPlaylist not yet implemented")}async addTracksToPlaylist(s,r){throw new Error("Deezer addTracksToPlaylist not yet implemented")}async getArtist(s){try{const r=await this.request(`/artist/${s}`);return this.transformArtist(r)}catch(r){throw console.error("Deezer getArtist error:",r),r}}async getArtistTopTracks(s,r){try{let o=await this.request(`/artist/${s}/top`),n=await this.request(`/artist/${s}/top?index=5`);return o.data.concat(n.data).map(a=>this.transformTrack(a))}catch(o){throw console.error("Deezer getArtistTopTracks error:",o),o}}async getArtistAlbums(s,r,o=20){try{return(await this.getAllArtistAlbums(s)).filter(a=>a.record_type==="album").slice(0,o).map(a=>this.transformAlbum(a))}catch(n){throw console.error("Deezer getArtistAlbums error:",n),n}}async getRelatedArtists(s){try{return(await this.request(`/artist/${s}/related`)).data.map(o=>this.transformArtist(o))}catch(r){throw console.error("Deezer getRelatedArtists error:",r),r}}async getAllArtistAlbums(s){const r=`${s}`;if(this.artistAlbumsCache.has(r))return console.log("Using cached albums for artist:",s),this.artistAlbumsCache.get(r);try{console.log("Fetching albums from API for artist:",s);const o=await this.request(`/artist/${s}/albums?limit=50`);return this.artistAlbumsCache.set(r,o.data),o.data}catch(o){throw console.error("Deezer getAllArtistAlbums error:",o),o}}async getArtistSingles(s,r=10){try{return(await this.getAllArtistAlbums(s)).filter(i=>i.record_type==="single"||i.record_type==="ep").slice(0,r).map(i=>this.transformAlbum(i))}catch(o){throw console.error("Deezer getArtistSingles error:",o),o}}async getArtistAppearances(s,r=10){try{return((await this.request(`/artist/${s}/albums`)).data||[]).filter(a=>a.record_type==="compilation"||a.artist&&a.artist.id!==parseInt(s)).slice(0,r).map(a=>this.transformAlbum(a))}catch(o){throw console.error("Deezer getArtistAppearances error:",o),o}}async getArtistPlaylists(s,r=10){try{return((await this.request(`/artist/${s}/playlists`)).data||[]).slice(0,r).map(i=>this.transformPlaylist(i))}catch(o){throw console.error("Deezer getArtistPlaylists error:",o),o}}async getArtistRadio(s){try{return(await this.request(`/artist/${s}/radio`)).data.map(o=>this.transformTrack(o))}catch(r){throw console.error("Deezer getArtistRadio error:",r),r}}async getAlbum(s){try{const r=await this.request(`/album/${s}`);return this.transformAlbum(r)}catch(r){throw console.error("Deezer getAlbum error:",r),r}}async getAlbumTracks(s){try{return(await this.request(`/album/${s}/tracks`)).data.map(o=>this.transformTrack(o))}catch(r){throw console.error("Deezer getAlbumTracks error:",r),r}}async getTrack(s){try{const r=await this.request(`/track/${s}`);return this.transformTrack(r)}catch(r){throw console.error("Deezer getTrack error:",r),r}}createOwnerImages(s){if(!s)return[];const r=[];return s.picture_small&&r.push(new et(s.picture_small,56,56)),s.picture_medium&&r.push(new et(s.picture_medium,250,250)),s.picture_big&&r.push(new et(s.picture_big,500,500)),s.picture_xl&&r.push(new et(s.picture_xl,1e3,1e3)),r}async getPlaylist(s){try{const r=await this.request(`/playlist/${s}`),o=this.transformPlaylist(r);if(o&&o.owner&&o.owner.id)try{const n=await this.request(`/user/${o.owner.id}`);n&&(o.owner={...o.owner,images:this.createOwnerImages(n),picture:n.picture,picture_small:n.picture_small,picture_medium:n.picture_medium,picture_big:n.picture_big,picture_xl:n.picture_xl,country:n.country,tracklist:n.tracklist})}catch(n){console.warn(`Failed to fetch user data for playlist ${s}:`,n)}return o}catch(r){throw console.error("Deezer getPlaylist error:",r),r}}async getPlaylists(s,r=20,o=0){try{const n=await this.request(`/user/${s}/playlists?limit=${r}&index=${o}`);return((n==null?void 0:n.data)||[]).map(a=>this.transformPlaylist(a)).filter(a=>a!==null)}catch(n){throw console.error("Deezer getPlaylists error:",n),n}}async getSpotifyPlaylists(s=20,r=0){try{const o=await this.request(`/chart/0/playlists?limit=${s}&index=${r}`),i=((o==null?void 0:o.data)||[]).map(a=>this.transformPlaylist(a)).filter(a=>a!==null);return await this.enrichPlaylistsWithDescriptions(i)}catch(o){throw console.error("Deezer getChartPlaylists error:",o),o}}async enrichPlaylistsWithDescriptions(s){const r=[];for(const o of s)try{if(!o.description||o.description.trim().length===0){const n=await this.getPlaylist(o.id);n&&n.description&&(o.description=n.description)}r.push(o)}catch(n){console.warn(`Failed to enrich playlist ${o.id} with description:`,n),r.push(o)}return r}async search(s,r,o=20){try{const n={tracks:[],artists:[],albums:[],playlists:[]};if(!r||r.includes("track")){const i=await this.request(`/search/track?q=${encodeURIComponent(s)}&limit=${o}`);console.log("Tracks response:",i),i&&i.data&&Array.isArray(i.data)?n.tracks=i.data.map(a=>this.transformTrack(a)).filter(a=>a!==null):(console.warn("Invalid tracks response structure:",i),n.tracks=[])}if(!r||r.includes("artist")){const i=await this.request(`/search/artist?q=${encodeURIComponent(s)}&limit=${o}`);console.log("Artists response:",i),i&&i.data&&Array.isArray(i.data)?n.artists=i.data.map(a=>this.transformArtist(a)).filter(a=>a!==null):(console.warn("Invalid artists response structure:",i),n.artists=[])}if(!r||r.includes("album")){const i=await this.request(`/search/album?q=${encodeURIComponent(s)}&limit=${o}`);console.log("Albums response:",i),i&&i.data&&Array.isArray(i.data)?n.albums=i.data.map(a=>this.transformAlbum(a)).filter(a=>a!==null):(console.warn("Invalid albums response structure:",i),n.albums=[])}if(!r||r.includes("playlist")){const i=await this.request(`/search/playlist?q=${encodeURIComponent(s)}&limit=${o}`);if(console.log("Playlists response:",i),i&&i.data&&Array.isArray(i.data)){const a=i.data.map(c=>this.transformPlaylist(c)).filter(c=>c!==null);n.playlists=await this.enrichPlaylistsWithDescriptions(a)}else console.warn("Invalid playlists response structure:",i),n.playlists=[]}return n}catch(n){throw console.error("Deezer search error:",n),n}}async getNewReleases(s=20,r=0){try{return(await this.request("/editorial/0/releases")).data.slice(r,r+s).map(i=>this.transformAlbum(i))}catch(o){throw console.error("Deezer getNewReleases error:",o),o}}async getRecommendations(s){try{if(s.seedTracks&&s.seedTracks.length>0){const r=[];for(const n of s.seedTracks){console.log("seedTrack:",n);try{const i=n.title_short||n.name,a=n.title_short?n.name:null;console.log(`Searching Last.fm with title: "${i}" (original: "${n.name}")`);const c=await this.getSimilarTracksFromLastfm(n.artists[0].name,i,s.limit||10,a);r.push(...c)}catch(i){console.error(`Error getting similar tracks for seed track "${n.name}":`,i)}}return this.removeDuplicateTracks(r).slice(0,s.limit||20)}if(s.seedArtists&&s.seedArtists.length>0){const r=s.seedArtists[0].id;return(await this.request(`/artist/${r}/radio`)).data.map(n=>this.transformTrack(n))}return[]}catch(r){throw console.error("Deezer getRecommendations error:",r),r}}async getCategories(s=0,r=50){try{const o=await this.request(`/radio/lists?index=${s}&limit=${r}`);return{items:o.data.map(i=>({id:i.id,name:i.title,type:"radio",icons:i.picture?[{url:i.picture}]:[],href:i.link||`https://www.deezer.com/radio/${i.id}`,tracklist:i.tracklist,description:i.description||"",images:i.picture_medium?[{url:i.picture_small,height:56,width:56},{url:i.picture_medium,height:250,width:250},{url:i.picture_big,height:500,width:500},{url:i.picture_xl,height:1e3,width:1e3}]:[]})),total:o.total,next:o.next,previous:null}}catch(o){throw console.error("Deezer getCategories error:",o),o}}async getCategoryPlaylists(s,r=0,o=50){try{if(!isNaN(s)){const i=await this.getRadioTracks(s,r,o),c=ve().getCachedCategory(s);return{items:[{id:`radio_${s}`,name:c?c.name:`Radio ${s}`,type:"radio",tracks:{items:i.map(u=>({track:u})),total:i.length}}],total:1,next:null,previous:null}}const n=await this.request(`/genre/${s}/playlists?index=${r}&limit=${o}`);return{items:n.data.data.map(i=>this.transformPlaylist(i)),total:n.data.total,next:n.data.next,previous:n.data.prev}}catch(n){throw console.error("Deezer getCategoryPlaylists error:",n),n}}async getRadioTracks(s,r=0,o=50){try{return(await this.request(`/radio/${s}/tracks?index=${r}&limit=${o}`)).data.map(i=>this.transformTrack(i))}catch(n){throw console.error("Deezer getRadioTracks error:",n),n}}async getGenres(s=0,r=50){try{console.log("🎵 DeezerService: Fetching genres with offset:",s,"limit:",r);const o=await this.request(`/genre?index=${s}&limit=${r}`);console.log("📦 DeezerService: Genres response:",o);const n=o.data.map(i=>({id:i.id.toString(),name:i.name,type:"genre",icons:i.picture?[{url:i.picture}]:[],href:i.link||`https://www.deezer.com/genre/${i.id}`,description:i.name,images:i.picture_medium?[{url:i.picture_big,height:500,width:500},{url:i.picture_xl,height:1e3,width:1e3}]:[]}));return{items:n,total:o.total||n.length,next:s+r<(o.total||n.length)?`/genre?index=${s+r}&limit=${r}`:null,previous:s>0?`/genre?index=${Math.max(0,s-r)}&limit=${r}`:null}}catch(o){throw console.error("Deezer getGenres error:",o),o}}async getUser(s){try{const r=await this.request(`/user/${s}`);return{id:r.id,display_name:r.name,name:r.name,country:r.country,images:this.transformImages([{url:r.picture_small,height:56,width:56},{url:r.picture_medium,height:250,width:250},{url:r.picture_big,height:500,width:500},{url:r.picture_xl,height:1e3,width:1e3}])}}catch(r){throw console.error("Deezer getUser error:",r),r}}async followArtist(s){throw new Error("Deezer followArtist not yet implemented")}async unfollowArtist(s){throw new Error("Deezer unfollowArtist not yet implemented")}async followAlbum(s){throw new Error("Deezer followAlbum not yet implemented")}async unfollowAlbum(s){throw new Error("Deezer unfollowAlbum not yet implemented")}async followTrack(s){throw new Error("Deezer followTrack not yet implemented")}async unfollowTrack(s){throw new Error("Deezer unfollowTrack not yet implemented")}async followPlaylist(s){throw new Error("Deezer followPlaylist not yet implemented")}async unfollowPlaylist(s){throw new Error("Deezer unfollowPlaylist not yet implemented")}async checkFollowingArtist(s){throw new Error("Deezer checkFollowingArtist not yet implemented")}async checkFollowingAlbum(s){throw new Error("Deezer checkFollowingAlbum not yet implemented")}async checkFollowingTrack(s){throw new Error("Deezer checkFollowingTrack not yet implemented")}async checkFollowingPlaylist(s){throw new Error("Deezer checkFollowingPlaylist not yet implemented")}async request(s){const r=["https://corsproxy.io/?","https://api.codetabs.com/v1/proxy?quest=","https://thingproxy.freeboard.io/fetch/"],o=`${this.baseURL}${s}`;for(let n=0;n<r.length;n++)try{const i=r[n],a=n===0?`${i}${encodeURIComponent(o)}`:`${i}${o}`,c=await fetch(a,{headers:{Accept:"application/json"}});if(c.ok){const u=await c.json();return console.log(`Proxy ${n+1} success for ${s}:`,u),u}}catch(i){if(console.warn(`Proxy ${n+1} failed:`,i.message),n===r.length-1)throw new Error(`All CORS proxies failed. Last error: ${i.message}`)}}transformTrack(s){var n;if(!s||!s.id)return console.warn("Invalid track data:",s),null;let r=[];s.contributors&&Array.isArray(s.contributors)?r=s.contributors.map(i=>this.transformArtist(i)):s.artist&&(r=[this.transformArtist(s.artist)]);const o=this.generateShortTitle(s.title);return console.log(`Deezer track: "${s.title}" -> short: "${o}"`),{id:s.id.toString(),name:s.title,title_short:o,artists:r,album:s.album?this.transformAlbum(s.album):null,duration_ms:parseInt(s.duration)*1e3,previewUrl:s.preview||null,external_urls:{spotify:s.link,deezer:s.link},images:this.transformImages((n=s.album)!=null&&n.cover_medium?[{url:s.album.cover_medium,height:250,width:250}]:[]),readable:s.readable||!1,rank:s.rank||0,explicit_lyrics:s.explicit_lyrics||!1,explicit_content_lyrics:s.explicit_content_lyrics||0,explicit_content_cover:s.explicit_content_cover||0,service:this.serviceType}}transformArtist(s){return!s||!s.id?(console.warn("Invalid artist data:",s),null):{id:s.id.toString(),name:s.name,images:this.transformImages(s.picture_medium?[{url:s.picture_medium,height:250,width:250}]:[]),external_urls:{spotify:s.link,deezer:s.link},followers:{total:s.nb_fan||0},genres:[],popularity:0,nb_album:s.nb_album||0,radio:s.radio||!1,service:this.serviceType}}transformAlbum(s){return!s||!s.id?(console.warn("Invalid album data:",s),null):{id:s.id.toString(),name:s.title,artists:s.artist?[this.transformArtist(s.artist)]:[],images:this.transformImages(s.cover_medium?[{url:s.cover_medium,height:250,width:250}]:[]),external_urls:{spotify:s.link,deezer:s.link},total_tracks:s.nb_tracks||0,release_date:s.release_date||null,record_type:s.record_type||"album",fans:s.fans||0,genre_id:s.genre_id||null,explicit_lyrics:s.explicit_lyrics||!1,service:this.serviceType}}transformPlaylist(s){var o,n,i,a,c,u,d,f,y,b,v,m,p,k,_,S,T,P,x,D;if(!s||!s.id)return console.warn("Invalid playlist data:",s),null;let r=null;return console.log("809",s.tracks),s.tracks&&s.tracks.data&&Array.isArray(s.tracks.data)?r={items:s.tracks.data.map(A=>({track:this.transformTrack(A)})),total:s.nb_tracks||s.tracks.data.length}:r={total:s.nb_tracks||0},console.log("playlist 767",s),{id:s.id.toString(),name:s.title,description:s.description||"",images:this.transformImages([{url:s.picture_big,height:500,width:500},{url:s.picture_xl,height:1e3,width:1e3}]),external_urls:{spotify:s.link,deezer:s.link},tracks:r,owner:{display_name:((o=s.creator)==null?void 0:o.name)||((n=s.user)==null?void 0:n.name)||"Unknown",external_urls:{deezer:((i=s.creator)==null?void 0:i.link)||((a=s.user)==null?void 0:a.link)||`https://www.deezer.com/profile/${((d=((c=s.creator)==null?void 0:c.id)||((u=s.user)==null?void 0:u.id))==null?void 0:d.toString())||"unknown"}`},href:`https://api.deezer.com/user/${((b=((f=s.creator)==null?void 0:f.id)||((y=s.user)==null?void 0:y.id))==null?void 0:b.toString())||"unknown"}`,id:((p=((v=s.creator)==null?void 0:v.id)||((m=s.user)==null?void 0:m.id))==null?void 0:p.toString())||"unknown",type:"user",uri:`deezer:user:${((S=((k=s.creator)==null?void 0:k.id)||((_=s.user)==null?void 0:_.id))==null?void 0:S.toString())||"unknown"}`,images:this.createOwnerImages(s.creator||s.user),country:((T=s.creator)==null?void 0:T.country)||((P=s.user)==null?void 0:P.country),tracklist:((x=s.creator)==null?void 0:x.tracklist)||((D=s.user)==null?void 0:D.tracklist)},public:s.public||!1,service:this.serviceType}}transformImages(s){return!s||!Array.isArray(s)?[]:s.map(r=>({url:r.url,height:r.height||null,width:r.width||null}))}generateShortTitle(s){if(!s)return"";let r=s.trim();const o=[/\s*-\s*[^-]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)\s*$/i,/\s*\([^)]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^)]*\)\s*$/i,/\s*\[[^\]]*(?:remix|edit|version|mix|radio|single|extended|club|dub|instrumental|acoustic|live|demo|original|explicit|clean)[^\]]*\]\s*$/i];for(const i of o)r=r.replace(i,"");const n=[/^(?:feat\.|ft\.|featuring)\s*/i,/^(?:prod\.|produced by)\s*/i];for(const i of n)r=r.replace(i,"");return r.trim()}removeDuplicateTracks(s){const r=new Set;return s.filter(o=>r.has(o.id)?!1:(r.add(o.id),!0))}async getSimilarTracksForDeezer(s,r,o=10){try{if(!s||!r)throw new Error("Artist and track parameters are required");const n=await fetch(`${this.backendUrl}/lastfm/similar-tracks-for-deezer?artist=${encodeURIComponent(s)}&track=${encodeURIComponent(r)}&limit=${o}`),i=await n.json();if(!n.ok){if(n.status===404)return await this.getSimilarArtistsAsTracks(s,o);throw new Error(i.error||"Failed to get similar tracks from backend")}const a=i.similarTracks||[],c=[];for(const u of a)try{const d=`${u.artist} ${u.name}`,f=await this.request(`/search/track?q=${encodeURIComponent(d)}&limit=1`);if(f&&f.data&&f.data.length>0){const y=f.data[0];c.push({lastfmTrack:{name:u.name,artist:u.artist,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.images},deezerTrack:this.transformTrack(y),searchQuery:d})}else c.push({lastfmTrack:{name:u.name,artist:u.artist,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.images},deezerTrack:null,searchQuery:d,error:"Track not found in Deezer"})}catch(d){console.error(`Error searching track "${u.name}" by "${u.artist}" in Deezer:`,d),c.push({lastfmTrack:{name:u.name,artist:u.artist,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.images},deezerTrack:null,searchQuery:`${u.artist} ${u.name}`,error:"Search failed"})}return{originalTrack:i.originalTrack,similarTracks:a,deezerResults:c,summary:{totalSimilarTracks:a.length,foundInDeezer:c.filter(u=>u.deezerTrack!==null).length,notFoundInDeezer:c.filter(u=>u.deezerTrack===null).length}}}catch(n){throw console.error("Error getting similar tracks for Deezer:",n),n}}async getSimilarArtistsAsTracks(s,r=10){try{if(!s)throw new Error("Artist parameter is required");const o=await fetch(`${this.backendUrl}/lastfm/artist/similar?artist=${encodeURIComponent(s)}&limit=${r}`),n=await o.json();if(!o.ok||!n.similarartists||!n.similarartists.artist)return{originalTrack:{artist:s,track:"N/A"},similarTracks:[],deezerResults:[],summary:{totalSimilarTracks:0,foundInDeezer:0,notFoundInDeezer:0},fallbackUsed:"similar_artists",fallbackMessage:"No similar artists found"};const i=Array.isArray(n.similarartists.artist)?n.similarartists.artist:[n.similarartists.artist],a=[],c=[];for(const u of i)try{const d=await fetch(`${this.backendUrl}/lastfm/artist/top-tracks?artist=${encodeURIComponent(u.name)}&limit=1`),f=await d.json();if(d.ok&&f.toptracks&&f.toptracks.track&&f.toptracks.track.length>0){const y=Array.isArray(f.toptracks.track)?f.toptracks.track[0]:f.toptracks.track,b={name:y.name,artist:{name:u.name},playcount:y.playcount||"0",match:u.match||"0",url:y.url,duration:y.duration||"0",image:y.image||u.image||[]};c.push(b);const v=`${u.name} ${y.name}`,m=await this.request(`/search/track?q=${encodeURIComponent(v)}&limit=1`);if(m&&m.data&&m.data.length>0){const p=m.data[0];a.push({lastfmTrack:{name:y.name,artist:u.name,playcount:y.playcount||"0",match:u.match||"0",url:y.url,duration:y.duration||"0",images:y.image||u.image||[]},deezerTrack:this.transformTrack(p),searchQuery:v,source:"similar_artist_top_track"})}else a.push({lastfmTrack:{name:y.name,artist:u.name,playcount:y.playcount||"0",match:u.match||"0",url:y.url,duration:y.duration||"0",images:y.image||u.image||[]},deezerTrack:null,searchQuery:v,error:"Track not found in Deezer",source:"similar_artist_top_track"})}else a.push({lastfmTrack:{name:"Unknown",artist:u.name,playcount:"0",match:u.match||"0",url:u.url,duration:"0",images:u.image||[]},deezerTrack:null,searchQuery:u.name,error:"No top tracks found",source:"similar_artist_no_tracks"})}catch(d){console.error(`Error getting top track for artist "${u.name}":`,d),a.push({lastfmTrack:{name:"Unknown",artist:u.name,playcount:"0",match:u.match||"0",url:u.url,duration:"0",images:u.image||[]},deezerTrack:null,searchQuery:u.name,error:"Failed to get top track",source:"similar_artist_fallback"})}return{originalTrack:{artist:s,track:"N/A",lastfmUrl:`https://www.last.fm/music/${encodeURIComponent(s)}`},similarTracks:c.map(u=>({name:u.name,artist:u.artist.name,playcount:u.playcount,match:u.match,url:u.url,duration:u.duration,images:u.image})),deezerResults:a,summary:{totalSimilarTracks:c.length,foundInDeezer:a.filter(u=>u.deezerTrack!==null).length,notFoundInDeezer:a.filter(u=>u.deezerTrack===null).length},fallbackUsed:"similar_artists",fallbackMessage:`Found ${c.length} tracks from similar artists`}}catch(o){throw console.error("Error getting similar artists as tracks:",o),o}}async getSimilarTracksFromLastfm(s,r,o=10,n=null){try{const a=(await this.getSimilarTracksForDeezer(s,r,o)).deezerResults.filter(c=>c.deezerTrack!==null).map(c=>c.deezerTrack);if(console.log(a),console.log(r),console.log(n),a.length===0&&n&&n!==r){console.log(`No tracks found for "${r}", trying fallback "${n}"`);try{return(await this.getSimilarTracksForDeezer(s,n,o)).deezerResults.filter(u=>u.deezerTrack!==null).map(u=>u.deezerTrack)}catch(c){console.error("Fallback search also failed:",c)}}return a}catch(i){throw console.error("Error getting similar tracks from Last.fm:",i),i}}async getUserPlaylists(s,r=20){try{const[o,n]=await Promise.all([this.request(`/user/${s}`),this.request(`/user/${s}/playlists?limit=${r}`)]),i=o||{};return(n.data||[]).map(u=>{const d=this.transformPlaylist(u);return d&&(d.owner={display_name:i.name,external_urls:{deezer:i.link||`https://www.deezer.com/profile/${i.id}`},href:`https://api.deezer.com/user/${i.id}`,id:i.id,type:"user",uri:`deezer:user:${i.id}`,images:this.createOwnerImages(i),picture:i.picture,picture_small:i.picture_small,picture_medium:i.picture_medium,picture_big:i.picture_big,picture_xl:i.picture_xl,country:i.country,tracklist:i.tracklist}),d})}catch(o){throw console.error("Deezer getUserPlaylists error:",o),o}}}class xf extends us{constructor(){super(),this.baseURL="https://api.tidal.com",this.serviceType=te.TIDAL}getServiceName(){return"Tidal"}getServiceType(){return this.serviceType}async authenticate(){throw new Error("Tidal authentication not yet implemented")}async refreshToken(){throw new Error("Tidal token refresh not yet implemented")}logout(){throw new Error("Tidal logout not yet implemented")}isAuthenticated(){return!1}async getCurrentUser(){throw new Error("Tidal getCurrentUser not yet implemented")}async getTopTracks(e){throw new Error("Tidal getTopTracks not yet implemented")}async getTopArtists(e){throw new Error("Tidal getTopArtists not yet implemented")}async getSavedAlbums(e,s){throw new Error("Tidal getSavedAlbums not yet implemented")}async getSavedTracks(e,s){throw new Error("Tidal getSavedTracks not yet implemented")}async getFollowedArtists(e){throw new Error("Tidal getFollowedArtists not yet implemented")}async getPlaylists(e,s){throw new Error("Tidal getPlaylists not yet implemented")}async getPlaylist(e){throw new Error("Tidal getPlaylist not yet implemented")}async getPlaylistTracks(e,s,r){throw new Error("Tidal getPlaylistTracks not yet implemented")}async createPlaylist(e,s){throw new Error("Tidal createPlaylist not yet implemented")}async addTracksToPlaylist(e,s){throw new Error("Tidal addTracksToPlaylist not yet implemented")}async getArtist(e){throw new Error("Tidal getArtist not yet implemented")}async getArtistTopTracks(e,s){throw new Error("Tidal getArtistTopTracks not yet implemented")}async getArtistAlbums(e,s,r){throw new Error("Tidal getArtistAlbums not yet implemented")}async getRelatedArtists(e){throw new Error("Tidal getRelatedArtists not yet implemented")}async getArtistAppearances(e,s=10){throw new Error("Tidal getArtistAppearances not yet implemented")}async getArtistPlaylists(e,s=10){throw new Error("Tidal getArtistPlaylists not yet implemented")}async getAlbum(e){throw new Error("Tidal getAlbum not yet implemented")}async getAlbumTracks(e){throw new Error("Tidal getAlbumTracks not yet implemented")}async getTrack(e){throw new Error("Tidal getTrack not yet implemented")}async search(e,s,r){throw new Error("Tidal search not yet implemented")}async getNewReleases(e,s){throw new Error("Tidal getNewReleases not yet implemented")}async getRecommendations(e){throw new Error("Tidal getRecommendations not yet implemented")}async followArtist(e){throw new Error("Tidal followArtist not yet implemented")}async unfollowArtist(e){throw new Error("Tidal unfollowArtist not yet implemented")}async followAlbum(e){throw new Error("Tidal followAlbum not yet implemented")}async unfollowAlbum(e){throw new Error("Tidal unfollowAlbum not yet implemented")}async followTrack(e){throw new Error("Tidal followTrack not yet implemented")}async unfollowTrack(e){throw new Error("Tidal unfollowTrack not yet implemented")}async followPlaylist(e){throw new Error("Tidal followPlaylist not yet implemented")}async unfollowPlaylist(e){throw new Error("Tidal unfollowPlaylist not yet implemented")}async checkFollowingArtist(e){throw new Error("Tidal checkFollowingArtist not yet implemented")}async checkFollowingAlbum(e){throw new Error("Tidal checkFollowingAlbum not yet implemented")}async checkFollowingTrack(e){throw new Error("Tidal checkFollowingTrack not yet implemented")}async checkFollowingPlaylist(e){throw new Error("Tidal checkFollowingPlaylist not yet implemented")}async getUserPlaylists(e,s=20){throw new Error("Tidal getUserPlaylists not yet implemented")}}class Rf extends us{constructor(){super(),this.baseURL="https://api.music.apple.com/v1",this.serviceType=te.APPLE}getServiceName(){return"Apple Music"}getServiceType(){return this.serviceType}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,"Music-User-Token":this.getMusicUserToken(),...s.headers},...s};try{return await ke(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,o.headers["Music-User-Token"]=this.getMusicUserToken(),ke(o);throw i}}getMusicUserToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)apple_music_user_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async refreshToken(){const e=this.getUsername(),s=await ke.get(`/apple/refresh_token/${e}`);if(s.status===200)return s.data;throw new Error("Failed to refresh token")}async authenticate(){window.location.href="/apple/login"}logout(){window.location.href="/apple/logout"}isAuthenticated(){return!!this.getToken()&&!!this.getMusicUserToken()}async getCurrentUser(){var s,r;const e=await this.request("/me");return this.transformUser({id:e.data.id,displayName:((s=e.data.attributes)==null?void 0:s.name)||"Apple Music User",email:"",country:((r=e.data.attributes)==null?void 0:r.storefront)||"us",images:[],followers:0,service:this.serviceType})}async getTopTracks(e=ot.SHORT){return(await this.request("/me/recent/played/tracks")).data.data.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTopArtists(e=ot.SHORT){return(await this.request("/me/recent/played")).data.data.filter(o=>o.type==="artists").map(o=>this.transformArtist({...o,service:this.serviceType}))}async getSavedAlbums(e=0,s=20){return(await this.request(`/me/library/albums?offset=${e}&limit=${s}`)).data.data.map(o=>({...o,album:this.transformAlbum({...o,service:this.serviceType})}))}async getSavedTracks(e=0,s=50){var n;const r=await this.request(`/me/library/songs?offset=${e}&limit=${s}`),o=r.data.data.map(i=>({...i,track:this.transformTrack({...i,service:this.serviceType})}));return{items:o,total:((n=r.data.meta)==null?void 0:n.total)||o.length}}async getFollowedArtists(e=50){return console.warn("getFollowedArtists not fully implemented for Apple Music service"),[]}async getPlaylists(e=0,s=50){return(await this.request(`/me/library/playlists?offset=${e}&limit=${s}`)).data.data.map(o=>this.transformPlaylist({...o,service:this.serviceType}))}async getPlaylist(e){const s=await this.request(`/me/library/playlists/${e}`);return this.transformPlaylist({...s.data.data[0],service:this.serviceType})}async getPlaylistTracks(e,s=0,r=100){return(await this.request(`/me/library/playlists/${e}/tracks?offset=${s}&limit=${r}`)).data.data.map(n=>this.transformTrack({...n,service:this.serviceType}))}async createPlaylist(e,s=""){const r=await this.request("/me/library/playlists",{method:"POST",data:{attributes:{name:e,description:s}}});return this.transformPlaylist({...r.data.data[0],service:this.serviceType})}async addTracksToPlaylist(e,s){const r=s.map(o=>({id:o,type:"songs"}));await this.request(`/me/library/playlists/${e}/tracks`,{method:"POST",data:{data:r}})}async getArtist(e){const s=await this.request(`/catalog/${this.getStorefront()}/artists/${e}`);return this.transformArtist({...s.data.data[0],service:this.serviceType})}async getArtistTopTracks(e,s="us"){return(await this.request(`/catalog/${this.getStorefront()}/artists/${e}/view/top-songs`)).data.data.map(o=>this.transformTrack({...o,service:this.serviceType}))}async getArtistAlbums(e,s="album",r=10){return(await this.request(`/catalog/${this.getStorefront()}/artists/${e}/albums?limit=${r}`)).data.data.map(n=>this.transformAlbum({...n,service:this.serviceType}))}async getRelatedArtists(e){try{return(await this.request(`/catalog/${this.getStorefront()}/artists/${e}/similar-artists`)).data.data.map(r=>this.transformArtist({...r,service:this.serviceType}))}catch(s){return console.warn("Failed to fetch related artists:",s.message),[]}}async getArtistAppearances(e,s=10){return[]}async getArtistPlaylists(e,s=10){return console.warn("getArtistPlaylists not implemented for Apple Music service"),[]}async getUserPlaylists(e,s=20){return this.getPlaylists(0,s)}async getAlbum(e){const s=await this.request(`/catalog/${this.getStorefront()}/albums/${e}`);return this.transformAlbum({...s.data.data[0],service:this.serviceType})}async getAlbumTracks(e){return(await this.request(`/catalog/${this.getStorefront()}/albums/${e}/tracks`)).data.data.map(r=>this.transformTrack({...r,service:this.serviceType}))}async getTrack(e){const s=await this.request(`/catalog/${this.getStorefront()}/songs/${e}`);return this.transformTrack({...s.data.data[0],service:this.serviceType})}async search(e,s=["track","artist","album","playlist"],r=5){var i,a,c,u,d,f,y,b,v,m,p,k;const o=s.map(_=>{switch(_){case"track":return"songs";case"artist":return"artists";case"album":return"albums";case"playlist":return"playlists";default:return _}}).join(","),n=await this.request(`/catalog/${this.getStorefront()}/search?term=${encodeURIComponent(e)}&types=${o}&limit=${r}`);return new Er({tracks:((c=(a=(i=n.data.results)==null?void 0:i.songs)==null?void 0:a.data)==null?void 0:c.map(_=>this.transformTrack({..._,service:this.serviceType})))||[],artists:((f=(d=(u=n.data.results)==null?void 0:u.artists)==null?void 0:d.data)==null?void 0:f.map(_=>this.transformArtist({..._,service:this.serviceType})))||[],albums:((v=(b=(y=n.data.results)==null?void 0:y.albums)==null?void 0:b.data)==null?void 0:v.map(_=>this.transformAlbum({..._,service:this.serviceType})))||[],playlists:((k=(p=(m=n.data.results)==null?void 0:m.playlists)==null?void 0:p.data)==null?void 0:k.map(_=>this.transformPlaylist({..._,service:this.serviceType})))||[],total:0})}async getNewReleases(e=20,s=0){return(await this.request(`/catalog/${this.getStorefront()}/albums?filter[release-date]=${this.getCurrentYear()}-01-01T00:00:00Z&limit=${e}&offset=${s}`)).data.data.map(o=>this.transformAlbum({...o,service:this.serviceType}))}async getRecommendations(e){return console.warn("getRecommendations not fully implemented for Apple Music service"),[]}async getCategories(e=0,s=50){return console.warn("getCategories not implemented for Apple Music service"),{items:[],total:0}}async getCategoryPlaylists(e,s=0,r=50){return console.warn("getCategoryPlaylists not implemented for Apple Music service"),{items:[],total:0}}async followArtist(e){console.warn("followArtist not implemented for Apple Music service")}async unfollowArtist(e){console.warn("unfollowArtist not implemented for Apple Music service")}async followAlbum(e){await this.request("/me/library",{method:"POST",data:{data:[{id:e,type:"albums"}]}})}async unfollowAlbum(e){await this.request(`/me/library/albums/${e}`,{method:"DELETE"})}async followTrack(e){await this.request("/me/library",{method:"POST",data:{data:[{id:e,type:"songs"}]}})}async unfollowTrack(e){await this.request(`/me/library/songs/${e}`,{method:"DELETE"})}async followPlaylist(e){console.warn("followPlaylist not implemented for Apple Music service")}async unfollowPlaylist(e){console.warn("unfollowPlaylist not implemented for Apple Music service")}async checkFollowingArtist(e){return console.warn("checkFollowingArtist not implemented for Apple Music service"),!1}async checkFollowingAlbum(e){try{return await this.request(`/me/library/albums/${e}`),!0}catch{return!1}}async checkFollowingTrack(e){try{return await this.request(`/me/library/songs/${e}`),!0}catch{return!1}}async checkFollowingPlaylist(e){return console.warn("checkFollowingPlaylist not implemented for Apple Music service"),!1}getStorefront(){return this.getCountry()||"us"}getCurrentYear(){return new Date().getFullYear()}transformTrack(e){var s,r,o,n,i,a,c,u,d,f,y,b,v,m,p,k,_,S;return new Qr({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",title_short:((r=e.attributes)==null?void 0:r.name)||"",artists:((i=(n=(o=e.relationships)==null?void 0:o.artists)==null?void 0:n.data)==null?void 0:i.map(T=>this.transformArtist({...T,service:this.serviceType})))||[],album:(u=(c=(a=e.relationships)==null?void 0:a.albums)==null?void 0:c.data)!=null&&u[0]?this.transformAlbum({...e.relationships.albums.data[0],service:this.serviceType}):null,duration:((d=e.attributes)==null?void 0:d.durationInMillis)||0,previewUrl:((b=(y=(f=e.attributes)==null?void 0:f.previews)==null?void 0:y[0])==null?void 0:b.url)||null,externalUrls:new We(this.serviceType,{apple:((v=e.attributes)==null?void 0:v.url)||`https://music.apple.com/${this.getStorefront()}/song/${e.id}`}),service:this.serviceType,popularity:(p=(m=e.attributes)==null?void 0:m.playParams)!=null&&p.catalogId?50:0,trackNumber:((k=e.attributes)==null?void 0:k.trackNumber)||0,discNumber:((_=e.attributes)==null?void 0:_.discNumber)||1,followed:!!((S=e.attributes)!=null&&S.libraryId)})}transformArtist(e){var s,r,o,n;return new jr({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",images:(r=e.attributes)!=null&&r.artwork?[new et(e.attributes.artwork.url.replace("{w}x{h}","300x300"),300,300)]:[],genres:((o=e.attributes)==null?void 0:o.genreNames)||[],externalUrls:new We(this.serviceType,{apple:((n=e.attributes)==null?void 0:n.url)||`https://music.apple.com/${this.getStorefront()}/artist/${e.id}`}),service:this.serviceType,popularity:0,followers:0,followed:!1})}transformAlbum(e){var s,r,o,n,i,a,c,u,d,f;return new Gr({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",artists:((n=(o=(r=e.relationships)==null?void 0:r.artists)==null?void 0:o.data)==null?void 0:n.map(y=>this.transformArtist({...y,service:this.serviceType})))||[],images:(i=e.attributes)!=null&&i.artwork?[new et(e.attributes.artwork.url.replace("{w}x{h}","300x300"),300,300)]:[],releaseDate:((a=e.attributes)==null?void 0:a.releaseDate)||"",totalTracks:((c=e.attributes)==null?void 0:c.trackCount)||0,externalUrls:new We(this.serviceType,{apple:((u=e.attributes)==null?void 0:u.url)||`https://music.apple.com/${this.getStorefront()}/album/${e.id}`}),service:this.serviceType,albumType:((d=e.attributes)==null?void 0:d.albumType)||"album",followed:!!((f=e.attributes)!=null&&f.libraryId)})}transformPlaylist(e){var s,r,o,n,i,a,c,u,d,f,y;return new Wr({id:e.id,name:((s=e.attributes)==null?void 0:s.name)||"",description:((o=(r=e.attributes)==null?void 0:r.description)==null?void 0:o.standard)||"",images:(n=e.attributes)!=null&&n.artwork?[new et(e.attributes.artwork.url.replace("{w}x{h}","300x300"),300,300)]:[],owner:((i=e.attributes)==null?void 0:i.curatorName)||"Apple Music",public:!((a=e.attributes)!=null&&a.isPrivate)||!1,totalTracks:((c=e.attributes)==null?void 0:c.trackCount)||0,externalUrls:new We(this.serviceType,{apple:((u=e.attributes)==null?void 0:u.url)||`https://music.apple.com/${this.getStorefront()}/playlist/${e.id}`}),service:this.serviceType,followed:!1,tracks:((y=(f=(d=e.relationships)==null?void 0:d.tracks)==null?void 0:f.data)==null?void 0:y.map(b=>this.transformTrack({...b,service:this.serviceType})))||[]})}transformUser(e){return new Yr({id:e.id,displayName:e.displayName,email:e.email,country:e.country,images:e.images,followers:e.followers,service:this.serviceType})}}class Mf extends us{constructor(){super(),this.baseURL="/youtube",this.serviceType=te.YOUTUBE}getServiceName(){return"YouTube Music"}getServiceType(){return this.serviceType}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,...s.headers},...s};try{return await ke(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,ke(o);throw i}}async refreshToken(){return Promise.resolve()}async authenticate(){window.location.href="/youtube/login"}logout(){window.location.href="/youtube/logout"}isAuthenticated(){return document.cookie.includes("yt_authorized=1")}async getCurrentUser(){const e=await this.request("/user/profile");return this.transformUser({id:e.data.id,displayName:e.data.display_name,email:"",country:e.data.country,images:[],followers:0,service:this.serviceType})}async search(e,s=["track","artist","album","playlist"],r=5){try{const o=await this.request("/search",{params:{q:e,type:s.join(","),limit:r}}),n=new Er;return o.data.tracks&&(n.tracks=o.data.tracks.map(i=>this.transformTrack(i))),o.data.artists&&(n.artists=o.data.artists.map(i=>this.transformArtist(i))),o.data.albums&&(n.albums=o.data.albums.map(i=>this.transformAlbum(i))),o.data.playlists&&(n.playlists=o.data.playlists.map(i=>this.transformPlaylist(i))),n}catch(o){return console.error("YouTube search error:",o),new Er}}async getNewReleases(e=20,s=0){return(await this.request("/new-releases",{params:{limit:e,offset:s}})).data.albums.map(o=>this.transformAlbum(o))}async getTrack(e){const s=await this.request(`/track/${e}`);return this.transformTrack(s.data)}async getArtist(e){const s=await this.request(`/artist/${e}`);return this.transformArtist(s.data)}async getArtistTopTracks(e,s="US",r=!0){return(await this.request(`/artist/${e}/top-tracks`,{params:{market:s}})).data.tracks.map(n=>this.transformTrack(n))}async getAlbum(e){const s=await this.request(`/album/${e}`);return this.transformAlbum(s.data)}async getAlbumTracks(e){return(await this.request(`/album/${e}/tracks`)).data.items.map(r=>this.transformTrack(r))}async getPlaylist(e){const s=await this.request(`/playlist/${e}`);return this.transformPlaylist(s.data)}async getPlaylistTracks(e,s=0,r=100){return(await this.request(`/playlist/${e}/tracks`,{params:{limit:r,offset:s}})).data.items.map(n=>this.transformTrack(n))}transformTrack(e){var s;return new Qr({id:e.id,name:e.name,title_short:e.title_short||e.name,artists:((s=e.artists)==null?void 0:s.map(r=>this.transformArtist(r)))||[],album:e.album?this.transformAlbum(e.album):null,duration:e.duration||0,previewUrl:e.previewUrl||null,externalUrls:new We(this.serviceType,e.externalUrls),service:this.serviceType,popularity:e.popularity||0,trackNumber:e.trackNumber||0,discNumber:e.discNumber||1,followed:e.followed||!1})}transformArtist(e){var s;return new jr({id:e.id,name:e.name,images:((s=e.images)==null?void 0:s.map(r=>new et(r.url,r.width,r.height)))||[],genres:e.genres||[],externalUrls:new We(this.serviceType,e.externalUrls),service:this.serviceType,popularity:e.popularity||0,followers:e.followers||0,followed:e.followed||!1})}transformAlbum(e){var s,r;return new Gr({id:e.id,name:e.name,artists:((s=e.artists)==null?void 0:s.map(o=>this.transformArtist(o)))||[],images:((r=e.images)==null?void 0:r.map(o=>new et(o.url,o.width,o.height)))||[],releaseDate:e.releaseDate,totalTracks:e.totalTracks||0,externalUrls:new We(this.serviceType,e.externalUrls),service:this.serviceType,albumType:e.albumType||"album",followed:e.followed||!1})}transformPlaylist(e){var s;return new Wr({id:e.id,name:e.name,description:e.description||"",images:((s=e.images)==null?void 0:s.map(r=>new et(r.url,r.width,r.height)))||[],owner:e.owner,public:e.public||!1,totalTracks:e.totalTracks||0,externalUrls:new We(this.serviceType,e.externalUrls),service:this.serviceType,followed:e.followed||!1,tracks:e.tracks||[]})}transformUser(e){var s;return new Yr({id:e.id,displayName:e.displayName,email:e.email,country:e.country,images:((s=e.images)==null?void 0:s.map(r=>new et(r.url,r.width,r.height)))||[],followers:e.followers||0,service:this.serviceType})}async getTopTracks(e=ot.SHORT){return[]}async getTopArtists(e=ot.SHORT){return[]}async getSavedAlbums(e=0,s=20){return[]}async getSavedTracks(e=0,s=50){return[]}async getFollowedArtists(e=50){return[]}async getPlaylists(e=0,s=50){return[]}async createPlaylist(e,s=""){throw new Error("Creating playlists is not supported for YouTube Music")}async addTracksToPlaylist(e,s){throw new Error("Adding tracks to playlists is not supported for YouTube Music")}async getRelatedArtists(e){return[]}async getArtistAlbums(e,s="album",r=10){return[]}async getArtistAppearances(e,s=10){return[]}async getArtistPlaylists(e,s=10){return[]}async getUserPlaylists(e,s=20){return[]}async getRecommendations(e){return[]}async getCategories(e=0,s=50){return[]}async getCategoryPlaylists(e,s=0,r=50){return[]}async followArtist(e){throw new Error("Following artists is not supported for YouTube Music")}async unfollowArtist(e){throw new Error("Unfollowing artists is not supported for YouTube Music")}async followAlbum(e){throw new Error("Following albums is not supported for YouTube Music")}async unfollowAlbum(e){throw new Error("Unfollowing albums is not supported for YouTube Music")}async followTrack(e){throw new Error("Following tracks is not supported for YouTube Music")}async unfollowTrack(e){throw new Error("Unfollowing tracks is not supported for YouTube Music")}async followPlaylist(e){throw new Error("Following playlists is not supported for YouTube Music")}async unfollowPlaylist(e){throw new Error("Unfollowing playlists is not supported for YouTube Music")}async checkFollowingArtist(e){return!1}async checkFollowingAlbum(e){return!1}async checkFollowingTrack(e){return!1}async checkFollowingPlaylist(e){return!1}}class vt{static createService(e){if(!Object.values(te).includes(e))throw new Error(`Unsupported service type: ${e}`);if(this.services.has(e))return this.services.get(e);let s;switch(e){case te.SPOTIFY:s=new $f;break;case te.DEEZER:s=new Pf;break;case te.TIDAL:s=new xf;break;case te.APPLE:s=new Rf;break;case te.YOUTUBE:s=new Mf;break;default:throw new Error(`Service implementation not found for: ${e}`)}return this.services.set(e,s),s}static getAvailableServices(){return Object.values(te)}static isServiceSupported(e){return Object.values(te).includes(e)}static getServiceDisplayName(e){return{[te.SPOTIFY]:"Spotify",[te.DEEZER]:"Deezer",[te.TIDAL]:"Tidal",[te.APPLE]:"Apple Music",[te.YOUTUBE]:"YouTube Music"}[e]||e}static getServiceIcon(e){return{[te.SPOTIFY]:"/img/spotify-icon.svg",[te.DEEZER]:"/img/deezer-icon.svg",[te.TIDAL]:"/img/tidal-icon.svg",[te.APPLE]:"/img/apple-music-icon.svg",[te.YOUTUBE]:"/img/youtube-music-icon.svg"}[e]||"/img/default-service-icon.svg"}static clearCache(){this.services.clear()}static removeService(e){this.services.delete(e)}}lr(vt,"services",new Map);class Ef{constructor(){this.currentService=null,this.currentServiceType=this.getStoredServiceType()||te.SPOTIFY,this.initializeService()}initializeService(){try{this.currentService=vt.createService(this.currentServiceType)}catch(e){console.error("Failed to initialize music service:",e),this.currentServiceType=te.SPOTIFY,this.currentService=vt.createService(this.currentServiceType)}}getCurrentService(){return this.currentService}getCurrentServiceType(){return this.currentServiceType}async switchService(e){if(!vt.isServiceSupported(e))throw new Error(`Unsupported service type: ${e}`);if(e===this.currentServiceType)return!0;try{return vt.removeService(this.currentServiceType),this.currentServiceType=e,this.currentService=vt.createService(e),this.storeServiceType(e),!0}catch(s){return console.error("Failed to switch service:",s),!1}}getAvailableServices(){return vt.getAvailableServices().map(e=>({type:e,name:vt.getServiceDisplayName(e),icon:vt.getServiceIcon(e),isCurrent:e===this.currentServiceType}))}isAuthenticated(){return this.currentService?this.currentService.isAuthenticated():!1}async authenticate(){if(!this.currentService)throw new Error("No service initialized");return this.currentService.authenticate()}logout(){this.currentService&&this.currentService.logout()}getAuthenticationUrl(e){const s=vt.createService(e);return s.getAuthenticationUrl?s.getAuthenticationUrl():null}storeServiceType(e){try{localStorage.setItem("musicServiceType",e)}catch(s){console.warn("Failed to store service type:",s)}}getStoredServiceType(){try{return localStorage.getItem("musicServiceType")}catch(e){return console.warn("Failed to get stored service type:",e),null}}clearStoredServiceType(){try{localStorage.removeItem("musicServiceType")}catch(e){console.warn("Failed to clear stored service type:",e)}}resetToDefault(){this.switchService(te.SPOTIFY)}getServiceCapabilities(e){return{[te.SPOTIFY]:{search:!0,playlists:!0,recommendations:!0,userLibrary:!0,follow:!0,newReleases:!0},[te.DEEZER]:{search:!0,playlists:!0,recommendations:!1,userLibrary:!0,follow:!0,newReleases:!0},[te.TIDAL]:{search:!0,playlists:!0,recommendations:!1,userLibrary:!0,follow:!0,newReleases:!0}}[e]||{}}}const le=new Ef,pe=tr("music",{state:()=>({currentServiceType:te.SPOTIFY,availableServices:[],loading:!1,currentUser:null,topTracks:{short:[],medium:[],long:[]},topArtists:{short:[],medium:[],long:[]},savedAlbums:[],savedTracks:[],savedTracksTotal:0,followedArtists:[],playlists:[],genrePlaylists:[],spotifyPlaylistsPagination:{total:0,next:null,previous:null,offset:0,limit:50},searchInput:"",searchResults:{tracks:[],artists:[],albums:[],playlists:[]},newReleases:[],cache:{tracks:new Map,artists:new Map,albums:new Map,playlists:new Map},selectedArtistsRange:1,selectedTracksRange:1,searchTimer:null}),getters:{isLoading:t=>t.loading,isAuthenticated:t=>t.currentUser!==null,currentService:()=>le.getCurrentService(),currentServiceName:t=>{var e;return((e=le.getAvailableServices().find(s=>s.type===t.currentServiceType))==null?void 0:e.name)||"Unknown"},getTopTracksShort:t=>t.topTracks.short,getTopTracksMedium:t=>t.topTracks.medium,getTopTracksLong:t=>t.topTracks.long,getTopArtistsShort:t=>t.topArtists.short,getTopArtistsMedium:t=>t.topArtists.medium,getTopArtistsLong:t=>t.topArtists.long,getSavedAlbums:t=>t.savedAlbums,getSavedTracks:t=>t.savedTracks,getFollowedArtists:t=>t.followedArtists,getPlaylists:t=>t.playlists,getNewReleases:t=>t.newReleases,getSpotifyPlaylists:t=>t.playlists,getGenrePlaylists:t=>t.genrePlaylists,getSearchTracks:t=>t.searchResults.tracks,getSearchArtists:t=>t.searchResults.artists,getSearchAlbums:t=>t.searchResults.albums,getSearchPlaylists:t=>t.searchResults.playlists},actions:{async fetchGenrePlaylists(t=0){this.setLoading(!0);try{t===0&&(this.genrePlaylists=[]);const s=await le.getCurrentService().getGenres(t,50),o=(Array.isArray(s==null?void 0:s.items)?s.items:[]).map(n=>({id:n.id,name:n.name,images:n.images||n.icons||[],description:n.description||`Content from ${n.name} genre`,genreId:n.id,genreName:n.name,type:"playlist"}));this.genrePlaylists.push(...o)}catch(e){throw console.error("Failed to fetch genre playlists:",e),e}finally{this.setLoading(!1)}},async initializeServices(){this.availableServices=le.getAvailableServices(),this.currentServiceType=le.getCurrentServiceType()},async switchService(t){this.setLoading(!0);try{const e=await le.switchService(t);return e&&(this.currentServiceType=t,this.clearAllData()),e}catch(e){throw console.error("Failed to switch service:",e),e}finally{this.setLoading(!1)}},async authenticate(){this.setLoading(!0);try{await le.authenticate()}catch(t){throw console.error("Authentication failed:",t),t}finally{this.setLoading(!1)}},logout(){le.logout(),this.clearAllData()},setLoading(t){this.loading=t},async fetchCurrentUser(){this.setLoading(!0);try{const t=le.getCurrentService();this.currentUser=await t.getCurrentUser()}catch(t){throw console.error("Failed to fetch current user:",t),t}finally{this.setLoading(!1)}},async fetchTopTracks(t=ot.SHORT){this.setLoading(!0);try{const s=await le.getCurrentService().getTopTracks(t),r=t===ot.SHORT?"short":t===ot.MEDIUM?"medium":"long";this.topTracks[r]=s}catch(e){throw console.error("Failed to fetch top tracks:",e),e}finally{this.setLoading(!1)}},async fetchTopArtists(t=ot.SHORT){this.setLoading(!0);try{const e=le.getCurrentService(),s=await e.getTopArtists(t),r=await Promise.all(s.map(async n=>{try{const i=await e.getArtistTopTracks(n.id);return i.length>0&&i[0].previewUrl&&(n.previewUrl=i[0].previewUrl),n.tracks=i,n}catch(i){return console.error(`Failed to fetch tracks for artist ${n.id}:`,i),n}})),o=t===ot.SHORT?"short":t===ot.MEDIUM?"medium":"long";this.topArtists[o]=r}catch(e){throw console.error("Failed to fetch top artists:",e),e}finally{this.setLoading(!1)}},async fetchSavedAlbums(t=0){this.setLoading(!0);try{t===0&&(this.savedAlbums=[]);const s=await le.getCurrentService().getSavedAlbums(t,20);await this.enrichAlbumData(s.map(r=>r.album)),this.savedAlbums.push(...s),s.length>0&&await this.fetchSavedAlbums(t+20)}catch(e){throw console.error("Failed to fetch saved albums:",e),e}finally{this.setLoading(!1)}},async fetchSavedTracks(t=0){this.setLoading(!0);try{t===0&&(this.savedTracks=[]);const s=await le.getCurrentService().getSavedTracks(t,50);s.items&&s.total!==void 0?(this.savedTracks.push(...s.items),this.savedTracksTotal=s.total):(this.savedTracks.push(...s),this.savedTracksTotal=s.length)}catch(e){throw console.error("Failed to fetch saved tracks:",e),e}finally{this.setLoading(!1)}},async fetchFollowedArtists(){this.setLoading(!0);try{const t=le.getCurrentService(),e=await t.getFollowedArtists(50),s=await Promise.all(e.map(async r=>{try{const o=await t.getArtistTopTracks(r.id);return o.length>0&&o[0].previewUrl&&(r.previewUrl=o[0].previewUrl),r.tracks=o,r}catch(o){return console.error(`Failed to fetch tracks for followed artist ${r.id}:`,o),r}}));this.followedArtists=s}catch(t){throw console.error("Failed to fetch followed artists:",t),t}finally{this.setLoading(!1)}},async fetchPlaylists(t=0){this.setLoading(!0);try{t===0&&(this.playlists=[]);const s=await le.getCurrentService().getUserPlaylists(localStorage.getItem("deezer-user-id"),t);this.playlists.push(...s),s.length===50&&await this.fetchPlaylists(t+50)}catch(e){throw console.error("Failed to fetch playlists:",e),e}finally{this.setLoading(!1)}},async fetchPlaylistTracks(t,e=0){try{return await le.getCurrentService().getPlaylistTracks(t,e,100)}catch(s){throw console.error("Failed to fetch playlist tracks:",s),s}},async createPlaylist(t,e=""){try{const r=await le.getCurrentService().createPlaylist(t,e);return this.playlists.unshift(r),r}catch(s){throw console.error("Failed to create playlist:",s),s}},async fetchNewReleases(t=0){this.setLoading(!0);try{const s=await le.getCurrentService().getNewReleases(20,t);await this.enrichAlbumData(s),this.newReleases.push(...s),s.length>0&&t<100&&await this.fetchNewReleases(t+20)}catch(e){throw console.error("Failed to fetch new releases:",e),e}finally{this.setLoading(!1)}},async fetchSpotifyPlaylists(t=0){this.setLoading(!0);try{t===0&&(this.playlists=[]);const e=le.getCurrentService();if(e.getSpotifyPlaylists){const s=await e.getSpotifyPlaylists(t,50);this.playlists.push(...s)}else{const s=await e.getPlaylists(t,50);this.playlists.push(...s)}}catch(e){throw console.error("Failed to fetch Spotify playlists:",e),e}finally{this.setLoading(!1)}},async search(t){if(this.searchInput=t,this.searchTimer&&clearTimeout(this.searchTimer),!t){this.clearSearchResults();return}this.searchTimer=setTimeout(async()=>{this.setLoading(!0);try{const s=await le.getCurrentService().search(t,["album","artist","playlist","track"],5);this.searchResults.tracks=s.tracks,this.searchResults.artists=s.artists,this.searchResults.albums=s.albums,this.searchResults.playlists=s.playlists,await this.enrichAlbumData(this.searchResults.albums),await this.enrichArtistData(this.searchResults.artists),await this.enrichPlaylistData(this.searchResults.playlists)}catch(e){throw console.error("Failed to search:",e),e}finally{this.setLoading(!1)}},2e3)},clearSearchResults(){this.searchResults={tracks:[],artists:[],albums:[],playlists:[]}},async enrichAlbumData(t){const e=le.getCurrentService();for(const s of t)try{const r=await e.getAlbumTracks(s.id);s.tracks=r,r.length>0&&(r[0].preview_url||r[0].previewUrl)&&(s.preview_url=r[0].preview_url||r[0].previewUrl,s.previewUrl=r[0].preview_url||r[0].previewUrl)}catch(r){console.error(`Failed to enrich album ${s.id}:`,r)}},async enrichArtistData(t){const e=le.getCurrentService();for(const s of t)try{const r=await e.getArtistTopTracks(s.id);s.tracks=r,r.length>0&&r[0].previewUrl&&(s.previewUrl=r[0].previewUrl)}catch(r){console.error(`Failed to enrich artist ${s.id}:`,r)}},async enrichPlaylistData(t){const e=le.getCurrentService();for(const s of t)try{const r=await e.getPlaylist(s.id);s.tracks=r.tracks;let o=null;r.tracks&&r.tracks.items&&r.tracks.items.length>0?o=r.tracks.items[0].track:r.tracks&&Array.isArray(r.tracks)&&r.tracks.length>0&&(o=r.tracks[0]),o&&(o.previewUrl||o.preview_url)&&(s.previewUrl=o.previewUrl||o.preview_url)}catch(r){console.error(`Failed to enrich playlist ${s.id}:`,r)}},async followPlaylist(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followPlaylist(t.id),t.followed=!0):(await e.unfollowPlaylist(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow playlist:",e),e}},async followArtist(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followArtist(t.id),t.followed=!0):(await e.unfollowArtist(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow artist:",e),e}},async followAlbum(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followAlbum(t.id),t.followed=!0):(await e.unfollowAlbum(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow album:",e),e}},async followTrack(t){try{const e=le.getCurrentService();t.followed===!1?(await e.followTrack(t.id),t.followed=!0):(await e.unfollowTrack(t.id),t.followed=!1)}catch(e){throw console.error("Failed to follow/unfollow track:",e),e}},setSelectedArtistsRange(t){this.selectedArtistsRange=t},setSelectedTracksRange(t){this.selectedTracksRange=t},setSearchTimer(t){this.searchTimer=t},getCachedItem(t,e){return this.cache[t].get(e)},setCachedItem(t,e,s){this.cache[t].set(e,s)},clearCache(t){t?this.cache[t].clear():Object.keys(this.cache).forEach(e=>{this.cache[e].clear()})},clearAllData(){this.currentUser=null,this.topTracks={short:[],medium:[],long:[]},this.topArtists={short:[],medium:[],long:[]},this.savedAlbums=[],this.savedTracks=[],this.followedArtists=[],this.newReleases=[],this.playlists=[],this.searchResults={tracks:[],artists:[],albums:[],playlists:[]},this.loading=!1,this.clearCache()}}}),If={class:"mobile-settings-display"},Lf={class:"mobile-actions-section"},Df={class:"mobile-actions-section"},zf={class:"mobile-actions-section"},Uf={class:"mobile-actions-section"},Of={class:"mobile-logout-section"},Ff={__name:"SettingsDisplay",setup(t){const e=ye(),s=ct(),r=pe(),o=z("light"),{currentServiceType:n}=Jt(r),i=m=>{const p=document.documentElement;p.className=m==="light"?"":m,localStorage.setItem("user-theme",m),o.value=m},a=()=>{e.setAudioPreview(!e.audioPreview)},c=()=>{e.setRestartSongOnClick(!e.restartSongOnClick)},u=()=>{e.setUnplayableTracks(!e.unplayableTracks)},d=()=>{e.setOpenLinks(!e.openLinks)},f=()=>{s.toggleViewMode()},y=()=>{localStorage.clear(),window.location.reload()},b=()=>{localStorage.removeItem("welcome-modal-seen"),window.location.reload()},v=async m=>{try{await r.switchService(m),console.log(`Switched to ${m}`)}catch(p){console.error("Failed to switch service:",p),alert("Failed to switch service. Please try again.")}};return Pe(()=>{const m=localStorage.getItem("user-theme")||"light";o.value=m,i(m)}),(m,p)=>(h(),g("div",If,[p[30]||(p[30]=Ne('<div class="text-center"><div class="profile-avatar"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="avatar-icon"><path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd"></path></svg></div><h2 class="profile-title">Profile</h2><p class="profile-description">Your profile settings and preferences</p></div><div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06z"></path></svg></div><h1 class="mobile-header-title">Audio Settings</h1></div>',2)),l("div",Lf,[l("button",{class:"mobile-action-button",onClick:a},[p[6]||(p[6]=l("span",{class:"mobile-action-icon"},"🔊",-1)),p[7]||(p[7]=l("span",{class:"mobile-action-text"},"Audio Preview",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).audioPreview}])},M(w(e).audioPreview?"ON":"OFF"),3)]),l("button",{class:"mobile-action-button",onClick:c},[p[8]||(p[8]=l("span",{class:"mobile-action-icon"},"🔄",-1)),p[9]||(p[9]=l("span",{class:"mobile-action-text"},"Restart song on click",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).restartSongOnClick}])},M(w(e).restartSongOnClick?"ON":"OFF"),3)]),l("button",{class:"mobile-action-button",onClick:u},[p[10]||(p[10]=l("span",{class:"mobile-action-icon"},"🎵",-1)),p[11]||(p[11]=l("span",{class:"mobile-action-text"},"Show unplayable tracks",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).unplayableTracks}])},M(w(e).unplayableTracks?"ON":"OFF"),3)]),l("button",{class:"mobile-action-button",onClick:d},[p[12]||(p[12]=l("span",{class:"mobile-action-icon"},"🔗",-1)),p[13]||(p[13]=l("span",{class:"mobile-action-text"},"Open links in new tab",-1)),l("span",{class:K(["mobile-action-status",{active:w(e).openLinks}])},M(w(e).openLinks?"ON":"OFF"),3)])]),p[31]||(p[31]=Ne('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path></svg></div><h1 class="mobile-header-title">Theme</h1></div>',1)),l("div",Df,[l("button",{class:"mobile-action-button",onClick:p[0]||(p[0]=k=>i("light"))},[p[14]||(p[14]=l("span",{class:"mobile-action-icon"},"☀️",-1)),p[15]||(p[15]=l("span",{class:"mobile-action-text"},"Light Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="light"}])},M(o.value==="light"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[1]||(p[1]=k=>i("dark"))},[p[16]||(p[16]=l("span",{class:"mobile-action-icon"},"🌙",-1)),p[17]||(p[17]=l("span",{class:"mobile-action-text"},"Dark Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="dark"}])},M(o.value==="dark"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[2]||(p[2]=k=>i("dark-blue"))},[p[18]||(p[18]=l("span",{class:"mobile-action-icon"},"🌊",-1)),p[19]||(p[19]=l("span",{class:"mobile-action-text"},"Dark Blue Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="dark-blue"}])},M(o.value==="dark-blue"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[3]||(p[3]=k=>i("dq"))},[p[20]||(p[20]=l("span",{class:"mobile-action-icon"},"🎨",-1)),p[21]||(p[21]=l("span",{class:"mobile-action-text"},"DQ Theme",-1)),l("span",{class:K(["mobile-action-status",{active:o.value==="dq"}])},M(o.value==="dq"?"ACTIVE":""),3)])]),p[32]||(p[32]=Ne('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z" clip-rule="evenodd"></path></svg></div><h1 class="mobile-header-title">Display Settings</h1></div>',1)),l("div",zf,[l("button",{class:"mobile-action-button",onClick:f},[p[22]||(p[22]=l("span",{class:"mobile-action-icon"},"📱",-1)),p[23]||(p[23]=l("span",{class:"mobile-action-text"},"View Mode",-1)),l("span",{class:K(["mobile-action-status",{active:w(s).viewMode==="grid"}])},M(w(s).viewMode==="list"?"LIST":"GRID"),3)])]),p[33]||(p[33]=Ne('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12 3.75a8.25 8.25 0 110 16.5 8.25 8.25 0 010-16.5z"></path></svg></div><h1 class="mobile-header-title">Music Service</h1></div>',1)),l("div",Uf,[l("button",{class:"mobile-action-button",onClick:p[4]||(p[4]=k=>v("spotify"))},[p[24]||(p[24]=l("span",{class:"mobile-action-icon"},"🎵",-1)),p[25]||(p[25]=l("span",{class:"mobile-action-text"},"Spotify",-1)),l("span",{class:K(["mobile-action-status",{active:w(n)==="spotify"}])},M(w(n)==="spotify"?"ACTIVE":""),3)]),l("button",{class:"mobile-action-button",onClick:p[5]||(p[5]=k=>v("deezer"))},[p[26]||(p[26]=l("span",{class:"mobile-action-icon"},"🎧",-1)),p[27]||(p[27]=l("span",{class:"mobile-action-text"},"Deezer",-1)),l("span",{class:K(["mobile-action-status",{active:w(n)==="deezer"}])},M(w(n)==="deezer"?"ACTIVE":""),3)])]),p[34]||(p[34]=Ne('<div class="mobile-settings-header"><div class="mobile-header-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06z"></path></svg></div><h1 class="mobile-header-title">Actions</h1></div>',1)),l("div",{class:"mobile-actions-section"},[l("button",{class:"mobile-action-button",onClick:y},p[28]||(p[28]=[l("span",{class:"mobile-action-icon"},"🗑️",-1),l("span",{class:"mobile-action-text"},"Clear Cache",-1)])),l("button",{class:"mobile-action-button",onClick:b},p[29]||(p[29]=[l("span",{class:"mobile-action-icon"},"👋",-1),l("span",{class:"mobile-action-text"},"Show Welcome Modal",-1)]))]),l("div",Of,[Q(_l)])]))}};class qf{constructor(){this.baseURL="https://api.spotify.com/v1"}getToken(){return document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getUsername(){return document.cookie.replace(/(?:(?:^|.*;\s*)username\s*\=\s*([^;]*).*$)|^.*$/,"$1")}getCountry(){return document.cookie.replace(/(?:(?:^|.*;\s*)country\s*\=\s*([^;]*).*$)|^.*$/,"$1")}async request(e,s={}){var n;const r=this.getToken(),o={url:`${this.baseURL}${e}`,headers:{Authorization:`Bearer ${r}`,...s.headers},...s};try{return await ke(o)}catch(i){if(((n=i.response)==null?void 0:n.status)===401)return await this.refreshToken(),o.headers.Authorization=`Bearer ${this.getToken()}`,ke(o);throw i}}async refreshToken(){const e=this.getUsername(),s=await ke.get(`/spotify/refresh_token/${e}`);if(s.status===200)return s.data;throw new Error("Failed to refresh token")}async getTopTracks(e="short_term"){return this.request(`/me/top/tracks?time_range=${e}`)}async getTopArtists(e="short_term"){return this.request(`/me/top/artists?time_range=${e}`)}async getSavedAlbums(e=0,s=20){return this.request(`/me/albums?offset=${e}&limit=${s}`)}async getSavedTracks(e=0,s=50){return this.request(`/me/tracks?offset=${e}&limit=${s}`)}async getFollowedArtists(e=50){return this.request(`/me/following?type=artist&limit=${e}`)}async getPlaylists(e=0,s=50){return this.request(`/me/playlists?fields=items(name,id,images,owner,public)&limit=${s}&offset=${e}`)}async getPlaylist(e){return this.request(`/playlists/${e}`)}async getPlaylistTracks(e,s=0,r=100){return this.request(`/playlists/${e}/tracks?offset=${s}&limit=${r}`)}async getSpotifyPlaylists(e=0,s=50){return this.request(`/users/spotify/playlists?fields=items(name,id,images,owner,public)&limit=${s}&offset=${e}`)}async getArtist(e){return this.request(`/artists/${e}`)}async getArtistTopTracks(e,s="UA"){const r=this.getCountry();return this.request(`/artists/${e}/top-tracks?market=${s}${r}`)}async getArtistAlbums(e,s="album",r=10){return this.request(`/artists/${e}/albums?include_groups=${s}&limit=${r}`)}async getArtistSingles(e,s=10){return this.request(`/artists/${e}/albums?include_groups=single,compilation&limit=${s}`)}async getArtistAppearances(e,s=10){return this.request(`/artists/${e}/albums?include_groups=appears_on&limit=${s}`)}async getRelatedArtists(e){try{return await this.request(`/artists/${e}/related-artists`)}catch(s){return console.warn("Failed to fetch related artists:",s.message),{data:{artists:[]}}}}async getAlbum(e){return this.request(`/albums/${e}`)}async getAlbumTracks(e){return this.request(`/albums/${e}/tracks`)}async getAlbums(e){return this.request(`/albums?ids=${e}`)}async getTrack(e){return this.request(`/tracks/${e}`)}async search(e,s="album,artist,playlist,track",r=5){return this.request(`/search/?q=${encodeURIComponent(e)}&type=${s}&limit=${r}`)}async getNewReleases(e=20,s=0){return this.request(`/browse/new-releases?limit=${e}&offset=${s}`)}async getRecommendations(e){const s=Object.entries(e).filter(([r,o])=>o).map(([r,o])=>`${r}=${o}`).join("&");return this.request(`/recommendations?${s}`)}async followPlaylist(e){return this.request(`/playlists/${e}/followers`,{method:"PUT"})}async unfollowPlaylist(e){return this.request(`/playlists/${e}/followers`,{method:"DELETE"})}async followArtist(e){return this.request(`/me/following?type=artist&ids=${e}`,{method:"PUT"})}async unfollowArtist(e){return this.request(`/me/following?type=artist&ids=${e}`,{method:"DELETE"})}async followAlbum(e){return this.request(`/me/albums?ids=${e}`,{method:"PUT"})}async unfollowAlbum(e){return this.request(`/me/albums?ids=${e}`,{method:"DELETE"})}async followTrack(e){return this.request(`/me/tracks?ids=${e}`,{method:"PUT"})}async unfollowTrack(e){return this.request(`/me/tracks?ids=${e}`,{method:"DELETE"})}async checkFollowingPlaylist(e){const s=this.getUsername();return this.request(`/playlists/${e}/followers/contains?ids=${s}`)}async checkFollowingArtist(e){return this.request(`/me/following/contains?type=artist&ids=${e}`)}async checkFollowingAlbum(e){return this.request(`/me/albums/contains?ids=${e}`)}async checkFollowingTrack(e){return this.request(`/me/tracks/contains?ids=${e}`)}async createPlaylist(e){const s=this.getUsername();return this.request(`/users/${s}/playlists`,{method:"POST",data:{name:e}})}async addTracksToPlaylist(e,s){const r=s.map(o=>`spotify:track:${o}`).join(",");return this.request(`/playlists/${e}/tracks?uris=${r}`,{method:"POST"})}}const ko=new qf,Ps={formatArtistNamesSimple:t=>{if(!t||!Array.isArray(t)||t.length===0)return"Unknown Artist";const e=t.map(({name:r})=>r).filter(r=>r);if(e.length===0)return"Unknown Artist";const s=e.pop();return e.length?e.join(", ")+" & "+s:s},getPrimaryArtist:t=>{var e;return((e=t==null?void 0:t[0])==null?void 0:e.name)||"Unknown Artist"},hasPreview:t=>!!(t.preview_url||t.previewUrl),hasImage:t=>!!(t.images&&t.images[0])},ze=tr("queue",{state:()=>({queue:localStorage.getItem("queue")?JSON.parse(localStorage.getItem("queue")).length:0,queueArr:localStorage.getItem("queue")?JSON.parse(localStorage.getItem("queue")):[],queueModal:!1}),getters:{getQueue:t=>t.queue,getQueueArr:t=>t.queueArr,isQueueModalOpen:t=>t.queueModal},actions:{setQueue(t){this.queue=t},setQueueArr(t){this.queueArr=t},setQueueModal(t){this.queueModal=t},addToQueue(t){var n,i,a,c,u,d;const e=localStorage.getItem("queue"),s={id:t.id,name:t.name,artists:t.artists||((n=t.album)==null?void 0:n.artists)||[],image:((a=(i=t.album)==null?void 0:i.images)==null?void 0:a[0])||((c=t.images)==null?void 0:c[0]),preview_url:t.preview_url||t.previewUrl||((u=t==null?void 0:t.track)==null?void 0:u.preview_url)||((d=t==null?void 0:t.items)==null?void 0:d[0].preview_url)};s.artists&&s.artists.length>0?s.artists=this.formatArtistNames(s.artists):s.artists="Unknown Artist";let r=e?JSON.parse(e):[];r.findIndex(f=>f.id===t.id)===-1&&(r.push(s),localStorage.setItem("queue",JSON.stringify(r)),this.setQueue(r.length),this.setQueueArr(r))},removeFromQueue(t){const e=JSON.parse(localStorage.getItem("queue"))||[],s=e.findIndex(r=>r.id===t);s>-1&&(e.splice(s,1),e.length===0?(localStorage.removeItem("queue"),this.setQueueArr([]),this.setQueue(0)):(localStorage.setItem("queue",JSON.stringify(e)),this.setQueueArr(e),this.setQueue(e.length)))},async saveQueue(){if(!(!this.queueArr||this.queueArr.length===0))try{if(this.queueArr.length>50)for(let t=0;t<this.queueArr.length;t+=49){const s=this.queueArr.slice(t,t+49).map(r=>r.id).join(",");await ko.request(`/me/tracks?ids=${s}`,{method:"PUT"})}else{const t=this.queueArr.map(e=>e.id).join(",");await ko.request(`/me/tracks?ids=${t}`,{method:"PUT"})}this.clearQueue()}catch(t){throw console.error("Failed to save queue:",t),t}},async saveQueueToPlaylist(t){if(!(!this.queueArr||this.queueArr.length===0))try{const e=this.queueArr.map(s=>s.id);return await ko.addTracksToPlaylist(t,e),!0}catch(e){throw console.error("Failed to save queue to playlist:",e),e}},clearQueue(){localStorage.removeItem("queue"),this.setQueue(0),this.setQueueArr([])},loadQueue(){const t=localStorage.getItem("queue");if(t){const e=JSON.parse(t);this.setQueue(e.length),this.setQueueArr(e)}else this.setQueue(0),this.setQueueArr([])},isInQueue(t){return!this.queueArr||this.queueArr.length===0?!1:this.queueArr.some(e=>e.id===t)},getQueueCount(){return this.queue||0},formatArtistNames(t){return!t||!Array.isArray(t)||t.length===0?"Unknown Artist":Ps.formatArtistNamesSimple(t)}}});function ds(t,e=null){const s=E(()=>{var u,d,f,y,b;return e||((d=(u=t.value)==null?void 0:u.images)!=null&&d[0]?t.value.images[0]:(b=(y=(f=t.value)==null?void 0:f.album)==null?void 0:y.images)!=null&&b[0]?t.value.album.images[0]:null)}),r=E(()=>{var u,d;return!!((u=t.value)!=null&&u.preview_url||(d=t.value)!=null&&d.previewUrl)}),o=E(()=>!!s.value),n=E(()=>r.value&&o.value?"mobile-playable":!r.value&&o.value?"mobile-unplayable mobile-half-opacity":r.value&&!o.value?"mobile-playable mobile-no-image":"mobile-unplayable mobile-no-image mobile-half-opacity"),i=E(()=>o.value?{"background-image":`url(${s.value.url})`}:{}),a=E(()=>r.value?t.value.preview_url||t.value.previewUrl:null),c=E(()=>{var u;return((u=t.value)==null?void 0:u.id)||null});return{image:s,hasPreview:r,hasImage:o,displayClass:n,backgroundStyle:i,previewUrl:a,trackId:c}}const Vf=["src","alt"],Nf={key:1,class:"no-image"},Hf={key:2,class:"playing-indicator"},Bf={class:"item-name"},Kf={key:0,class:"item-artist"},jf=["preload","src"],Zt={__name:"MobileTrackItem",props:{track:{type:Object,required:!0},trackItem:{type:Object,required:!1},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},num:{type:Number,required:!0},viewMode:{type:String,default:"list"}},emits:["click","coverClick","infoClick","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=ye(),n=v=>Ps.formatArtistNamesSimple(v),{hasPreview:i,audioPreload:a,audioSrc:c}=ds(E(()=>s.track)),u=v=>{r("click",s.trackItem||s.track,v)},d=v=>{v.stopPropagation(),r("coverClick",s.trackItem||s.track,v)},f=v=>{v.stopPropagation(),r("infoClick",s.trackItem||s.track,v)},y=v=>(console.log(v),v.tracks&&v.tracks.items&&v.tracks.items.length>0?v.tracks.items[0].preview_url||v.tracks.items[0].previewUrl:v.preview_url||v.previewUrl?v.preview_url||v.previewUrl:null),b=v=>{var k,_;const m=y(v);console.log("hasPreview",m);const p=v.images&&v.images[0]||((k=v.album)==null?void 0:k.images)&&((_=v.album)==null?void 0:_.images[0]);return m&&p?"playable":!m&&p?"unplayable half-opacity":m&&!p?"playable no-image":"unplayable no-image half-opacity"};return(v,m)=>(h(),g("div",{class:"song-item",onClick:u},[l("div",{class:"item-cover",onClick:d,style:{position:"relative"}},[t.track.album&&t.track.album.images&&t.track.album.images[0]?(h(),g("img",{key:0,src:t.track.album.images[0].url,alt:t.track.name,class:K(b(t.track))},null,10,Vf)):(h(),g("div",Nf,m[0]||(m[0]=[l("span",{class:"no-image-icon"},"🎵",-1)]))),w(i)&&w(o).mobileIsTrackPlaying(t.track.id)?(h(),g("div",Hf,m[1]||(m[1]=[l("span",{class:"playing-icon"},"▶️",-1)]))):R("",!0)]),l("div",{class:"item-info",onClick:f},[l("div",Bf,M(t.track.name),1),t.track.artists?(h(),g("div",Kf,M(n(t.track.artists)),1)):R("",!0)]),l("audio",{preload:w(a),src:w(c)},null,8,jf)]))}};function He(){const t=z(null),e=z(null),s=z(null),r=z(null),o=z(null);return{selectedItem:t,selectedTopMenu:e,selectedPersonalPlaylist:s,selectedSpotifyPlaylist:r,selectedGenrePlaylist:o,setSelectedItem:f=>{t.value=f},setSelectedPersonalPlaylist:f=>{s.value=f},setSelectedSpotifyPlaylist:f=>{r.value=f},setSelectedGenrePlaylist:f=>{o.value=f},setSelectedTopMenu:f=>{e.value=e.value===f?null:f},clearSelections:()=>{t.value=null,s.value=null,r.value=null,o.value=null}}}const Gf={class:"item-cover",style:{position:"relative"}},Qf=["src","alt"],Wf={key:0,class:"playing-indicator"},Yf={class:"item-info"},Xf={class:"item-name"},Jf={class:"item-artist"},Zf=["preload","src"],ep={__name:"QueueItem",props:{track:{type:Object,required:!0},trackItem:{type:Object,required:!1},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},num:{type:Number,required:!0},viewMode:{type:String,default:"list"}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=ye(),{hasPreview:n,audioPreload:i,audioSrc:a}=ds(E(()=>s.track)),c=async v=>{r("click",s.trackItem||s.track,v);const m=s.track.preview_url||s.track.previewUrl;m&&await o.mobileToggleTrack(s.track.id,m)},u=v=>(console.log(v),v.tracks&&v.tracks.items&&v.tracks.items.length>0?v.tracks.items[0].preview_url||v.tracks.items[0].previewUrl:v.preview_url||v.previewUrl?v.preview_url||v.previewUrl:null),d=v=>{var k,_;const m=u(v);console.log("hasPreview",m);const p=v.images&&v.images[0]||((k=v.album)==null?void 0:k.images)&&((_=v.album)==null?void 0:_.images[0]);return m&&p?"playable":!m&&p?"unplayable half-opacity":m&&!p?"playable no-image":"unplayable no-image half-opacity"},f=E(()=>{var m;const v=s.track;if(v.image)return v.image.url;if((m=v.album)!=null&&m.image)return v.album.image.url}),y=E(()=>s.track.artists),b=E(()=>o.mobileIsTrackPlaying(s.track.id));return(v,m)=>(h(),g("div",{class:"song-item",onClick:c},[l("div",Gf,[l("img",{src:f.value,alt:t.track.name,class:K(d(t.track))},null,10,Qf),w(n)&&b.value?(h(),g("div",Wf,m[0]||(m[0]=[l("span",{class:"playing-icon"},"▶️",-1)]))):R("",!0)]),l("div",Yf,[l("div",Xf,M(t.track.name),1),l("div",Jf,M(y.value),1)]),l("audio",{preload:w(i),src:w(a)},null,8,Zf)]))}},tp={class:"queue-display"},sp={class:"queue-header"},rp={class:"queue-title"},op={class:"header-actions"},np=["title"],ip={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},lp={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ap={key:0,class:"queue-actions"},cp={class:"playlist-selector"},up=["value"],dp={key:2,class:"empty-queue"},fp={key:3,class:"premium-notice"},pp={__name:"QueueDisplay",setup(t){const e=ze(),s=pe(),r=ct();Pe(()=>{e.loadQueue(),s.getPlaylists.length===0&&s.fetchPlaylists(0)});const o=async()=>{try{await e.saveQueue()}catch(a){console.error("Failed to save queue:",a)}},n=async a=>{if(a==="new"){const c=prompt("Name for your playlist:","Discovered");if(c)try{await s.createPlaylist(c),await s.fetchPlaylists(0)}catch(u){console.error("Failed to create playlist:",u)}}else if(a!=="default")try{await e.saveQueueToPlaylist(a)}catch(c){console.error("Failed to save queue to playlist:",c)}},i=()=>{r.toggleViewMode()};return(a,c)=>(h(),g("div",tp,[l("div",sp,[l("div",rp,[c[2]||(c[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"queue-icon"},[l("path",{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0016.5 9h-1.875a1.875 1.875 0 01-1.875-1.875V5.25A3.75 3.75 0 009 1.5H5.625z"}),l("path",{d:"M12.971 1.816A5.23 5.23 0 0114.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 013.434 1.279 9.768 9.768 0 00-6.963-6.963z"})],-1)),l("h3",null,"Queue ("+M(w(e).getQueueCount())+")",1)]),l("div",op,[l("button",{class:"view-toggle-btn",onClick:i,title:w(r).viewMode==="list"?"Grid view":"List view"},[w(r).viewMode==="list"?(h(),g("svg",ip,c[3]||(c[3]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",lp,c[4]||(c[4]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,np)])]),w(e).getQueueCount()>0?(h(),g("div",ap,[l("button",{class:"action-btn save-btn",onClick:o},c[5]||(c[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"action-icon"},[l("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})],-1),Te(" Save All ",-1)])),l("div",cp,[l("select",{class:"playlist-select",onChange:c[0]||(c[0]=u=>n(u.target.value))},[c[6]||(c[6]=l("option",{value:"default",selected:"",disabled:""},"Add to Playlist",-1)),c[7]||(c[7]=l("option",{value:"new"},"New Playlist",-1)),(h(!0),g(j,null,ee(w(s).getPlaylists,(u,d)=>(h(),g("option",{key:d,value:u.id},M(u.name),9,up))),128))],32)]),l("button",{class:"action-btn clear-btn",onClick:c[1]||(c[1]=u=>w(e).clearQueue())},c[8]||(c[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"action-icon"},[l("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z","clip-rule":"evenodd"})],-1),Te(" Clear ",-1)]))])):R("",!0),w(e).getQueueCount()?(h(),g("div",{key:1,class:K(["releases-container",w(r).viewMode])},[(h(!0),g(j,null,ee(w(e).getQueueArr,(u,d)=>(h(),J(ep,{key:d,track:u,"section-name":"queue","parent-id":"queue",num:11,"show-remove":!0,"view-mode":w(r).viewMode,onRemove:f=>w(e).removeFromQueue(u.id)},null,8,["track","view-mode","onRemove"]))),128))],2)):(h(),g("div",dp,c[9]||(c[9]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})])],-1),l("h4",null,"Your queue is empty",-1),l("p",null,"Add tracks from your discoveries to build your queue",-1)]))),w(e).getQueueCount()>0?(h(),g("div",fp,c[10]||(c[10]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"notice-icon"},[l("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})],-1),l("span",null,"Spotify Premium required to play full songs. Save tracks to listen in the main Spotify app.",-1)]))):R("",!0)]))}},mp={class:"pagination-container"},hp=["disabled"],vp={class:"pagination-info"},gp=["disabled"],ro={__name:"MobilePaginationContainer",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},emits:["page-change"],setup(t,{emit:e}){const s=t,r=e,o=i=>{i>=1&&i<=s.totalPages&&r("page-change",i)};E(()=>(s.currentPage-1)*s.itemsPerPage+1),E(()=>{const i=s.currentPage*s.itemsPerPage;return Math.min(i,s.totalPages)});const n=E(()=>s.totalPages===0?"No items":`${s.currentPage} of ${s.totalPages}`);return(i,a)=>(h(),g("div",mp,[l("button",{onClick:a[0]||(a[0]=c=>o(t.currentPage-1)),disabled:t.currentPage===1,class:"action-button"}," Previous ",8,hp),l("span",vp,M(n.value),1),l("button",{onClick:a[1]||(a[1]=c=>o(t.currentPage+1)),disabled:t.currentPage===t.totalPages,class:"action-button"}," Next ",8,gp)]))}},yp={class:"mobile-top-tracks"},wp={class:""},bp={class:"header-content"},kp={class:"header-text"},_p={class:"section-title"},Sp={class:"header-actions"},Tp=["title"],Ap={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},$p={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Cp={class:"search-bar"},Pp=["placeholder"],xp={class:"my-2"},Rp={key:0,class:"empty-search"},Mp={key:1,class:"empty-state"},Ep=["onClick"],Ip={key:0,class:"item-cover"},Lp=["src"],Dp={key:1,class:"playlist-cover"},zp={class:"item-info"},Up={class:"item-name"},Op={class:"item-artist"},Fp={key:0},qp={key:1},Vp={key:2},Jl={__name:"PlaylistSelector",props:{playlists:{type:Array,default:()=>[]},selectedPlaylist:{type:String,default:""},placeholder:{type:String,default:"Search playlists..."},title:{type:String,default:"Select a playlist"},itemsPerPage:{type:Number,default:50}},emits:["playlist-select","search","load-more","playlist-arrow-click"],setup(t,{emit:e}){const s=ct(),r=t,o=e,n=z(""),i=z(1),a=E(()=>n.value?r.playlists.filter(p=>p.name.toLowerCase().includes(n.value.toLowerCase())):r.playlists),c=E(()=>{const p=(i.value-1)*r.itemsPerPage,k=p+r.itemsPerPage;return a.value.slice(p,k)}),u=E(()=>Math.ceil(a.value.length/r.itemsPerPage)),d=p=>{if(console.log("PlaylistSelector: Arrow clicked for playlist:",p),console.log("Playlist name:",p==null?void 0:p.name),console.log("Playlist id:",p==null?void 0:p.id),console.log("Playlist type:",typeof p),!p||!p.id){console.error("Invalid playlist data:",p);return}o("playlist-arrow-click",p)},f=p=>{n.value=p.target.value,m(),o("search",p)},y=()=>{n.value="",m(),o("search",{target:{value:""}})},b=()=>{s.toggleViewMode()},v=p=>{i.value=p,i.value===u.value&&o("load-more")},m=()=>{i.value=1};return(p,k)=>(h(),g("div",yp,[l("div",wp,[l("div",bp,[l("div",kp,[l("h2",_p,M(t.title),1)]),l("div",Sp,[l("button",{class:"refresh-btn",onClick:k[0]||(k[0]=(..._)=>p.handleRefresh&&p.handleRefresh(..._)),title:"Refresh"},k[2]||(k[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:b,title:w(s).viewMode==="list"?"Grid view":"List view"},[w(s).viewMode==="list"?(h(),g("svg",Ap,k[3]||(k[3]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",$p,k[4]||(k[4]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Tp)])]),l("div",Cp,[ge(l("input",{type:"text",placeholder:t.placeholder,class:"search-input","onUpdate:modelValue":k[1]||(k[1]=_=>n.value=_),onInput:f},null,40,Pp),[[Ct,n.value]]),n.value?(h(),g("button",{key:0,onClick:y,class:"clear-button",type:"button"},k[5]||(k[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"clear-icon"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))):R("",!0),k[6]||(k[6]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"search-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1))])]),l("div",xp,[a.value.length===0&&n.value?(h(),g("div",Rp,k[7]||(k[7]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})])],-1),l("h4",null,"No playlists found",-1),l("p",null,"Try adjusting your search terms",-1)]))):t.playlists.length===0?(h(),g("div",Mp,k[8]||(k[8]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})])],-1),l("h4",null,"No playlists available",-1),l("p",null,"Create or import playlists to get started",-1)]))):(h(),g("div",{key:2,class:K(["releases-container",w(s).viewMode])},[(h(!0),g(j,null,ee(c.value,(_,S)=>(h(),g("div",{key:S,class:K(["song-item",{selected:t.selectedPlaylist===_.id}]),onClick:T=>d(_)},[_.images&&_.images.length>0?(h(),g("div",Ip,[l("img",{src:_.images[0].url,alt:"playlist image"},null,8,Lp)])):(h(),g("div",Dp,k[9]||(k[9]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"playlist-icon"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),l("div",zp,[l("div",Up,M(_.name),1),l("div",Op,[_.owner?(h(),g("span",Fp,M(_.owner.display_name),1)):(h(),g("span",qp,"Spotify")),_.tracks&&_.tracks.length>0?(h(),g("span",Vp,M(_.tracks.length)+" tracks ",1)):R("",!0)])])],10,Ep))),128))],2)),u.value>1?(h(),J(ro,{key:3,"current-page":i.value,"total-pages":u.value,onPageChange:v},null,8,["current-page","total-pages"])):R("",!0)])]))}};function fe(t){switch(t){case 1:return"yourPlaylists";case 2:return"topArtists";case 3:return"topTracks";case 4:return"savedAlbums";case 5:return"savedTracks";case 6:return"followedArtists";case 7:return"newReleases";case 8:return"spotifyPlaylists";case 9:return"categories";case 10:return"search";case 11:return"genres";case 13:return"queue";case 22:return"topArtists6";case 23:return"topArtistsAll";case 32:return"topTracks6";case 33:return"topTracksAll";default:return"search"}}const Np={class:"mobile-header"},Hp={class:"header-actions"},Bp=["title"],Kp={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},jp={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Gp={class:"playlist-info-section"},Qp={class:"playlist-cover"},Wp=["src","alt"],Yp={key:1,class:"playlist-placeholder"},Xp={class:"playlist-details"},Jp={class:"playlist-title"},Zp={class:"playlist-meta"},em={key:0,class:"playlist-owner"},tm={key:1,class:"track-count"},sm={key:2,class:"playlist-visibility"},rm=["innerHTML"],om={class:"tracks-section"},nm={key:0,class:"loading-more"},im={__name:"MobileDeeperPlaylist",props:["d","num"],setup(t){const e=t,s=pe(),r=ye(),o=ze(),n=ve(),i=ct(),a=z(),c=z(""),u=z(null),d=z(1),f=z(20),y=z(!1);ds(E(()=>e.d));const b=De(),v=E(()=>{var se;const L=((se=e.d.tracks)==null?void 0:se.items)||[];return c.value?[...L].sort((he,Le)=>{const qe=he.track,Ue=Le.track;switch(c.value){case"track":return qe.name.localeCompare(Ue.name);case"album":return qe.album.name.localeCompare(Ue.album.name);case"artist":return qe.artists[0].name.localeCompare(Ue.artists[0].name);case"popularity":return Ue.popularity-qe.popularity;case"release_date":return new Date(Ue.album.release_date)-new Date(qe.album.release_date);case"duration":return qe.duration_ms-Ue.duration_ms;default:return 0}}):L}),m=E(()=>{var L;return((L=e.d.tracks)==null?void 0:L.total)||0});console.log(62,m.value),console.log(f);const p=E(()=>Math.ceil(m.value/f.value)),k=E(()=>{const L=d.value*f.value;return v.value.slice(0,L)});function _(L){a.value=L}const S=()=>{const L=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.hideComponent(L),e.d.parentKey&&b.showComponent(e.d.parentKey)},T=async(L,se)=>{if(n.getIsGloballyLoading)return;_(L.id);const he=fe(e.num);await n.getTrackDetails(L,he,e.d.id),o.addToQueue(L);const Le=L.preview_url||L.previewUrl;Le&&await r.mobileToggleTrack(L.id,Le)},P=async(L,se)=>{console.log("Cover clicked for:",L.name);const he=L.preview_url||L.previewUrl;he?(console.log("Playing audio preview for:",L.name),await r.mobileToggleTrack(L.id,he)):console.log("No preview URL available for:",L.name)},x=async(L,se)=>{if(console.log("Info clicked for:",L.name),n.getIsGloballyLoading)return;_(L.id);const he=fe(e.num);await n.getTrackDetails(L,he,e.d.id),o.addToQueue(L)},D=()=>{i.toggleViewMode()},A=()=>{const L=c.value;c.value="",d.value=1,setTimeout(()=>{c.value=L},100)},O=async L=>{var se,he;if(L>d.value){const Le=((he=(se=e.d.tracks)==null?void 0:se.items)==null?void 0:he.length)||0;if((L-1)*f.value>=Le){y.value=!0;try{const Ue=await s.fetchPlaylistTracks(e.d.id,Le);e.d.tracks&&Ue.items&&e.d.tracks.items.push(...Ue.items)}catch(Ue){console.error("Failed to load more tracks:",Ue)}finally{y.value=!1}}}d.value=L};return Pe(async()=>{await at();const L=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.registerComponent(L,u),u.value&&(u.value.style.display="none"),console.log("MobileDeeperPlaylist registered with key:",L)}),Nt(()=>{const L=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.unregisterComponent(L),console.log("MobileDeeperPlaylist unregistered:",L)}),(L,se)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:u},[l("div",Np,[l("button",{class:"back-button",onClick:S},se[2]||(se[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Te("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),se[7]||(se[7]=l("h2",{class:"mobile-deeper-header"},"Playlist",-1)),l("div",Hp,[l("button",{class:"refresh-btn",onClick:A,title:"Refresh"},se[3]||(se[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:D,title:w(i).viewMode==="list"?"Grid view":"List view"},[w(i).viewMode==="list"?(h(),g("svg",Kp,se[4]||(se[4]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",jp,se[5]||(se[5]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Bp),ge(l("select",{class:"sort-select","onUpdate:modelValue":se[0]||(se[0]=he=>c.value=he)},se[6]||(se[6]=[Ne('<option value="" data-v-5b622929>Initial</option><option value="artist" data-v-5b622929>Sort by artist</option><option value="album" data-v-5b622929>Sort by album</option><option value="duration" data-v-5b622929>Sort by duration</option><option value="popularity" data-v-5b622929>Sort by popularity</option><option value="release_date" data-v-5b622929>Sort by release date</option><option value="track" data-v-5b622929>Sort by track name</option>',7)]),512),[[As,c.value]])])]),l("div",Gp,[l("div",Qp,[t.d.images&&t.d.images[0]?(h(),g("img",{key:0,src:t.d.images[0].url,alt:t.d.name,onError:se[1]||(se[1]=he=>he.target.style.display="none")},null,40,Wp)):(h(),g("div",Yp,se[8]||(se[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",Xp,[l("h1",Jp,M(t.d.name),1),l("div",Zp,[t.d.owner?(h(),g("span",em,"By "+M(t.d.owner.display_name),1)):R("",!0),t.d.tracks&&t.d.tracks.total?(h(),g("span",tm,M(t.d.tracks.total)+" tracks",1)):R("",!0),t.d.public!==void 0?(h(),g("span",sm,M(t.d.public?"Public":"Private"),1)):R("",!0)]),t.d.description?(h(),g("div",{key:0,class:"playlist-description",innerHTML:t.d.description},null,8,rm)):R("",!0)])]),l("div",om,[se[10]||(se[10]=l("h3",{class:"section-title"},"Tracks",-1)),y.value?(h(),g("div",nm,se[9]||(se[9]=[l("div",{class:"loading-spinner"},null,-1),l("span",null,"Loading more tracks...",-1)]))):R("",!0),l("div",{class:K(["releases-container",w(i).viewMode])},[(h(!0),g(j,null,ee(k.value,he=>(h(),J(Zt,{key:he.track.id,track:he.track,num:t.num,"view-mode":w(i).viewMode,onClick:T,onCoverClick:P,onInfoClick:x},null,8,["track","num","view-mode"]))),128))],2),p.value>1?(h(),J(ro,{key:1,"current-page":d.value,"total-pages":p.value,onPageChange:O},null,8,["current-page","total-pages"])):R("",!0)])],512))}},lm=_e(im,[["__scopeId","data-v-5b622929"]]),am={class:"playlists-page"},cm={key:0,class:"loading-state"},um={key:1,class:"playlists-content"},dm={class:"playlists-section"},fm={__name:"PlaylistsPage",setup(t){const e=pe(),s=ve(),r=z(!1),o=z(null),n=z(null);z(null),He();const i=async()=>{const u=e.getPlaylists&&e.getPlaylists.length>0,d=e.getSpotifyPlaylists&&e.getSpotifyPlaylists.length>0;if(u&&d){console.log("Using cached playlists data");return}r.value=!0,o.value=null;try{await Promise.all([u?Promise.resolve():e.fetchPlaylists(0),d?Promise.resolve():e.fetchSpotifyPlaylists(0)])}catch(f){o.value="Failed to load playlists",console.error("Error loading playlists:",f)}finally{r.value=!1}},a=async()=>{try{const u=e.getPlaylists.length;await e.fetchPlaylists(u)}catch(u){console.error("Failed to load more personal playlists:",u)}},c=async u=>{if(console.log("Personal playlist arrow clicked:",u),u)try{await s.getPlaylistDetails(u,"yourPlaylists"),console.log("Playlist details fetched and added to section")}catch(d){console.error("Error fetching playlist details:",d)}};return Pe(()=>{i()}),(u,d)=>(h(),g("div",am,[r.value?(h(),g("div",cm,d[0]||(d[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading playlists...",-1)]))):(h(),g("div",um,[l("div",dm,[Q(Jl,{playlists:w(e).getPlaylists,"selected-playlist":n.value,title:"Your Playlists",placeholder:"Search personal playlists...","items-per-page":10,onPlaylistArrowClick:c,onLoadMore:a},null,8,["playlists","selected-playlist"])])]))]))}},pm=_e(fm,[["__scopeId","data-v-92e3a8af"]]);function pt(t,e=null){const s=E(()=>{var u,d,f,y,b;return e&&e.value?e.value:e||((d=(u=t.value)==null?void 0:u.images)!=null&&d[0]?t.value.images[0]:(b=(y=(f=t.value)==null?void 0:f.album)==null?void 0:y.images)!=null&&b[0]?t.value.album.images[0]:null)}),r=E(()=>{var u,d,f,y,b,v;if((d=(u=t.value)==null?void 0:u.tracks)!=null&&d.items&&t.value.tracks.items.length>0){const m=t.value.tracks.items[0];return!!(m!=null&&m.preview_url||m!=null&&m.previewUrl)}else if((f=t.value)!=null&&f.tracks&&((y=t.value)==null?void 0:y.tracks.length)>0){const m=t.value.tracks[0];return!!(m!=null&&m.preview_url||m!=null&&m.previewUrl)}return!!((b=t.value)!=null&&b.preview_url||(v=t.value)!=null&&v.previewUrl)}),o=E(()=>!!s.value),n=E(()=>r.value&&o.value?"playable":!r.value&&o.value?"unplayable half-opacity":r.value&&!o.value?"playable no-image":"unplayable no-image half-opacity"),i=E(()=>{var u;if(o.value&&((u=s.value)!=null&&u.url))try{return{"background-image":`url(${encodeURI(s.value.url)})`}}catch(d){return console.warn("Invalid image URL:",s.value.url,d),{}}return{}}),a=E(()=>r.value?"auto":"none"),c=E(()=>{var d,f,y,b,v;const u=((d=t.value)==null?void 0:d.preview_url)||((f=t.value)==null?void 0:f.previewUrl);if(u)try{return encodeURI(u)}catch(m){return console.warn("Invalid direct audio URL:",u,m),""}if((b=(y=t.value)==null?void 0:y.tracks)!=null&&b.items&&t.value.tracks.items.length>0){const m=t.value.tracks.items[0],p=(m==null?void 0:m.preview_url)||(m==null?void 0:m.previewUrl);if(p)try{return encodeURI(p)}catch(k){return console.warn("Invalid track audio URL:",p,k),""}}if((v=t.value)!=null&&v.tracks&&Array.isArray(t.value.tracks)&&t.value.tracks.length>0){const m=t.value.tracks.find(p=>p.previewUrl||p.preview_url);if(m){const p=m.previewUrl||m.preview_url;if(p)try{return encodeURI(p)}catch(k){return console.warn("Invalid array track audio URL:",p,k),""}}}return""});return{image:s,hasPreview:r,hasImage:o,displayClass:n,backgroundStyle:i,audioPreload:a,audioSrc:c}}const mm={class:"mobile-top-tracks"},hm={class:""},vm={class:"header-content"},gm={class:"header-text"},ym={class:"section-title"},wm={class:"header-actions"},bm=["title"],km={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},_m={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Sm={class:"controls-container"},Tm={class:"search-container"},Am={class:"search-bar"},$m=["placeholder"],Cm={class:"releases-container"},Pm={key:0,class:"empty-search"},xm={key:1,class:"empty-state"},Rm=["onClick"],Mm={class:"item-cover",style:{position:"relative"}},Em=["src","alt"],Im={key:1,class:"release-cover"},Lm={key:2,class:"playing-indicator"},Dm=["onClick"],zm={class:"item-name"},Um={key:0},Om={class:"item-artist"},Fm={class:"album-type-badge"},Zl={__name:"ReleaseSelector",props:{releases:{type:Array,default:()=>[]},selectedRelease:{type:String,default:""},placeholder:{type:String,default:"Search releases..."},title:{type:String,default:"New Releases"},itemsPerPage:{type:Number,default:50}},emits:["release-select","search","load-more","refresh"],setup(t,{emit:e}){const s=t,r=e,o=ye();ve();const n=ct(),i=z(""),a=z(1),c=E(()=>i.value?s.releases.filter(A=>{var O;return A.name.toLowerCase().includes(i.value.toLowerCase())||((O=A.artists)==null?void 0:O.some(L=>L.name.toLowerCase().includes(i.value.toLowerCase())))}):s.releases),u=E(()=>{const A=(a.value-1)*s.itemsPerPage,O=A+s.itemsPerPage;return c.value.slice(A,O)}),d=E(()=>Math.ceil(c.value.length/s.itemsPerPage)),f=A=>{if(A.tracks&&A.tracks.items&&A.tracks.items.length>0){const O=A.tracks.items[0];return o.mobileIsTrackPlaying(O.id)}return!1},y=A=>!!b(A),b=A=>A.tracks&&A.tracks.items&&A.tracks.items.length>0?A.tracks.items[0].preview_url||A.tracks.items[0].previewUrl:null,v=(A,O)=>{r("release-select",A,O)},m=(A,O)=>{if(A.tracks&&A.tracks.items&&A.tracks.items.length>0){const L=A.tracks.items[0],se=L.preview_url||L.previewUrl;se&&o.mobileToggleTrack(L.id,se)}},p=A=>{i.value=A.target.value,T(),r("search",A)},k=()=>{i.value="",T(),r("search",{target:{value:""}})},_=()=>{n.toggleViewMode()},S=A=>{a.value=A,a.value===d.value&&r("load-more")},T=()=>{a.value=1},P=()=>{r("refresh")},x=A=>!A||!Array.isArray(A)?"Unknown Artist":A.map(O=>O.name).join(", "),D=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return(A,O)=>(h(),g("div",mm,[l("div",hm,[l("div",vm,[l("div",gm,[l("h2",ym,M(t.title)+" | "+M(t.releases.length)+" items",1)]),l("div",wm,[l("button",{class:"refresh-btn",onClick:P,title:"Refresh"},O[1]||(O[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:_,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",km,O[2]||(O[2]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",_m,O[3]||(O[3]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,bm)])]),l("div",Sm,[l("div",Tm,[l("div",Am,[O[5]||(O[5]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"search-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1)),ge(l("input",{type:"text",placeholder:t.placeholder,class:"search-input","onUpdate:modelValue":O[0]||(O[0]=L=>i.value=L),onInput:p},null,40,$m),[[Ct,i.value]]),i.value?(h(),g("button",{key:0,onClick:k,class:"clear-button",type:"button"},O[4]||(O[4]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"clear-icon"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))):R("",!0)])])]),l("div",Cm,[c.value.length===0&&i.value?(h(),g("div",Pm,O[6]||(O[6]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})])],-1),l("h4",null,"No releases found",-1),l("p",null,"Try adjusting your search terms",-1)]))):t.releases.length===0?(h(),g("div",xm,O[7]||(O[7]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z","clip-rule":"evenodd"})])],-1),l("h4",null,"No releases available",-1),l("p",null,"Check back later for new releases",-1)]))):(h(),g("div",{key:2,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,ee(u.value,(L,se)=>(h(),g("div",{key:se,class:"song-item",onClick:he=>m(L)},[l("div",Mm,[L.images&&L.images[0]?(h(),g("img",{key:0,src:L.images[0].url,alt:L.name},null,8,Em)):(h(),g("div",Im,O[8]||(O[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"release-icon"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z","clip-rule":"evenodd"})],-1)]))),y(L)&&f(L)?(h(),g("div",Lm,O[9]||(O[9]=[l("span",{class:"playing-icon"},"▶️",-1)]))):R("",!0)]),l("div",{class:"item-info",onClick:he=>v(L.id,he)},[l("div",zm,M(L.name),1),L.release_date?(h(),g("span",Um,M(D(L.release_date)),1)):R("",!0),l("div",Om,M(x(L.artists)),1),l("div",Fm,M(L.type),1)],8,Dm)],8,Rm))),128))],2))]),d.value>1?(h(),J(ro,{key:0,"current-page":a.value,"total-pages":d.value,onPageChange:S},null,8,["current-page","total-pages"])):R("",!0)])]))}},qm={class:"new-releases-page"},Vm={key:0,class:"loading-state"},Nm={key:1,class:"new-releases-content"},Hm={class:"releases-section"},Bm={__name:"NewReleasesPage",setup(t){const e=pe(),s=ve(),r=z(!1),o=z(null);z(!1);const n=E(()=>e.getNewReleases||[]),i=async()=>{if(e.getNewReleases&&e.getNewReleases.length>0){console.log("Using cached new releases data");return}r.value=!0;try{await e.fetchNewReleases(0)}catch(u){console.error("Failed to load new releases:",u)}finally{r.value=!1}},a=async(u,d)=>{o.value=u;const f=n.value.find(y=>y.id===u);console.log("Release selected:",f),f&&await s.getAlbumDetails(f,"newReleases")},c=()=>{e.newReleases=[],e.fetchNewReleases(0)};return Pe(()=>{i()}),(u,d)=>(h(),g("div",qm,[r.value?(h(),g("div",Vm,d[0]||(d[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading new releases...",-1)]))):(h(),g("div",Nm,[l("div",Hm,[Q(Zl,{releases:n.value,"selected-release":o.value,title:"New Releases",placeholder:"Search releases...","items-per-page":20,onReleaseSelect:a,onRefresh:c},null,8,["releases","selected-release"])])]))]))}};async function Km(){try{return console.log("Music store initialized successfully"),console.log("Current service:",le.getCurrentServiceType()),console.log("Available services:",le.getAvailableServices()),!0}catch(t){return console.error("Failed to initialize music store:",t),!1}}function lt(){return le.getCurrentServiceType()}const jm={class:"mobile-header"},Gm={class:"header-actions"},Qm=["title"],Wm={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Ym={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Xm={class:"artist-info-section"},Jm=["src","alt"],Zm={key:1,class:"artist-placeholder"},eh={key:2,class:"playing-indicator"},th={class:"artist-details"},sh={class:"artist-title"},rh={class:"artist-stats"},oh={class:"followers-count"},nh={key:0,class:"genres-section"},ih={class:"genres-list"},lh=["onClick"],ah={class:"artist-actions"},ch=["href"],uh={class:"follow-section"},dh={class:"follow-checkbox"},fh={key:0,class:"loading-state"},ph={key:1},mh={key:0,class:"section"},hh={key:1,class:"section"},vh=["onClick"],gh={class:"item-cover"},yh=["src","alt"],wh={key:1,class:"album-placeholder"},bh={class:"item-info"},kh={class:"item-name"},_h={class:"item-artist"},Sh={key:2,class:"section"},Th=["onClick"],Ah={class:"item-cover"},$h=["src","alt"],Ch={key:1,class:"album-placeholder"},Ph={class:"item-info"},xh={class:"item-name"},Rh={class:"item-artist"},Mh={key:3,class:"section"},Eh=["onClick"],Ih={class:"item-cover"},Lh=["src","alt"],Dh={key:1,class:"album-placeholder"},zh={class:"item-info"},Uh={class:"item-name"},Oh={class:"item-artist"},Fh={key:4,class:"section"},qh=["onClick"],Vh={class:"item-cover"},Nh=["src","alt"],Hh={key:1,class:"artist-placeholder"},Bh={class:"item-info"},Kh={class:"item-name"},jh={key:0,class:"item-artist"},Gh={key:1,class:"item-artist"},Qh={__name:"MobileDeeperArtist",props:["d","num"],setup(t){const e=t;pe();const s=E(()=>e.d.data&&Array.isArray(e.d.data)&&e.d.data.find(q=>q.type==="trackartist")||e.d),r=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const I=e.d.data.find(q=>q.type==="top_tracks");return console.log("topTracksItem",I),(I==null?void 0:I.tracks)||[]}return e.d.top_tracks||[]}),o=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const I=e.d.data.find(q=>q.type==="albums");return(I==null?void 0:I.items)||[]}return e.d.albums||[]}),n=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const I=e.d.data.find(q=>q.type==="single");return(I==null?void 0:I.items)||[]}return e.d.singles||[]}),i=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const I=e.d.data.find(q=>q.type==="appears_on");return(I==null?void 0:I.items)||[]}return e.d.appears_on||[]}),a=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const I=e.d.data.find(q=>q.type==="related-artists");return(I==null?void 0:I.artists)||[]}return e.d.related_artists||[]});useSpotifyStore();const c=ve(),u=ze(),d=ye(),f=ct(),y=De(),b=z(null),v=z(!0),{displayClass:m,backgroundStyle:p,hasPreview:k,trackId:_}=ds(E(()=>s.value)),S=E(()=>s.value.images&&s.value.images.length>0&&s.value.images[0]&&s.value.images[0].url),T=()=>{const I=`trackartist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;y.hideComponent(I),console.log(e.d.parentKey),e.d.parentKey&&y.showComponent(e.d.parentKey)},P=async(I,q)=>{if(c.getIsGloballyLoading)return;const ie=fe(e.num);await c.getTrackDetails(I,ie),u.addToQueue(I)},x=async(I,q)=>{console.log("Cover clicked for:",I.name);const ie=I.preview_url||I.previewUrl;ie?(console.log("Playing audio preview for:",I.name),await d.mobileToggleTrack(I.id,ie)):console.log("No preview URL available for:",I.name)},D=async(I,q)=>{if(console.log("Info clicked for:",I.name),c.getIsGloballyLoading)return;const ie=fe(e.num);await c.getTrackDetails(I,ie),u.addToQueue(I)},A=async(I,q)=>{if(c.getIsGloballyLoading)return;const ie=fe(e.num);await c.getAlbumDetails(I,ie,e.d.id)},O=async(I,q)=>{if(c.getIsGloballyLoading)return;const ie=fe(e.num);await c.getArtistDetails(I,ie,e.d.id);const Oe=`trackartist_${I.id}__p:${e.d.id}__`;y.showComponent(Oe),console.log("Showing MobileDeeperArtist for related artist:",I.name,"with key:",Oe)},L=async I=>{try{console.log("Getting the sound of:",I),await c.getGenreRecommendations(I,fe(e.num))}catch(q){console.error("Failed to get genre recommendations:",q)}};async function se(I){try{console.log("Following/unfollowing artist:",I.name),await c.followArtist(I.id,!I.followed),I.followed=!I.followed}catch(q){console.error("Failed to follow/unfollow artist:",q)}}const he=()=>{c.getSeedArtistRecommendations(s.value,fe(e.num),e.d.id)},Le=I=>{I.stopPropagation(),console.log("Artist cover clicked for:",s.value.name)},qe=()=>{f.toggleViewMode()},Ue=async()=>{try{await c.getArtistDetails(e.d,fe(e.num),e.d.id),console.log("Artist details fetched:",{topTracks:topTracks.length,albums:albums.length,singles:singles.length,appearsOn:appearsOn.length,relatedArtists:relatedArtists.length})}catch(I){console.error("Error fetching artist details:",I)}finally{v.value=!1}},Re=I=>I>=1e6?`${(I/1e6).toFixed(1)}M`:I>=1e3?`${(I/1e3).toFixed(1)}K`:I.toString(),me=I=>!I||I.length===0?"No genres":I.slice(0,3).join(", ");return Pe(async()=>{await at();const I=`trackartist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;y.registerComponent(I,b),b.value&&(b.value.style.display="none"),console.log("MobileDeeperArtist registered with key:",I),e.d.data&&Array.isArray(e.d.data)?(console.log("Using existing trackartist data structure"),v.value=!1):await Ue()}),Nt(()=>{const I=`trackartist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;y.unregisterComponent(I),console.log("MobileDeeperArtist unregistered:",I)}),(I,q)=>{var ie,Oe;return h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:b},[l("div",jm,[l("button",{class:"back-button",onClick:T},q[7]||(q[7]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Te("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),q[10]||(q[10]=l("h2",{class:"mobile-deeper-header"},"Artist",-1)),l("div",Gm,[l("button",{class:"view-toggle-btn",onClick:qe,title:w(f).viewMode==="list"?"Grid view":"List view"},[w(f).viewMode==="list"?(h(),g("svg",Wm,q[8]||(q[8]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",Ym,q[9]||(q[9]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Qm)])]),l("div",Xm,[l("div",null,[S.value?(h(),g("img",{key:0,class:K(["artist-cover",w(m)]),style:$e(w(p)),onClick:Le,src:s.value.images[0].url,alt:s.value.name,onError:q[0]||(q[0]=Z=>Z.target.style.display="none")},null,46,Jm)):(h(),g("div",Zm,q[11]||(q[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),w(k)&&w(d).mobileIsTrackPlaying(w(_))?(h(),g("div",eh,q[12]||(q[12]=[l("span",{class:"playing-icon"},"▶️",-1)]))):R("",!0)]),l("div",th,[l("h1",sh,M(s.value.name),1),l("div",rh,[l("span",oh,M(Re(((ie=s.value.followers)==null?void 0:ie.total)||0))+" followers",1)]),s.value.genres&&s.value.genres.length>0?(h(),g("div",nh,[l("div",ih,[(h(!0),g(j,null,ee(s.value.genres.slice(0,3),(Z,Be)=>(h(),g("span",{key:Be,class:"genre-tag",onClick:gn=>L(Z)},M(Z),9,lh))),128))])])):R("",!0)]),l("div",ah,[l("button",{class:"action-button",onClick:he},q[13]||(q[13]=[l("span",{class:"btn-icon"},"🎵",-1),Te(" Get Recommendations ",-1)])),l("a",{class:K(w(lt)()+"-link"),href:(Oe=t.d.external_urls)==null?void 0:Oe.spotify,target:"_blank",rel:"noopener"},[q[14]||(q[14]=l("span",{class:"link-icon"},"🎧",-1)),Te(" Open in "+M(w(lt)().charAt(0).toUpperCase()+w(lt)().slice(1)),1)],10,ch),l("div",uh,[q[16]||(q[16]=l("span",{class:"follow-label"},"Follow",-1)),l("label",dh,[ge(l("input",{type:"checkbox","onUpdate:modelValue":q[1]||(q[1]=Z=>t.d.followed=Z),onClick:q[2]||(q[2]=Z=>se(t.d))},null,512),[[Gt,t.d.followed]]),q[15]||(q[15]=l("span",{class:"checkmark"},null,-1))])])])]),v.value?(h(),g("div",fh,q[17]||(q[17]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading artist details...",-1)]))):(h(),g("div",ph,[r.value.length>0?(h(),g("div",mh,[q[18]||(q[18]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Top Tracks")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,ee(r.value,Z=>(h(),J(Zt,{key:Z.id,track:Z,num:t.num,"view-mode":w(f).viewMode,onClick:P,onCoverClick:x,onInfoClick:D},null,8,["track","num","view-mode"]))),128))],2)])):R("",!0),o.value.length>0?(h(),g("div",hh,[q[20]||(q[20]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Albums")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,ee(o.value,Z=>(h(),g("div",{key:Z.id,class:"song-item",onClick:Be=>A(Z)},[l("div",gh,[Z.images&&Z.images[0]?(h(),g("img",{key:0,src:Z.images[0].url,alt:Z.name,onError:q[3]||(q[3]=Be=>Be.target.style.display="none")},null,40,yh)):(h(),g("div",wh,q[19]||(q[19]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",bh,[l("div",kh,M(Z.name),1),l("div",_h,M(Z.album_type||"Album"),1)])],8,vh))),128))],2)])):R("",!0),n.value.length>0?(h(),g("div",Sh,[q[22]||(q[22]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Singles")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,ee(n.value,Z=>(h(),g("div",{key:Z.id,class:"song-item",onClick:Be=>A(Z)},[l("div",Ah,[Z.images&&Z.images[0]?(h(),g("img",{key:0,src:Z.images[0].url,alt:Z.name,onError:q[4]||(q[4]=Be=>Be.target.style.display="none")},null,40,$h)):(h(),g("div",Ch,q[21]||(q[21]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",Ph,[l("div",xh,M(Z.name),1),l("div",Rh,M(Z.album_type||"Single"),1)])],8,Th))),128))],2)])):R("",!0),i.value.length>0?(h(),g("div",Mh,[q[24]||(q[24]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Appears On")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,ee(i.value,Z=>(h(),g("div",{key:Z.id,class:"song-item",onClick:Be=>A(Z)},[l("div",Ih,[Z.images&&Z.images[0]?(h(),g("img",{key:0,src:Z.images[0].url,alt:Z.name,onError:q[5]||(q[5]=Be=>Be.target.style.display="none")},null,40,Lh)):(h(),g("div",Dh,q[23]||(q[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)])))]),l("div",zh,[l("div",Uh,M(Z.name),1),l("div",Oh,M(Z.album_type||"Compilation"),1)])],8,Eh))),128))],2)])):R("",!0),a.value.length>0?(h(),g("div",Fh,[q[26]||(q[26]=l("div",{class:"section-header"},[l("h3",{class:"section-title"},"Related Artists")],-1)),l("div",{class:K(["releases-container",w(f).viewMode])},[(h(!0),g(j,null,ee(a.value,Z=>(h(),g("div",{key:Z.id,class:"song-item",onClick:Be=>O(Z)},[l("div",Vh,[Z.images&&Z.images.length>0?(h(),g("img",{key:0,src:Z.images[0].url,alt:Z.name,onError:q[6]||(q[6]=Be=>Be.target.style.display="none")},null,40,Nh)):(h(),g("div",Hh,q[25]||(q[25]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})],-1)])))]),l("div",Bh,[l("div",Kh,M(Z.name),1),Z.followers?(h(),g("div",jh,M(Re(Z.followers.total))+" followers ",1)):R("",!0),Z.genres&&Z.genres.length>0?(h(),g("div",Gh,M(me(Z.genres)),1)):R("",!0)])],8,qh))),128))],2)])):R("",!0)]))],512)}}},Wh={class:"track-info-section"},Yh={style:{position:"relative"}},Xh=["src","alt"],Jh={key:1,class:"track-placeholder"},Zh={key:2,class:"playing-indicator"},e0={class:"track-details"},t0={class:"track-title"},s0={class:"artists-section"},r0={key:0,class:"separator"},o0={key:1,class:"separator"},n0={class:"artist-item"},i0=["onClick"],l0={class:"track-meta"},a0={key:0,class:"duration"},c0={key:1,class:"popularity"},u0={key:2,class:"release-info"},d0={class:"release-date"},f0={class:"track-actions px-4"},p0={key:0,class:"loading-section"},m0={__name:"MobileDeeperTracks",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve();z();const n=z(null),i=z(null);z(null);const a=z(!1),{displayClass:c,backgroundStyle:u,hasPreview:d,previewUrl:f,trackId:y}=ds(E(()=>e.d)),b=De();function v(){console.log(e.d),e.d.album&&e.d.album.images?n.value=e.d.album.images[0]:e.d.images?n.value=e.d.images[0]:e.d.track&&e.d.track.album&&e.d.track.album.images&&e.d.track.album.images[0]&&(n.value=e.d.track.album.images[0]),console.log(n.value)}const m=()=>{const P=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.hideComponent(P),e.d.parentKey&&b.showComponent(e.d.parentKey)},p=async(P,x)=>{o.getIsGloballyLoading||await o.getArtistDetails(P,fe(e.num),e.d.parentKey||e.d.id)},k=P=>{P.stopPropagation(),d.value&&f.value&&s.mobileToggleTrack(y.value,f.value)},_=P=>{const x=Math.floor(P/6e4),D=(P%6e4/1e3).toFixed(0);return`${x}:${D.padStart(2,"0")}`},S=P=>P?new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",T=async()=>{try{a.value=!0;const P=fe(e.num);await o.getSeedTrackRecommendations(e.d,P,e.d.id)}catch(P){console.error("Failed to get recommendations:",P),alert("Failed to load recommendations. Please try again.")}finally{a.value=!1}};return Pe(async()=>{var x,D;v(),await at();const P=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering component with ref:",i.value),console.log("Ref element:",(x=i.value)==null?void 0:x.tagName,(D=i.value)==null?void 0:D.className),console.log("Registering with key:",P),b.registerComponent(P,i),console.log("Showing component after registration:",P),b.showComponent(P)}),Nt(()=>{const P=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.unregisterComponent(P),console.log("MobileDeeperTracks unregistered:",P)}),(P,x)=>(h(),g("div",{class:"mobile-deeper-track",ref_key:"componentRef",ref:i},[l("div",{class:"mobile-header"},[l("button",{class:"back-button",onClick:m},x[2]||(x[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Te("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),x[3]||(x[3]=l("h2",{class:"mobile-deeper-header"},"Track Details",-1))]),l("div",Wh,[l("div",Yh,[n.value?(h(),g("img",{key:0,class:K(["track-cover",w(c)]),style:$e(w(u)),onClick:k,src:n.value.url,alt:t.d.name,onError:x[0]||(x[0]=D=>D.target.style.display="none")},null,46,Xh)):n.value?R("",!0):(h(),g("div",Jh,x[4]||(x[4]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010 1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),w(d)&&w(s).mobileIsTrackPlaying(w(y))?(h(),g("div",Zh,x[5]||(x[5]=[l("span",{class:"playing-icon"},"▶️",-1)]))):R("",!0)]),l("div",e0,[l("h1",t0,M(t.d.name),1),l("div",s0,[x[6]||(x[6]=l("span",{class:"meta-icon"},"💿",-1)),x[7]||(x[7]=l("span",{class:"artists-label"},"By",-1)),(h(!0),g(j,null,ee(t.d.artists,(D,A)=>(h(),g(j,{key:A},[t.d.artists.length>1&&t.d.artists.length-1===A?(h(),g("div",r0,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==A&&A!==0?(h(),g("div",o0,",")):R("",!0),l("div",n0,[l("button",{class:"artist-link",onClick:O=>p(D)},M(D.name),9,i0)])],64))),128))])]),l("div",l0,[t.d.duration_ms?(h(),g("div",a0,[x[8]||(x[8]=l("span",{class:"meta-icon"},"⏱️",-1)),Te(" "+M(_(t.d.duration_ms)),1)])):R("",!0),t.d.popularity?(h(),g("div",c0,[x[9]||(x[9]=l("span",{class:"meta-icon"},"📊",-1)),Te(" "+M(t.d.popularity)+"% popular ",1)])):R("",!0),t.d.album&&t.d.album.release_date?(h(),g("div",u0,[l("span",d0,[x[10]||(x[10]=l("span",{class:"meta-icon"},"📅",-1)),Te(" Released "+M(S(t.d.album.release_date)),1)])])):R("",!0)])]),l("div",f0,[l("button",{class:"play-btn",onClick:k},x[11]||(x[11]=[l("span",{class:"btn-icon"},"▶️",-1),Te(" Play Track ",-1)])),l("button",{class:"action-button",onClick:T},x[12]||(x[12]=[l("span",{class:"btn-icon"},"🎵",-1),Te(" Get Recommendations ",-1)])),l("button",{class:"queue-btn",onClick:x[1]||(x[1]=D=>w(r).addToQueue(t.d))},x[13]||(x[13]=[l("span",{class:"btn-icon"},"➕",-1),Te(" Add to Queue ",-1)]))]),a.value?(h(),g("div",p0,x[14]||(x[14]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading recommendations...",-1)]))):R("",!0)],512))}},h0={class:"album-info-section"},v0=["src","alt"],g0={key:1,class:"album-placeholder"},y0=["src"],w0={class:"album-details"},b0={class:"album-title"},k0={class:"artists-section"},_0={class:"artists-list"},S0={key:0,class:"separator"},T0={key:1,class:"separator"},A0={class:"artist-item"},$0=["onClick"],C0={class:"album-meta"},P0={key:0,class:"release-date"},x0={key:1,class:"track-count"},R0={class:"tracks-section"},M0={class:"releases-container"},E0={__name:"MobileDeeperAlbum",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=z(),i=z([]),a=z(null),{displayClass:c,backgroundStyle:u,hasPreview:d,previewUrl:f,trackId:y}=ds(E(()=>e.d)),b=De();function v(D){n.value=D}function m(){e.d.tracks&&e.d.tracks.items?i.value=e.d.tracks.items:e.d.tracks?i.value=e.d.tracks:e.d.items&&(i.value=e.d.items)}const p=()=>{const D=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.hideComponent(D),e.d.parentKey&&b.showComponent(e.d.parentKey)},k=async(D,A)=>{if(o.getIsGloballyLoading)return;v(D.id),await o.getTrackDetails(D,fe(e.num),e.d.id),r.addToQueue(D);const O=D.preview_url||D.previewUrl;O&&await s.mobileToggleTrack(D.id,O)},_=async(D,A)=>{console.log("Cover clicked for:",D.name);const O=D.preview_url||D.previewUrl;O?(console.log("Playing audio preview for:",D.name),await s.mobileToggleTrack(D.id,O)):console.log("No preview URL available for:",D.name)},S=async(D,A)=>{console.log("Info clicked for:",D.name),!o.getIsGloballyLoading&&(v(D.id),await o.getTrackDetails(D,"albumTracks"),r.addToQueue(D))},T=async(D,A)=>{o.getIsGloballyLoading||await o.getArtistDetails(D,fe(e.num),e.d.id)},P=async()=>{d.value&&f.value&&await s.mobileToggleTrack(y.value,f.value)},x=D=>D?new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return Pe(async()=>{m(),await at();const D=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.registerComponent(D,a),console.log("Showing MobileDeeperAlbum component after registration:",D),b.showComponent(D)}),Nt(()=>{const D=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;b.unregisterComponent(D),console.log("MobileDeeperAlbum unregistered:",D)}),(D,A)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:a},[l("div",{class:"mobile-header"},[l("button",{class:"back-button",onClick:p},A[1]||(A[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Te("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),A[2]||(A[2]=l("h2",{class:"mobile-deeper-header"},"Album Details",-1))]),l("div",h0,[l("div",{class:K(["album-cover",w(c)]),style:$e(w(u)),onClick:P},[t.d.images&&t.d.images[0]?(h(),g("img",{key:0,src:t.d.images[0].url,alt:t.d.name,onError:A[0]||(A[0]=O=>O.target.style.display="none")},null,40,v0)):(h(),g("div",g0,A[3]||(A[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010 1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010 1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1)]))),w(d)?(h(),g("audio",{key:2,preload:"metadata",src:w(f)},null,8,y0)):R("",!0)],6),l("div",w0,[l("h1",b0,M(t.d.name),1),l("div",k0,[A[4]||(A[4]=l("span",{class:"artists-label"},"By",-1)),l("div",_0,[(h(!0),g(j,null,ee(t.d.artists,(O,L)=>(h(),g(j,{key:L},[t.d.artists.length>1&&t.d.artists.length-1===L?(h(),g("div",S0,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==L&&L!==0?(h(),g("div",T0,",")):R("",!0),l("div",A0,[l("button",{class:"artist-link",onClick:se=>T(O)},M(O.name),9,$0)])],64))),128))])])]),l("div",C0,[t.d.release_date?(h(),g("span",P0,[A[5]||(A[5]=l("span",{class:"meta-icon"},"📅",-1)),Te(" "+M(x(t.d.release_date)),1)])):R("",!0),i.value.length>0?(h(),g("span",x0,[A[6]||(A[6]=l("span",{class:"meta-icon"},"🎵",-1)),Te(" "+M(i.value.length)+" tracks ",1)])):R("",!0)])]),l("div",R0,[A[7]||(A[7]=l("div",{class:"tracks-header"},[l("span",{class:"tracks-icon"},"🎵"),l("h3",{class:"tracks-title"},"Tracks")],-1)),l("div",M0,[(h(!0),g(j,null,ee(i.value,O=>(h(),J(Zt,{key:O.id,track:O,num:t.num,onClick:k,onCoverClick:_,onInfoClick:S},null,8,["track","num"]))),128))])])],512))}},I0={class:"seed-content"},L0={class:"mobile-header"},D0={class:"seed-title"},z0={class:"title-text"},U0={class:"header-actions"},O0=["title"],F0={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},q0={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},V0={class:"mobile-tracks-container"},N0={key:0,class:"empty-state"},H0={__name:"SeedArtistsMob",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=ct();z();const i=z(""),a=z(null),c=De(),u=E(()=>{const p=e.d.tracks||[];return i.value?[...p].sort((k,_)=>{switch(i.value){case"track":return k.name.localeCompare(_.name);case"album":return k.album.name.localeCompare(_.album.name);case"artist":return k.artists[0].name.localeCompare(_.artists[0].name);case"popularity":return _.popularity-k.popularity;case"release_date":return new Date(_.album.release_date)-new Date(k.album.release_date);case"duration":return k.duration_ms-_.duration_ms;default:return 0}}):p}),d=async(p,k)=>{if(o.getIsGloballyLoading)return;const _=fe(e.num);await o.getTrackDetails(p,_,e.d.id),r.addToQueue(p)},f=async(p,k)=>{console.log("Cover clicked for:",p.name);const _=p.preview_url||p.previewUrl;_?(console.log("Playing audio preview for:",p.name),await s.mobileToggleTrack(p.id,_)):console.log("No preview URL available for:",p.name)},y=async(p,k)=>{if(console.log("Info clicked for:",p.name),o.getIsGloballyLoading)return;const _=fe(e.num);await o.getTrackDetails(p,_,e.d.id),r.addToQueue(p)},b=async()=>{try{console.log("Refreshing seed artists for:",e.d.id),await o.getSeedArtistRecommendations(e.d,fe(e.num),e.d.parentKey)}catch(p){console.error("Failed to refresh seed artists:",p)}},v=()=>{const p=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.hideComponent(p),e.d.parentKey&&c.showComponent(e.d.parentKey)},m=()=>{n.toggleViewMode()};return Pe(async()=>{await at();const p=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(p,a),console.log("Showing SeedArtistsMob component after registration:",p),c.showComponent(p)}),Nt(()=>{const p=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.unregisterComponent(p),console.log("SeedArtistsMob component unregistered:",p)}),(p,k)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:a},[l("div",I0,[l("div",L0,[l("button",{class:"back-button",onClick:v},k[1]||(k[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),l("div",D0,[k[2]||(k[2]=l("span",{class:"title-icon pe-2"},"🎵",-1)),l("span",z0,"Recommended songs based on "+M(t.d.name),1)]),l("div",U0,[l("button",{class:"refresh-button",onClick:b},k[3]||(k[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"refresh-icon"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:m,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",F0,k[4]||(k[4]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",q0,k[5]||(k[5]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,O0),ge(l("select",{class:"sort-select","onUpdate:modelValue":k[0]||(k[0]=_=>i.value=_)},k[6]||(k[6]=[Ne('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="duration">Sort by duration</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="track">Sort by track name</option>',7)]),512),[[As,i.value]])])]),l("div",V0,[u.value.length===0?(h(),g("div",N0,k[7]||(k[7]=[l("div",{class:"empty-icon"},"🎤",-1),l("h3",null,"No recommended tracks",-1),l("p",null,"Try refreshing to get new recommendations",-1)]))):(h(),g("div",{key:1,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,ee(u.value,_=>(h(),J(Zt,{key:_.id,track:_,num:t.num,"view-mode":w(n).viewMode,onClick:S=>d(_),onCoverClick:S=>f(_),onInfoClick:S=>y(_)},null,8,["track","num","view-mode","onClick","onCoverClick","onInfoClick"]))),128))],2))])])],512))}},B0={class:"seed-content"},K0={class:"mobile-header"},j0={class:"mobile-deeper-header"},G0={class:"title-text"},Q0={class:"header-actions"},W0=["title"],Y0={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},X0={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},J0={key:0,class:"lastfm-indicator"},Z0={key:0,class:"lastfm-stats"},e1={class:"stat-item"},t1={class:"stat-number"},s1={class:"stat-item"},r1={class:"stat-number"},o1={class:"stat-item"},n1={class:"stat-number"},i1={class:"mobile-tracks-container"},l1={key:0,class:"empty-state"},a1={__name:"SeedTracksMob",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=ct();z();const i=z(""),a=z(null),c=De(),u=E(()=>{const _=e.d.tracks||[];return i.value?[..._].sort((S,T)=>{switch(i.value){case"track":return S.name.localeCompare(T.name);case"album":return S.album.name.localeCompare(T.album.name);case"artist":return S.artists[0].name.localeCompare(T.artists[0].name);case"popularity":return T.popularity-S.popularity;case"release_date":return new Date(T.album.release_date)-new Date(S.album.release_date);case"duration":return S.duration_ms-T.duration_ms;default:return 0}}):_});function d(){if(!e.d.tracks)return 0;const _=new Set;return e.d.tracks.forEach(S=>{S.artists&&S.artists.length>0&&_.add(S.artists[0].name)}),_.size}function f(){if(!e.d.tracks)return 0;const _=new Set;return e.d.tracks.forEach(S=>{S.album&&S.album.name&&_.add(S.album.name)}),_.size}const y=async(_,S)=>{if(o.getIsGloballyLoading)return;const T=fe(e.num);await o.getTrackDetails(_,T,e.d.id),r.addToQueue(_)},b=async(_,S)=>{console.log("Cover clicked for:",_.name);const T=_.preview_url||_.previewUrl;T?(console.log("Playing audio preview for:",_.name),await s.mobileToggleTrack(_.id,T)):console.log("No preview URL available for:",_.name)},v=async(_,S)=>{if(console.log("Info clicked for:",_.name),o.getIsGloballyLoading)return;const T=fe(e.num);await o.getTrackDetails(_,T,e.d.id),r.addToQueue(_)},m=async()=>{try{console.log("Refreshing seed tracks for:",e.d.id),await o.getSeedTrackRecommendations(e.d,fe(e.num),e.d.parentKey)}catch(_){console.error("Failed to refresh seed tracks:",_)}},p=()=>{const _=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.hideComponent(_),e.d.parentKey&&c.showComponent(e.d.parentKey)},k=()=>{n.toggleViewMode()};return Pe(async()=>{await at();const _=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(_,a),console.log("Showing SeedTracksMob component after registration:",_),c.showComponent(_)}),Nt(()=>{const _=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.unregisterComponent(_),console.log("SeedTracksMob component unregistered:",_)}),(_,S)=>(h(),g("div",{class:"mobile-deeper-item",ref_key:"componentRef",ref:a},[l("div",B0,[l("div",K0,[l("button",{class:"back-button",onClick:p},S[1]||(S[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24"},[Te("> "),l("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"})],-1)])),l("div",j0,[S[2]||(S[2]=l("span",{class:"title-icon pe-2"},"🎵",-1)),l("span",G0,"Recommended songs based on "+M(t.d.name),1)]),l("div",Q0,[l("button",{class:"refresh-button",onClick:m},S[3]||(S[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"refresh-icon"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:k,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",Y0,S[4]||(S[4]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",X0,S[5]||(S[5]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,W0),ge(l("select",{class:"sort-select","onUpdate:modelValue":S[0]||(S[0]=T=>i.value=T)},S[6]||(S[6]=[Ne('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="duration">Sort by duration</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="track">Sort by track name</option>',7)]),512),[[As,i.value]])])]),w(lt)()==="deezer"?(h(),g("div",J0,[S[12]||(S[12]=Ne('<div class="lastfm-header"><div class="lastfm-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg></div><div class="lastfm-info"><span class="lastfm-title">Powered by Last.fm</span><span class="lastfm-subtitle">Similar tracks discovered via Last.fm API</span></div></div>',1)),t.d.tracks&&t.d.tracks.length>0?(h(),g("div",Z0,[l("div",e1,[l("span",t1,M(t.d.tracks.length),1),S[7]||(S[7]=l("span",{class:"stat-label"},"tracks found",-1))]),S[10]||(S[10]=l("div",{class:"stat-divider"},null,-1)),l("div",s1,[l("span",r1,M(d()),1),S[8]||(S[8]=l("span",{class:"stat-label"},"artists",-1))]),S[11]||(S[11]=l("div",{class:"stat-divider"},null,-1)),l("div",o1,[l("span",n1,M(f()),1),S[9]||(S[9]=l("span",{class:"stat-label"},"albums",-1))])])):R("",!0)])):R("",!0),l("div",i1,[u.value.length===0?(h(),g("div",l1,S[13]||(S[13]=[l("div",{class:"empty-icon"},"🎵",-1),l("h3",null,"No recommended tracks",-1),l("p",null,"Try refreshing to get new recommendations",-1)]))):(h(),g("div",{key:1,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,ee(u.value,T=>(h(),J(Zt,{key:T.id,track:T,num:t.num,"view-mode":w(n).viewMode,onClick:P=>y(T),onCoverClick:P=>b(T),onInfoClick:P=>v(T)},null,8,["track","num","view-mode","onClick","onCoverClick","onInfoClick"]))),128))],2))])])],512))}},c1={class:"user-playlists-header"},u1={class:"user-info"},d1={class:"user-playlists-title"},f1={class:"user-meta"},p1={class:"playlist-count"},m1={class:"playlists-grid"},h1=["onClick","onMouseover","onMouseleave"],v1={class:"playlist-overlay"},g1={class:"playlist-name"},y1={class:"playlist-meta"},w1={key:0,class:"track-count"},b1={key:1,class:"playlist-visibility"},k1=["preload","src"],_1={key:0,class:"empty-state"},S1={__name:"MobileUserPlaylists",props:["d","num"],setup(t){const e=t,s=pe(),r=ye();ze();const o=ve(),{currentServiceType:n}=Jt(s),i=z(),a=z(null),c=De();function u(y){return pt(E(()=>y))}function d(y){i.value=y}function f(y){d(y.id),o.getPlaylistDetails(y,fe(e.num),e.d.id)}return Pe(()=>{const y=`user-playlists_${e.d.user.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering MobileUserPlaylists component with key:",y),c.registerComponent(y,a),console.log("Showing MobileUserPlaylists component after registration:",y),c.showComponent(y)}),(y,b)=>(h(),g("div",{class:"mobile-user-playlists",ref_key:"componentRef",ref:a},[l("div",c1,[l("div",u1,[l("h2",d1,M(t.d.name),1),l("div",f1,[l("span",p1,M(t.d.playlists.length)+" playlists",1)])])]),l("div",m1,[(h(!0),g(j,null,ee(t.d.playlists,(v,m)=>(h(),g("div",{key:m,class:K(["playlist-card",u(v).displayClass.value,i.value===v.id?"selected":""]),style:$e(u(v).backgroundStyle.value),onClick:p=>f(v),onMouseover:p=>u(v).hasPreview.value&&w(r).handleAudioHover(p),onMouseleave:p=>u(v).hasPreview.value&&w(r).handleAudioLeave(p)},[l("div",v1,[l("div",g1,M(v.name),1),l("div",y1,[v.tracks&&v.tracks.total?(h(),g("span",w1,M(v.tracks.total)+" tracks ",1)):R("",!0),v.public!==void 0?(h(),g("span",b1,M(v.public?"Public":"Private"),1)):R("",!0)])]),l("audio",{preload:u(v).audioPreload.value,src:u(v).audioSrc.value},null,8,k1)],46,h1))),128))]),t.d.playlists.length===0?(h(),g("div",_1,b[0]||(b[0]=[l("div",{class:"empty-icon"},"🎵",-1),l("h3",null,"No playlists found",-1),l("p",null,"This user doesn't have any public playlists.",-1)]))):R("",!0)],512))}},T1=_e(S1,[["__scopeId","data-v-6e462971"]]),A1={class:"rec_track"},$1={__name:"RecTrackM",props:["num"],setup(t){const e=t,s=ve();function r(){const o=fe(e.num);console.log(14,o);let n=s.getSectionData(o);console.log("RecTrack - Num:",e.num,"Section name:",o,"Data length:",n.length,"Data:",n),s.setCurrentSection(o);const i=n.map(a=>a.type);return console.log("RecTrack: Will render components of types:",i),n}return(o,n)=>(h(),g("div",A1,[(h(!0),g(j,null,ee(r(),(i,a)=>(h(),g(j,{key:`${i.type}_${i.id}${i.parentKey?`__p:${i.parentKey}__`:""}`},[i.type==="seed_tracks"?(h(),J(a1,{key:0,d:i,num:t.num},null,8,["d","num"])):i.type==="trackartist"?(h(),J(Qh,{key:1,d:i,num:t.num},null,8,["d","num"])):i.type==="deepertracks"||i.type==="track"?(h(),J(m0,{key:2,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperalbum"?(h(),J(E0,{key:3,d:i,num:t.num},null,8,["d","num"])):i.type==="seed_artists"?(h(),J(H0,{key:4,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperplaylist"?(h(),J(lm,{key:5,d:i,num:t.num},null,8,["d","num"])):i.type==="user-playlists"?(h(),J(T1,{key:6,d:i,num:t.num},null,8,["d","num"])):R("",!0)],64))),128))]))}},C1={class:"playlists-page"},P1={key:0,class:"loading-state"},x1={key:1,class:"playlists-content"},R1={class:"playlists-section"},M1={__name:"SpotifyPlaylistsPage",setup(t){const e=pe(),s=ve(),r=z(!1),o=z(null);z(null);const n=z(null);He();const i=async()=>{const d=e.getPlaylists&&e.getPlaylists.length>0,f=e.getSpotifyPlaylists&&e.getSpotifyPlaylists.length>0;if(d&&f){console.log("Using cached playlists data");return}r.value=!0,o.value=null;try{await Promise.all([d?Promise.resolve():e.fetchPlaylists(0),f?Promise.resolve():e.fetchSpotifyPlaylists(0)])}catch(y){o.value="Failed to load playlists",console.error("Error loading playlists:",y)}finally{r.value=!1}},a=async()=>{try{const d=e.getSpotifyPlaylists.length;await e.fetchSpotifyPlaylists(d)}catch(d){console.error("Failed to load more Spotify playlists:",d)}},c=async d=>{if(console.log("Spotify playlist arrow clicked:",d),d)try{await s.getPlaylistDetails(d,"spotifyPlaylists"),console.log("Playlist details fetched and added to section")}catch(f){console.error("Error fetching playlist details:",f)}},u=d=>{console.log("Searching for playlists:",d.target.value)};return Pe(()=>{i()}),(d,f)=>(h(),g("div",C1,[r.value?(h(),g("div",P1,f[0]||(f[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading playlists...",-1)]))):(h(),g("div",x1,[l("div",R1,[Q(Jl,{playlists:w(e).getSpotifyPlaylists,"selected-playlist":n.value,title:"Spotify Playlists",placeholder:"Search Spotify playlists...","items-per-page":10,onPlaylistArrowClick:c,onSearch:u,onLoadMore:a},null,8,["playlists","selected-playlist"])])]))]))}},E1=_e(M1,[["__scopeId","data-v-c7a44125"]]),I1="modulepreload",L1=function(t){return"/"+t},fi={},D1=function(e,s,r){let o=Promise.resolve();if(s&&s.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=i(s.map(u=>{if(u=L1(u),u in fi)return;fi[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":I1,d||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};function ea(t={}){const{message:e="Loading...",initialState:s=!1}=t,r=z(s),o=z(e),n=z(0),i=E(()=>r.value),a=E(()=>`${n.value}%`),c=b=>{r.value=!0,b&&(o.value=b),n.value=0},u=()=>{r.value=!1,n.value=100},d=b=>{n.value=Math.max(0,Math.min(100,b))};return{loading:r,loadingMessage:o,loadingProgress:n,isLoading:i,progressPercentage:a,startLoading:c,stopLoading:u,setProgress:d,withLoading:async(b,v={})=>{const{message:m,onProgress:p,onError:k}=v;try{c(m);const _=await b(S=>{p&&(d(S),p(S))});return u(),_}catch(_){if(u(),k)k(_);else throw console.error("Loading operation failed:",_),_}},withMultipleLoading:async(b,v={})=>{const{message:m,onProgress:p}=v;try{c(m);const k=b.length,_=[];for(let S=0;S<k;S++){const T=await b[S];_.push(T);const P=(S+1)/k*100;d(P),p&&p(P)}return u(),_}catch(k){throw u(),console.error("Multiple loading operations failed:",k),k}}}}const z1={class:"mobile-top-tracks"},U1={class:"section-header"},O1={class:"header-content"},F1={class:"header-text"},q1={class:"section-title"},V1={class:"header-actions"},N1=["title"],H1={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},B1={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},K1=["onClick"],j1=["onClick"],G1=["src","alt"],Q1={key:1,class:"artist-placeholder"},W1={key:2,class:"playing-indicator"},Y1=["onClick"],X1={class:"item-name"},J1={key:0,class:"item-artist"},Z1={key:1,class:"item-genres"},ev=["src"],tv={key:0,class:"empty-state"},ta={__name:"MobileArtistDisplaySection",props:{artists:{type:Array,required:!0},title:{type:String,required:!0}},emits:["artist-click","artist-cover-click","artist-info-click"],setup(t,{emit:e}){const s=pe();ve();const r=ct(),o=ye(),n=e;z(!1),He(),z([]);const i=()=>{r.toggleViewMode()},a=async()=>{s.followedArtists=[],await loadFollowedArtists()},c=v=>v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v.toString(),u=v=>!v||v.length===0?"":v.slice(0,2).map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(", "),d=(v,m)=>{n("artist-click",v,m)},f=async(v,m)=>{m.stopPropagation(),console.log("Artist cover clicked for:",v.name);const p=v.preview_url||v.previewUrl;p?(console.log("Playing audio preview for artist:",v.name),await o.mobileToggleTrack(v.id,p)):console.log("No preview URL available for artist:",v.name),n("artist-cover-click",v,m)},y=(v,m)=>{m.stopPropagation(),console.log("Artist info clicked for:",v.name),n("artist-info-click",v,m)},b=v=>{const m=ds(E(()=>v));return{hasPreview:m.hasPreview.value,displayClass:m.displayClass.value,previewUrl:m.previewUrl.value,trackId:m.trackId.value}};return(v,m)=>(h(),g("div",z1,[l("div",U1,[l("div",O1,[l("div",F1,[l("h2",q1,M(t.title),1)]),l("div",V1,[l("button",{class:"refresh-btn",onClick:a,title:"Refresh"},m[0]||(m[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:i,title:w(r).viewMode==="list"?"Grid view":"List view"},[w(r).viewMode==="list"?(h(),g("svg",H1,m[1]||(m[1]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",B1,m[2]||(m[2]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,N1)])])]),l("div",{class:K(["releases-container",w(r).viewMode])},[(h(!0),g(j,null,ee(t.artists,(p,k)=>(h(),g("div",{key:k,class:"song-item",onClick:_=>d(p,_)},[l("div",{class:"item-cover",onClick:_=>f(p,_),style:{position:"relative"}},[p.images&&p.images.length>0?(h(),g("img",{key:0,src:p.images[0].url,alt:p.name,class:K(b(p).displayClass)},null,10,G1)):(h(),g("div",Q1,m[3]||(m[3]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})],-1)]))),b(p).hasPreview&&w(o).mobileIsTrackPlaying(p.id)?(h(),g("div",W1,m[4]||(m[4]=[l("span",{class:"playing-icon"},"▶️",-1)]))):R("",!0)],8,j1),l("div",{class:"item-info",onClick:_=>y(p,_)},[l("div",X1,M(p.name),1),p.followers?(h(),g("div",J1,M(c(p.followers.total))+" followers ",1)):R("",!0),p.genres&&p.genres.length>0?(h(),g("div",Z1,M(u(p.genres)),1)):R("",!0)],8,Y1),b(p).hasPreview?(h(),g("audio",{key:0,preload:"none",src:b(p).previewUrl},null,8,ev)):R("",!0)],8,K1))),128))],2),t.artists.length?R("",!0):(h(),g("div",tv,m[5]||(m[5]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M15.75 4.5a3 3 0 11.825 2.066l-8.421 4.679a3.002 3.002 0 010 1.51l8.421 4.679a3 3 0 11-.729 1.31l-8.421-4.678a3 3 0 110-4.132l8.421-4.679a3 3 0 01-.096-.755z","clip-rule":"evenodd"})])],-1),l("h4",null,"No followed artists",-1),l("p",null,"Start following your favorite artists to see them here",-1)])))]))}},sv={key:0,class:"progress-ring"},rv=["width","height"],ov=["cx","cy","r","stroke-width"],nv=["cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset"],iv={key:0,class:"progress-text"},lv={key:1,class:"spinner-ring"},av={__name:"LoadingSpinner",props:{size:{type:Number,default:40},color:{type:String,default:"var(--active-tab, #007bff)"},backgroundColor:{type:String,default:"var(--item-border, #e9ecef)"},progress:{type:Number,default:0},showProgress:{type:Boolean,default:!1},showProgressText:{type:Boolean,default:!1},strokeWidth:{type:Number,default:3}},setup(t){const e=t,s=E(()=>e.size<=24?"spinner-small":e.size<=32?"spinner-medium":e.size<=48?"spinner-large":"spinner-xl"),r=E(()=>({"--spinner-color":e.color,"--spinner-bg-color":e.backgroundColor,"--spinner-size":`${e.size}px`})),o=E(()=>e.size/2),n=E(()=>(e.size-e.strokeWidth)/2),i=E(()=>2*Math.PI*n.value),a=E(()=>i.value-e.progress/100*i.value);return(c,u)=>(h(),g("div",{class:K(["loading-spinner",s.value]),style:$e(r.value)},[t.showProgress?(h(),g("div",sv,[(h(),g("svg",{class:"progress-circle",width:t.size,height:t.size},[l("circle",{class:"progress-circle-bg",cx:o.value,cy:o.value,r:n.value,"stroke-width":t.strokeWidth},null,8,ov),l("circle",{class:"progress-circle-fg",cx:o.value,cy:o.value,r:n.value,"stroke-width":t.strokeWidth,"stroke-dasharray":i.value,"stroke-dashoffset":a.value,style:$e({transformOrigin:`${o.value}px ${o.value}px`})},null,12,nv)],8,rv)),t.showProgressText?(h(),g("div",iv,M(t.progress)+"% ",1)):R("",!0)])):(h(),g("div",lv,[(h(),g(j,null,ee(3,d=>l("div",{class:"spinner-dot",key:d,style:$e({animationDelay:`${d*.1}s`})},null,4)),64))]))],6))}},cv=_e(av,[["__scopeId","data-v-b263e1d3"]]),uv={class:"loading-content"},dv={key:0,class:"loading-text"},fv={key:1,class:"loading-details"},pv={key:2,class:"loading-actions"},mv={__name:"LoadingState",props:{message:{type:String,default:"Loading..."},details:{type:String,default:null},progress:{type:Number,default:0},showProgress:{type:Boolean,default:!1},showProgressText:{type:Boolean,default:!1},spinnerSize:{type:Number,default:40},spinnerColor:{type:String,default:"var(--active-tab, #007bff)"},spinnerBackgroundColor:{type:String,default:"var(--item-border, #e9ecef)"},variant:{type:String,default:"default",validator:t=>["default","inline","fullscreen","minimal"]},overlay:{type:Boolean,default:!1},overlayClickable:{type:Boolean,default:!1},padding:{type:String,default:null},minHeight:{type:String,default:null}},emits:["overlay-click"],setup(t){const e=t,s=E(()=>`loading-${e.variant}`),r=E(()=>({"--loading-padding":e.padding,"--loading-min-height":e.minHeight}));return(o,n)=>(h(),g("div",{class:K(["loading-state",s.value]),style:$e(r.value)},[l("div",uv,[Q(cv,{size:t.spinnerSize,color:t.spinnerColor,"background-color":t.spinnerBackgroundColor,progress:t.progress,"show-progress":t.showProgress,"show-progress-text":t.showProgressText},null,8,["size","color","background-color","progress","show-progress","show-progress-text"]),t.message||o.$slots.default?(h(),g("div",dv,[Ro(o.$slots,"default",{},()=>[l("p",null,M(t.message),1)],!0)])):R("",!0),t.details?(h(),g("div",fv,[l("small",null,M(t.details),1)])):R("",!0),o.$slots.actions?(h(),g("div",pv,[Ro(o.$slots,"actions",{},void 0,!0)])):R("",!0)]),t.overlay?(h(),g("div",{key:0,class:"loading-overlay",onClick:n[0]||(n[0]=i=>t.overlayClickable?o.$emit("overlay-click"):null)})):R("",!0)],6))}},sa=_e(mv,[["__scopeId","data-v-cf8c984f"]]),hv={class:"mobile-top-tracks"},vv={class:"section-header"},gv={class:"time-range-selector"},yv=["onClick"],wv={__name:"MobileTopArtists",setup(t){const e=pe();ye();const s=ve(),r=ct(),{setSelectedItem:o}=He(),{isLoading:n,loadingMessage:i,withLoading:a}=ea({message:"Loading top artists..."}),c=z(1),u=E(()=>{switch(c.value){case 1:return e.getTopArtistsShort||[];case 2:return e.getTopArtistsMedium||[];case 3:return e.getTopArtistsLong||[];default:return e.getTopArtistsShort||[]}});E(()=>{switch(c.value){case 1:return"Last month";case 2:return"Last 6 months";case 3:return"All time";default:return"Last month"}});const d=async m=>{const p=m===1?"short_term":m===2?"medium_term":"long_term",k=p==="short_term"?"short":p==="medium_term"?"medium":"long",_=e[`getTopArtists${k.charAt(0).toUpperCase()+k.slice(1)}`];if(_&&_.length>0){console.log("Using cached top artists data for",p);return}try{await e.fetchTopArtists(p)}catch(S){console.error("Failed to load top artists:",S)}},f=async m=>{c.value=m,await a(async()=>{await d(m)},{message:"Loading top artists..."})},y=async(m,p)=>{o(m.id),await s.getArtistDetails(m,"topArtists");const{useVisibilityManager:_}=await D1(async()=>{const{useVisibilityManager:P}=await Promise.resolve().then(()=>Cf);return{useVisibilityManager:P}},void 0),S=_(),T=`trackartist_${m.id}__p:topArtistsPage__`;S.showComponent(T),console.log("Showing deeper artist for:",m.name,"with key:",T)},b=async(m,p)=>{console.log("Artist cover clicked for:",m.name)},v=async(m,p)=>{console.log("Artist info clicked for:",m.name),await y(m)};return Pe(async()=>{await a(async()=>{await d(c.value)},{message:"Loading your top artists..."})}),(m,p)=>(h(),g("div",hv,[l("div",vv,[l("div",gv,[(h(),g(j,null,ee([{id:1,label:"Month"},{id:2,label:"6 Months"},{id:3,label:"All Time"}],k=>l("button",{key:k.id,class:K(["time-range-btn",{active:c.value===k.id}]),onClick:_=>f(k.id)},M(k.label),11,yv)),64))])]),w(n)?(h(),J(sa,{key:0,message:w(i),variant:"default"},null,8,["message"])):R("",!0),Q(ta,{title:"Top Artists",artists:u.value,"view-mode":w(r).viewMode,onArtistClick:y,onArtistCoverClick:b,onArtistInfoClick:v},null,8,["artists","view-mode"])]))}},bv={class:"mobile-top-tracks"},kv={class:"section-header"},_v={class:"time-range-selector"},Sv=["onClick"],Tv={class:"header-content"},Av={class:"header-actions"},$v=["title"],Cv={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Pv={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},xv={key:0,class:"loading-state"},Rv={key:1,class:"section-content"},Mv={key:0,class:"empty-state"},Ev={__name:"MobileTopTracks",setup(t){const e=pe(),s=ye(),r=ze(),o=ve(),n=ct(),{setSelectedItem:i}=He(),a=z(1),c=z(!1),u=E(()=>{switch(a.value){case 1:return e.getTopTracksShort||[];case 2:return e.getTopTracksMedium||[];case 3:return e.getTopTracksLong||[];default:return e.getTopTracksShort||[]}});E(()=>{switch(a.value){case 1:return"Last month";case 2:return"Last 6 months";case 3:return"All time";default:return"Last month"}});const d=async k=>{const _=k===1?"short_term":k===2?"medium_term":"long_term",S=_==="short_term"?"short":_==="medium_term"?"medium":"long",T=e[`getTopTracks${S.charAt(0).toUpperCase()+S.slice(1)}`];if(T&&T.length>0){console.log("Using cached top tracks data for",_);return}c.value=!0;try{await e.fetchTopTracks(_)}catch(P){console.error("Failed to load top tracks:",P)}finally{c.value=!1}},f=async k=>{a.value=k,await d(k)},y=async(k,_)=>{console.log("Track clicked:",k.name,"Preview URL:",k.preview_url||k.previewUrl),i(k.id),await o.getTrackDetails(k,"topTracks"),r.addToQueue(k);const S=k.preview_url||k.previewUrl;S?(console.log("Playing audio preview for:",k.name),await s.mobileToggleTrack(k.id,S)):console.log("No preview URL available for:",k.name)},b=async(k,_)=>{console.log("Cover clicked for:",k.name);const S=k.preview_url||k.previewUrl;S?(console.log("Playing audio preview for:",k.name),await s.mobileToggleTrack(k.id,S)):console.log("No preview URL available for:",k.name)},v=async(k,_)=>{console.log("Info clicked for:",k.name),i(k.id),await o.getTrackDetails(k,"topTracks"),r.addToQueue(k)},m=async()=>{const k=a.value===1?"short_term":a.value===2?"medium_term":"long_term",_=k==="short_term"?"short":k==="medium_term"?"medium":"long";e[`topTracks.${_}`]=[],await d(a.value)},p=()=>{n.toggleViewMode()};return Pe(async()=>{await d(a.value)}),(k,_)=>(h(),g("div",bv,[l("div",kv,[l("div",_v,[(h(),g(j,null,ee([{id:1,label:"Month"},{id:2,label:"6 Months"},{id:3,label:"All Time"}],S=>l("button",{key:S.id,class:K(["time-range-btn",{active:a.value===S.id}]),onClick:T=>f(S.id)},M(S.label),11,Sv)),64))]),l("div",Tv,[_[3]||(_[3]=l("div",{class:"header-text"},[l("h2",{class:"section-title"},"Top Tracks")],-1)),l("div",Av,[l("button",{class:"refresh-btn",onClick:m,title:"Refresh"},_[0]||(_[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:p,title:w(n).viewMode==="list"?"Grid view":"List view"},[w(n).viewMode==="list"?(h(),g("svg",Cv,_[1]||(_[1]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",Pv,_[2]||(_[2]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,$v)])])]),c.value?(h(),g("div",xv,_[4]||(_[4]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading top tracks...",-1)]))):(h(),g("div",Rv,[u.value.length===0?(h(),g("div",Mv,_[5]||(_[5]=[l("div",{class:"empty-icon"},"🎵",-1),l("h3",null,"No tracks found",-1),l("p",null,"Your top tracks will appear here",-1)]))):(h(),g("div",{key:1,class:K(["releases-container",w(n).viewMode])},[(h(!0),g(j,null,ee(u.value,(S,T)=>(h(),J(Zt,{key:S.id,track:S,num:3,"view-mode":w(n).viewMode,onClick:y,onCoverClick:b,onInfoClick:v},null,8,["track","view-mode"]))),128))],2))]))]))}},Iv={class:"mobile-top-tracks"},Lv={key:0,class:"loading-state"},Dv={key:1,class:"new-releases-content"},zv={class:"releases-section"},Uv={__name:"MobileSavedAlbums",setup(t){const e=pe(),s=ve();He();const r=z(!1),o=z(null),n=z([]),i=async()=>{if(e.getSavedAlbums&&e.getSavedAlbums.length>0){console.log("Using cached saved albums data"),n.value=e.getSavedAlbums.map(u=>u.album);return}r.value=!0;try{await e.fetchSavedAlbums(0),n.value=(e.getSavedAlbums||[]).map(u=>u.album)}catch(u){console.error("Failed to load saved albums:",u)}finally{r.value=!1}},a=async(u,d)=>{console.log("ReleaseSelect",u,d),o.value=u;const f=n.value.find(y=>y.id===u);console.log("Release selected:",f),f&&await s.getAlbumDetails(f,"savedAlbums")},c=async()=>{e.savedAlbums=[],await i()};return Pe(async()=>{await i()}),(u,d)=>(h(),g("div",Iv,[r.value?(h(),g("div",Lv,d[0]||(d[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading saved albums...",-1)]))):(h(),g("div",Dv,[l("div",zv,[Q(Zl,{releases:n.value,"selected-release":o.value,title:"Saved Albums",placeholder:"Search releases...","items-per-page":20,onReleaseSelect:a,onRefresh:c},null,8,["releases","selected-release"])])]))]))}};function fs(){const t=(d,f)=>{const y=[...d];switch(f){case"track":return y.sort((b,v)=>b.track.name.localeCompare(v.track.name));case"album":return y.sort((b,v)=>b.track.album.name.localeCompare(v.track.album.name));case"artist":return y.sort((b,v)=>b.track.artists[0].name.localeCompare(v.track.artists[0].name));case"popularity":return y.sort((b,v)=>b.track.popularity>v.track.popularity);case"release_date":return y.sort((b,v)=>b.track.album.release_date.localeCompare(v.track.album.release_date));case"duration":return y.sort((b,v)=>b.track.duration_ms>v.track.duration_ms);default:return y}},e=(d,f)=>{const y=[...d];switch(f){case"track":return y.sort((b,v)=>b.name.localeCompare(v.name));case"album":return y.sort((b,v)=>b.album.name.localeCompare(v.album.name));case"artist":return y.sort((b,v)=>b.artists[0].name.localeCompare(v.artists[0].name));case"popularity":return y.sort((b,v)=>b.popularity>v.popularity);case"release_date":return y.sort((b,v)=>b.album.release_date.localeCompare(v.album.release_date));case"duration":return y.sort((b,v)=>b.duration_ms>v.duration_ms);default:return y}},s=(d,f)=>{const y=[...d];switch(f){case"artist":return y.sort((b,v)=>b.name.localeCompare(v.name));case"popularity":return y.sort((b,v)=>b.popularity>v.popularity);case"followers":return y.sort((b,v)=>b.followers>v.followers);default:return y}},r=(d,f)=>{const y=[...d];switch(f){case"name":case"album":return y.sort((b,v)=>b.name.localeCompare(v.name));case"artist":return y.sort((b,v)=>b.artists[0].name.localeCompare(v.artists[0].name));case"popularity":return y.sort((b,v)=>b.popularity>v.popularity);case"release_date":return y.sort((b,v)=>b.release_date.localeCompare(v.release_date));case"number_of_tracks":return y.sort((b,v)=>b.total_tracks>v.total_tracks);default:return y}},o=(d,f)=>{const y=[...d];switch(f){case"name":case"album":return y.sort((b,v)=>b.album.name.localeCompare(v.album.name));case"artist":return y.sort((b,v)=>b.album.artists[0].name.localeCompare(v.album.artists[0].name));case"popularity":return y.sort((b,v)=>b.album.popularity>v.album.popularity);case"release_date":return y.sort((b,v)=>b.album.release_date.localeCompare(v.album.release_date));case"number_of_tracks":return y.sort((b,v)=>b.album.total_tracks>v.album.total_tracks);default:return y}};return{sortTracks:e,sortArtists:s,sortAlbums:o,createPlaylistTrackSorter:(d,f)=>E(()=>t(d.value,f.value)),createTrackSorter:(d,f)=>E(()=>e(d.value,f.value)),createArtistSorter:(d,f)=>E(()=>s(d.value,f.value)),createAlbumSorter:(d,f)=>E(()=>o(d.value,f.value)),createNewReleaseSorter:(d,f)=>E(()=>r(d.value,f.value))}}const Ov={class:"mobile-followed-artists"},Fv={__name:"MobileFollowedArtists",setup(t){const e=pe(),s=ve(),r=ct(),{createArtistSorter:o}=fs(),{setSelectedItem:n}=He(),i=z(""),a=z(!1),c=z([]),u=async()=>{if(e.getFollowedArtists&&e.getFollowedArtists.length>0){console.log("Using cached followed artists data"),c.value=e.getFollowedArtists;return}a.value=!0;try{await e.fetchFollowedArtists(),c.value=e.getFollowedArtists||[]}catch(v){console.error("Failed to load followed artists:",v)}finally{a.value=!1}},d=async(v,m)=>{console.log("Artist clicked:",v.name,v),n(v.id);try{console.log("Getting artist details for followedArtists section..."),await s.getArtistDetails(v,"followedArtists"),console.log("Artist details loaded successfully")}catch(p){console.error("Failed to load artist details:",p)}},f=async(v,m)=>{console.log("Artist cover clicked for:",v.name)},y=async(v,m)=>{console.log("Artist info clicked for:",v.name),await d(v)},b=o(E(()=>{const v=e.getFollowedArtists||[];return console.log("Creating sorted items from:",v.length,"artists"),v}),i);return Pe(async()=>{console.log("MobileFollowedArtists mounted, loading data..."),await u()}),(v,m)=>(h(),g("div",Ov,[Q(ta,{title:"Followed Artists",artists:w(b),"view-mode":w(r).viewMode,onArtistClick:d,onArtistCoverClick:f,onArtistInfoClick:y},null,8,["artists","view-mode"])]))}},qv={class:"mobile-top-tracks"},Vv={class:"section-header"},Nv={class:"header-content"},Hv={class:"header-actions"},Bv=["title"],Kv={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},jv={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Gv={key:0,class:"loading-state"},Qv={key:1,class:"loading-more"},Wv={key:3,class:"empty-state"},_o=20,Yv={__name:"MobileSavedTracks",props:{num:{type:Number,default:5}},setup(t){const e=t,s=pe(),r=ye(),o=ze(),n=ve(),i=ct(),{setSelectedItem:a}=He(),c=z(!1),u=z([]),d=z(1),f=z(!1),y=async()=>{if(s.getSavedTracks&&s.getSavedTracks.length>0){console.log("Using cached saved tracks data"),u.value=s.getSavedTracks.map(x=>x.track);return}c.value=!0;try{await s.fetchSavedTracks(0),u.value=(s.getSavedTracks||[]).map(x=>x.track)}catch(x){console.error("Failed to load saved tracks:",x)}finally{c.value=!1}},b=async(x,D)=>{a(x.id),await n.getTrackDetails(x,"savedTracks"),o.addToQueue(x)},v=async(x,D)=>{console.log("Cover clicked for:",x.name);const A=x.preview_url||x.previewUrl;A?(console.log("Playing audio preview for:",x.name),await r.mobileToggleTrack(x.id,A)):console.log("No preview URL available for:",x.name)},m=async(x,D)=>{console.log("Info clicked for:",x.name),a(x.id),await n.getTrackDetails(x,"savedTracks"),o.addToQueue(x)},p=async()=>{s.savedTracks=[],d.value=1,await y()},k=()=>{i.toggleViewMode()},_=E(()=>s.savedTracksTotal),S=E(()=>Math.ceil(_.value/_o)),T=E(()=>{const x=d.value*_o;return u.value.slice(0,x)}),P=async x=>{if(x>d.value){const D=s.savedTracks.length;if((x-1)*_o>=D){f.value=!0;try{await s.fetchSavedTracks(D),u.value=(s.getSavedTracks||[]).map(O=>O.track)}catch(O){console.error("Failed to load more tracks:",O)}finally{f.value=!1}}}d.value=x};return Pe(async()=>{await y()}),(x,D)=>(h(),g("div",qv,[l("div",Vv,[l("div",Nv,[D[3]||(D[3]=l("div",{class:"header-text"},[l("h2",{class:"section-title"},"Saved Tracks")],-1)),l("div",Hv,[l("button",{class:"refresh-btn",onClick:p,title:"Refresh"},D[0]||(D[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})],-1)])),l("button",{class:"view-toggle-btn",onClick:k,title:w(i).viewMode==="list"?"Grid view":"List view"},[w(i).viewMode==="list"?(h(),g("svg",Kv,D[1]||(D[1]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",jv,D[2]||(D[2]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,Bv)])])]),c.value?(h(),g("div",Gv,D[4]||(D[4]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading saved tracks...",-1)]))):R("",!0),f.value?(h(),g("div",Qv,D[5]||(D[5]=[l("div",{class:"loading-spinner"},null,-1),l("span",null,"Loading more tracks...",-1)]))):u.value.length>0?(h(),g("div",{key:2,class:K(["releases-container",w(i).viewMode])},[(h(!0),g(j,null,ee(T.value,A=>(h(),J(Zt,{key:A.id,track:A,num:e.num,onClick:b,onCoverClick:v,onInfoClick:m},null,8,["track","num"]))),128))],2)):(h(),g("div",Wv,D[6]||(D[6]=[l("div",{class:"empty-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 01-1.085.67L12 18.089l-7.165 3.583A.75.75 0 013.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z","clip-rule":"evenodd"})])],-1),l("h4",null,"No saved tracks",-1),l("p",null,"Start saving your favorite tracks to see them here",-1)]))),S.value>1?(h(),J(ro,{key:4,"current-page":d.value,"total-pages":S.value,onPageChange:P},null,8,["current-page","total-pages"])):R("",!0)]))}},Xv=_e(Yv,[["__scopeId","data-v-1d2639e8"]]),Jv={class:"mobile-search-page"},Zv={class:"search-header"},eg={class:"search-input-container"},tg={key:0,class:"loading-container"},sg={key:1,class:"search-results"},rg={class:"results-header"},og={class:"results-info"},ng={class:"results-count"},ig={class:"header-actions"},lg=["title"],ag={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},cg={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ug={key:0,class:"mobile-search-section"},dg={key:1,class:"mobile-search-section"},fg=["onClick"],pg={class:"item-cover"},mg=["src","alt"],hg={class:"item-info"},vg={class:"item-name"},gg={class:"item-artist"},yg={key:2,class:"mobile-search-section"},wg=["onClick"],bg={class:"item-cover"},kg=["src","alt"],_g={class:"item-info"},Sg={class:"item-name"},Tg={class:"item-artist"},Ag={key:3,class:"mobile-search-section"},$g=["onClick"],Cg={class:"item-cover"},Pg=["src","alt"],xg={class:"item-info"},Rg={class:"item-name"},Mg={class:"item-artist"},Eg={key:2,class:"empty-state"},Ig={key:3,class:"empty-state"},Lg={__name:"MobileSearchPage",setup(t){const e=pe(),s=ve(),r=ze(),o=ct(),n=ye(),i=z(""),a=E(()=>e.getSearchTracks.length>0||e.getSearchArtists.length>0||e.getSearchAlbums.length>0||e.getSearchPlaylists.length>0),c=E(()=>e.getSearchTracks.length+e.getSearchArtists.length+e.getSearchAlbums.length+e.getSearchPlaylists.length),u=()=>{i.value.trim()&&e.search(i.value)},d=()=>{i.value="",e.clearSearchResults()},f=()=>{o.toggleViewMode()},y=async(_,S)=>{s.getIsGloballyLoading||(await s.getTrackDetails(_,"search"),r.addToQueue(_))},b=async(_,S)=>{console.log("Cover clicked for:",_.name);const T=_.preview_url||_.previewUrl;T?(console.log("Playing audio preview for:",_.name),await n.mobileToggleTrack(_.id,T)):console.log("No preview URL available for:",_.name)},v=async(_,S)=>{console.log("Info clicked for:",_.name),!s.getIsGloballyLoading&&(await s.getTrackDetails(_,"search"),r.addToQueue(_))},m=async(_,S)=>{s.getIsGloballyLoading||await s.getArtistDetails(_,"search")},p=async(_,S)=>{s.getIsGloballyLoading||await s.getAlbumDetails(_,"search")},k=async(_,S)=>{s.getIsGloballyLoading||await s.getPlaylistDetails(_,"search")};return(_,S)=>(h(),g("div",Jv,[l("div",Zv,[l("div",eg,[S[2]||(S[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"search-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1)),ge(l("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=T=>i.value=T),onInput:u,placeholder:"Search for songs, artists, albums...",class:"search-input"},null,544),[[Ct,i.value]]),i.value?(h(),g("button",{key:0,onClick:d,class:"clear-button"},S[1]||(S[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"clear-icon"},[l("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))):R("",!0)])]),w(e).isLoading?(h(),g("div",tg,S[3]||(S[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",{class:"loading-text"},"Searching...",-1)]))):a.value?(h(),g("div",sg,[l("div",rg,[l("div",og,[S[4]||(S[4]=l("h3",{class:"results-title"},"Search Results",-1)),l("p",ng,M(c.value)+" results found",1)]),l("div",ig,[l("button",{class:"view-toggle-btn",onClick:f,title:w(o).viewMode==="list"?"Grid view":"List view"},[w(o).viewMode==="list"?(h(),g("svg",ag,S[5]||(S[5]=[l("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z","clip-rule":"evenodd"},null,-1)]))):(h(),g("svg",cg,S[6]||(S[6]=[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"},null,-1)])))],8,lg)])]),w(e).getSearchTracks.length>0?(h(),g("div",ug,[S[7]||(S[7]=l("h3",{class:"section-title"},"Songs",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,ee(w(e).getSearchTracks,(T,P)=>(h(),J(Zt,{key:P,track:T,num:0,"view-mode":w(o).viewMode,onClick:y,onCoverClick:b,onInfoClick:v},null,8,["track","view-mode"]))),128))],2)])):R("",!0),w(e).getSearchArtists.length>0?(h(),g("div",dg,[S[8]||(S[8]=l("h3",{class:"section-title"},"Artists",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,ee(w(e).getSearchArtists,(T,P)=>{var x,D,A;return h(),g("div",{key:P,class:"song-item",onClick:O=>m(T)},[l("div",pg,[l("img",{src:((D=(x=T.images)==null?void 0:x[0])==null?void 0:D.url)||"/default-artist.png",alt:T.name,class:"cover-image"},null,8,mg)]),l("div",hg,[l("div",vg,M(T.name),1),l("div",gg,M(((A=T.genres)==null?void 0:A.slice(0,2).join(", "))||"Artist"),1)])],8,fg)}),128))],2)])):R("",!0),w(e).getSearchAlbums.length>0?(h(),g("div",yg,[S[9]||(S[9]=l("h3",{class:"section-title"},"Albums",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,ee(w(e).getSearchAlbums,(T,P)=>{var x,D;return h(),g("div",{key:P,class:"song-item",onClick:A=>p(T)},[l("div",bg,[l("img",{src:((D=(x=T.images)==null?void 0:x[0])==null?void 0:D.url)||"/default-album.png",alt:T.name,class:"cover-image"},null,8,kg)]),l("div",_g,[l("div",Sg,M(T.name),1),l("div",Tg,M(T.artists.map(A=>A.name).join(", ")),1)])],8,wg)}),128))],2)])):R("",!0),w(e).getSearchPlaylists.length>0?(h(),g("div",Ag,[S[10]||(S[10]=l("h3",{class:"section-title"},"Playlists",-1)),l("div",{class:K(["releases-container",w(o).viewMode])},[(h(!0),g(j,null,ee(w(e).getSearchPlaylists,(T,P)=>{var x,D,A;return h(),g("div",{key:P,class:"song-item",onClick:O=>k(T)},[l("div",Cg,[l("img",{src:((D=(x=T.images)==null?void 0:x[0])==null?void 0:D.url)||"/default-playlist.png",alt:T.name,class:"cover-image"},null,8,Pg)]),l("div",xg,[l("div",Rg,M(T.name),1),l("div",Mg,M(((A=T.owner)==null?void 0:A.display_name)||"Playlist"),1)])],8,$g)}),128))],2)])):R("",!0)])):i.value&&!w(e).isLoading?(h(),g("div",Eg,S[11]||(S[11]=[l("div",{class:"empty-state-icon"},"🔍",-1),l("h3",{class:"empty-state-title"},"No results found",-1),l("p",{class:"empty-state-text"},"Try searching for something else",-1)]))):(h(),g("div",Ig,S[12]||(S[12]=[l("div",{class:"empty-state-icon"},"🎵",-1),l("h3",{class:"empty-state-title"},"Search Music",-1),l("p",{class:"empty-state-text"},"Find your favorite songs, artists, albums, and playlists",-1)])))]))}},Dg={key:0,class:"global-preloader"},zg={__name:"GlobalPreloader",setup(t){const e=ve(),s=E(()=>e.getIsGloballyLoading);return(r,o)=>s.value?(h(),g("div",Dg,o[0]||(o[0]=[l("div",{class:"global-preloader-content"},[l("div",{class:"global-preloader-spinner"}),l("div",{class:"global-preloader-text"},[l("span",{class:"loading waitingForConnection"},[Te("Loading"),l("span",null,"."),l("span",null,"."),l("span",null,".")])])],-1)]))):R("",!0)}},ra=_e(zg,[["__scopeId","data-v-b4e42ee3"]]),Ug={class:"mobile-layout"},Og={class:"sidebar-navigation"},Fg={class:"sidebar-section"},qg={class:"sidebar-section"},Vg={class:"sidebar-section"},Ng={class:"sidebar-section"},Hg={class:"mobile-main"},Bg={key:0},Kg={key:1},jg={key:2},Gg={key:3},Qg={key:4},Wg={key:5},Yg={key:6},Xg={key:7},Jg={key:8},Zg={key:9},ey={key:10},ty={__name:"MobileLayout",emits:["search"],setup(t,{emit:e}){const s=z(0);z("");const r=z(!1),o=pe(),{currentServiceType:n}=Jt(o),i=E(()=>n.value!=="deezer"),a=d=>{s.value=d},c=()=>{r.value=!r.value},u=()=>{r.value=!1};return ks(n,d=>{console.log("MobileLayout: Service changed to",d),d==="deezer"&&(s.value===2||s.value===3)&&(console.log("MobileLayout: Redirecting from Top Artists/Tracks to Playlists for Deezer"),a(1))},{immediate:!0}),Pe(async()=>{var f;await o.initializeServices();const d=(f=o.currentService)==null?void 0:f.serviceType;d&&d!==n.value&&(console.log("MobileLayout: Syncing service type from",n.value,"to",d),o.currentServiceType=d)}),(d,f)=>(h(),g("div",Ug,[l("header",{class:"mobile-header"},[l("div",{class:"header-content"},[l("button",{class:"hamburger-button",onClick:c},f[11]||(f[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"hamburger-icon"},[l("path",{"fill-rule":"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})],-1)])),f[12]||(f[12]=Ne('<div class="header-text"><h1 class="app-title"><img class="logo" src="'+kl+'" alt="Discover Mobily"><span class="ps-2"> Discover Mobily </span></h1><p class="app-subtitle">Your music discovery companion</p></div>',1))])]),l("aside",{class:K(["mobile-sidebar",{"sidebar-open":r.value}])},[l("nav",Og,[l("div",Fg,[f[16]||(f[16]=l("h3",{class:"sidebar-section-title"},"Your Music",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===1}]),onClick:f[0]||(f[0]=y=>{a(1),u()})},f[13]||(f[13]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Playlists",-1)]),2),i.value?(h(),g("button",{key:0,class:K(["sidebar-nav-item",{active:s.value===2}]),onClick:f[1]||(f[1]=y=>{a(2),u()})},f[14]||(f[14]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Top Artists",-1)]),2)):R("",!0),i.value?(h(),g("button",{key:1,class:K(["sidebar-nav-item",{active:s.value===3}]),onClick:f[2]||(f[2]=y=>{a(3),u()})},f[15]||(f[15]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"})],-1),l("span",{class:"sidebar-nav-label"},"Top Tracks",-1)]),2)):R("",!0)]),l("div",qg,[f[20]||(f[20]=l("h3",{class:"sidebar-section-title"},"Library",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===4}]),onClick:f[3]||(f[3]=y=>{a(4),u()})},f[17]||(f[17]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M11.584 2.376a.75.75 0 01.832 0l9 6a.75.75 0 11-.832 1.248L12 3.901 3.416 9.624a.75.75 0 01-.832-1.248l9-6z"}),l("path",{d:"M20.25 11.25v5.533c0 1.036-.84 1.875-1.875 1.875H5.625A1.875 1.875 0 013.75 16.783V11.25H2.25a.75.75 0 010-1.5h1.5V6.75c0-1.036.84-1.875 1.875-1.875h.75a.75.75 0 010 1.5h-.75a.375.375 0 00-.375.375v3.375h1.5a.75.75 0 010 1.5H3.75v5.533a.375.375 0 00.375.375h12.75a.375.375 0 00.375-.375V11.25h1.5a.75.75 0 010-1.5h-1.5V6.75a.375.375 0 00-.375-.375h-.75a.75.75 0 010-1.5h.75c1.036 0 1.875.84 1.875 1.875v3.375h1.5a.75.75 0 010 1.5z"})],-1),l("span",{class:"sidebar-nav-label"},"Saved Albums",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===5}]),onClick:f[4]||(f[4]=y=>{a(5),u()})},f[18]||(f[18]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M8.25 4.5a3.75 3.75 0 117.5 0v8.25a3.75 3.75 0 11-7.5 0V4.5z"}),l("path",{d:"M6 10.5a.75.75 0 01.75.75v1.5a5.25 5.25 0 1010.5 0v-1.5a.75.75 0 011.5 0v1.5a6.751 6.751 0 01-6 6.709v2.291h3a.75.75 0 010 1.5h-7.5a.75.75 0 010-1.5h3v-2.291a6.751 6.751 0 01-6-6.709v-1.5A.75.75 0 016 10.5z"})],-1),l("span",{class:"sidebar-nav-label"},"Saved Tracks",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===6}]),onClick:f[5]||(f[5]=y=>{a(6),u()})},f[19]||(f[19]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Followed Artists",-1)]),2)]),l("div",Vg,[f[24]||(f[24]=l("h3",{class:"sidebar-section-title"},"Discover",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===0}]),onClick:f[6]||(f[6]=y=>{a(0),u()})},f[21]||(f[21]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Search",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===7}]),onClick:f[7]||(f[7]=y=>{a(7),u()})},f[22]||(f[22]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"New Releases",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===8}]),onClick:f[8]||(f[8]=y=>{a(8),u()})},f[23]||(f[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Spotify Playlists",-1)]),2)]),l("div",Ng,[f[27]||(f[27]=l("h3",{class:"sidebar-section-title"},"Settings",-1)),l("button",{class:K(["sidebar-nav-item",{active:s.value===12}]),onClick:f[9]||(f[9]=y=>{a(12),u()})},f[25]||(f[25]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z"})],-1),l("span",{class:"sidebar-nav-label"},"Queue",-1)]),2),l("button",{class:K(["sidebar-nav-item",{active:s.value===11}]),onClick:f[10]||(f[10]=y=>{a(11),u()})},f[26]||(f[26]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"sidebar-nav-icon"},[l("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"})],-1),l("span",{class:"sidebar-nav-label"},"Profile",-1)]),2)])])],2),l("div",{class:K(["sidebar-overlay",{"overlay-active":r.value}]),onClick:u},null,2),l("main",Hg,[s.value===0?(h(),g("div",Bg,[Q(Lg)])):s.value===1?(h(),g("div",Kg,[Q(pm)])):s.value===2&&i.value?(h(),g("div",jg,[Q(wv)])):s.value===3&&i.value?(h(),g("div",Gg,[Q(Ev)])):s.value===4?(h(),g("div",Qg,[Q(Uv)])):s.value===5?(h(),g("div",Wg,[Q(Xv)])):s.value===6?(h(),g("div",Yg,[Q(Fv)])):s.value===7?(h(),g("div",Xg,[Q(Bm)])):s.value===8?(h(),g("div",Jg,[Q(E1)])):R("",!0),s.value===11?(h(),g("div",Zg,[Q(Ff)])):s.value===12?(h(),g("div",ey,[Ro(d.$slots,"queue",{},()=>[Q(pp)])])):R("",!0)]),Q($1,{num:s.value},null,8,["num"]),Q(ra)]))}};function sy(){const t=z("");return{search:t,clearSearch:()=>{t.value=""}}}const oo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAMlQTFRFAAAAfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19v5caSAAAAEN0Uk5TAA1w1vn834cYBQwSzf7//eGYjdc/BwM2m2/YGinwfu86C13ZjhsADgIETsZF0oxj5TyyMw+X9DJf5+Db+hYgoPb7tTQvpGkAAAB/SURBVHicLYjpGoFQAAVPCNE9FbKTbBVlV3bx/g+l+2V+zQwApVAsqeVKVasBdV1QGKRpNaDobLbsdscku+iJ/gDAcCRj7EwgcaezObTFEjmuBz/4O2wfq3WYpxdtsCV3+8wDiwcZzhE4ndU4wSW60rjdH4zDbD1f75T8fBPgB7lkDCCRTYbXAAAAAElFTkSuQmCC",ls={__name:"SortTracks",props:Ac(["full_width"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=un(t,"modelValue");return(s,r)=>(h(),g("div",{class:K(["sort-container py-2",{"w-100":t.full_width}])},[ge(l("select",{class:"modern-select w-100","onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o)},r[1]||(r[1]=[Ne('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="duration">Sort by duration</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="track">Sort by track name</option>',7)]),512),[[As,e.value]]),r[2]||(r[2]=l("div",{class:"select-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 10l5 5 5-5z"})])],-1))],2))}},ry={class:"seed-header"},oy={class:"seed-title"},ny={class:"title-text"},iy={class:"seed-actions"},ly={key:0,class:"lastfm-indicator"},ay={key:0,class:"lastfm-stats"},cy={class:"stat-item"},uy={class:"stat-number"},dy={class:"stat-item"},fy={class:"stat-number"},py={class:"stat-item"},my={class:"stat-number"},hy={class:"tracks-container"},vy=["onMouseover","onMouseleave","onClick"],gy={class:"track-overlay"},yy={class:"track-info"},wy={class:"track-artists"},by={class:"track-name"},ky=["preload","src"],_y={__name:"SeedTracks",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=z(),i=z(""),a=z(null),c=De(),u=E(()=>{const m=e.d.tracks||[];return i.value?[...m].sort((p,k)=>{switch(i.value){case"track":return p.name.localeCompare(k.name);case"album":return p.album.name.localeCompare(k.album.name);case"artist":return p.artists[0].name.localeCompare(k.artists[0].name);case"popularity":return k.popularity-p.popularity;case"release_date":return new Date(k.album.release_date)-new Date(p.album.release_date);case"duration":return p.duration_ms-k.duration_ms;default:return 0}}):m});function d(m){return pt(E(()=>m))}function f(){if(!e.d.tracks)return 0;const m=new Set;return e.d.tracks.forEach(p=>{p.artists&&p.artists.length>0&&m.add(p.artists[0].name)}),m.size}function y(){if(!e.d.tracks)return 0;const m=new Set;return e.d.tracks.forEach(p=>{p.album&&p.album.name&&m.add(p.album.name)}),m.size}function b(m){n.value=m}async function v(){try{console.log("Refreshing seed tracks for:",e.d.id),await o.getSeedTrackRecommendations(e.d,fe(e.num),e.d.parentKey)}catch(m){console.error("Failed to refresh seed tracks:",m)}}return Pe(async()=>{await at();const m=`seed_tracks_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(m,a),console.log("Showing SeedTracks component after registration:",m),c.showComponent(m)}),(m,p)=>(h(),g("div",{class:"modern-seed-tracks",ref_key:"componentRef",ref:a},[l("div",ry,[l("div",oy,[p[1]||(p[1]=l("span",{class:"title-icon"},"🎵",-1)),l("span",ny,"Recommended songs based on "+M(t.d.name),1)]),l("div",iy,[l("button",{class:"refresh-button",onClick:v},p[2]||(p[2]=[l("img",{class:"refresh-icon",src:oo,alt:"Refresh"},null,-1)])),Q(ls,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=k=>i.value=k)},null,8,["modelValue"])])]),w(lt)()==="deezer"?(h(),g("div",ly,[p[8]||(p[8]=Ne('<div class="lastfm-header" data-v-863f6c73><div class="lastfm-icon" data-v-863f6c73><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" data-v-863f6c73><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" data-v-863f6c73></path></svg></div><div class="lastfm-info" data-v-863f6c73><span class="lastfm-title" data-v-863f6c73>Powered by Last.fm</span><span class="lastfm-subtitle" data-v-863f6c73>Similar tracks discovered via Last.fm API</span></div></div>',1)),t.d.tracks&&t.d.tracks.length>0?(h(),g("div",ay,[l("div",cy,[l("span",uy,M(t.d.tracks.length),1),p[3]||(p[3]=l("span",{class:"stat-label"},"tracks found",-1))]),p[6]||(p[6]=l("div",{class:"stat-divider"},null,-1)),l("div",dy,[l("span",fy,M(f()),1),p[4]||(p[4]=l("span",{class:"stat-label"},"artists",-1))]),p[7]||(p[7]=l("div",{class:"stat-divider"},null,-1)),l("div",py,[l("span",my,M(y()),1),p[5]||(p[5]=l("span",{class:"stat-label"},"albums",-1))])])):R("",!0)])):R("",!0),l("div",hy,[(h(!0),g(j,null,ee(u.value,(k,_)=>(h(),g("div",{key:_,class:K(["media-card",d(k).displayClass.value,n.value===k.id?"selected":""]),style:$e(d(k).backgroundStyle.value),onMouseover:S=>d(k).hasPreview.value&&w(s).handleAudioHover(S),onMouseleave:S=>d(k).hasPreview.value&&w(s).handleAudioLeave(S),onClick:S=>{b(k.id),w(o).getTrackDetails(k,w(fe)(t.num),t.d.id),w(r).addToQueue(k)}},[l("div",gy,[l("div",yy,[l("div",wy,M(k.artists.map(S=>S.name).join(", ")),1),l("div",by,M(k.name),1)])]),l("audio",{preload:d(k).audioPreload.value,src:d(k).audioSrc.value},null,8,ky)],46,vy))),128))])],512))}},Sy=_e(_y,[["__scopeId","data-v-863f6c73"]]),Ty={key:0,class:"artist-section"},Ay={class:"deeper-header"},$y={class:"cover-overlay"},Cy={class:"artist-name"},Py=["preload","src"],xy={class:"artist-info"},Ry={class:"artist-title"},My={class:"artist-stats"},Ey={class:"followers-count"},Iy={key:0,class:"genres-section"},Ly={class:"gnr-list"},Dy={key:0,class:"separator"},zy={key:1,class:"separator"},Uy=["onClick"],Oy={class:"artist-actions"},Fy=["href"],qy={class:"follow-section"},Vy={class:"follow-checkbox"},Ny={class:"info-section"},Hy={key:0,class:"section-header py-2"},By={key:1,class:"albums-grid"},Ky=["onMouseover","onMouseleave","onClick"],jy={class:"track-overlay"},Gy={class:"track-name"},Qy=["preload","src"],Wy={key:2,class:"section-header py-2"},Yy={key:3,class:"albums-grid"},Xy=["onClick","onMouseover","onMouseleave"],Jy={class:"track-overlay"},Zy={class:"track-name"},e5=["preload","src"],t5={key:4,class:"section-header py-2"},s5={key:5,class:"albums-grid"},r5=["onClick","onMouseover","onMouseleave"],o5={class:"track-overlay"},n5={class:"track-name"},i5=["preload","src"],l5={key:6,class:"section-header py-2"},a5={key:7,class:"albums-grid"},c5=["onClick","onMouseover","onMouseleave"],u5={class:"track-overlay"},d5={class:"track-name"},f5=["preload","src"],p5={key:8,class:"section-header py-2"},m5={key:9,class:"albums-grid"},h5=["onClick","onMouseover","onMouseleave"],v5={class:"track-overlay"},g5={class:"track-name"},y5={key:0,class:"playlist-info"},w5={class:"playlist-owner"},b5=["preload","src"],k5={key:10,class:"section-header py-2"},_5={key:11,class:"albums-grid"},S5=["onMouseover","onMouseleave","onClick"],T5={class:"track-overlay"},A5={class:"track-name"},$5=["preload","src"],C5={__name:"TrackArtist",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=z(),i=z(null),a=De(),c=E(()=>e.d.data&&Array.isArray(e.d.data)&&e.d.data.find(T=>T.type==="trackartist")||e.d),u=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(T=>T.type==="top_tracks");return(S==null?void 0:S.tracks)||[]}return[]}),d=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(T=>T.type==="albums");return(S==null?void 0:S.items)||[]}return[]}),f=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(T=>T.type==="single");return(S==null?void 0:S.items)||[]}return[]}),y=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(T=>T.type==="appears_on");return(S==null?void 0:S.items)||[]}return[]}),b=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(T=>T.type==="playlists");return(S==null?void 0:S.items)||[]}return[]}),v=E(()=>{if(e.d.data&&Array.isArray(e.d.data)){const S=e.d.data.find(T=>T.type==="related-artists");return(S==null?void 0:S.artists)||[]}return[]});function m(S){return pt(E(()=>S))}function p(S){n.value=S}async function k(S){try{console.log("Following/unfollowing artist:",S.name),await o.followArtist(S.id,!S.followed),S.followed=!S.followed}catch(T){console.error("Failed to follow/unfollow artist:",T)}}async function _(S){try{console.log("Getting the sound of:",S.name),await o.getGenreRecommendations(S.name,fe(S.num))}catch(T){console.error("Failed to get genre recommendations:",T)}}return Pe(async()=>{var T,P;await at(),console.log("TrackArtist component mounted with props:",e.d);const S=`trackartist_${((T=e.d)==null?void 0:T.id)||"default"}${(P=e.d)!=null&&P.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering TrackArtist component with key:",S),a.registerComponent(S,i),console.log("Showing TrackArtist component after registration:",S),a.showComponent(S)}),(S,T)=>{var P,x,D;return h(),g("div",{class:"modern-track-artist",ref_key:"componentRef",ref:i},[c.value?(h(),g("div",Ty,[l("div",Ay,[l("div",{class:K(["artist-cover",m(c.value).displayClass.value]),style:$e(m(c.value).backgroundStyle.value),onMouseover:T[0]||(T[0]=A=>m(c.value).hasPreview.value&&w(s).handleAudioHover(A)),onMouseleave:T[1]||(T[1]=A=>m(c.value).hasPreview.value&&w(s).handleAudioLeave(A))},[l("div",$y,[l("div",Cy,M(c.value.name),1)]),l("audio",{preload:m(c.value).audioPreload.value,src:m(c.value).audioSrc.value},null,8,Py)],38),l("div",xy,[l("h2",Ry,M(c.value.name),1),l("div",My,[l("span",Ey,M((x=(P=c.value.followers)==null?void 0:P.total)==null?void 0:x.toLocaleString())+" followers",1)]),c.value.genres&&c.value.genres.length>0?(h(),g("div",Iy,[l("div",Ly,[(h(!0),g(j,null,ee(c.value.genres,(A,O)=>(h(),g(j,{key:"genre-"+O},[c.value.genres.length>1&&c.value.genres.length-1===O?(h(),g("span",Dy,"&")):R("",!0),c.value.genres.length>=2&&c.value.genres.length-1!==O&&O!==0?(h(),g("span",zy,",")):R("",!0),l("button",{class:"genre-tag",onClick:L=>_({name:A,num:t.num,sib:"trackartist",child:!1})},M(A),9,Uy)],64))),128))])])):R("",!0)]),l("div",Oy,[l("button",{class:"action-button",onClick:T[2]||(T[2]=A=>w(o).getSeedArtistRecommendations(c.value,w(fe)(t.num),t.d.id))},T[7]||(T[7]=[l("span",{class:"btn-icon"},"🎵",-1),Te(" Recommended artists songs based on this ",-1)])),l("a",{class:K(w(lt)()+"-link"),href:(D=c.value.external_urls)==null?void 0:D.spotify,target:"_blank",rel:"noopener"},[T[8]||(T[8]=l("span",{class:"link-icon"},"🎧",-1)),Te(" Open in "+M(w(lt)().charAt(0).toUpperCase()+w(lt)().slice(1)),1)],10,Fy),l("div",qy,[T[10]||(T[10]=l("span",{class:"follow-label"},"Follow",-1)),l("label",Vy,[c.value.followed?ge((h(),g("input",{key:0,type:"checkbox",onClickOnce:T[3]||(T[3]=A=>k(c.value)),checked:"","onUpdate:modelValue":T[4]||(T[4]=A=>c.value.followed=A)},null,544)),[[Gt,c.value.followed]]):ge((h(),g("input",{key:1,type:"checkbox",onClickOnce:T[5]||(T[5]=A=>k(c.value)),"onUpdate:modelValue":T[6]||(T[6]=A=>c.value.followed=A)},null,544)),[[Gt,c.value.followed]]),T[9]||(T[9]=l("span",{class:"checkmark"},null,-1))])])])])])):R("",!0),l("div",Ny,[u.value.length>0?(h(),g("div",Hy,T[11]||(T[11]=[l("h3",{class:"section-title"},"Top tracks",-1)]))):R("",!0),u.value.length>0?(h(),g("div",By,[(h(!0),g(j,null,ee(u.value,(A,O)=>(h(),g("div",{key:O,class:K(["track-card",m(A).displayClass.value,n.value===A.id?"selected":""]),style:$e(m(A).backgroundStyle.value),onMouseover:L=>m(A).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(A).hasPreview.value&&w(s).handleAudioLeave(L),onClick:L=>{p(A.id),w(o).getTrackDetails(A,w(fe)(t.num),t.d.id),w(r).addToQueue(A)}},[l("div",jy,[l("div",Gy,M(A.name),1)]),l("audio",{preload:m(A).audioPreload.value,src:m(A).audioSrc.value},null,8,Qy)],46,Ky))),128))])):R("",!0),d.value.length>0?(h(),g("div",Wy,T[12]||(T[12]=[l("h3",{class:"section-title"},"Albums",-1)]))):R("",!0),d.value.length>0?(h(),g("div",Yy,[(h(!0),g(j,null,ee(d.value,(A,O)=>(h(),g("div",{key:O},[l("div",{class:K(["track-card",m(A).displayClass.value,n.value===A.id?"selected":""]),style:$e(m(A).backgroundStyle.value),onClick:L=>{p(A.id),w(o).getAlbumDetails(A,w(fe)(t.num),t.d.id)},onMouseover:L=>m(A).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(A).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",Jy,[l("div",Zy,M(A.name),1)]),l("audio",{preload:m(A).audioPreload.value,src:m(A).audioSrc.value},null,8,e5)],46,Xy)]))),128))])):R("",!0),f.value.length>0?(h(),g("div",t5,T[13]||(T[13]=[l("h3",{class:"section-title"},"Singles",-1)]))):R("",!0),f.value.length>0?(h(),g("div",s5,[(h(!0),g(j,null,ee(f.value,(A,O)=>(h(),g("div",{key:O},[l("div",{class:K(["track-card",m(A).displayClass.value,n.value===A.id?"selected":""]),style:$e(m(A).backgroundStyle.value),onClick:L=>{p(A.id),w(o).getAlbumDetails(A,w(fe)(t.num),t.d.id)},onMouseover:L=>m(A).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(A).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",o5,[l("div",n5,M(A.name),1)]),l("audio",{preload:m(A).audioPreload.value,src:m(A).audioSrc.value},null,8,i5)],46,r5)]))),128))])):R("",!0),y.value.length>0?(h(),g("div",l5,T[14]||(T[14]=[l("h3",{class:"section-title"},"Appears on",-1)]))):R("",!0),y.value.length>0?(h(),g("div",a5,[(h(!0),g(j,null,ee(y.value,(A,O)=>(h(),g("div",{key:O},[l("div",{class:K(["track-card",m(A).displayClass.value,n.value===A.id?"selected":""]),style:$e(m(A).backgroundStyle.value),onClick:L=>{p(A.id),w(o).getAlbumDetails(A,w(fe)(t.num),t.d.id)},onMouseover:L=>m(A).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(A).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",u5,[l("div",d5,M(A.name),1)]),l("audio",{preload:m(A).audioPreload.value,src:m(A).audioSrc.value},null,8,f5)],46,c5)]))),128))])):R("",!0),b.value.length>0?(h(),g("div",p5,T[15]||(T[15]=[l("h3",{class:"section-title"},"Featured in Playlists",-1)]))):R("",!0),b.value.length>0?(h(),g("div",m5,[(h(!0),g(j,null,ee(b.value,(A,O)=>(h(),g("div",{key:O},[l("div",{class:K(["track-card",m(A).displayClass.value,n.value===A.id?"selected":""]),style:$e(m(A).backgroundStyle.value),onClick:L=>{p(A.id),w(o).getPlaylistDetails(A,w(fe)(t.num),t.d.id)},onMouseover:L=>m(A).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(A).hasPreview.value&&w(s).handleAudioLeave(L)},[l("div",v5,[l("div",g5,M(A.name),1),A.owner?(h(),g("div",y5,[l("span",w5,"by "+M(A.owner.display_name),1)])):R("",!0)]),l("audio",{preload:m(A).audioPreload.value,src:m(A).audioSrc.value},null,8,b5)],46,h5)]))),128))])):R("",!0),v.value.length>0?(h(),g("div",k5,T[16]||(T[16]=[l("h3",{class:"section-title"},"Related Artists",-1)]))):R("",!0),v.value.length>0?(h(),g("div",_5,[(h(!0),g(j,null,ee(v.value,(A,O)=>(h(),g("div",{key:O,class:K(["track-card",m(A).displayClass.value,n.value===A.id?"selected":""]),style:$e(m(A).backgroundStyle.value),onMouseover:L=>m(A).hasPreview.value&&w(s).handleAudioHover(L),onMouseleave:L=>m(A).hasPreview.value&&w(s).handleAudioLeave(L),onClick:L=>{p(A.id),w(o).getArtistDetails(A,w(fe)(t.num),t.d.id)}},[l("div",T5,[l("div",A5,M(A.name),1)]),l("audio",{preload:m(A).audioPreload.value,src:m(A).audioSrc.value},null,8,$5)],46,S5))),128))])):R("",!0)])],512)}}},P5={class:"track-overlay"},x5={class:"track-info"},R5={class:"track-name"},M5=["preload","src"],no={__name:"TrackCover",props:["d","cover"],setup(t){const e=t,s=ye(),{displayClass:r,backgroundStyle:o,audioPreload:n,audioSrc:i,hasPreview:a}=pt(E(()=>e.d),E(()=>e.cover));return(c,u)=>(h(),g("div",{class:K(["artist-cover",w(r)]),style:$e(w(o)),onMouseover:u[0]||(u[0]=d=>w(a)&&w(s).handleAudioHover(d)),onMouseleave:u[1]||(u[1]=d=>w(a)&&w(s).handleAudioLeave(d))},[l("div",P5,[l("div",x5,[l("div",R5,M(t.d.name),1)])]),l("audio",{preload:w(n),src:w(i)},null,8,M5)],38))}},E5={key:1,class:"deeper-header p-4"},I5={class:"track-info"},L5={class:"track-title"},D5={class:"artists-section"},z5={class:"artists-list"},U5={key:0,class:"separator"},O5={key:1,class:"separator"},F5={class:"artist-item"},q5=["onClick"],V5=["href"],N5={__name:"DeeperTracks",props:["d","num"],setup(t){const e=t,s=pe();ye(),ze();const r=ve(),{currentServiceType:o}=Jt(s);E(()=>o.value!=="deezer"),z();const n=z(null),i=z(null),a=z(!1),{isLoading:c,loadingMessage:u,withLoading:d}=ea({message:"Loading track details..."}),f=De(),y=async()=>{try{r.setGlobalLoading(!0);const v=fe(e.num);await r.getSeedTrackRecommendations(e.d,v,e.d.id)}catch(v){console.error("Failed to get recommendations:",v),alert("Failed to load recommendations. Please try again.")}finally{r.setGlobalLoading(!1)}};function b(){console.log(e.d),e.d.album&&e.d.album.images?n.value=e.d.album.images[0]:e.d.images?n.value=e.d.images[0]:e.d.track&&e.d.track.album&&e.d.track.album.images&&e.d.track.album.images[0]&&(n.value=e.d.track.album.images[0]),console.log(n.value)}return Pe(async()=>{await d(async()=>{var m,p;b(),await at();const v=`${e.d.type}_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering component with ref:",i.value),console.log("Ref element:",(m=i.value)==null?void 0:m.tagName,(p=i.value)==null?void 0:p.className),console.log("Registering with key:",v),f.registerComponent(v,i),console.log("Showing component after registration:",v),f.showComponent(v)},{message:"Initializing track view..."})}),a.value=window.innerWidth<768,window.addEventListener("resize",()=>{a.value=window.innerWidth<768}),(v,m)=>{var p;return h(),g("div",{class:"modern-track-card",ref_key:"componentRef",ref:i},[w(c)?(h(),J(sa,{key:0,message:w(u),variant:"default"},null,8,["message"])):(h(),g("div",E5,[Q(no,{d:t.d,cover:n.value},null,8,["d","cover"]),l("div",I5,[l("h3",L5,M(t.d.name),1),l("div",D5,[m[0]||(m[0]=l("span",{class:"artists-label"},"By",-1)),l("div",z5,[(h(!0),g(j,null,ee(t.d.artists,(k,_)=>(h(),g(j,{key:_},[t.d.artists.length>1&&t.d.artists.length-1===_?(h(),g("div",U5,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==_&&_!==0?(h(),g("div",O5,",")):R("",!0),l("div",F5,[l("button",{class:"artist-link",onClick:S=>w(r).getArtistDetails(k,w(fe)(t.num),t.d.id)},M(k.name),9,q5)])],64))),128))])])]),l("div",{class:K(["artist-actions",{"grid-column-2":a.value}])},[l("button",{class:"action-button",onClick:y},m[1]||(m[1]=[l("span",{class:"btn-icon"},"🎵",-1),Te(" Recommended songs based on this ",-1)])),l("a",{class:K(w(lt)()+"-link"),href:(p=t.d.external_urls)==null?void 0:p.spotify,target:"_blank",rel:"noopener"},[m[2]||(m[2]=l("span",{class:"link-icon"},"🎧",-1)),Te(" Open in "+M(w(lt)().charAt(0).toUpperCase()+w(lt)().slice(1)),1)],10,V5)],2)]))],512)}}},H5=_e(N5,[["__scopeId","data-v-c28dab80"]]),B5={class:"deeper-header"},K5={class:"track-info"},j5={class:"track-title"},G5={class:"artists-section"},Q5={class:"artists-list"},W5={key:0,class:"separator"},Y5={key:1,class:"separator"},X5={class:"artist-item"},J5=["onClick"],Z5={class:"release-date"},ew={class:"tracks-section"},tw={class:"tracks-container"},sw=["onMouseover","onMouseleave","onClick"],rw={class:"album-overlay"},ow={class:"album-name"},nw=["preload","src"],iw={__name:"DeeperAlbum",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=z(),i=z([]),a=z(null),c=De();function u(y){var b;return pt(E(()=>y),(b=e.d.images)==null?void 0:b[0])}function d(y){n.value=y}function f(){e.d.tracks&&e.d.tracks.items?i.value=e.d.tracks.items:e.d.tracks?i.value=e.d.tracks:e.d.items&&(i.value=e.d.items)}return Pe(async()=>{f(),await at();const y=`deeperalbum_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(y,a),console.log("Showing DeeperAlbum component after registration:",y),c.showComponent(y)}),(y,b)=>(h(),g("div",{class:"modern-album-card",ref_key:"componentRef",ref:a},[l("div",B5,[Q(no,{d:t.d,cover:t.d.images[0]},null,8,["d","cover"]),l("div",K5,[l("h3",j5,M(t.d.name),1),l("div",G5,[b[0]||(b[0]=l("span",{class:"artists-label"},"By",-1)),l("div",Q5,[(h(!0),g(j,null,ee(t.d.artists,(v,m)=>(h(),g(j,{key:m},[t.d.artists.length>1&&t.d.artists.length-1===m?(h(),g("div",W5,"&")):R("",!0),t.d.artists.length>=2&&t.d.artists.length-1!==m&&m!==0?(h(),g("div",Y5,",")):R("",!0),l("div",X5,[l("button",{class:"artist-link",onClick:p=>w(o).getArtistDetails(v,w(fe)(t.num),t.d.id)},M(v.name),9,J5)])],64))),128))])]),l("div",Z5,[b[1]||(b[1]=l("span",{class:"meta-icon"},"📅",-1)),l("span",null,M(t.d.release_date),1)]),b[2]||(b[2]=l("div",{class:"album-actions"},null,-1))])]),l("div",ew,[b[3]||(b[3]=l("div",{class:"tracks-header"},[l("span",{class:"tracks-icon"},"🎵"),l("h3",{class:"tracks-title"},"Tracks")],-1)),l("div",tw,[(h(!0),g(j,null,ee(i.value,(v,m)=>(h(),g("div",{key:m,class:K(["media-card",u(v).displayClass.value,n.value===v.id?"selected":""]),style:$e(u(v).backgroundStyle.value),onMouseover:p=>u(v).hasPreview.value&&w(s).handleAudioHover(p),onMouseleave:p=>u(v).hasPreview.value&&w(s).handleAudioLeave(p),onClick:p=>{d(v.id),w(o).getTrackDetails(v,w(fe)(t.num),t.d.id),w(r).addToQueue(v)}},[l("div",rw,[l("div",ow,M(v.name),1)]),l("audio",{preload:u(v).audioPreload.value,src:u(v).audioSrc.value},null,8,nw)],46,sw))),128))])])],512))}},lw=_e(iw,[["__scopeId","data-v-917516fd"]]),aw={class:"seed-header"},cw={class:"seed-title"},uw={class:"title-text"},dw={class:"seed-actions"},fw={class:"tracks-container"},pw=["onMouseover","onMouseleave","onClick"],mw={class:"track-overlay"},hw={class:"track-info"},vw={class:"track-artists"},gw={class:"track-name"},yw=["preload","src"],ww={__name:"SeedArtists",props:["d","num"],setup(t){const e=t;pe();const s=ye(),r=ze(),o=ve(),n=z(),i=z(""),a=z(null),c=De(),u=E(()=>{const b=e.d.tracks||[];return i.value?[...b].sort((v,m)=>{switch(i.value){case"track":return v.name.localeCompare(m.name);case"album":return v.album.name.localeCompare(m.album.name);case"artist":return v.artists[0].name.localeCompare(m.artists[0].name);case"popularity":return m.popularity-v.popularity;case"release_date":return new Date(m.album.release_date)-new Date(v.album.release_date);case"duration":return v.duration_ms-m.duration_ms;default:return 0}}):b});function d(b){return pt(E(()=>b))}function f(b){n.value=b}async function y(){try{console.log("Refreshing seed artists for:",e.d.id),await o.getSeedArtistRecommendations(e.d,fe(e.num),e.d.parentKey)}catch(b){console.error("Failed to refresh seed artists:",b)}}return Pe(async()=>{await at();const b=`seed_artists_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;c.registerComponent(b,a),console.log("Showing SeedArtists component after registration:",b),c.showComponent(b)}),(b,v)=>(h(),g("div",{class:"modern-seed-artists",ref_key:"componentRef",ref:a},[l("div",aw,[l("div",cw,[v[1]||(v[1]=l("span",{class:"title-icon"},"🎵",-1)),l("span",uw,"Recommended songs based on "+M(t.d.name),1)]),l("div",dw,[l("button",{class:"refresh-button",onClick:y},v[2]||(v[2]=[l("img",{class:"refresh-icon",src:oo,alt:"Refresh"},null,-1)])),Q(ls,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=m=>i.value=m)},null,8,["modelValue"])])]),l("div",fw,[(h(!0),g(j,null,ee(u.value,(m,p)=>(h(),g("div",{key:p,class:K(["media-card",d(m).displayClass.value,n.value===m.id?"selected":""]),style:$e(d(m).backgroundStyle.value),onMouseover:k=>d(m).hasPreview.value&&w(s).handleAudioHover(k),onMouseleave:k=>d(m).hasPreview.value&&w(s).handleAudioLeave(k),onClick:k=>{f(m.id),w(o).getTrackDetails(m,w(fe)(t.num),t.d.id),w(r).addToQueue(m)}},[l("div",mw,[l("div",hw,[l("div",vw,M(m.artists.map(k=>k.name).join(", ")),1),l("div",gw,M(m.name),1)])]),l("audio",{preload:d(m).audioPreload.value,src:d(m).audioSrc.value},null,8,yw)],46,pw))),128))])],512))}},bw=_e(ww,[["__scopeId","data-v-3ac9f0d6"]]),kw={class:"track-overlay"},_w={class:"track-info"},Sw={class:"track-artists"},Tw={class:"track-name"},Aw=["preload","src"],$w={__name:"PlaylistTrackItem",props:{track:{type:Object,required:!0},trackItem:{type:Object,required:!0},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=p=>Ps.formatArtistNamesSimple(p),{hasPreview:n,hasImage:i,displayClass:a,backgroundStyle:c,audioPreload:u,audioSrc:d}=pt(E(()=>s.track)),f=p=>{r("click",s.trackItem,p)},y=p=>{r("hover",p)},b=p=>{r("leave",p)},v=E(()=>n.value&&i.value?!0:i.value&&!n.value?s.unplayableTracks:n.value&&!i.value?!0:s.unplayableTracks),m=E(()=>{const p="media-card",k=s.selected?"selected":"";return`${p} ${a.value} ${k}`.trim()});return(p,k)=>v.value?(h(),g("div",{key:0,tabindex:"0",class:K(m.value),style:$e(w(c)),onClick:Ht(f,["stop"]),onMouseover:y,onMouseleave:b},[l("div",kw,[l("div",_w,[l("div",Sw,M(o(t.track.artists)),1),l("div",Tw,M(t.track.name),1)])]),l("audio",{preload:w(u),src:w(d)},null,8,Aw)],38)):R("",!0)}},Cw={key:1},Pw=["src"],xw={class:"playlist-info"},Rw={class:"playlist-title-section"},Mw={class:"playlist-title"},Ew=["innerHTML"],Iw={key:0,class:"playlist-meta"},Lw={key:1,class:"playlist-meta"},Dw={key:2,class:"playlist-meta"},zw={key:3,class:"follow-section"},Uw={class:"follow-checkbox"},Ow=["href"],Fw={class:"tracks-container"},qw={__name:"DeeperPlaylist",props:["d","num"],setup(t){var T;const e=t,s=pe(),r=ye(),o=ze(),n=ve(),{currentServiceType:i}=Jt(s),a=z(),c=z(""),u=z(null),d=De(),f=E(()=>{var x;const P=((x=e.d.tracks)==null?void 0:x.items)||e.d.tracks||[];return console.log("DeeperPlaylist items:",P,"props.d:",e.d),c.value?[...P].sort((D,A)=>{const O=D.track||D,L=A.track||A;switch(c.value){case"track":return O.name.localeCompare(L.name);case"album":return O.album.name.localeCompare(L.album.name);case"artist":return O.artists[0].name.localeCompare(L.artists[0].name);case"popularity":return L.popularity-O.popularity;case"release_date":return new Date(L.album.release_date)-new Date(O.album.release_date);case"duration":return O.duration_ms-L.duration_ms;default:return 0}}):P}),{image:y,hasImage:b}=pt(E(()=>e.d),(T=e.images)==null?void 0:T[0]);function v(P){a.value=P}const m=P=>{emit("refresh",P)};function p(P,x){const D=P.track||P;v(D.id),n.getTrackDetails(P,fe(e.num),e.d.id),o.addToQueue(D)}function k(){e.d.owner&&e.d.owner.id&&n.getUserPlaylists(e.d.owner,fe(e.num),e.d.id)}Pe(()=>{const P=`deeperplaylist_${e.d.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;d.registerComponent(P,u),u.value&&(u.value.style.display="none")});const _=P=>({[te.SPOTIFY]:"/img/spotify-icon.svg",[te.DEEZER]:"/img/deezer-icon.svg",[te.TIDAL]:"/img/tidal-icon.svg"})[P]||"/img/default-service-icon.svg",S=E(()=>_(i.value));return(P,x)=>{var D;return h(),g(j,null,[l("div",{class:"deeper-header",ref_key:"componentRef",ref:u},[l("div",null,[w(b)?(h(),J(no,{key:0,d:t.d,cover:w(y)},null,8,["d","cover"])):(h(),g("div",Cw,[l("img",{src:S.value},null,8,Pw)]))]),l("div",xw,[l("div",Rw,[l("h2",Mw,M(t.d.name),1),l("button",{class:"refresh-button",onClick:m},x[4]||(x[4]=[l("img",{class:"refresh-icon",src:oo,alt:"Refresh"},null,-1)]))]),l("div",{class:"playlist-description",innerHTML:t.d.description},null,8,Ew),t.d.owner?(h(),g("div",Iw,[l("span",{class:"playlist-owner clickable-owner",onClick:k}," By "+M(t.d.owner.display_name),1)])):R("",!0),t.d.tracks&&t.d.tracks.total?(h(),g("div",Lw,M(t.d.tracks.total)+" tracks ",1)):R("",!0),t.d.public!==void 0?(h(),g("div",Dw,M(t.d.public?"Public":"Private"),1)):R("",!0),w(le).currentServiceType!=="deezer"?(h(),g("div",zw,[x[6]||(x[6]=l("span",{class:"follow-label"},"Follow",-1)),l("label",Uw,[ge(l("input",{type:"checkbox","onUpdate:modelValue":x[0]||(x[0]=A=>t.d.followed=A),disabled:""},null,512),[[Gt,t.d.followed]]),x[5]||(x[5]=l("span",{class:"checkmark"},null,-1))])])):R("",!0)]),l("div",null,[l("a",{class:K(w(lt)()+"-link"),href:(D=t.d.external_urls)==null?void 0:D.spotify,target:"_blank",rel:"noopener"},[x[7]||(x[7]=l("span",{class:"link-icon"},"🎧",-1)),Te(" Open in "+M(w(lt)().charAt(0).toUpperCase()+w(lt)().slice(1)),1)],10,Ow),Q(ls,{modelValue:c.value,"onUpdate:modelValue":x[1]||(x[1]=A=>c.value=A),full_width:!0},null,8,["modelValue"])])],512),l("div",Fw,[(h(!0),g(j,null,ee(f.value,(A,O)=>(h(),g(j,{key:O},[A.track||A.id?(h(),J($w,{key:0,track:A.track||A,"track-item":A,onClick:p,onHover:x[2]||(x[2]=L=>w(r).handleAudioHover(L)),onLeave:x[3]||(x[3]=L=>w(r).handleAudioLeave(L))},null,8,["track","track-item"])):R("",!0)],64))),128))])],64)}}},pi=_e(qw,[["__scopeId","data-v-e293cec1"]]),Vw={class:"track-overlay"},Nw={class:"track-info"},Hw={class:"track-name"},Bw={key:0,class:"track-meta"},Kw=["preload","src"],jw={__name:"PlaylistPreview",props:{playlist:{type:Object,required:!0}},emits:["click"],setup(t,{emit:e}){const s=t,r=e,o=ye(),n=z(null),{displayClass:i,backgroundStyle:a,audioPreload:c,audioSrc:u,hasPreview:d}=pt(E(()=>s.playlist),E(()=>s.playlist.images[0])),f=()=>{r("click",s.playlist)},y=v=>{d&&n.value&&o.handleAudioHover(v)},b=v=>{d&&n.value&&o.handleAudioLeave(v)};return(v,m)=>(h(),g("div",{class:K(["media-card",w(i)]),style:$e(w(a)),onClick:f,onMouseover:y,onMouseleave:b},[l("div",Vw,[l("div",Nw,[l("div",Hw,M(t.playlist.name),1),t.playlist.totalTracks?(h(),g("div",Bw,M(t.playlist.totalTracks)+" tracks ",1)):R("",!0)])]),l("audio",{preload:w(c),src:w(u),ref_key:"audioElement",ref:n},null,8,Kw)],38))}},Gw={class:"deeper-header"},Qw={class:"track-info"},Ww={class:"track-title"},Yw={class:"release-date"},Xw={class:"releases-container grid"},Jw={key:0,class:"empty-state"},Zw={__name:"UserPlaylists",props:["d","num"],setup(t){const e=t,s=pe();ye(),ze();const r=ve(),{currentServiceType:o}=Jt(s),n=z(),i=z(null),{displayClass:a}=pt(E(()=>e.d)),c=De();function u(f){n.value=f}function d(f){u(f.id),r.getPlaylistDetails(f,fe(e.num),e.d.id)}return E(()=>{const f="media-card",y=e.selected?"selected":"";return`${f} ${a.value} ${y}`.trim()}),Pe(()=>{const f=`user-playlists_${e.d.owner.id}${e.d.parentKey?`__p:${e.d.parentKey}__`:""}`;console.log("Registering UserPlaylists component with key:",f),c.registerComponent(f,i),console.log("Showing UserPlaylists component after registration:",f),c.showComponent(f)}),(f,y)=>(h(),g("div",{class:"modern-track-card",ref_key:"componentRef",ref:i},[l("div",Gw,[Q(no,{d:t.d,cover:t.d.owner.picture_medium},null,8,["d","cover"]),l("div",Qw,[l("h3",Ww,M(t.d.name),1),l("div",Yw,M(t.d.playlists.length)+" playlists ",1),y[0]||(y[0]=l("div",{class:"album-actions"},null,-1))])]),l("div",Xw,[(h(!0),g(j,null,ee(t.d.playlists,(b,v)=>(h(),J(jw,{key:v,playlist:b,onClick:d},null,8,["playlist"]))),128))]),t.d.playlists.length===0?(h(),g("div",Jw,y[1]||(y[1]=[l("div",{class:"empty-icon"},"🎵",-1),l("h3",null,"No playlists found",-1),l("p",null,"This user doesn't have any public playlists.",-1)]))):R("",!0)],512))}},eb=_e(Zw,[["__scopeId","data-v-78d51735"]]),tb={class:"modern-recommendations"},sb={class:"rec_track"},rb={__name:"RecTrack",props:["num"],setup(t){const e=t,s=ve();function r(){const o=fe(e.num),n=s.getSectionData(o);console.log("RecTrack - Num:",e.num,"Section name:",o,"Data length:",n.length,"Data:",n),s.setCurrentSection(o);const i=n.map(a=>a.type);return console.log("RecTrack: Will render components of types:",i),n}return(o,n)=>(h(),g("div",tb,[l("div",sb,[(h(!0),g(j,null,ee(r(),(i,a)=>(h(),g(j,{key:`${i.type}_${i.id}${i.parentKey?`__p:${i.parentKey}__`:""}`},[i.type==="seed_tracks"?(h(),J(Sy,{key:0,d:i,num:t.num},null,8,["d","num"])):i.type==="trackartist"?(h(),J(C5,{key:1,d:i,num:t.num},null,8,["d","num"])):i.type==="deepertracks"?(h(),J(H5,{key:2,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperalbum"?(h(),J(lw,{key:3,d:i,num:t.num},null,8,["d","num"])):i.type==="seed_artists"?(h(),J(bw,{key:4,d:i,num:t.num},null,8,["d","num"])):i.type==="deeperplaylist"?(h(),J(pi,{key:5,d:i,num:t.num},null,8,["d","num"])):i.type==="user-playlists"?(h(),J(eb,{key:6,d:i,num:t.num},null,8,["d","num"])):i.type==="category-playlist"?(h(),J(pi,{key:7,d:i,num:t.num},null,8,["d","num"])):R("",!0)],64))),128))])]))}},ob={},nb={style:{width:"100%"},id:"loader",class:"loading waitingForConnection"};function ib(t,e){return h(),g("div",nb,e[0]||(e[0]=[Te("Loading",-1),l("span",null,".",-1),l("span",null,".",-1),l("span",null,".",-1)]))}const Pt=_e(ob,[["render",ib]]),lb={class:"current-service"},ab=["src","alt"],cb={class:"service-name"},ub={key:0,class:"service-dropdown"},db={class:"service-list"},fb=["src","alt"],pb={class:"option-name"},mb={key:0,class:"current-badge"},hb={key:1,class:"coming-soon-badge"},vb={__name:"ServiceIndicator",emits:["openServiceSelector"],setup(t,{emit:e}){const s=e,r=pe(),o=z(!1),n=z([]),i=z(te.SPOTIFY),a=[te.SPOTIFY,te.DEEZER,te.APPLE,te.YOUTUBE],c=E(()=>r.currentServiceName),u=E(()=>v(i.value));Pe(async()=>{await r.initializeServices(),n.value=r.availableServices,i.value=r.currentServiceType,document.addEventListener("click",d)}),Nt(()=>{document.removeEventListener("click",d)});const d=k=>{k.target.closest(".service-indicator")||(o.value=!1)},f=()=>{o.value=!o.value},y=()=>{o.value=!1},b=k=>a.includes(k),v=k=>({[te.SPOTIFY]:"/img/spotify-icon.svg",[te.DEEZER]:"/img/deezer-icon.svg",[te.TIDAL]:"/img/tidal-icon.svg",[te.APPLE]:"/img/apple-music-icon.svg",[te.YOUTUBE]:"/img/youtube-music-icon.svg"})[k]||"/img/default-service-icon.svg",m=()=>{o.value=!1,s("openServiceSelector")},p=k=>{k.target.src="/img/default-service-icon.svg"};return(k,_)=>(h(),g("div",{class:"service-indicator",onClick:f},[l("div",lb,[l("img",{src:u.value,alt:c.value,class:"service-logo",onError:p},null,40,ab),l("span",cb,M(c.value),1),l("i",{class:K(["dropdown-arrow",{open:o.value}])},"▼",2)]),o.value?(h(),g("div",ub,[l("div",{class:"dropdown-header"},[_[0]||(_[0]=l("h4",null,"Switch Music Service",-1)),l("button",{onClick:y,class:"close-btn"},"×")]),l("div",db,[(h(!0),g(j,null,ee(n.value,S=>(h(),g("div",{key:S.type,class:K(["service-option",{active:S.type===i.value,disabled:!b(S.type)}])},[l("img",{src:v(S.type),alt:S.name,class:"option-icon",onError:p},null,40,fb),l("span",pb,M(S.name),1),S.type===i.value?(h(),g("span",mb,"Current")):b(S.type)?R("",!0):(h(),g("span",hb,"Soon"))],2))),128))]),l("div",{class:"dropdown-footer"},[l("button",{onClick:m,class:"manage-services-btn"}," Manage Services ")])])):R("",!0)]))}},gb=_e(vb,[["__scopeId","data-v-a7f8ee68"]]),yb={class:"modern-footer"},wb={class:"footer-container"},bb={class:"footer-content"},kb={class:"footer-section"},_b={class:"copyright"},Sb={class:"service-section"},Tb={__name:"Footer",emits:["openServiceSelector"],setup(t,{emit:e}){const s=e,r=new Date().getFullYear(),o=()=>{s("openServiceSelector")};return(n,i)=>(h(),g("footer",yb,[l("div",wb,[l("div",bb,[l("div",kb,[l("span",_b," 2021-"+M(w(r))+" Discover Mobily",1)]),i[0]||(i[0]=l("div",{class:"footer-section"},[l("div",{class:"footer-links"},[l("span",{class:"inspired-text"},"Inspired by"),l("a",{href:"https://discoverquickly.com/",class:"inspiration-link",target:"_blank",rel:"noopener"}," Discover Quickly ")])],-1)),l("div",Sb,[Q(gb,{onOpenServiceSelector:o})]),i[1]||(i[1]=l("div",{class:"footer-section"},[l("a",{href:"https://github.com/vitokorn/vue-quickly",class:"github-link",target:"_blank",rel:"noopener","aria-label":"View source code on GitHub"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",fill:"currentColor"},[l("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})])])],-1))])])]))}},Ab=_e(Tb,[["__scopeId","data-v-b6a6f5c7"]]),$b={class:"modern-tabs"},Cb={class:"tabs-list"},Pb=["id","onClick"],xb={class:"tab-content"},Rb={class:"tabs-tab-icon"},Mb={class:"tabs-tab-text"},Eb={class:"tab-item search-tab",id:"srch"},Ib={class:"search-container"},Lb={__name:"ModernTabs",props:{selectedTab:{type:Number,required:!0}},emits:["tab-click","search"],setup(t,{emit:e}){const s=z(""),r=pe(),{currentServiceType:o}=Jt(r),n=e,i=E(()=>[{id:"option1",value:1,icon:"📁",text:"Your Playlists"},{id:"option2",value:2,icon:"👤",text:"Top Artists"},{id:"option3",value:3,icon:"🎵",text:"Top Tracks"},{id:"option4",value:4,icon:"💿",text:"Saved Albums"},{id:"option5",value:5,icon:"❤️",text:"Saved Tracks"},{id:"option6",value:6,icon:"⭐",text:"Followed Artists"},{id:"option7",value:7,icon:"🆕",text:"New Releases"},{id:"option8",value:8,icon:"🎧",text:`${o.value.charAt(0).toUpperCase()}${o.value.slice(1)} Playlists`},{id:"option9",value:9,icon:"🏷️",text:"Categories"},{id:"option11",value:11,icon:"🎼",text:"Genres"}]),a=E(()=>{const d=i.value;return o.value==="deezer"?d.filter(f=>f.value!==2&&f.value!==3):d}),c=(d,f)=>{f.stopPropagation(),n("tab-click",d,f)},u=d=>{n("search",d)};return(d,f)=>(h(),g("nav",$b,[l("ul",Cb,[(h(!0),g(j,null,ee(a.value,y=>(h(),g("li",{key:y.id,id:y.id,class:K(["tab-item",{active:t.selectedTab===y.value}]),onClick:b=>c(y.value,b)},[l("div",xb,[l("span",Rb,M(y.icon),1),l("span",Mb,M(y.text),1)])],10,Pb))),128))]),l("li",Eb,[l("div",Ib,[ge(l("input",{type:"search",class:"modern-search","onUpdate:modelValue":f[0]||(f[0]=y=>s.value=y),onKeyup:u,placeholder:"Search music..."},null,544),[[Ct,s.value]]),f[1]||(f[1]=l("span",{class:"search-icon"},"🔍",-1))])])]))}},Db=["disabled","title"],ps={__name:"RefreshButton",props:{onClick:{type:Function,required:!0},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,r=e,o=i=>{s.disabled||(r("click",i),s.onClick(i))},n=E(()=>{const i="refresh-button",a=`refresh-button-${s.size}`,c=s.disabled?"disabled":"";return`${i} ${a} ${c}`.trim()});return(i,a)=>(h(),g("button",{class:K(n.value),onClick:o,disabled:t.disabled,title:t.disabled?"Loading...":"Refresh"},a[0]||(a[0]=[l("img",{class:"refresh-icon",src:oo,alt:"Refresh"},null,-1)]),10,Db))}},zb={class:"playlist-selector"},Ub={class:"p-2 flex-between-center"},Ob={class:"grid-2-1"},Fb={class:"ps-2"},qb=["placeholder","title"],Vb={class:"playlists grid-auto-columns py-2 my-2"},Nb=["id","onClick"],So={__name:"PlaylistSelector",props:{playlists:{type:Array,default:()=>[]},selectedPlaylist:{type:String,default:""},placeholder:{type:String,default:"Please enter a search term.."},title:{type:String,default:"Type in a name"}},emits:["playlist-select","search"],setup(t,{emit:e}){const s=t,r=e,o=z(""),n=pe(),i=E(()=>o.value?s.playlists.filter(u=>u.name.toLowerCase().includes(o.value.toLowerCase())):s.playlists),a=(u,d)=>{r("playlist-select",u,d)},c=u=>{o.value=u.target.value,r("search",u)};return(u,d)=>(h(),g("div",zb,[l("div",Ub,[l("div",Ob,[l("h4",null,M(t.title),1),l("div",Fb,[Q(ps,{"on-click":()=>w(n).fetchPlaylists(0)},null,8,["on-click"])])]),ge(l("input",{class:"playlist-search py-2 me-2",type:"text","onUpdate:modelValue":d[0]||(d[0]=f=>o.value=f),onInput:c,placeholder:t.placeholder,title:t.title},null,40,qb),[[Ct,o.value]])]),l("div",Vb,[(h(!0),g(j,null,ee(i.value,f=>(h(),g("div",{key:f.id,id:f.id,onClick:y=>a(f,y),class:K(["hr-line-dashed flex-center p-3",t.selectedPlaylist===f.id?"active_tab":""])},M(f.name),11,Nb))),128))])]))}},Hb=["id"],Bb={class:"search-result-text"},Kb=["src"],jb=["id"],Gb={class:"search-result-text"},Qb=["id"],Wb={class:"search-result-text"},Yb={__name:"SearchResultItem",props:{item:{type:Object,required:!0},type:{type:String,required:!0,validator:t=>["song","artist","album","playlist"].includes(t)},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=p=>Ps.formatArtistNamesSimple(p),n=p=>{r("click",s.item,p)},i=p=>{r("hover",p)},a=p=>{r("leave",p)},c=E(()=>s.type==="song"||s.type==="artist"?s.item.preview_url:!1),u=E(()=>s.type==="song"?s.item.album&&s.item.album.images&&s.item.album.images[0]:s.type==="artist"?s.item.images&&s.item.images[1]:s.type==="album"||s.type==="playlist"?s.item.images&&s.item.images[0]:!1),d=E(()=>s.type==="song"&&u.value?s.item.album.images[0].url:s.type==="artist"&&u.value?s.item.images[1].url:(s.type==="album"||s.type==="playlist")&&u.value?s.item.images[0].url:""),f=E(()=>s.type==="song"?`${o(s.item.artists)} - ${s.item.name}`:s.type==="artist"?s.item.name:s.type==="album"?`${o(s.item.artists)} - ${s.item.name}`:s.type==="playlist"?s.item.name:""),y=E(()=>`${s.type}${s.item.id}`),b=E(()=>{const p="search-result-item",k=s.selected?"search-result-item--selected":"",_=!c.value&&s.unplayableTracks?"search-result-item--disabled":"";return`${p} ${k} ${_}`.trim()}),v=E(()=>u.value?{"background-image":`url(${d.value})`}:{}),m=E(()=>c.value?s.item.preview_url:"");return E(()=>c.value?!0:u.value&&!c.value?s.unplayableTracks:!0),(p,k)=>c.value?(h(),g("div",{key:0,tabindex:"0",class:K(b.value),id:y.value,onClick:n},[l("div",{class:"search-result-content",onMouseenter:i,onMouseleave:a},[l("div",{class:"search-result-image",style:$e(v.value)},null,4),l("div",Bb,M(f.value),1)],32),l("audio",{preload:"auto",src:m.value},null,8,Kb)],10,Hb)):u.value&&t.unplayableTracks?(h(),g("div",{key:1,tabindex:"0",class:K(b.value),id:y.value,onClick:n},[l("div",{class:"search-result-content",onMouseenter:i,onMouseleave:a},[l("div",{class:"search-result-image",style:$e([v.value,{opacity:"0.5"}])},null,4),l("div",Gb,M(f.value),1)],32),k[0]||(k[0]=l("audio",{preload:"auto"},null,-1))],10,jb)):(h(),g("div",{key:2,tabindex:"0",class:K(b.value),id:y.value,onClick:n},[l("div",{class:"search-result-content",onMouseenter:i,onMouseleave:a},[k[1]||(k[1]=l("div",{class:"search-result-image search-result-image--placeholder"},null,-1)),l("div",Wb,M(f.value),1)],32)],10,Qb))}},Xb={class:"search-category"},Jb={class:"search-category-title"},Zb={class:"search-category-items"},fr={__name:"SearchCategory",props:{title:{type:String,required:!0},items:{type:Array,required:!0},type:{type:String,required:!0,validator:t=>["song","artist","album","playlist"].includes(t)},selectedItem:{type:String,default:""},unplayableTracks:{type:Boolean,default:!1}},emits:["item-click","item-hover","item-leave"],setup(t,{emit:e}){const s=e,r=(i,a)=>{s("item-click",i,a)},o=i=>{s("item-hover",i)},n=i=>{s("item-leave",i)};return(i,a)=>(h(),g("div",Xb,[l("h3",Jb,M(t.title),1),l("div",Zb,[(h(!0),g(j,null,ee(t.items,(c,u)=>(h(),g("div",{key:u,class:"search-item-wrapper"},[Q(Yb,{item:c,type:t.type,selected:t.selectedItem===`${t.type}${c.id}`,"unplayable-tracks":t.unplayableTracks,onClick:r,onHover:o,onLeave:n},null,8,["item","type","selected","unplayable-tracks"])]))),128))])]))}},e2={__name:"WelcomeModal",props:{isVisible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const s=e,r=()=>{s("close")},o=()=>{s("close")};return(n,i)=>t.isVisible?(h(),g("div",{key:0,class:"welcome-modal-overlay",onClick:o},[l("div",{class:"welcome-modal",onClick:i[0]||(i[0]=Ht(()=>{},["stop"]))},[i[1]||(i[1]=Ne('<div class="modal-header" data-v-92b59fe7><h1 class="modal-title" data-v-92b59fe7>Welcome back!</h1><p class="modal-subtitle" data-v-92b59fe7>Just a reminder... this website plays (lots of) music.</p></div><div class="interactive-instructions" data-v-92b59fe7><div class="instruction-column" data-v-92b59fe7><div class="instruction-icon" data-v-92b59fe7><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-92b59fe7><path d="M3 3L21 12L3 21V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path></svg></div><div class="instruction-text" data-v-92b59fe7><span class="instruction-label" data-v-92b59fe7>Hover</span><span class="instruction-description" data-v-92b59fe7>to listen</span></div></div><div class="instruction-column" data-v-92b59fe7><div class="instruction-icon" data-v-92b59fe7><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-92b59fe7><path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path><path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" data-v-92b59fe7></path></svg></div><div class="instruction-text" data-v-92b59fe7><span class="instruction-label" data-v-92b59fe7>Click</span><span class="instruction-description" data-v-92b59fe7>to dig deeper</span></div></div><div class="instruction-column" data-v-92b59fe7><div class="instruction-icon" data-v-92b59fe7><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-92b59fe7><path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path><path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-92b59fe7></path></svg></div><div class="instruction-text" data-v-92b59fe7><span class="instruction-label" data-v-92b59fe7>Save</span><span class="instruction-description" data-v-92b59fe7>to build your collection</span></div></div></div><div class="intro-text" data-v-92b59fe7><p class="intro-paragraph" data-v-92b59fe7> Start with <strong data-v-92b59fe7>something you know</strong>, like your top tracks or favorite playlist. Or a <strong data-v-92b59fe7>Spotify recommendation</strong>, like Discover Weekly or Release Radar. Or a <strong data-v-92b59fe7>completely random</strong> genre or artist... whatever strikes your fancy. </p><p class="intro-paragraph highlight" data-v-92b59fe7> Then follow your ears to find new music you love. </p></div>',3)),l("div",{class:"cta-section"},[l("button",{class:"cta-button",onClick:r}," JUMP IN ")])])])):R("",!0)}},t2=_e(e2,[["__scopeId","data-v-92b59fe7"]]),s2="/img/deezer-icon.svg",r2={class:"form-section"},o2={class:"input-group"},n2=["disabled"],i2={key:0,class:"error-message"},l2={key:1,class:"success-message"},a2={class:"action-buttons"},c2=["disabled"],u2={key:0,class:"loading-spinner"},d2=["disabled"],f2={__name:"DeezerWelcomeModal",props:{isVisible:{type:Boolean,default:!1}},emits:["close","user-saved"],setup(t,{emit:e}){const s=e,r=z(""),o=z(!1),n=z(""),i=z(""),a=async()=>{if(!r.value.trim()){n.value="Please enter your Deezer User ID";return}o.value=!0,n.value="",i.value="";try{const f=await vt.createService("deezer").getUser(r.value.trim());document.cookie=`deezer-user-id=${r.value.trim()}`,localStorage.setItem("deezer-user-id",r.value.trim()),localStorage.setItem("deezer-username",f.display_name),localStorage.setItem("deezer-user-data",JSON.stringify(f)),i.value=`Welcome, ${f.display_name}!`,s("user-saved",f),setTimeout(()=>{s("close")},1500)}catch(d){console.error("Error fetching Deezer user data:",d),n.value="Invalid User ID or unable to fetch user data. Please check your ID and try again."}finally{o.value=!1}},c=()=>{s("close")},u=()=>{o.value||s("close")};return(d,f)=>t.isVisible?(h(),g("div",{key:0,class:"welcome-modal-overlay",onClick:u},[l("div",{class:"welcome-modal",onClick:f[1]||(f[1]=Ht(()=>{},["stop"]))},[f[4]||(f[4]=Ne('<div class="modal-header" data-v-5b538f11><div class="service-logo" data-v-5b538f11><img src="'+s2+'" alt="Deezer" class="logo" data-v-5b538f11></div><h1 class="modal-title" data-v-5b538f11>Welcome to Deezer!</h1><p class="modal-subtitle" data-v-5b538f11>Enter your Deezer User ID to access your personal music data</p></div>',1)),l("div",r2,[l("div",o2,[f[2]||(f[2]=l("label",{for:"deezer-id",class:"input-label"},"Deezer User ID",-1)),ge(l("input",{id:"deezer-id","onUpdate:modelValue":f[0]||(f[0]=y=>r.value=y),type:"text",class:"input-field",placeholder:"Enter your Deezer User ID (e.g., 2354623523)",disabled:o.value},null,8,n2),[[Ct,r.value]]),f[3]||(f[3]=l("p",{class:"input-help"},[Te(" You can find your User ID in your Deezer profile URL: "),l("code",null,"https://www.deezer.com/profile/YOUR_USER_ID")],-1))]),n.value?(h(),g("div",i2,M(n.value),1)):R("",!0),i.value?(h(),g("div",l2,M(i.value),1)):R("",!0)]),l("div",a2,[l("button",{class:"save-button",onClick:a,disabled:!r.value||o.value},[o.value?(h(),g("span",u2)):R("",!0),Te(" "+M(o.value?"Loading...":"Save & Continue"),1)],8,c2),l("button",{class:"skip-button",onClick:c,disabled:o.value}," Skip for now ",8,d2)])])])):R("",!0)}},p2=_e(f2,[["__scopeId","data-v-5b538f11"]]),m2="/img/youtube-music-icon.svg",h2={class:"form-section"},v2={class:"input-grid"},g2={class:"input-group"},y2=["disabled"],w2={class:"input-group"},b2=["disabled"],k2={class:"input-group"},_2=["disabled"],S2={class:"input-group"},T2=["disabled"],A2={key:0,class:"error-message"},$2={key:1,class:"success-message"},C2={class:"action-buttons"},P2=["disabled"],x2={key:0,class:"loading-spinner"},R2=["disabled"],M2={__name:"YouTubeAuthModal",props:{isVisible:{type:Boolean,default:!1}},emits:["close","authorized","skip"],setup(t,{emit:e}){const s=e,r=z(""),o=z(""),n=z(""),i=z(""),a=z(!1),c=z(""),u=z(""),d=E(()=>!!r.value&&!!o.value&&!!n.value&&!!i.value),f=async()=>{if(!d.value){c.value="Please fill all cookie fields";return}a.value=!0,c.value="",u.value="";try{const b=await ke.post("/youtube/auth/cookies",{SAPISID:r.value.trim(),HSID:o.value.trim(),SSID:n.value.trim(),SID:i.value.trim()});b.status===200&&b.data.success?(u.value="Authorization saved successfully.",s("authorized"),setTimeout(()=>s("close"),800)):c.value="Failed to save cookies. Please try again."}catch(b){console.error("Failed to save YouTube cookies",b),c.value="Failed to save cookies. Please verify values."}finally{a.value=!1}},y=()=>{a.value||s("close")};return(b,v)=>t.isVisible?(h(),g("div",{key:0,class:"welcome-modal-overlay",onClick:y},[l("div",{class:"welcome-modal",onClick:v[5]||(v[5]=Ht(()=>{},["stop"]))},[v[11]||(v[11]=Ne('<div class="modal-header" data-v-79eefcfb><div class="service-logo" data-v-79eefcfb><img src="'+m2+'" alt="YouTube Music" class="logo" data-v-79eefcfb></div><h1 class="modal-title" data-v-79eefcfb>YouTube Music Authorization</h1><p class="modal-subtitle" data-v-79eefcfb>Enter required cookies to access your YouTube Music library</p></div>',1)),l("div",h2,[l("div",v2,[l("div",g2,[v[6]||(v[6]=l("label",{class:"input-label"},"SAPISID",-1)),ge(l("input",{"onUpdate:modelValue":v[0]||(v[0]=m=>r.value=m),type:"text",class:"input-field",placeholder:"SAPISID",disabled:a.value},null,8,y2),[[Ct,r.value]])]),l("div",w2,[v[7]||(v[7]=l("label",{class:"input-label"},"HSID",-1)),ge(l("input",{"onUpdate:modelValue":v[1]||(v[1]=m=>o.value=m),type:"text",class:"input-field",placeholder:"HSID",disabled:a.value},null,8,b2),[[Ct,o.value]])]),l("div",k2,[v[8]||(v[8]=l("label",{class:"input-label"},"SSID",-1)),ge(l("input",{"onUpdate:modelValue":v[2]||(v[2]=m=>n.value=m),type:"text",class:"input-field",placeholder:"SSID",disabled:a.value},null,8,_2),[[Ct,n.value]])]),l("div",S2,[v[9]||(v[9]=l("label",{class:"input-label"},"SID",-1)),ge(l("input",{"onUpdate:modelValue":v[3]||(v[3]=m=>i.value=m),type:"text",class:"input-field",placeholder:"SID",disabled:a.value},null,8,T2),[[Ct,i.value]])])]),v[10]||(v[10]=Ne('<div class="help-section" data-v-79eefcfb><details data-v-79eefcfb><summary data-v-79eefcfb>How to get these cookies (Chrome/Edge)</summary><ol data-v-79eefcfb><li data-v-79eefcfb>Open music.youtube.com and sign in</li><li data-v-79eefcfb>Right-click page → Inspect → Application tab</li><li data-v-79eefcfb>Storage → Cookies → https://music.youtube.com</li><li data-v-79eefcfb>Copy values for SAPISID, HSID, SSID, SID</li></ol></details><details data-v-79eefcfb><summary data-v-79eefcfb>Firefox</summary><ol data-v-79eefcfb><li data-v-79eefcfb>Open music.youtube.com and sign in</li><li data-v-79eefcfb>Right-click → Inspect → Storage</li><li data-v-79eefcfb>Cookies → https://music.youtube.com</li><li data-v-79eefcfb>Copy values for SAPISID, HSID, SSID, SID</li></ol></details><p class="note" data-v-79eefcfb>We only store these in memory on the server for this session.</p></div>',1)),c.value?(h(),g("div",A2,M(c.value),1)):R("",!0),u.value?(h(),g("div",$2,M(u.value),1)):R("",!0)]),l("div",C2,[l("button",{class:"save-button",onClick:f,disabled:!d.value||a.value},[a.value?(h(),g("span",x2)):R("",!0),Te(" "+M(a.value?"Saving...":"Save & Continue"),1)],8,P2),l("button",{class:"skip-button",onClick:v[4]||(v[4]=m=>b.$emit("skip")),disabled:a.value},"Continue without authorization",8,R2)])])])):R("",!0)}},oa=_e(M2,[["__scopeId","data-v-79eefcfb"]]),E2={class:"service-selector"},I2={class:"service-grid"},L2=["onClick"],D2={class:"service-icon"},z2=["src","alt"],U2={class:"service-info"},O2={key:0,class:"coming-soon"},F2={key:1,class:"current-service"},q2={key:2,class:"service-description"},V2={class:"service-status"},N2={key:0,class:"status-indicator active"},H2={key:1,class:"status-indicator disabled"},B2={key:2,class:"status-indicator available"},K2={key:0,class:"switch-warning"},j2={key:1,class:"loading-overlay"},G2={__name:"ServiceSelector",props:{isVisible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const s=t,r=e,o=pe(),n=z([]),i=z(te.SPOTIFY),a=z(!1),c=z(!1),u=z(null),d=z(!1),f=[te.SPOTIFY,te.DEEZER,te.APPLE,te.YOUTUBE];Pe(async()=>{await o.initializeServices(),n.value=o.availableServices,i.value=o.currentServiceType});const y=S=>f.includes(S),b=S=>({[te.SPOTIFY]:"/img/spotify-icon.svg",[te.DEEZER]:"/img/deezer-icon.svg",[te.TIDAL]:"/img/tidal-icon.svg",[te.APPLE]:"/img/apple-music-icon.svg",[te.YOUTUBE]:"/img/youtube-music-icon.svg"})[S]||"/img/default-service-icon.svg",v=S=>({[te.SPOTIFY]:"Access your Spotify library and playlists",[te.DEEZER]:"Connect to your Deezer account",[te.TIDAL]:"High-quality music streaming",[te.APPLE]:"Access your Apple Music library and playlists"})[S]||"Music streaming service",m=S=>{y(S)&&S!==i.value&&(u.value=S,a.value=!0)},p=async()=>{if(u.value){d.value=!0,a.value=!1;try{await o.switchService(u.value),i.value=u.value,u.value===te.YOUTUBE?c.value=!0:o.isAuthenticated||await o.authenticate()}catch(S){console.error("Failed to switch service:",S)}finally{d.value=!1,u.value=null}}},k=()=>{a.value=!1,u.value=null},_=S=>{S.target.src="/img/default-service-icon.svg"};return(S,T)=>(h(),g(j,null,[s.isVisible?(h(),g("div",{key:0,class:"service-selector-modal-overlay",onClick:T[0]||(T[0]=Ht(P=>r("close"),["self"]))},[l("div",E2,[T[10]||(T[10]=l("div",{class:"service-selector-header"},[l("h3",null,"Music Service"),l("p",null,"Choose your preferred music streaming service")],-1)),l("div",I2,[(h(!0),g(j,null,ee(n.value,P=>(h(),g("div",{key:P.type,class:K(["service-card",{active:P.type===i.value,disabled:!y(P.type)}]),onClick:x=>m(P.type)},[l("div",D2,[l("img",{src:b(P.type),alt:P.name,onError:_},null,40,z2)]),l("div",U2,[l("h4",null,M(P.name),1),y(P.type)?P.type===i.value?(h(),g("p",F2," Currently Active ")):(h(),g("p",q2,M(v(P.type)),1)):(h(),g("p",O2," Coming Soon "))]),l("div",V2,[P.type===i.value?(h(),g("div",N2,T[4]||(T[4]=[l("i",{class:"check-icon"},"✓",-1)]))):y(P.type)?(h(),g("div",B2,T[6]||(T[6]=[l("i",{class:"arrow-icon"},"→",-1)]))):(h(),g("div",H2,T[5]||(T[5]=[l("i",{class:"lock-icon"},"🔒",-1)])))])],10,L2))),128))]),a.value?(h(),g("div",K2,[l("div",{class:"warning-content"},[T[7]||(T[7]=l("i",{class:"warning-icon"},"⚠️",-1)),T[8]||(T[8]=l("div",{class:"warning-text"},[l("h4",null,"Switch Music Service?"),l("p",null,"Switching services will clear your current data and require re-authentication.")],-1)),l("div",{class:"warning-actions"},[l("button",{onClick:p,class:"btn-confirm"},"Switch"),l("button",{onClick:k,class:"btn-cancel"},"Cancel")])])])):R("",!0),d.value?(h(),g("div",j2,T[9]||(T[9]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Switching service...",-1)]))):R("",!0)])])):R("",!0),Q(oa,{"is-visible":c.value,onClose:T[1]||(T[1]=P=>{c.value=!1,r("close")}),onAuthorized:T[2]||(T[2]=P=>{c.value=!1,r("close")}),onSkip:T[3]||(T[3]=P=>{c.value=!1,r("close")})},null,8,["is-visible"])],64))}},Q2=_e(G2,[["__scopeId","data-v-26613383"]]),W2={},Y2={href:"spotify/login"};function X2(t,e){return h(),g("a",Y2,e[0]||(e[0]=[l("button",{class:"inp"},"Login",-1)]))}const J2=_e(W2,[["render",X2]]);function mi(){let t=document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1");return t.length===0&&localStorage.removeItem("queue"),t.length!==0}function na(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(console.log("54 prefered dark"),"dark"):localStorage.getItem("user-theme")?localStorage.getItem("user-theme"):"dq"}const Z2={class:"settings-container"},ek={key:0,class:"settings-menu"},tk={class:"settings-section"},sk={class:"setting-item"},rk={class:"setting-label"},ok={class:"setting-item"},nk={class:"setting-label"},ik={class:"setting-item"},lk={class:"setting-label"},ak={class:"setting-item"},ck={class:"setting-label"},uk={class:"settings-section"},dk={__name:"Settings",setup(t){const e=z(!1),s=ye(),r=()=>{e.value=!e.value},o=()=>{localStorage.clear(),window.location.reload()},n=()=>{localStorage.removeItem("welcome-modal-seen"),window.location.reload()};return(i,a)=>(h(),g("div",Z2,[l("button",{class:"settings-toggle",onClick:r},a[8]||(a[8]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),l("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z","clip-rule":"evenodd"})],-1)])),e.value?(h(),g("div",ek,[l("div",tk,[a[13]||(a[13]=l("h3",null,"Audio Settings",-1)),l("div",sk,[l("label",rk,[ge(l("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=c=>w(s).audioPreview=c),onChange:a[1]||(a[1]=c=>w(s).setAudioPreview(c.target.checked))},null,544),[[Gt,w(s).audioPreview]]),a[9]||(a[9]=l("span",{class:"setting-text"},"Audio Preview",-1))])]),l("div",ok,[l("label",nk,[ge(l("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=c=>w(s).restartSongOnHover=c),onChange:a[3]||(a[3]=c=>w(s).setRestartSongOnHover(c.target.checked))},null,544),[[Gt,w(s).restartSongOnHover]]),a[10]||(a[10]=l("span",{class:"setting-text"},"Restart song on hover",-1))])]),l("div",ik,[l("label",lk,[ge(l("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=c=>w(s).unplayableTracks=c),onChange:a[5]||(a[5]=c=>w(s).setUnplayableTracks(c.target.checked))},null,544),[[Gt,w(s).unplayableTracks]]),a[11]||(a[11]=l("span",{class:"setting-text"},"Show unplayable tracks",-1))])]),l("div",ak,[l("label",ck,[ge(l("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=c=>w(s).openLinks=c),onChange:a[7]||(a[7]=c=>w(s).setOpenLinks(c.target.checked))},null,544),[[Gt,w(s).openLinks]]),a[12]||(a[12]=l("span",{class:"setting-text"},"Open links in new tab",-1))])])]),l("div",{class:"settings-section"},[a[16]||(a[16]=l("h3",null,"Actions",-1)),l("button",{class:"action-button",onClick:o},a[14]||(a[14]=[l("span",{class:"action-icon"},"🗑️",-1),l("span",{class:"action-text"},"Clear Cache",-1)])),l("button",{class:"action-button",onClick:n},a[15]||(a[15]=[l("span",{class:"action-icon"},"👋",-1),l("span",{class:"action-text"},"Show Welcome Modal",-1)]))]),l("div",uk,[Q(_l)])])):R("",!0)]))}};function Ko(){const t="ontouchstart"in window||navigator.maxTouchPoints>0,e=window.innerWidth<=768;if("userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.mobile;const s=navigator.userAgent||navigator.vendor||window.opera||"",r=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet|silk|kindle|playbook|bb10|meego|fennec|minimo|symbian|psp|nintendo|wii|palm|phone|mobile\s*safari|opera\s*mobi|windows\s*phone|bada|tizen|sailfish|ubuntu\s*touch|firefox\s*mobile|chrome\s*mobile|samsung|huawei|xiaomi|oppo|vivo|oneplus|lg\-|motorola|nokia|htc\-|sony|asus|acer|lenovo|alcatel|zte|tcl|realme|honor|redmi/i,o=[/iPhone|iPad|iPod/i,/Android.+Mobile|Android.+Tablet/i,/Windows Phone|WPDesktop/i,/BlackBerry|PlayBook|BB10/i,/Opera Mini|Opera Mobi/i,/Mobile.*Firefox|FxiOS/i,/CriOS|Chrome.*Mobile|Chrome.*Tablet/i,/Edge.*Mobile|EdgiOS/i,/Samsung.*Mobile|SM-[A-Z]/i,/Huawei|Honor|HMA-|LYA-|SNE-/i,/Xiaomi|Mi\s|Redmi|M2\d{3}/i,/OnePlus|ONEPLUS/i,/OPPO|CPH\d{4}|PBCM30|PBEM00/i,/vivo|V\d{4}|PD\d{4}/i,/LG-|LM-|VS\d{3}|H\d{3}/i,/Pixel|Nexus/i,/Tesla/i];if(r.test(s))return console.log("Mobile detected via main regex"),!0;for(const a of o)if(a.test(s))return console.log("Mobile detected via modern pattern:",a),!0;return/tablet|ipad|playbook|silk|android(?!.*mobile)/i.test(s)?(console.log("Tablet detected"),!0):t&&e?(console.log("Mobile detected via touch + screen size fallback"),!0):t&&(window.screen.width<=1024||window.innerWidth<=1024)&&"orientation"in window?(console.log("Mobile detected via feature detection fallback"),!0):(console.log("Desktop detected"),!1)}const fk={class:"modern-header"},pk={class:"header-container"},mk={class:"theme-switcher"},hk={class:"theme-option"},vk={class:"theme-option"},gk={class:"theme-option"},yk={class:"theme-option"},wk={class:"user-section"},bk={key:0,class:"user-greeting"},kk={class:"username"},_k={class:"user-actions"},Sk={key:0,class:"queue-badge"},Tk={__name:"Header",setup(t){const e=ze(),s=na();let r=document.cookie.replace(/(?:(?:^|.*;\s*)nickname\s*\=\s*([^;]*).*$)|^.*$/,"$1"),o=z(localStorage.getItem("user-theme"));const n=z(!1);a(s);const i=E(()=>le.getCurrentServiceType()==="deezer"?localStorage.getItem("deezer-username")||"Deezer User":r);function a(c){localStorage.setItem("user-theme",c),o.value=c,document.documentElement.className=c}return window.addEventListener("resize",()=>{n.value=window.innerWidth<1076}),(c,u)=>(h(),g("header",fk,[l("div",pk,[u[15]||(u[15]=l("div",{class:"brand-section"},[l("div",{class:"logo-container"},[l("img",{class:"logo",src:kl,alt:"Discover Mobily"})]),l("h1",{class:"brand-title"},"Discover Mobily")],-1)),l("div",{class:K(["theme-section",n.value||w(Ko)()?"mobile-themes":"desktop-themes"])},[l("div",mk,[l("div",hk,[ge(l("input",{id:"light",type:"radio","onUpdate:modelValue":u[0]||(u[0]=d=>xe(o)?o.value=d:o=d),value:"light",onClick:u[1]||(u[1]=d=>a("light"))},null,512),[[dr,w(o)]]),u[9]||(u[9]=l("label",{for:"light",class:"theme-label"},[l("div",{class:"theme-preview light-theme"}),l("span",{class:"theme-name"},"Light")],-1))]),l("div",vk,[ge(l("input",{id:"dark",type:"radio","onUpdate:modelValue":u[2]||(u[2]=d=>xe(o)?o.value=d:o=d),value:"dark",onClick:u[3]||(u[3]=d=>a("dark"))},null,512),[[dr,w(o)]]),u[10]||(u[10]=l("label",{for:"dark",class:"theme-label"},[l("div",{class:"theme-preview dark-theme"}),l("span",{class:"theme-name"},"Dark")],-1))]),l("div",gk,[ge(l("input",{id:"dark-blue",type:"radio","onUpdate:modelValue":u[4]||(u[4]=d=>xe(o)?o.value=d:o=d),value:"dark-blue",onClick:u[5]||(u[5]=d=>a("dark-blue"))},null,512),[[dr,w(o)]]),u[11]||(u[11]=l("label",{for:"dark-blue",class:"theme-label"},[l("div",{class:"theme-preview dark-blue-theme"}),l("span",{class:"theme-name"},"Blue")],-1))]),l("div",yk,[ge(l("input",{id:"dq",type:"radio","onUpdate:modelValue":u[6]||(u[6]=d=>xe(o)?o.value=d:o=d),value:"dq",onClick:u[7]||(u[7]=d=>a("dq"))},null,512),[[dr,w(o)]]),u[12]||(u[12]=l("label",{for:"dq",class:"theme-label"},[l("div",{class:"theme-preview dq-theme"}),l("span",{class:"theme-name"},"DQ")],-1))])])],2),l("div",wk,[w(mi)()?(h(),g("div",bk,[u[13]||(u[13]=l("span",{class:"greeting-text"},"Hello,",-1)),l("span",kk,M(i.value),1)])):R("",!0),l("div",_k,[Q(dk),w(mi)()?R("",!0):(h(),J(J2,{key:0})),l("div",{class:"queue-button",onClick:u[8]||(u[8]=d=>w(e).setQueueModal(!0))},[u[14]||(u[14]=l("div",{class:"queue-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"currentColor"},[l("path",{d:"M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"})])],-1)),w(e).getQueue?(h(),g("div",Sk,M(w(e).getQueue),1)):R("",!0)])])])])]))}},Ak={class:"modal-header"},$k={class:"modal-actions"},Ck={class:"playlist-selector"},Pk=["value"],xk={class:"queue-list"},Rk={class:"track-info"},Mk={class:"track-image"},Ek={key:1,class:"track-cover no-image"},Ik={class:"track-details"},Lk={class:"track-name"},Dk={class:"track-artists"},zk=["onClick"],Uk={__name:"QueueModal",setup(t){const e=ze(),s=pe(),r=async()=>{try{await e.saveQueue()}catch(i){console.error("Failed to save queue:",i)}},o=async i=>{try{await e.saveQueueToPlaylist(i)}catch(a){console.error("Failed to save queue to playlist:",a)}},n=async()=>{const i=prompt("Name for your playlist:","Discovered");if(i)try{await s.createPlaylist(i),await s.fetchPlaylists(0)}catch(a){console.error("Failed to create playlist:",a)}};return(i,a)=>w(e).isQueueModalOpen?(h(),g("div",{key:0,class:"modal-overlay",onClick:a[4]||(a[4]=c=>w(e).setQueueModal(!1))},[l("div",{class:"modal-content",onClick:a[3]||(a[3]=Ht(()=>{},["stop"]))},[l("div",Ak,[a[6]||(a[6]=l("h2",{class:"modal-title"},"Queue",-1)),l("button",{class:"modal-close",onClick:a[0]||(a[0]=c=>w(e).setQueueModal(!1))},a[5]||(a[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M6.225 4.811a1 1 0 00-1.414 1.414L10.586 12 4.81 17.775a1 1 0 101.414 1.414L12 13.414l5.775 5.775a1 1 0 001.414-1.414L13.414 12l5.775-5.775a1 1 0 00-1.414-1.414L12 10.586 6.225 4.81z"})],-1)]))]),l("div",$k,[l("button",{class:"action-btn save-btn",onClick:r},a[7]||(a[7]=[l("span",{class:"btn-icon"},"💾",-1),l("span",{class:"btn-text"},"Save all tracks",-1)])),l("div",Ck,[l("select",{class:"playlist-select",onChange:a[1]||(a[1]=c=>o(c.target.value))},[a[8]||(a[8]=l("option",{selected:"",disabled:""},"Add all to playlist",-1)),l("option",{value:"new",onClick:n},"New playlist"),(h(!0),g(j,null,ee(w(s).getPlaylists,(c,u)=>(h(),g("option",{key:u,value:c.id},M(c.name),9,Pk))),128))],32)]),l("button",{class:"action-btn clear-btn",onClick:a[2]||(a[2]=c=>w(e).clearQueue())},a[9]||(a[9]=[l("span",{class:"btn-icon"},"🗑️",-1),l("span",{class:"btn-text"},"Clear queue",-1)]))]),l("div",xk,[(h(!0),g(j,null,ee(w(e).getQueueArr,(c,u)=>(h(),g("div",{key:u,class:"queue-item"},[l("div",Rk,[l("div",Mk,[c.image?(h(),g("div",{key:0,class:"track-cover",style:$e({"background-image":"url("+c.image.url+")"})},null,4)):(h(),g("div",Ek,a[10]||(a[10]=[l("span",{class:"no-image-icon"},"🎵",-1)])))]),l("div",Ik,[l("div",Lk,M(c.name),1),l("div",Dk,M(c.artists),1)])]),l("button",{class:"remove-btn",onClick:d=>w(e).removeFromQueue(c.id)},a[11]||(a[11]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M6.225 4.811a1 1 0 00-1.414 1.414L10.586 12 4.81 17.775a1 1 0 101.414 1.414L12 13.414l5.775 5.775a1 1 0 001.414-1.414L13.414 12l5.775-5.775a1 1 0 00-1.414-1.414L12 10.586 6.225 4.81z"})],-1)]),8,zk)]))),128))]),a[12]||(a[12]=l("div",{class:"modal-footer"},[l("p",{class:"premium-notice"},[l("span",{class:"notice-icon"},"ℹ️"),Te(" Spotify Premium required to play the full song in Discover Mobily. Save these tracks above to listen in the main Spotify app. ")])],-1))])])):R("",!0)}},Ok={class:"time-range-selector"},Fk={class:"display-flex align-items-center"},qk=["id","onClick"],ia={__name:"TimeRangeSelector",props:{selectedRange:{type:Number,required:!0},ranges:{type:Array,default:()=>[{id:1,label:"Last month",fetchMethod:"fetchArtist",reloadMethod:"reloadartists"},{id:2,label:"Last 6 month",fetchMethod:"fetchArtist2",reloadMethod:"reloadartists"},{id:3,label:"All time",fetchMethod:"fetchArtist3",reloadMethod:"reloadartists"}]},sectionType:{type:String,default:"artists"}},emits:["range-change","refresh"],setup(t,{emit:e}){const s=e,r=(o,n)=>{s("range-change",o.id,n)};return(o,n)=>(h(),g("div",Ok,[l("div",Fk,[(h(!0),g(j,null,ee(t.ranges,(i,a)=>(h(),g("span",{key:i.id,id:`top${t.sectionType}${i.id===1?"":i.id}`,onClick:c=>r(i,c),class:K([t.selectedRange===i.id?"active_tab":"",{"mx-2":a>0}])},M(i.label),11,qk))),128))])]))}},Vk={class:"track-overlay"},Nk={class:"track-info"},Hk={class:"track-artists"},Bk={class:"track-name"},Kk=["preload","src"],la={__name:"TrackItem",props:{track:{type:Object,required:!0},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},trackPrefix:{type:String,default:""}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=p=>Ps.formatArtistNamesSimple(p),{hasPreview:n,hasImage:i,displayClass:a,backgroundStyle:c,audioPreload:u,audioSrc:d}=pt(E(()=>s.track)),f=p=>{r("click",s.track,p)},y=p=>{r("hover",p)},b=p=>{r("leave",p)},v=E(()=>n.value&&i.value?!0:i.value&&!n.value?s.unplayableTracks:n.value&&!i.value?!0:s.unplayableTracks),m=E(()=>{const p="media-card",k=s.selected?"selected":"";return`${p} ${a.value} ${k}`.trim()});return(p,k)=>v.value?(h(),g("div",{key:0,tabindex:"0",class:K(m.value),style:$e(w(c)),onClick:Ht(f,["stop"]),onMouseover:y,onMouseleave:b},[l("div",Vk,[l("div",Nk,[l("div",Hk,M(o(t.track.artists)),1),l("div",Bk,M(t.track.name),1)])]),l("audio",{preload:w(u),src:w(d)},null,8,Kk)],38)):R("",!0)}},jk=["id"],Gk={class:"display-flex flex-wrap py-2 gap-8"},Qk={__name:"TrackDisplaySection",props:{tracks:{type:Array,required:!0},sectionId:{type:String,required:!0},isVisible:{type:Boolean,default:!0},trackPrefix:{type:String,default:"3"}},emits:["track-click","track-hover","track-leave"],setup(t,{emit:e}){const s=t,r=e,o=ye(),n=pe(),{selectedItem:i}=He(),a=E(()=>s.isVisible?"":"d-none"),c=(f,y)=>{r("track-click",f,y)},u=f=>{r("track-hover",f)},d=f=>{r("track-leave",f)};return(f,y)=>(h(),g(j,null,[w(n).isLoading?(h(),J(Pt,{key:0})):R("",!0),l("div",{id:t.sectionId,class:K(["display-flex flex-wrap",a.value]),style:{color:"black",width:"auto"}},[l("div",Gk,[(h(!0),g(j,null,ee(t.tracks,(b,v)=>(h(),J(la,{key:v,track:b,selected:w(i)===t.trackPrefix+b.id,"unplayable-tracks":w(o).unplayableTracks,"track-prefix":t.trackPrefix,onClick:c,onHover:u,onLeave:d},null,8,["track","selected","unplayable-tracks","track-prefix"]))),128))])],10,jk)],64))}},To=_e(Qk,[["__scopeId","data-v-6b40db1c"]]),Wk={class:"p-2 flex-between-center"},Yk={class:"grid-2-1"},Xk={class:"ps-2"},Jk={__name:"TopTracks",props:{selectedTopMenu:{type:Number,required:!0}},emits:["track-click","track-hover","track-leave"],setup(t,{emit:e}){const s=e,r=pe(),o=ye(),n=ze(),i=ve(),{createTrackSorter:a}=fs(),{setSelectedItem:c}=He(),u=z(""),d=z(""),f=z(""),y=a(E(()=>r.getTopTracksShort||[]),u),b=a(E(()=>r.getTopTracksMedium||[]),d),v=a(E(()=>r.getTopTracksLong||[]),f),m=async(T,P)=>{c(T.id),await i.getTrackDetails(T,"topTracks"),n.addToQueue(T),s("track-click",T,P)},p=T=>{o.handleAudioHover(T),s("track-hover",T)},k=T=>{o.handleAudioLeave(T),s("track-leave",T)},_=async(T,P)=>{r.setSelectedTracksRange(T);const x=T===1?"short_term":T===2?"medium_term":"long_term";(T===1&&!r.getTopTracksShort.length||T===2&&!r.getTopTracksMedium.length||T===3&&!r.getTopTracksLong.length)&&await r.fetchTopTracks(x)},S=async(T,P)=>{const x=T===1?"short_term":T===2?"medium_term":"long_term";await r.fetchTopTracks(x)};return(T,P)=>(h(),g("div",null,[l("div",Wk,[l("div",Yk,[P[3]||(P[3]=l("h4",null,"Top Tracks",-1)),l("div",Xk,[Q(ps,{"on-click":()=>S(w(r).selectedTracksRange)},null,8,["on-click"])])]),w(r).selectedTracksRange===1?(h(),J(ls,{key:0,"model-value":u.value,"onUpdate:modelValue":P[0]||(P[0]=x=>u.value=x)},null,8,["model-value"])):R("",!0),w(r).selectedTracksRange===2?(h(),J(ls,{key:1,"model-value":d.value,"onUpdate:modelValue":P[1]||(P[1]=x=>d.value=x)},null,8,["model-value"])):R("",!0),w(r).selectedTracksRange===3?(h(),J(ls,{key:2,"model-value":f.value,"onUpdate:modelValue":P[2]||(P[2]=x=>f.value=x)},null,8,["model-value"])):R("",!0)]),ge(Q(ia,{"selected-range":w(r).selectedTracksRange,"section-type":"tracks",ranges:[{id:1,label:"Last month",fetchMethod:"fetchTopTracks",reloadMethod:"fetchTopTracks"},{id:2,label:"Last 6 month",fetchMethod:"fetchTopTracks",reloadMethod:"fetchTopTracks"},{id:3,label:"All time",fetchMethod:"fetchTopTracks",reloadMethod:"fetchTopTracks"}],onRangeChange:_,onRefresh:S},null,8,["selected-range"]),[[Wt,t.selectedTopMenu===3]]),w(r).selectedTracksRange===1?(h(),J(To,{key:0,tracks:w(y),"section-id":"toptracks","is-visible":w(r).selectedTracksRange===1,"track-prefix":"3","selected-sort-option":u.value,onTrackClick:m,onTrackHover:p,onTrackLeave:k},null,8,["tracks","is-visible","selected-sort-option"])):R("",!0),w(r).selectedTracksRange===2?(h(),J(To,{key:1,tracks:w(b),"section-id":"toptracks6","is-visible":w(r).selectedTracksRange===2,"track-prefix":"3","selected-sort-option":d.value,onTrackClick:m,onTrackHover:p,onTrackLeave:k},null,8,["tracks","is-visible","selected-sort-option"])):R("",!0),w(r).selectedTracksRange===3?(h(),J(To,{key:2,tracks:w(v),"section-id":"toptracksall","is-visible":w(r).selectedTracksRange===3,"track-prefix":"3","selected-sort-option":f.value,onTrackClick:m,onTrackHover:p,onTrackLeave:k},null,8,["tracks","is-visible","selected-sort-option"])):R("",!0)]))}},Zk=_e(Jk,[["__scopeId","data-v-17bc7535"]]),e3=["preload","src"],aa={__name:"ArtistItem",props:{artist:{type:Object,required:!0},selected:{type:Boolean,default:!1},unplayableTracks:{type:Boolean,default:!1},artistPrefix:{type:String,default:""}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,{hasPreview:o,hasImage:n,displayClass:i,backgroundStyle:a,audioPreload:c,audioSrc:u}=pt(E(()=>s.artist)),d=m=>{r("click",s.artist,m)},f=m=>{r("hover",m)},y=m=>{r("leave",m)},b=E(()=>o.value&&n.value?!0:n.value&&!o.value?s.unplayableTracks:o.value&&!n.value?!0:s.unplayableTracks),v=E(()=>{const m="media-card",p=s.selected?"selected":"";return`${m} ${i.value} ${p}`.trim()});return(m,p)=>b.value?(h(),g("div",{key:0,tabindex:"0",class:K(v.value),style:$e(w(a)),onClick:Ht(d,["stop"]),onMouseover:f,onMouseleave:y},[Te(M(t.artist.name)+" ",1),l("audio",{preload:w(c),src:w(u)},null,8,e3)],38)):R("",!0)}},t3=["id"],s3={class:"display-flex flex-wrap py-2 gap-8"},r3={__name:"ArtistDisplaySection",props:{artists:{type:Array,required:!0},sectionId:{type:String,required:!0},isVisible:{type:Boolean,default:!0},artistPrefix:{type:String,default:"2"},selectedSortOption:{type:String,default:""}},emits:["sort-change","artist-click","artist-hover","artist-leave"],setup(t,{emit:e}){const s=t,r=e,o=ye(),n=pe(),{selectedItem:i}=He(),a=E(()=>s.isVisible?"":"d-none"),c=(f,y)=>{r("artist-click",f,y)},u=f=>{r("artist-hover",f)},d=f=>{r("artist-leave",f)};return(f,y)=>(h(),g(j,null,[w(n).isLoading?(h(),J(Pt,{key:0})):R("",!0),l("div",{id:t.sectionId,class:K(["display-flex flex-wrap",a.value]),style:{width:"auto"}},[l("div",s3,[(h(!0),g(j,null,ee(t.artists,(b,v)=>(h(),J(aa,{key:v,artist:b,selected:w(i)===t.artistPrefix+b.id,"unplayable-tracks":w(o).unplayableTracks,"artist-prefix":t.artistPrefix,onClick:c,onHover:u,onLeave:d},null,8,["artist","selected","unplayable-tracks","artist-prefix"]))),128))])],10,t3)],64))}},Ao=_e(r3,[["__scopeId","data-v-38ac4360"]]),o3={class:"sort-container"},kr={__name:"SortArtists",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=un(t,"modelValue");return(s,r)=>(h(),g("div",o3,[ge(l("select",{class:"modern-select","onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o)},r[1]||(r[1]=[l("option",{value:""},"Initial",-1),l("option",{value:"artist"},"Name",-1),l("option",{value:"popularity"},"Sort by popularity",-1),l("option",{value:"followers"},"Sort by followers",-1)]),512),[[As,e.value]]),r[2]||(r[2]=l("div",{class:"select-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 10l5 5 5-5z"})])],-1))]))}},n3={class:"p-2 flex-between-center"},i3={class:"grid-2-1"},l3={class:"ps-2"},a3={__name:"TopArtists",props:{selectedTopMenu:{type:Number,required:!0}},emits:["artist-click","artist-hover","artist-leave"],setup(t,{emit:e}){const s=e,r=pe(),o=ye(),n=ve(),{createArtistSorter:i}=fs(),{setSelectedItem:a}=He(),c=z(""),u=z(""),d=z(""),f=i(E(()=>r.getTopArtistsShort||[]),c),y=i(E(()=>r.getTopArtistsMedium||[]),u),b=i(E(()=>r.getTopArtistsLong||[]),d),v=async(S,T)=>{a(S.id),await n.getArtistDetails(S,"topArtists"),s("artist-click",S,T)},m=S=>{o.handleAudioHover(S),s("artist-hover",S)},p=S=>{o.handleAudioLeave(S),s("artist-leave",S)},k=async(S,T)=>{r.setSelectedArtistsRange(S);const P=S===1?"short_term":S===2?"medium_term":"long_term";(S===1&&!r.getTopArtistsShort.length||S===2&&!r.getTopArtistsMedium.length||S===3&&!r.getTopArtistsLong.length)&&await r.fetchTopArtists(P)},_=async(S,T)=>{const P=S===1?"short_term":S===2?"medium_term":"long_term";await r.fetchTopArtists(P)};return(S,T)=>(h(),g("div",null,[l("div",n3,[l("div",i3,[T[3]||(T[3]=l("h4",null,"Top Artists",-1)),l("div",l3,[Q(ps,{"on-click":()=>_(w(r).selectedArtistsRange)},null,8,["on-click"])])]),w(r).selectedArtistsRange===1?(h(),J(kr,{key:0,"model-value":c.value,"onUpdate:modelValue":T[0]||(T[0]=P=>c.value=P)},null,8,["model-value"])):R("",!0),w(r).selectedArtistsRange===2?(h(),J(kr,{key:1,"model-value":u.value,"onUpdate:modelValue":T[1]||(T[1]=P=>u.value=P)},null,8,["model-value"])):R("",!0),w(r).selectedArtistsRange===3?(h(),J(kr,{key:2,"model-value":d.value,"onUpdate:modelValue":T[2]||(T[2]=P=>d.value=P)},null,8,["model-value"])):R("",!0)]),ge(Q(ia,{"selected-range":w(r).selectedArtistsRange,"section-type":"artists",ranges:[{id:1,label:"Last month",fetchMethod:"fetchTopArtists",reloadMethod:"fetchTopArtists"},{id:2,label:"Last 6 month",fetchMethod:"fetchTopArtists",reloadMethod:"fetchTopArtists"},{id:3,label:"All time",fetchMethod:"fetchTopArtists",reloadMethod:"fetchTopArtists"}],onRangeChange:k},null,8,["selected-range"]),[[Wt,t.selectedTopMenu===2]]),w(r).selectedArtistsRange===1?(h(),J(Ao,{key:0,artists:w(f),"section-id":"topartist","is-visible":w(r).selectedArtistsRange===1,"artist-prefix":"2","selected-sort-option":c.value,onArtistClick:v,onArtistHover:m,onArtistLeave:p},null,8,["artists","is-visible","selected-sort-option"])):R("",!0),w(r).selectedArtistsRange===2?(h(),J(Ao,{key:1,artists:w(y),"section-id":"topartist6","is-visible":w(r).selectedArtistsRange===2,"artist-prefix":"2","selected-sort-option":u.value,onArtistClick:v,onArtistHover:m,onArtistLeave:p},null,8,["artists","is-visible","selected-sort-option"])):R("",!0),w(r).selectedArtistsRange===3?(h(),J(Ao,{key:2,artists:w(b),"section-id":"topartista","is-visible":w(r).selectedArtistsRange===3,"artist-prefix":"2","selected-sort-option":d.value,onArtistClick:v,onArtistHover:m,onArtistLeave:p},null,8,["artists","is-visible","selected-sort-option"])):R("",!0)]))}},c3=_e(a3,[["__scopeId","data-v-aba4705e"]]),u3={class:"sort-container"},ca={__name:"SortAlbums",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=un(t,"modelValue");return(s,r)=>(h(),g("div",u3,[ge(l("select",{class:"modern-select","onUpdate:modelValue":r[0]||(r[0]=o=>e.value=o)},r[1]||(r[1]=[Ne('<option value="">Initial</option><option value="artist">Sort by artist</option><option value="album">Sort by album</option><option value="popularity">Sort by popularity</option><option value="release_date">Sort by release date</option><option value="name">Sort by name</option><option value="number_of_tracks">Sort by number of tracks</option>',7)]),512),[[As,e.value]]),r[2]||(r[2]=l("div",{class:"select-icon"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 10l5 5 5-5z"})])],-1))]))}},d3={class:"track-overlay"},f3={class:"track-info"},p3={class:"track-artists"},m3={class:"track-name"},h3=["preload","src"],ua={__name:"AlbumItem",props:{album:{type:Object,required:!0},selected:{type:Boolean,default:!1},albumPrefix:{type:String,default:""}},emits:["click","hover","leave"],setup(t,{emit:e}){const s=t,r=e,o=b=>Ps.formatArtistNamesSimple(b),{displayClass:n,backgroundStyle:i,audioPreload:a,audioSrc:c}=pt(E(()=>s.album)),u=b=>{r("click",s.album,b)},d=b=>{r("hover",b)},f=b=>{r("leave",b)},y=E(()=>{const b="media-card",v=s.selected?"selected":"";return`${b} ${n.value} ${v}`.trim()});return(b,v)=>(h(),g("div",{tabindex:"0",class:K(y.value),style:$e(w(i)),onClick:Ht(u,["stop"]),onMouseover:d,onMouseleave:f},[l("div",d3,[l("div",f3,[l("div",p3,M(o(t.album.artists)),1),l("div",m3,M(t.album.name),1)])]),l("audio",{preload:w(a),src:w(c)},null,8,h3)],38))}},v3={class:"p-2 flex-between-center"},g3={class:"grid-2-1"},y3={class:"ps-2"},w3={id:"savedalbum",class:"display-flex flex-wrap"},b3={class:"display-flex flex-wrap py-2 gap-8"},k3={__name:"SavedAlbums",props:{selectedTopMenu:{type:Number,required:!0}},emits:["album-click"],setup(t,{emit:e}){const s=e,r=ye(),o=pe(),n=ve(),{createAlbumSorter:i}=fs(),{selectedItem:a,setSelectedItem:c}=He(),u=z(""),d=i(E(()=>o.getSavedAlbums||[]),u),f=async(m,p)=>{c("4"+m.id),await n.getAlbumDetails(m,"savedAlbums"),s("album-click",m,p)},y=()=>{o.savedAlbums=[],o.fetchSavedAlbums(0)},b=m=>{r.handleAudioHover(m)},v=m=>{r.handleAudioLeave(m)};return(m,p)=>(h(),g("div",null,[l("div",v3,[l("div",g3,[p[1]||(p[1]=l("h4",null,"Saved Albums",-1)),l("div",y3,[Q(ps,{"on-click":()=>y()},null,8,["on-click"])])]),Q(ca,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=k=>u.value=k)},null,8,["modelValue"])]),w(o).isLoading?(h(),J(Pt,{key:0})):R("",!0),ge(l("div",w3,[l("div",b3,[(h(!0),g(j,null,ee(w(d),(k,_)=>(h(),J(ua,{key:_,album:k.album,selected:w(a)==="4"+k.album.id,"album-prefix":"4",onClick:f,onHover:b,onLeave:v},null,8,["album","selected"]))),128))])],512),[[Wt,t.selectedTopMenu===4]])]))}},_3=_e(k3,[["__scopeId","data-v-e89cdce7"]]),S3={key:0,class:"pagination-container"},T3={key:0,class:"pagination-info"},A3=["disabled"],$3={__name:"PaginationContainer",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},itemsPerPage:{type:Number,default:50},totalItems:{type:Number,default:0},showInfo:{type:Boolean,default:!0}},emits:["page-change"],setup(t,{emit:e}){const s=t,r=e,o=n=>{n>=1&&n<=s.totalPages&&r("page-change",n)};return(n,i)=>t.totalItems>0?(h(),g("div",S3,[t.showInfo?(h(),g("div",T3,[t.totalItems>0?(h(),g(j,{key:0},[Te("Page "+M(t.currentPage)+" of "+M(t.totalPages),1)],64)):R("",!0)])):R("",!0),l("button",{onClick:i[0]||(i[0]=a=>o(t.currentPage+1)),disabled:t.currentPage===t.totalPages,class:"action-button"}," Load more ",8,A3)])):R("",!0)}},C3={class:"p-2 flex-between-center"},P3={class:"grid-2-1"},x3={class:"ps-2"},R3={key:1,class:"loading-more"},M3={id:"savedtrack",class:"display-flex flex-wrap"},E3={class:"display-flex flex-wrap py-2 gap-8"},pr=50,I3={__name:"SavedTracks",props:{selectedTopMenu:{type:Number,required:!0}},emits:["track-click","track-hover","track-leave"],setup(t,{emit:e}){const s=e,r=pe(),o=ye(),n=ze(),i=ve(),{createTrackSorter:a}=fs(),{selectedItem:c,setSelectedItem:u}=He(),d=z(""),f=z(1),y=z(!1),b=a(E(()=>r.getSavedTracks||[]),d),v=E(()=>r.savedTracksTotal),m=E(()=>Math.ceil(v.value/pr)),p=E(()=>{const x=f.value*pr;return b.value.slice(0,x)}),k=async(x,D)=>{u("5"+x.id),await i.getTrackDetails(x,"savedTracks"),n.addToQueue(x),s("track-click",x,D)},_=x=>{o.handleAudioHover(x),s("track-hover",x)},S=x=>{o.handleAudioLeave(x),s("track-leave",x)},T=()=>{r.savedTracks=[],r.fetchSavedTracks(0),f.value=1},P=async x=>{if(x>f.value){const D=r.savedTracks.length;if((x-1)*pr>=D){y.value=!0;try{await r.fetchSavedTracks(D)}catch(O){console.error("Failed to load more tracks:",O)}finally{y.value=!1}}}f.value=x};return(x,D)=>(h(),g("div",null,[l("div",C3,[l("div",P3,[D[1]||(D[1]=l("h4",null,"Saved Tracks",-1)),l("div",x3,[Q(ps,{"on-click":()=>T()},null,8,["on-click"])])]),Q(ls,{modelValue:d.value,"onUpdate:modelValue":D[0]||(D[0]=A=>d.value=A)},null,8,["modelValue"])]),w(r).isLoading?(h(),J(Pt,{key:0})):R("",!0),y.value?(h(),g("div",R3,D[2]||(D[2]=[l("div",{class:"loading-spinner"},null,-1),l("span",null,"Loading more tracks...",-1)]))):R("",!0),ge(l("div",M3,[l("div",E3,[(h(!0),g(j,null,ee(p.value,(A,O)=>(h(),J(la,{key:O,track:A.track,selected:w(c)==="5"+A.track.id,"unplayable-tracks":w(o).unplayableTracks,"track-prefix":"5",onClick:k,onHover:_,onLeave:S},null,8,["track","selected","unplayable-tracks"]))),128))])],512),[[Wt,t.selectedTopMenu===5]]),m.value>1?(h(),J($3,{key:2,"current-page":f.value,"total-pages":m.value,"items-per-page":pr,"total-items":v.value,onPageChange:P},null,8,["current-page","total-pages","total-items"])):R("",!0)]))}},L3=_e(I3,[["__scopeId","data-v-ce9fd0de"]]),D3={class:"p-2 flex-between-center"},z3={class:"grid-2-1"},U3={class:"ps-2"},O3={id:"followedartist",class:"display-flex flex-wrap"},F3={class:"display-flex flex-wrap py-2 gap-8"},q3={__name:"FollowedArtists",props:{selectedTopMenu:{type:Number,required:!0}},emits:["artist-click","artist-hover","artist-leave"],setup(t,{emit:e}){const s=e,r=pe(),o=ye(),n=ve(),{createArtistSorter:i}=fs(),{selectedItem:a,setSelectedItem:c}=He(),u=z(""),d=i(E(()=>r.getFollowedArtists||[]),u),f=async(m,p)=>{c("6"+m.id),await n.getArtistDetails(m,"followedArtists"),s("artist-click",m,p)},y=m=>{o.handleAudioHover(m),s("artist-hover",m)},b=m=>{o.handleAudioLeave(m),s("artist-leave",m)},v=()=>{r.followedArtists=[],r.fetchFollowedArtists()};return(m,p)=>(h(),g("div",null,[l("div",D3,[l("div",z3,[p[1]||(p[1]=l("h4",null,"Followed Artists",-1)),l("div",U3,[Q(ps,{"on-click":()=>v()},null,8,["on-click"])])]),Q(kr,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=k=>u.value=k)},null,8,["modelValue"])]),w(r).isLoading?(h(),J(Pt,{key:0})):R("",!0),ge(l("div",O3,[l("div",F3,[(h(!0),g(j,null,ee(w(d),(k,_)=>(h(),J(aa,{key:_,artist:k,selected:w(a)==="6"+k.id,"unplayable-tracks":w(o).unplayableTracks,"artist-prefix":"6",onClick:f,onHover:y,onLeave:b},null,8,["artist","selected","unplayable-tracks"]))),128))])],512),[[Wt,t.selectedTopMenu===6]])]))}},V3=_e(q3,[["__scopeId","data-v-07644d38"]]),N3={class:"p-2 flex-between-center"},H3={class:"grid-2-1"},B3={class:"ps-2"},K3={id:"newrelease",class:"display-flex flex-wrap"},j3={class:"display-flex flex-wrap py-2 gap-8"},G3={__name:"NewReleases",props:{selectedTopMenu:{type:Number,required:!0}},emits:["album-click","album-hover","album-leave"],setup(t,{emit:e}){const s=e,r=pe(),o=ye(),n=ve(),{createNewReleaseSorter:i}=fs(),{selectedItem:a,setSelectedItem:c}=He(),u=z(""),d=i(E(()=>r.getNewReleases||[]),u),f=async(m,p)=>{c("7"+m.id),await n.getAlbumDetails(m,"newReleases"),s("album-click",m,p)},y=m=>{o.handleAudioHover(m),s("album-hover",m)},b=m=>{o.handleAudioLeave(m),s("album-leave",m)},v=()=>{r.newReleases=[],r.fetchNewReleases(0)};return(m,p)=>(h(),g("div",null,[l("div",N3,[l("div",H3,[p[1]||(p[1]=l("h4",null,"New Releases",-1)),l("div",B3,[Q(ps,{"on-click":()=>v()},null,8,["on-click"])])]),Q(ca,{modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=k=>u.value=k)},null,8,["modelValue"])]),w(r).isLoading?(h(),J(Pt,{key:0})):R("",!0),ge(l("div",K3,[l("div",j3,[(h(!0),g(j,null,ee(w(d),(k,_)=>(h(),J(ua,{key:_,album:k,selected:w(a)==="7"+k.id,"album-prefix":"7",onClick:f,onHover:y,onLeave:b},null,8,["album","selected"]))),128))])],512),[[Wt,t.selectedTopMenu===7]])]))}},Q3=_e(G3,[["__scopeId","data-v-7e8bdc6e"]]),W3={class:"categories-container"},Y3={class:"categories-header"},X3={key:0,class:"pagination-controls"},J3=["disabled"],Z3={class:"pagination-info"},e7=["disabled"],t7={key:0,class:"loading-container"},s7={key:1,class:"empty-state"},r7={key:2,class:"categories-grid"},o7=["onClick"],n7={class:"category-image"},i7=["src","alt"],l7={key:1,class:"category-placeholder"},a7={class:"category-info"},c7={class:"category-name"},u7={key:3,class:"category-playlists-section"},d7={class:"category-playlists-header"},f7={key:0,class:"loading-container"},p7={key:1,class:"empty-state"},m7={key:2,class:"playlists-grid"},h7=["onClick"],v7={class:"playlist-image"},g7=["src","alt"],y7={key:1,class:"playlist-placeholder"},w7={class:"playlist-info"},b7={class:"playlist-name"},k7={key:0,class:"playlist-description"},_7={class:"playlist-tracks"},S7={__name:"Categories",setup(t){const e=ve(),s=z([]),r=z([]),o=z(null),n=z(!1),i=z(!1),a=z(0),c=z({total:0,limit:50,next:null,previous:null}),u=E(()=>"categories"),d=async(p=0)=>{n.value=!0;try{p===0&&(e.clearSection(u.value),s.value=[]);const k=await e.getCategories(u.value,p,c.value.limit);c.value={total:k.total,limit:c.value.limit,next:k.next,previous:k.previous},a.value=p;const _=e.getSectionData(u.value);s.value=_.filter(S=>S.type==="category")}catch(k){console.error("Failed to load categories:",k)}finally{n.value=!1}},f=()=>{c.value.next&&!n.value&&d(a.value+c.value.limit)},y=()=>{if(c.value.previous&&!n.value){const p=Math.max(0,a.value-c.value.limit);d(p)}},b=async p=>{o.value=p,i.value=!0,r.value=[];try{const k=await e.getCategoryPlaylists(p.id,"categoryPlaylists",p.id),_=e.getSectionData("categoryPlaylists");r.value=_.filter(S=>S.type==="category-playlist"&&S.parentKey===p.id)}catch(k){console.error("Failed to load category playlists:",k)}finally{i.value=!1}},v=p=>{e.getPlaylistDetails(p,"categories",o.value.id)},m=p=>{p.target.style.display="none"};return Pe(()=>{d()}),(p,k)=>(h(),g("div",W3,[l("div",Y3,[k[0]||(k[0]=l("h2",null,"Browse Categories",-1)),c.value.total>c.value.limit?(h(),g("div",X3,[l("button",{onClick:y,disabled:!c.value.previous||n.value,class:"pagination-btn"}," Previous ",8,J3),l("span",Z3,M(a.value+1)+"-"+M(Math.min(a.value+c.value.limit,c.value.total))+" of "+M(c.value.total),1),l("button",{onClick:f,disabled:!c.value.next||n.value,class:"pagination-btn"}," Next ",8,e7)])):R("",!0)]),n.value?(h(),g("div",t7,k[1]||(k[1]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading categories...",-1)]))):s.value.length===0?(h(),g("div",s7,k[2]||(k[2]=[l("p",null,"No categories found.",-1)]))):(h(),g("div",r7,[(h(!0),g(j,null,ee(s.value,_=>(h(),g("div",{key:_.id,class:"category-card",onClick:S=>b(_)},[l("div",n7,[_.icons&&_.icons.length>0?(h(),g("img",{key:0,src:_.icons[0].url,alt:_.name,onError:m},null,40,i7)):(h(),g("div",l7,[l("span",null,M(_.name.charAt(0).toUpperCase()),1)]))]),l("div",a7,[l("h3",c7,M(_.name),1)])],8,o7))),128))])),o.value?(h(),g("div",u7,[l("div",d7,[l("h3",null,M(o.value.name)+" Playlists",1)]),i.value?(h(),g("div",f7,k[3]||(k[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading playlists...",-1)]))):r.value.length===0?(h(),g("div",p7,k[4]||(k[4]=[l("p",null,"No playlists found for this category.",-1)]))):(h(),g("div",m7,[(h(!0),g(j,null,ee(r.value,_=>(h(),g("div",{key:_.id,class:"playlist-card",onClick:S=>v(_)},[l("div",v7,[_.images&&_.images.length>0?(h(),g("img",{key:0,src:_.images[0].url,alt:_.name,onError:m},null,40,g7)):(h(),g("div",y7,[l("span",null,M(_.name.charAt(0).toUpperCase()),1)]))]),l("div",w7,[l("h4",b7,M(_.name),1),_.description?(h(),g("p",k7,M(_.description),1)):R("",!0),l("p",_7,M(_.totalTracks)+" tracks",1)])],8,h7))),128))]))])):R("",!0)]))}},T7=_e(S7,[["__scopeId","data-v-e7315908"]]),A7={class:"main-layout"},$7={class:"content-wrapper"},C7={class:"modern-content"},P7={class:"content-container"},x7={key:0},R7={id:"yourplaylists",class:"flex-stretch"},M7={key:1},E7={key:2},I7={key:3},L7={key:4},D7={key:5},z7={key:6},U7={key:7},O7={id:"sptplaylists",class:"flex-stretch"},F7={key:8},q7={key:9},V7={class:"flex-stretch"},N7={key:10,class:"search-section"},H7={class:"search-header"},B7={class:"search-title"},K7={class:"search-grid"},j7={__name:"MainLayout",setup(t){const e=pe(),s=ye(),r=ze(),o=ve(),{currentServiceType:n}=Jt(e),{selectedItem:i,selectedTopMenu:a,selectedPersonalPlaylist:c,selectedSpotifyPlaylist:u,selectedGenrePlaylist:d,setSelectedItem:f,setSelectedTopMenu:y}=He(),{search:b}=sy(),v=z(localStorage.getItem("welcome-modal-seen")!=="true"),m=z(!1),p=z(!1),k=z(!1);ks(n,I=>{if(console.log("Service changed to:",I),I==="deezer"){const q=localStorage.getItem("deezer-user-id");console.log("Deezer User ID in localStorage:",q),q?console.log("Deezer User ID found, not showing modal"):(console.log("Showing Deezer welcome modal"),m.value=!0),(a.value===2||a.value===3)&&(console.log("Redirecting from Top Artists/Tracks to Your Playlists for Deezer"),y(1))}I==="youtube"&&(k.value=!0,[2,3,4,5,6,11].includes(a.value)&&y(1))},{immediate:!0});const _=async(I,q)=>{if(o.getIsGloballyLoading){console.log("Track click blocked - global loading in progress");return}f(I.id);const ie=L(a.value);await o.getTrackDetails(I,ie),a.value in[1,8]?r.addToQueue(I.track):r.addToQueue(I)},S=I=>{s.handleAudioHover(I)},T=I=>{s.handleAudioLeave(I)},P=async(I,q)=>{if(o.getIsGloballyLoading){console.log("Artist click blocked - global loading in progress");return}f(I.id);const ie=L(a.value);await o.getArtistDetails(I,ie)},x=I=>{s.handleAudioHover(I)},D=I=>{s.handleAudioLeave(I)};async function A(I,q){const ie=L(a.value);await o.getPlaylistDetails(I,ie)}async function O(I,q){if(o.getIsGloballyLoading){console.log("Genre playlist click blocked - global loading in progress");return}const ie=L(a.value);await o.getGenreDetails(I,ie)}const L=I=>{switch(I){case 1:return"yourPlaylists";case 2:return"topArtists";case 3:return"topTracks";case 4:return"savedAlbums";case 5:return"savedTracks";case 6:return"followedArtists";case 7:return"newReleases";case 8:return"spotifyPlaylists";case 9:return"categories";case 11:return"genres";case 10:return"search";default:return"search"}},se=async(I,q)=>{q.stopPropagation(),y(I);try{switch(I){case 1:o.clearSection("yourPlaylists"),(!e.getPlaylists||e.getPlaylists.length===0)&&await e.fetchPlaylists(0);break;case 2:o.clearSection("topArtists"),e.setSelectedArtistsRange(1),(!e.getTopArtistsShort||e.getTopArtistsShort.length===0)&&await e.fetchTopArtists("short_term");break;case 3:o.clearSection("topTracks"),e.setSelectedTracksRange(1),(!e.getTopTracksShort||e.getTopTracksShort.length===0)&&await e.fetchTopTracks("short_term");break;case 4:o.clearSection("savedAlbums"),(!e.getSavedAlbums||e.getSavedAlbums.length===0)&&await e.fetchSavedAlbums(0);break;case 5:o.clearSection("savedTracks"),(!e.getSavedTracks||e.getSavedTracks.length===0)&&await e.fetchSavedTracks(0);break;case 6:o.clearSection("followedArtists"),(!e.getFollowedArtists||e.getFollowedArtists.length===0)&&await e.fetchFollowedArtists();break;case 7:o.clearSection("newReleases"),(!e.getNewReleases||e.getNewReleases.length===0)&&await e.fetchNewReleases(0);break;case 8:o.clearSection("spotifyPlaylists"),(!e.getSpotifyPlaylists||e.getSpotifyPlaylists.length===0)&&await e.fetchSpotifyPlaylists(0);break;case 9:o.clearSection("categories");break;case 11:(!e.getGenrePlaylists||e.getGenrePlaylists.length===0)&&await e.fetchGenrePlaylists(0);break}}catch(ie){console.error("Failed to fetch data for tab:",I,ie)}},he=I=>{a.value=10,e.search(I.target.value)},Le=async(I,q)=>{o.sections.search=[],q==="song"?(f("song"+I.id),await o.getTrackDetails(I,"search")):q==="artist"?(f("artist"+I.id),await o.getArtistDetails(I,"search")):q==="album"?(f("album"+I.id),await o.getAlbumDetails(I,"search")):q==="playlist"&&(f("playlist"+I.id),await o.getPlaylistDetails(I,"search"))},qe=()=>{v.value=!1,localStorage.setItem("welcome-modal-seen","true")},Ue=()=>{m.value=!1},Re=I=>{console.log("Deezer user saved:",I)},me=()=>{p.value=!0};return(I,q)=>(h(),g(j,null,[Q(Tk),Q(Uk),l("div",A7,[Q(t2,{"is-visible":v.value,onClose:qe},null,8,["is-visible"]),Q(p2,{"is-visible":m.value,onClose:Ue,onUserSaved:Re},null,8,["is-visible"]),Q(Q2,{"is-visible":p.value,onClose:q[0]||(q[0]=ie=>p.value=!1)},null,8,["is-visible"]),Q(oa,{"is-visible":k.value,onClose:q[1]||(q[1]=ie=>k.value=!1),onAuthorized:q[2]||(q[2]=ie=>k.value=!1),onSkip:q[3]||(q[3]=ie=>k.value=!1)},null,8,["is-visible"]),l("div",$7,[Q(Lb,{"selected-tab":w(a),"search-query":w(b),onTabClick:se,onSearch:he},null,8,["selected-tab","search-query"]),l("div",C7,[l("div",P7,[w(a)===1?(h(),g("div",x7,[l("div",R7,[w(e).isLoading?(h(),J(Pt,{key:0})):R("",!0),Q(So,{playlists:w(e).getPlaylists,"selected-playlist":w(c),title:"Your Personal Playlists",placeholder:"Search personal playlists...",onPlaylistSelect:A},null,8,["playlists","selected-playlist"])])])):R("",!0),w(a)===2&&w(n)!=="deezer"?(h(),g("div",M7,[Q(c3,{"selected-top-menu":w(a),onArtistClick:P,onArtistHover:x,onArtistLeave:D},null,8,["selected-top-menu"])])):R("",!0),w(a)===3&&w(n)!=="deezer"?(h(),g("div",E7,[Q(Zk,{"selected-top-menu":w(a),onTrackClick:_,onTrackHover:S,onTrackLeave:T},null,8,["selected-top-menu"])])):R("",!0),w(a)===4?(h(),g("div",I7,[Q(_3,{"selected-top-menu":w(a),onAlbumClick:q[4]||(q[4]=async(ie,Oe)=>{w(o).getIsGloballyLoading||(w(f)("4"+ie.id),await w(o).getAlbumDetails(ie,"savedAlbums"))})},null,8,["selected-top-menu"])])):R("",!0),w(a)===5?(h(),g("div",L7,[Q(L3,{"selected-top-menu":w(a),onTrackClick:q[5]||(q[5]=async(ie,Oe)=>{w(o).getIsGloballyLoading||(w(f)("5"+ie.id),await w(o).getTrackDetails(ie,"savedTracks"),w(r).addToQueue(ie))}),onTrackHover:S,onTrackLeave:T},null,8,["selected-top-menu"])])):R("",!0),w(a)===6?(h(),g("div",D7,[Q(V3,{"selected-top-menu":w(a),onArtistClick:P,onArtistHover:x,onArtistLeave:D},null,8,["selected-top-menu"])])):R("",!0),w(a)===7?(h(),g("div",z7,[Q(Q3,{"selected-top-menu":w(a),onAlbumClick:q[6]||(q[6]=async(ie,Oe)=>{w(o).getIsGloballyLoading||(w(f)("7"+ie.id),await w(o).getAlbumDetails(ie,"newReleases"))}),onAlbumHover:S,onAlbumLeave:T},null,8,["selected-top-menu"])])):R("",!0),w(a)===8?(h(),g("div",U7,[w(e).isLoading?(h(),J(Pt,{key:0})):R("",!0),ge(l("div",O7,[Q(So,{playlists:w(e).getSpotifyPlaylists,"selected-playlist":w(u),title:w(n).charAt(0).toUpperCase()+w(n).slice(1)+" Playlists",placeholder:"Search Spotify playlists...",onPlaylistSelect:A},null,8,["playlists","selected-playlist","title"])],512),[[Wt,w(a)===8]])])):R("",!0),w(a)===9?(h(),g("div",F7,[Q(T7)])):R("",!0),w(a)===11?(h(),g("div",q7,[w(e).isLoading?(h(),J(Pt,{key:0})):R("",!0),ge(l("div",V7,[Q(So,{playlists:w(e).getGenrePlaylists,"selected-playlist":w(d),title:"Genre Playlists",placeholder:"Search genre playlists...",onPlaylistSelect:O},null,8,["playlists","selected-playlist"])],512),[[Wt,!w(e).isLoading]])])):R("",!0),w(a)===10?(h(),g("div",N7,[w(e).isLoading?(h(),J(Pt,{key:0})):R("",!0),l("div",H7,[l("h2",B7,M(w(e).searchInput),1)]),l("div",K7,[Q(fr,{title:"Songs",items:w(e).getSearchTracks,type:"song","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:q[7]||(q[7]=async(ie,Oe)=>{w(o).getIsGloballyLoading||await Le(ie,"song")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"]),Q(fr,{title:"Artists",items:w(e).getSearchArtists,type:"artist","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:q[8]||(q[8]=async(ie,Oe)=>{w(o).getIsGloballyLoading||await Le(ie,"artist")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"]),Q(fr,{title:"Albums",items:w(e).getSearchAlbums,type:"album","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:q[9]||(q[9]=async(ie,Oe)=>{w(o).getIsGloballyLoading||await Le(ie,"album")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"]),Q(fr,{title:"Playlists",items:w(e).getSearchPlaylists,type:"playlist","selected-item":w(i),"unplayable-tracks":w(s).unplayableTracks,onItemClick:q[10]||(q[10]=async(ie,Oe)=>{w(o).getIsGloballyLoading||await Le(ie,"playlist")}),onItemHover:w(s).handleParentAudioHover,onItemLeave:w(s).handleParentAudioLeave},null,8,["items","selected-item","unplayable-tracks","onItemHover","onItemLeave"])])])):R("",!0)]),Q(rb,{num:w(a)},null,8,["num"])]),Q(Ab,{onOpenServiceSelector:me})])]),Q(ra)],64))}},G7={key:0,class:"container"},Q7={__name:"App",setup(t){return(e,s)=>(h(),g(j,null,[w(Ko)()?R("",!0):(h(),g("div",G7,[Q(j7)])),w(Ko)()?(h(),J(ty,{key:1})):R("",!0)],64))}};function W7(){const t=na();localStorage.setItem("user-theme",t),document.documentElement.className=t}W7();const Y7=Hu(),X7=Uu(Q7);X7.use(Y7).mount("#app");Km().then(t=>{t?console.log("Music store initialization completed"):console.warn("Music store initialization failed")});
